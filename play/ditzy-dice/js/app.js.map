{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/screens/DialogueScreen.vue?9d0a","webpack:///./src/components/BanWindow.vue?f4d2","webpack:///./src/components/screens/PatchNotesScreen.vue?e11f","webpack:///./src/components/ChatView.vue?022c","webpack:///./src/components/screens/ModScreen.vue?9faa","webpack:///./src/App.vue?1173","webpack:///./src/assets/patreon-banner-no-text.webp","webpack:///./src/assets/fonts/MavenPro-VariableFont_wght.ttf","webpack:///./src/components/screens/SettingsScreen.vue?d52a","webpack:///./src/components/DialogueStatusCard.vue?0f5a","webpack:///./src/assets/background.webp","webpack:///./src/components/FilterWindow.vue?d2e5","webpack:///./src/components/TextButton.vue?3b5f","webpack:///./src/assets/randomPortrait.webp","webpack:///./src/components/TabWindow.vue?0db8","webpack:///./src/components/ChatView.vue?166b","webpack:///./src/components/BlushList.vue?a85b","webpack:///./src/components/CardHandWindow.vue?714f","webpack:///./src/components/PlayingCard.vue?a43c","webpack:///./src/components/BlushWindow.vue?7358","webpack:///./src/components/EndingsCollectionWindow.vue?8e35","webpack:///./src/components/PatreonButton.vue?8e94","webpack:///./src/components/screens/CollectionScreen.vue?d4fc","webpack:///./src/components/Credit.vue?0b56","webpack:///./src/assets/black-felt.png","webpack:///./src/components/PatreonButton2.vue?974d","webpack:///./src/assets/patreon-banner.webp","webpack:///./src/App.vue?4ce9","webpack:///./src/components/DiceView.vue?e415","webpack:///./src/components/CollectionWindow.vue?a5d1","webpack:///./src/components/screens/GameScreen.vue?8a1b","webpack:///./src/App.vue","webpack:///./src/components/screens/GameScreen.vue","webpack:///./src/components/TextButton.vue","webpack:///./src/components/TextButton.vue?72a9","webpack:///./src/components/TextButton.vue?a9fe","webpack:///./src/components/PlayingCard.vue","webpack:///./src/components/ValueMeter.vue","webpack:///./src/util.ts","webpack:///./src/effects/ValueMod.ts","webpack:///./src/effects/ValueRange.ts","webpack:///./src/components/ValueMeter.vue?a5c4","webpack:///./src/components/ValueMeter.vue?d750","webpack:///./src/components/PlayingCard.vue?3f51","webpack:///./src/components/PlayingCard.vue?bf32","webpack:///./src/store/globalState.ts","webpack:///./src/cards/Family.ts","webpack:///./src/cards/DrawPreference.ts","webpack:///./src/cards/Deck.ts","webpack:///./src/cards/Card.ts","webpack:///./src/components/DiceView.vue","webpack:///./src/components/DiceView.vue?a465","webpack:///./src/components/DiceView.vue?79a7","webpack:///./src/components/DialogueStatusCard.vue","webpack:///./src/components/ChatView.vue","webpack:///./src/components/BlushList.vue","webpack:///./src/components/BlushList.vue?ffbc","webpack:///./src/components/BlushList.vue?7c7b","webpack:///./src/components/ChatView.vue?875b","webpack:///./src/components/ChatView.vue?3f73","webpack:///./src/components/DialogueStatusCard.vue?6cea","webpack:///./src/components/DialogueStatusCard.vue?1858","webpack:///./src/components/CardHandWindow.vue","webpack:///./src/components/CardHandWindow.vue?2020","webpack:///./src/components/CardHandWindow.vue?2eb2","webpack:///./src/components/DialogueCard.vue","webpack:///./src/components/DialogueCard.vue?731d","webpack:///./src/components/DialogueCard.vue?ab69","webpack:///./src/components/screens/GameScreen.vue?77c3","webpack:///./src/components/screens/GameScreen.vue?e8ae","webpack:///./src/Dice.ts","webpack:///./src/GameButton.ts","webpack:///./src/stages/GameStage.ts","webpack:///./src/stages/TextStage.ts","webpack:///./src/Player.ts","webpack:///./src/GameMode.ts","webpack:///./src/Ability.ts","webpack:///./src/stages/IntensityStage.ts","webpack:///./src/stages/HighlightStage.ts","webpack:///./src/stages/EndStage.ts","webpack:///./src/ChatMessage.ts","webpack:///./src/Requirement.ts","webpack:///./src/DialogueSegment.ts","webpack:///./src/DialogueTree.ts","webpack:///./src/stages/TransformStage.ts","webpack:///./src/stages/BonusStage.ts","webpack:///./src/stages/PickStage.ts","webpack:///./src/stages/DrawStage.ts","webpack:///./src/stages/DialogueStage.ts","webpack:///./src/StoryMode.ts","webpack:///./src/Game.ts","webpack:///./src/Cheat.ts","webpack:///./src/Epilogue.ts","webpack:///./src/Epilogues.ts","webpack:///./src/EndingsCollection.ts","webpack:///./src/Cheatmode.ts","webpack:///./src/Save.ts","webpack:///./src/SaveSystem.ts","webpack:///./src/FilterSetting.ts","webpack:///./src/FilterSettings.ts","webpack:///./src/Mod.ts","webpack:///./src/Menu.ts","webpack:///./src/components/screens/StartMenu.vue","webpack:///./src/components/PatreonButton.vue","webpack:///./src/components/PatreonButton.vue?a3ae","webpack:///./src/components/PatreonButton.vue?a993","webpack:///./src/components/RelatedThumb.vue","webpack:///./src/components/RelatedThumb.vue?b719","webpack:///./src/components/RelatedThumb.vue?4a01","webpack:///./src/components/PatreonButton2.vue","webpack:///./src/components/PatreonButton2.vue?9266","webpack:///./src/components/PatreonButton2.vue?3464","webpack:///./src/components/screens/PatchNotesScreen.vue","webpack:///./src/components/BlushWindow.vue","webpack:///./src/components/BlushWindow.vue?b73c","webpack:///./src/components/BlushWindow.vue?d4c1","webpack:///./src/components/screens/PatchNotesScreen.vue?1303","webpack:///./src/components/screens/PatchNotesScreen.vue?58c0","webpack:///./src/components/EndingsCollectionWindow.vue","webpack:///./src/components/EndingsCollectionWindow.vue?b7bd","webpack:///./src/components/EndingsCollectionWindow.vue?1364","webpack:///./src/components/screens/ModScreen.vue","webpack:///./src/components/Credit.vue","webpack:///./src/components/Credit.vue?24c8","webpack:///./src/components/Credit.vue?f11c","webpack:///./src/components/FilterWindow.vue","webpack:///./src/components/FilterWindow.vue?e80e","webpack:///./src/components/FilterWindow.vue?740b","webpack:///./src/components/TabWindow.vue","webpack:///./src/components/TabWindow.vue?b729","webpack:///./src/components/TabWindow.vue?ffe5","webpack:///./src/components/screens/ModScreen.vue?5bd7","webpack:///./src/components/screens/ModScreen.vue?7851","webpack:///./src/components/screens/StartMenu.vue?be96","webpack:///./src/components/screens/StartMenu.vue?6c00","webpack:///./src/components/screens/DialogueScreen.vue","webpack:///./src/components/screens/DialogueScreen.vue?8085","webpack:///./src/components/screens/DialogueScreen.vue?f6ae","webpack:///./src/components/screens/HandView.vue","webpack:///./src/components/CollectionWindow.vue","webpack:///./src/components/CollectionWindow.vue?a72c","webpack:///./src/components/CollectionWindow.vue?8fa9","webpack:///./src/components/screens/HandView.vue?8fbb","webpack:///./src/components/screens/HandView.vue?ee30","webpack:///./src/components/screens/CreditsScreen.vue","webpack:///./src/components/screens/CreditsScreen.vue?be9f","webpack:///./src/components/screens/CreditsScreen.vue?2fe7","webpack:///./src/components/screens/CollectionScreen.vue","webpack:///./src/components/screens/CollectionScreen.vue?d3f5","webpack:///./src/components/screens/CollectionScreen.vue?d24e","webpack:///./src/components/screens/SettingsScreen.vue","webpack:///./src/components/BanWindow.vue","webpack:///./src/components/BanWindow.vue?22b1","webpack:///./src/components/BanWindow.vue?17ef","webpack:///./src/components/screens/SettingsScreen.vue?b77e","webpack:///./src/components/screens/SettingsScreen.vue?a9f6","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?eabf","webpack:///./src/router/index.ts","webpack:///./src/main.ts","webpack:///./src/assets/devil-512px.webp","webpack:///./src/components/ValueMeter.vue?ea85","webpack:///./src/components/DialogueCard.vue?789a","webpack:///./src/components/RelatedThumb.vue?53d3","webpack:///./src/components/screens/CreditsScreen.vue?41d8","webpack:///./src/components/screens/HandView.vue?1290","webpack:///./src/components/TextButton.vue?ee3c","webpack:///./src/components/screens/PatchNotesScreen.vue?83f3","webpack:///./src/components/EndingsCollectionWindow.vue?15cd","webpack:///./src/components/screens/StartMenu.vue?830a"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","id","style","cssVars","globalState","loading","menu","activeComponent","view","deck","game","drawnCards","roundString","state","bonusRolls","max","player","getMana","pickedString","handDeck","showActivatedCards","dice","die","abilities","ability","isVisible","disabled","isAvailable","activate","title","subtitle","onselectstart","props","Boolean","render","__scopeId","card","levelString","description","artist","baseUrl","wait","ms","Promise","resolve","reject","setTimeout","fetchHjson","path","a","transformResponse","response","info","parse","getInfo","isVideo","url","test","sample","array","Math","floor","random","timeToDays","time","currentDate","day","this","timeofday","hour","minute","toFixed","padStart","displayTime","uuid","replace","Number","crypto","getRandomValues","Uint8Array","toString","capitalize","charAt","toUpperCase","substr","toKebabCase","string","toLowerCase","camelToTitleCase","camelCase","match","trim","pickFrom","list","fraction","index","clamp","round","min","showNumber","relative","undefined","ensure","possibilities","find","v","shuffle","temporaryValue","randomIndex","currentIndex","hasDuplicate","Set","size","setTimeoutAnimationFrame","lambda","msDelay","t0","performance","now","helper","timestamp","timePassed","requestAnimationFrame","download","filename","text","element","document","createElement","setAttribute","encodeURIComponent","display","body","appendChild","click","removeChild","screenshot","savename","background","getElementById","childCount","childNodes","childWidth","childHeight","width","height","minHeight","renderWidth","html2canvas","backgroundColor","then","canvas","image","toDataURL","href","console","error","type","mod","abs","mods","ValueMod","reverse","reverseActivate","capBaseValue","_baseValue","_min","_max","valueMods","minMods","maxMods","texts","MAX_SAFE_INTEGER","mulMods","oldValue","baseValue","reverseActivateAll","oldBase","sum","activateAll","values","ValueRange","barColor","container","String","methods","log","msg","computed","components","ValueMeter","TextButton","hue","thumb","fetchList","pathList","promises","all","objects","cardFamilyString","dialogueString","dialogue2String","endingsString","artistsString","patreonCredits","patchNotesString","load","familyList","dialogue","dialogue2","endingsList","artists","credits","patchList","JSON","stringify","map","patchId","families","patches","endings","md","entries","patch","familiesLoaded","_familyMap","family","Family","familyMap","tags","guaranteed","probability","cards","Deck","referenceDeck","copy","useFilters","hasTag","filterBy","filters","bannedCards","addCard","isParent","subcards","subcard","has","filter","isFiltered","lookup","ids","hasParent","parentId","parent","hasCard","getCardById","addSubCard","getLevel","preferred","wantedCards","getWantedCards","wantedIndex","findIndex","removeCard","pop","hasAnyTag","addToBottom","concat","drawIndex","cardId","findCard","refCard","allLevels","sort","b","level","fullTitle","reduce","sub","cardStates","tagOrFamily","updateTags","referenceAllLevels","add","tag","cardMap","warn","_cardMap","_referenceDeck","updateCard","pack","cardsLoaded","parseCards","familyCardGroups","thumbRetriever","idPrefix","familyState","familyLookup","prefix","override","levels","parseSubCards","forEach","parseCard","thumbPrefix","leveledCard","transformation","intensity","scale","highlight","_family","_parent","_subcards","_level","_intensity","hasSubCard","strictness","Card","sortByLevel","maxLevel","locked","roll","currentDialogue","stageId","cardsToPick","cardsPickedThisRound","buttons","button","fun","label","lines","emits","util","BlushList","ChatView","toggleScale","clickCard","scaledCard","PlayingCard","isLoaded","created","DiceView","DialogueCard","DialogueStatusCard","CardHandWindow","hand","addDeck","pickedCards","_value","_locked","isRolling","valueUsed","rollingDice","durationMs","rolls","notifyDiceRoll","isUsed","_label","args","_allowDiceBuy","_allowManaBuy","endpoints","nextButton","nextStage","stage","_nextStage","setStage","onResume","onEnd","gotoNext","print","sendMessage","onStart","myText","createMessage","mana","cost","amount","firstStage","available","secret","visible","isSecret","resource","useMana","addValue","Ability","addMana","allowManaBuy","setVisibleFun","diceCount","allowDiceBuy","allowDiceSale","cardPickFunction","deckSize","fixedCost","PICK_ANY_CARD_COST","highlights","setAvailableFun","diceReadyCount","diceRollingCount","diceAreLocked","setFun","MAX_ROUNDS","done","pickStage","parentCard","diceSize","buyMana","sellDice","buyDice","pickAnyCard","pickCard","lockDice","pick","availableCards","highlightedCards","manaGain","resumeStage","end","sortByFamily","saveHand","createYourNewLifeButton","overrideEnding","fulfilledEpilogues","chooseEpilogues","ep","epilogue","dialogueTree","ignoreRequirements","start","epilogues","epilogueId","endingId","currentSegment","substring","unlockEnding","endpointLabel","line","breaks","startsWith","ChatMessage","split","join","messages","parseLine","operator","Requirement","intensitySum","scoreIsFulfilled","intensityScore","score","availableFunctions","idsOrTags","idOrTag","isTag","cardsWithTag","onlyTag","Error","orGroup","req","isFulfilled","reqs","requirements","ors","or","ands","exp","getOperator","left","getLeft","right","getRight","stripFun","arg","parseInt","functions","groupRequirements","group","expression","funMatch","expressionMatch","splitArgs","e","operatorMatch","endpointId","currentNodeIndex","optionIds","optionSegments","nodes","endpoint","lookupTable","optionId","options","segment","isRequirementFulfilled","orgroup","orGroupFulfilled","isOnLastNode","hasEndpoint","DialogueSegment","parseLines","endpointFun","parseRequirements","segments","option","activeNode","isStarted","select","firstNode","getEndpoint","gotoNextNode","createOptionButtons","getFulfilledOptions","currentMessage","tree","DialogueTree","node","linearNodes","parseSegment","linkOptions","nextTransformation","nextCard","activateCard","prepareNextButton","createNextLinearSegment","isBonusRound","createLinear","leftToPick","withoutFamily","draw","CARDS_IN_BONUS_ROUND","onDiceRoll","pickAnyCost","drawStage","addRound","diceRolls","allowNext","availableExtraDraws","DrawStage","DICE_COUNT","DICE_SIZE","diceHasBeenRolled","addDraws","drawCards","CARDS_PER_ROUND","prev","cur","updateButtons","stage1","stageD","leave","endGame","parseDialogue","gameMode","rewardRolls","currentRolls","createNew","Game","MAX_BONUS_ROLLS","gredraw","groll","count","Array","fill","gameComponent","allDiceReady","diceValues","useValue","MAX_DICE","onCardClick","ready","rollCount","rolling","cheatFunction","likelihood","message","getEndpointLabel","localeCompare","child","parents","includes","ending","chain","findNodeParents","nodeIds","getNodeChain","nodeId","Epilogue","maxLikelihood","curr","iterations","clear","endingsMap","chosen","appearedWith","drawn","picked","chosenEps","chosenEp","sortedEndings","appearances","epId","repeat","padEnd","stringifyAppearances","epIds","keys","assert","currentEnding","currentEpilogue","selectEnding","getEnding","epiloguesList","isEpilogueUnlocked","getAllEndings","en","isEndingUnlocked","unlockedEndings","cheats","collection","save","ec","deleteCollection","correctnessSimulation","startGame","showEndingsCollection","activated","_menu","cheatmode","password","activateCheats","registerCheats","cheat","version","_state","saveCache","saveStore","localforage","storeName","driver","loadedFromLocalStorage","writeCacheToDB","writeCacheToLocalStorage","localStorage","removeItem","localStorageCache","getItem","loadAllFromStorage","readCacheFromDB","saveName","setItem","alert","saveNames","saveStrings","saveString","savesString","saves","_strictness","myfilter","f","gameVersion","authors","root","devmode","epilogueStrings","_epilogues","jszip","loadAsync","zip","files","images","file","async","endsWith","content","familyCardGroup","base64","Mod","base64url","verifyId","verifyName","verifyVersion","verifyGameVersion","verifyAuthors","verifyDescription","verifyDevmode","valid","gt","GAME_VERSION","saveSystem","settings","useSave","unique","modState","mountMod","createFromCardStates","buildSave","event","target","reader","FileReader","addEventListener","objectToSave","readAsText","callback","createFromZip","resetStaticState","catch","modId","addReferenceCard","addEpilogue","removeAllCards","unpack","Menu","showCollection","showSettings","showMods","$emit","location","link","credit","src","PatreonButton","patchNotes","date","noCross","BlushWindow","onClose","no-cross","endingsCollection","currentEndingLabel","unlockedEpilogues","currentEndingMessages","unselect","for","tabs","accept","addMod","author","removeMod","modCreation","allTags","cardData","refDeck","tools","simulateEpilogues","moddedEpilogues","toEnd","linkText","isFilteringTooMuch","cardsFilteredString","setStrictness","tab","activeTab","activateTab","Credit","FilterWindow","TabWindow","confirm","loadMod","unloadMod","field","innerText","PatreonButton2","RelatedThumb","PatchNotesScreen","EndingsCollectionScreen","ModScreen","endTitle","isInspectingCard","internalDeck","groupByParent","activeCard","activeSubCard","$forceUpdate","sortByName","CollectionWindow","artCredits","activeMenuTab","endings-collection","activateMenuTab","transformationText","screenshotName","nrOfAllUnlockedEndings","nrOfAllEndings","EndingsCollectionWindow","contentFilters","banCards","exportSave","importSave","isBanned","toggleBan","unbanCard","banCard","BanWindow","GameScreen","StartMenu","DialogueScreen","HandView","CreditsScreen","CollectionScreen","SettingsScreen","routes","component","router","history","use","mount"],"mappings":"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","file":"js/app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/play/ditzy-dice/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DialogueScreen.vue?vue&type=style&index=0&id=5f4c2c54&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BanWindow.vue?vue&type=style&index=0&id=1e833d82&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PatchNotesScreen.vue?vue&type=style&index=1&id=02320d62&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChatView.vue?vue&type=style&index=1&id=2a2554f0&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ModScreen.vue?vue&type=style&index=0&id=fa5433b4&scoped=true&lang=scss\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=34e99f59&lang=scss\"","module.exports = __webpack_public_path__ + \"img/patreon-banner-no-text.webp\";","module.exports = __webpack_public_path__ + \"fonts/MavenPro-VariableFont_wght.ttf\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SettingsScreen.vue?vue&type=style&index=0&id=7abe1b76&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DialogueStatusCard.vue?vue&type=style&index=0&id=6f0fcc3e&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/background.webp\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FilterWindow.vue?vue&type=style&index=0&id=73496115&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TextButton.vue?vue&type=style&index=0&id=2b92d90a&lang=scss\"","module.exports = __webpack_public_path__ + \"img/randomPortrait.webp\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TabWindow.vue?vue&type=style&index=0&id=e79496f8&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChatView.vue?vue&type=style&index=0&id=2a2554f0&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BlushList.vue?vue&type=style&index=0&id=4ad23e39&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CardHandWindow.vue?vue&type=style&index=0&id=f487b2ac&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PlayingCard.vue?vue&type=style&index=0&id=1a237670&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BlushWindow.vue?vue&type=style&index=0&id=640bcb6c&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EndingsCollectionWindow.vue?vue&type=style&index=1&id=2e56c106&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PatreonButton.vue?vue&type=style&index=0&id=d5159fe2&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CollectionScreen.vue?vue&type=style&index=0&id=3f224c2e&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Credit.vue?vue&type=style&index=0&id=27444a3f&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/black-felt.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PatreonButton2.vue?vue&type=style&index=0&id=3333a497&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/patreon-banner.webp\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=1&id=34e99f59&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DiceView.vue?vue&type=style&index=0&id=7289087b&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CollectionWindow.vue?vue&type=style&index=0&id=35f50ee3&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GameScreen.vue?vue&type=style&index=0&id=5bfce8f7&scoped=true&lang=scss\"","<template >\n  <div id=\"milkfarm-app\" :style=\"cssVars\">\n    <div v-if=\"globalState.loading.value\" class=\"loading\">\n      <h1>Loading...</h1>\n    </div>\n    <component v-else\n               :is=\"menu.activeComponent\"\n               v-bind=\"{ menu: menu }\"\n               v-on:goto-view=\"(view) => {menu.activeComponent = view}\"\n               v-on:close=\"menu.activeComponent = 'StartMenu'\">\n    </component>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport GameScreen from '@/components/screens/GameScreen.vue'\nimport Menu from \"@/Menu\"\nimport StartMenu from \"@/components/screens/StartMenu.vue\"\nimport DialogueScreen from \"@/components/screens/DialogueScreen.vue\"\nimport globalState from \"@/store/globalState\"\nimport HandView from \"@/components/screens/HandView.vue\"\nimport CreditsScreen from \"@/components/screens/CreditsScreen.vue\"\nimport CollectionScreen from \"@/components/screens/CollectionScreen.vue\"\nimport PatchNotesScreen from \"@/components/screens/PatchNotesScreen.vue\"\nimport BargainScreen from \"@/components/screens/BargainScreen.vue\"\nimport SettingsScreen from \"@/components/screens/SettingsScreen.vue\"\nimport EndingsCollectionWindow from \"@/components/EndingsCollectionWindow.vue\"\nimport ModScreen from \"@/components/screens/ModScreen.vue\"\n\n@Options({\n  components: {\n    GameScreen,\n    StartMenu,\n    DialogueScreen,\n    HandView,\n    CreditsScreen,\n    CollectionScreen,\n    PatchNotesScreen,\n    SettingsScreen,\n    EndingsCollectionScreen: EndingsCollectionWindow,\n    ModScreen\n  },\n  methods: {\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--background-image': 'url(' + require('@/assets/background.webp') + ')',\n        '--maven-pro-path': 'url(' + require('@/assets/fonts/MavenPro-VariableFont_wght.ttf') + ')'\n      }\n    },\n    globalState() {\n      return globalState()\n    }\n  }\n})\nexport default class App extends Vue {\n  menu: Menu = new Menu()\n}\n</script>\n\n<style lang=\"scss\">\n//@import url('https://fonts.googleapis.com/css?family=Croissant+One'); // The Blushing Defeat title font\n\n// OPEN SANS font, used for most paragraphs\n//@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700');\n@font-face {\n  font-family: 'Open Sans';\n  src: url('assets/fonts/OpenSans-Regular.ttf') format('truetype');\n  font-weight: normal;\n  font-style: normal;\n}\n@font-face {\n  font-family: 'Open Sans';\n  src: url('assets/fonts/OpenSans-Italic.ttf') format('truetype');\n  font-weight: normal;\n  font-style: italic;\n}\n@font-face {\n  font-family: 'Open Sans';\n  src: url('assets/fonts/OpenSans-Bold.ttf') format('truetype');\n  font-weight: bold;\n  font-style: normal;\n}\n@font-face {\n  font-family: 'Open Sans';\n  src: url('assets/fonts/OpenSans-BoldItalic.ttf') format('truetype');\n  font-weight: bold;\n  font-style: italic;\n}\n\n// MAVEN PRO font, used for headers\n//@import url('https://fonts.googleapis.com/css?family=Maven+Pro:500');\n@font-face {\n  font-family: 'Maven Pro';\n  src: url('assets/fonts/MavenPro-VariableFont_wght.ttf') format('truetype-variations');\n  font-weight: 125 1000;\n  font-stretch: 75% 125%;\n  font-style: normal;\n}\n\n// LUSITANA font, used for card titles\n//@import url('https://fonts.googleapis.com/css2?family=Lusitana:wght@400;700&display=swap');\n@font-face {\n  font-family: 'Lusitana';\n  src: url('assets/fonts/Lusitana-Regular.ttf') format('truetype');\n  font-weight: normal;\n  font-style: normal;\n}\n@font-face {\n  font-family: 'Lusitana';\n  src: url('assets/fonts/Lusitana-Bold.ttf') format('truetype');\n  font-weight: bold;\n  font-style: normal;\n}\n\nhtml {\n  height: 100%;\n}\nbody {\n  background-color: #353540;\n  margin: 0;\n  min-height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  & > * {\n    flex-shrink: 0;\n  }\n}\n#app {\n  flex-grow: 1;\n\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n  & > * {\n    flex-shrink: 0;\n  }\n}\n#milkfarm-app {\n  flex-grow: 1;\n\n  //font-family: Avenir, Helvetica, Arial, sans-serif;\n  font-family: \"Open Sans\", \"Helvetica Neue\", Avenir, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.5;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  color: #fefefe;\n  position: relative;\n  background: linear-gradient(180deg, rgba(#501979, 0.4), rgba(#1e0426, 0.1)), var(--background-image);//, linear-gradient(180deg, rgba(#7f2c53, 1), rgba(#520000, 1));\n  //background-image: url(\"https://www.transparenttextures.com/patterns/black-thread-light.png\");\n  background-repeat: repeat;\n  background-attachment: scroll;\n  //overflow-x: auto;\n\n  h1, h2, h3, h4, h5 {\n    font-family: \"Maven Pro\", \"Open Sans\", \"Helvetica Neue\", Avenir, Helvetica, Arial, sans-serif;\n    font-weight: 600;\n    font-stretch: normal;\n  }\n\n  p, .text {\n    font-family: \"Open Sans\", \"Helvetica Neue\", Avenir, Helvetica, Arial, sans-serif;\n  }\n\n  * {\n    //scrollbar-width: thin;\n    scrollbar-color: lighten($window-background-color, 10%) #260C1A;\n\n    &::-webkit-scrollbar {\n      width: 8px;\n    }\n\n    &::-webkit-scrollbar-track {\n      background: #260C1A;\n    }\n\n    &::-webkit-scrollbar-thumb {\n      background: lighten($window-background-color, 10%);\n      border-radius: $border-radius;\n    }\n  }\n}\na {\n  color: white;\n}\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n.window {\n  background: $window-background-color;\n  padding: 10px 20px 20px 20px;\n  border: 3px solid black;\n  border-radius: $border-radius;\n\n  h1, h2 {\n    margin-top: 0;\n  }\n}\n</style>\n\n<style scoped lang=\"scss\">\n.loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n\n  h1 {\n    text-align: center;\n  }\n}\n</style>\n","<template>\n  <div class=\"milkfarm\">\n    <CardHandWindow :menu=\"menu\" :deck=\"game.drawnCards\" class=\"drawn-cards\">\n      <div class=\"hand-labels\">\n        <div class=\"hand-label\">{{ game.roundString }}</div>\n        <div class=\"hand-label mana-label\">\n          Bonus rolls: {{ game.state.bonusRolls.value }} / {{ game.state.bonusRolls.max }}\n        </div>\n        <div class=\"hand-label mana-label\">\n          Mana: {{ game.player.getMana() }}\n        </div>\n        <div class=\"hand-label\">\n          {{ game.pickedString }}\n        </div>\n      </div>\n    </CardHandWindow>\n    <CardHandWindow :menu=\"menu\" :deck=\"handDeck\"\n                    class=\"picked-cards\">\n      <div class=\"hand-labels\">\n        <TextButton class=\"hand-button\" @click=\"showActivatedCards = !showActivatedCards\">\n          <template v-if=\"showActivatedCards\">Show All: On</template>\n          <template v-else>Show All: Off</template>\n        </TextButton>\n      </div>\n    </CardHandWindow>\n\n    <DialogueCard :menu=\"menu\"></DialogueCard>\n\n    <div class=\"dices\">\n      <template v-for=\"die in game.state.dice\" v-bind:key=\"die\">\n        <DiceView :dice=\"die\"></DiceView>\n      </template>\n    </div>\n\n    <div class=\"abilities\">\n      <template v-for=\"ability in game.abilities\" v-bind:key=\"ability\">\n        <TextButton v-if=\"ability.isVisible(game)\" class=\"ability\" :disabled=\"!ability.isAvailable(game)\" @click=\"ability.activate(game)\">\n          <p class=\"ability-title\">{{ ability.title }}</p>\n          <p class=\"ability-subtitle\">{{ ability.subtitle }}</p>\n        </TextButton>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport CardHandWindow from \"@/components/CardHandWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, DiceView, DialogueCard, DialogueStatusCard, CardHandWindow\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    },\n    handDeck: function (): Deck {\n      if (this.showActivatedCards) return this.game.player.hand.copy().addDeck(this.game.pickedCards)\n      return this.game.pickedCards\n    }\n  }\n})\nexport default class GameScreen extends Vue {\n  menu!: Menu\n  scaledCard: Card = new Card({})\n  showActivatedCards: boolean = false\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .milkfarm {\n    display: grid;\n    grid-template-columns: 1fr 100px $dice-size 1fr;\n    grid-template-rows: 410px 200px 200px;\n    grid-template-areas:\n      \"c c c c\"\n      \"p a d s\"\n      \"p a d s\";\n    grid-gap: 10px;\n\n    background-size: cover;\n    background-attachment: fixed;\n    position: relative;\n\n    min-width: 360px;\n    min-height: 100vh;\n    box-sizing: border-box; // Include padding in height so that we don't get scrollbars.\n\n    @media only screen and (min-width: 1700px){\n      padding-left: 100px;\n      padding-right: 100px;\n    }\n\n    @media only screen and (max-width: $mobile-width){\n      grid-template-columns: 1fr minmax($dice-size, auto);\n      grid-template-rows: 430px minmax($dice-size * 1.2, auto) minmax(100px, auto) 410px 410px;\n      grid-template-areas:\n      \"c c\"\n      \"d d\"\n      \"a a\"\n      \"s s\"\n      \"p p\";\n    }\n  }\n\n  .drawn-cards {\n    grid-area: c;\n  }\n\n  .picked-cards {\n    grid-area: p;\n  }\n\n  .dialogue-card {\n    grid-area: s;\n\n    box-sizing: border-box;\n    height: 100%;\n    width: 100%;\n    margin: auto;\n  }\n\n  .dices {\n    grid-area: d;\n\n    display: flex;\n    flex-direction: column;\n    box-sizing: border-box;\n\n    * {\n      margin-right: 3px;\n      margin-bottom: 3px;\n    }\n\n    @media only screen and (max-width: $mobile-width) {\n      flex-direction: row;\n      overflow: auto;\n    }\n  }\n\n  .add-dice {\n    background-color: rgba(#fff0e8, 0.75);\n    border-color: rgba(black, 0.9);\n    color: rgba(black, 0.9);\n  }\n\n  .sell-dice {\n    grid-row: 6;\n\n    background-color: $window-background-color;\n    border-color: rgba(black, 0.9);\n    color: white;\n    font-size: 16px;\n\n    margin-top: auto;\n  }\n\n  .abilities {\n    grid-area: a;\n\n    @media only screen and (max-width: $mobile-width) {\n      display: grid;\n\n      grid-template-columns: 1fr 1fr;\n      grid-gap: 2px;\n    }\n  }\n\n  .ability {\n    background-color: $window-background-color;\n    border-color: rgba(black, 0.9);\n    color: white;\n    font-size: 16px;\n    padding: 2px;\n    border: 2px solid black;\n    border-radius: $border-radius;\n\n    margin-bottom: 3px;\n\n    @media only screen and (max-width: $mobile-width) {\n      margin: 0;\n    }\n  }\n\n  .ability-title {\n    font-weight: bold;\n  }\n\n  .ability-subtitle {\n    font-size: 0.75em;\n  }\n\n  .credits {\n    display: none;\n  }\n\n  .hand-button {\n    border: 2px solid black;\n    border-radius: $border-radius / 2;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border-bottom: 0;\n    padding: 2px 4px;\n    font-weight: bold;\n    font-size: 13px;\n    margin-right: 5px;\n  }\n\n  .hand-labels {\n    display: flex;\n    width: 100%;\n    justify-content: center;\n  }\n\n  .hand-label {\n    padding: 2px 5px;\n    border-top-left-radius: $border-radius;\n    border-top-right-radius: $border-radius;\n    border: 2px solid black;\n    border-bottom: 0;\n    background-color: $window-background-color;\n    width: 140px;\n    text-align: center;\n\n    display: grid;\n    grid-auto-flow: column;\n    grid-gap: 5px;\n    margin-right: 5px;\n\n    font-weight: bold;\n    font-size: 13px;\n  }\n\n  .mana-label {\n    background-color: #19376c;\n  }\n\n</style>\n","<template>\n  <div class=\"text-button\" :class=\"{'disabled': disabled}\" onselectstart=\"return false\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\n\n@Options({\n  props: {\n    disabled: Boolean\n  }\n})\nexport default class TextButton extends Vue {\n  disabled: boolean = false\n}\n</script>\n\n<style lang=\"scss\">\n.text-button {\n  p {\n    margin: 0;\n  }\n}\n\n</style>\n\n<style scoped lang=\"scss\">\n.text-button {\n  color: $text-light;\n  padding: 0.5em;\n  cursor: pointer;\n  background-color: $component-button;\n\n  transition: background-color $selection-time;\n\n  &:hover {\n    background-color: scale-color(lighten($component-button, 10%), $saturation: 30%);\n  }\n  &:active {\n    background-color: scale-color(darken($component-button, 5%), $saturation: -5%);\n  }\n\n  display: grid;\n  align-items: center;\n  justify-content: center;\n}\n\n.disabled {\n  background-color: $component-button-disabled !important;\n  cursor: default;\n  color: lighten($component-button-disabled, 15%) !important;\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\n\n@Options({\n  props: {\n    disabled: Boolean\n  }\n})\nexport default class TextButton extends Vue {\n  disabled: boolean = false\n}\n","import { render } from \"./TextButton.vue?vue&type=template&id=2b92d90a&scoped=true\"\nimport script from \"./TextButton.vue?vue&type=script&lang=ts\"\nexport * from \"./TextButton.vue?vue&type=script&lang=ts\"\n\nimport \"./TextButton.vue?vue&type=style&index=0&id=2b92d90a&lang=scss\"\nimport \"./TextButton.vue?vue&type=style&index=1&id=2b92d90a&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-2b92d90a\"\n\nexport default script","<template>\n  <div class=\"playing-card\" :class=\"{\n        'single-card': card.type === 'single',\n        'child-card': card.hasParent,\n        'highlight-1': card.highlight === 1,\n        'highlight-2': card.highlight === 2,\n        'highlight-3': card.highlight === 3,\n        'highlight-4': card.highlight >= 4,\n      }\" :style=\"cssVars\">\n    <div class=\"title-field\" title=\"Name of this card\">\n      <h3>{{ card.title }}</h3>\n    </div>\n    <div class=\"levels-field\" title=\"Level of this card / Max level of this card\">\n      <h3>{{ card.levelString }}</h3>\n    </div>\n    <div class=\"thumb-container\">\n      <!--<img class=\"thumb\" :src=\"card.thumb\"/>-->\n    </div>\n    <div v-if=\"card.subtitle !== ''\" class=\"subtitle-field\" title=\"Name of this level of this card\">\n      <h3>{{ card.subtitle }}</h3>\n    </div>\n    <div class=\"description-field\">\n      <p>{{ card.description }}</p>\n    </div>\n    <div class=\"artist-field\">\n      <p>Art by {{ card.artist }}</p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Card from \"../cards/Card\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton\n  },\n  props: {\n    card: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--border-color': 'black',\n        '--background-hue': this.card.hue,\n        '--background-image': 'url(' + require('@/assets/black-felt.png') + ')',\n        '--thumb': 'url(' + this.card.thumb + ')'\n      }\n    }\n  }\n})\nexport default class PlayingCard extends Vue {\n  card!: Card\n}\n</script>\n\n<style scoped lang=\"scss\">\nh1, h2, h3, h4, h5, p {\n  margin: 0;\n  line-height: 1;\n}\n\np {\n  font-size: 11px;\n  line-height: 1.2;\n}\n\n$text-field-color: var(--background-color);//var(--background-color);\n$text-color: #111;\n\n.playing-card {\n  background: var(--background-image), linear-gradient(180deg,\n              hsl(calc(var(--background-hue) + 15), 70%, 50%) 0%,\n              hsl(calc(var(--background-hue) - 5), 70%, 30%) 40%,\n              hsl(calc(var(--background-hue) - 15), 70%, 20%) 95%,\n              hsl(calc(var(--background-hue) - 15), 70%, 5%) 100%);\n  border: 2px solid var(--border-color);\n  border-radius: 4px;\n  padding: 3px 3px 10px;\n  cursor: pointer;\n  user-select: none;\n  color: $text-color;\n  width: $playing-card-width;\n  height: $playing-card-height;\n  box-sizing: border-box;\n\n  position: relative;\n  display: grid;\n  grid-template-columns: 6fr 2fr;\n  grid-template-rows: 25px 3fr 25px 2fr;\n  grid-template-areas:\n    \"t l\"\n    \"i i\"\n    \"i i\"\n    \"d d\";\n  grid-gap: 2px;\n\n  backface-visibility: hidden;\n  transition: transform 0.2s, border-color 0.1s;\n  transform-origin: top left;\n  transform: scale(1);\n\n  &:hover {\n    transform: scale(1.08);\n    z-index: 10;\n  }\n}\n\n.single-card {\n  //grid-template-columns: 6fr 2fr;\n  //grid-template-rows: 30px 1fr 30px 1fr;\n  grid-template-areas:\n    \"t t\"\n    \"i i\"\n    \"i i\"\n    \"d d\";\n\n  .levels-field {\n    display: none;\n  }\n}\n\n.child-card {\n  grid-template-columns: 12fr 3fr;\n  //grid-template-rows: 30px 3fr 30px 2fr;\n  grid-template-areas:\n    \"t t\"\n    \"i i\"\n    \"s l\"\n    \"d d\";\n}\n\n.highlight-1 {\n  border-color: $highlight-color;\n  transform: scale(1.02);\n  z-index: 1;\n\n  box-shadow: 0 0 2px 1px rgba(#ccc, 0.5);\n}\n\n.highlight-2 {\n  border-color: $highlight-color;\n  transform: scale(1.04);\n  z-index: 2;\n\n  box-shadow: 0 0 10px 1px rgba(#eee, 1);\n}\n\n.highlight-3 {\n  border-color: $highlight-color;\n  transform: scale(1.055);\n  z-index: 3;\n\n  box-shadow: 0 0 20px 4px rgba(#fff, 1);\n}\n\n.highlight-4 {\n  border-color: $highlight-color;\n  transform: scale(1.07);\n  z-index: 4;\n\n  box-shadow: 0 0 30px 6px rgba(#fff, 1);\n}\n\n.bold-field {\n  h1, h2, h3, h4 {\n    font-family: 'Lusitana', serif !important;\n  }\n  color: hsl(var(--background-hue), 80%, 90%);\n  background: linear-gradient(hsl(var(--background-hue), 60%, 30%), hsl(var(--background-hue), 80%, 21%));\n  //background-blend-mode: overlay;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 2px 4px;\n}\n\n.title-field {\n  @extend .bold-field;\n  grid-area: t;\n\n  h3 {\n    font-size: 15px;\n    line-height: 1.1;\n  }\n}\n\n.subtitle-field {\n  @extend .bold-field;\n  grid-area: s;\n\n  h3 {\n    font-size: 14px;\n    line-height: 1.1;\n  }\n}\n\n.levels-field {\n  @extend .bold-field;\n  grid-area: l;\n  text-align: center;\n  h3 {\n    font-size: 14px;\n    line-height: 1.1;\n  }\n}\n\n.description-field {\n  grid-area: d;\n\n  //font-family: 'Lusitana', serif;\n  color: hsl(var(--background-hue), 80%, 5%);\n  background: linear-gradient(180deg,\n    hsla(var(--background-hue), 20%, 80%, 80%),\n    hsla(var(--background-hue), 20%, 70%, 60%));\n  //background-blend-mode: multiply;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 4px 8px;\n\n  white-space: pre-wrap;\n}\n\n.thumb-container {\n  grid-area: i;\n\n  background-image: var(--thumb);\n  background-color: #222;\n  //background: var(--thumb), #222;\n  background-size: cover;\n  background-position: center;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n\n  overflow: hidden;\n}\n\n.thumb {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  object-position: 50% 50%;\n  pointer-events: none;\n  user-select: none;\n}\n\n.artist-field {\n  position: absolute;\n  bottom: 2px;\n  left: 0;\n  padding-top: 1px;\n  padding-left: 8px;\n  padding-right: 5px;\n  //background: hsl(var(--background-hue), 100%, 30%) var(--background-image);\n  //border-top-left-radius: 100px;\n  //border-left: 1px solid var(--border-color);\n  //border-top: 1px solid var(--border-color);\n\n  text-align: left;\n  color: hsl(var(--background-hue), 70%, 65%);\n\n  p {\n    font-size: 8px;\n    line-height: 1;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"value-meter\" :style=\"cssVars\">\n    <div class=\"filled-bar\"></div>\n    <div class=\"label\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport ValueRange from '@/effects/ValueRange'\n\n@Options({\n  props: {\n    container: ValueRange,\n    barColor: String,\n    backgroundColor: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--percent-filled': this.container.fraction * 100 + '%',\n        '--background-color': this.backgroundColor,\n        '--bar-color': this.barColor\n      }\n    }\n  }\n})\nexport default class ValueMeter extends Vue {\n  container!: ValueRange | undefined\n  backgroundColor: string = '#282c3b'\n  barColor: string = '#741A32'\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .value-meter {\n    border: 1px solid black;\n    border-radius: 0;\n    background-color: var(--background-color);\n    position: relative;\n    height: 1em;\n  }\n\n  .filled-bar {\n    height: 100%;\n    transition: width 0.1s linear;\n\n    border-radius: 0;\n    background-color: var(--bar-color);\n    width: var(--percent-filled);\n  }\n\n  .label {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    display: grid;\n    place-items: center;\n  }\n\n</style>\n","import axios from \"axios\"\nimport Hjson from \"hjson\"\nimport * as html2canvas from \"html2canvas\"\n\nexport default {\n  baseUrl(): string {\n    return process.env.VUE_APP_BASE_URL || \"BASE_URL_NOT_SET\"\n  },\n  wait(ms: number) {\n    return new Promise((resolve, reject) => {\n      window.setTimeout(resolve, ms)\n    })\n  },\n  /**\n   * Fetches a HJSON or JSON file from the public folder.\n   * @param path relative to the public folder with no leading slash. Ex: 'research/research-tree.hjson'\n   */\n  async fetchHjson(path: string) {\n    let response = await axios.get(\n      this.baseUrl() + '/' + path,\n      { transformResponse: [(data) => { return data }] }) // Return pure data, do not auto-convert to json\n\n    let data = response.data\n    let info = Hjson.parse(data)\n    return info\n  },\n  async getInfo(id: string) {\n    return await this.fetchHjson(id + '/info.hjson')\n  },\n  isVideo(url: string) {\n    return /\\.webm$/i.test(url)\n  },\n  sample(array: any[]): any {\n    return array[Math.floor(Math.random() * array.length)]\n  },\n  timeToDays(time: number): number {\n    return time / 60\n  },\n  currentDate(time: number): string {\n    let day = Math.floor(this.timeToDays(time))\n    let timeofday = ((time % 60) / 60 * 24)\n    let hour = Math.floor(timeofday)\n    let minute = ((timeofday - hour) * 60)\n    return `Day ${day}, ${hour.toFixed(0).padStart(2, '0')}:${minute.toFixed(0).padStart(2, '0')}`\n  },\n  displayTime(time: number): string {\n    let day = Math.floor(this.timeToDays(time))\n    let timeofday = ((time % 60) / 60 * 24)\n    let hour = Math.floor(timeofday)\n    let minute = ((timeofday - hour) * 60)\n\n    let s = \"\"\n    if (day == 1) s += `${day} day`\n    if (day > 1) s += `${day} days`\n    if (day >= 1 && hour > 0) s += \", \"\n    if (hour == 1) s += `${hour} hour`\n    if (hour > 1) s += `${hour} hours`\n    if (day == 0 && hour == 0) s = `${minute} minutes`\n    return s\n  },\n  uuid(): string {\n    return (\"\" + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n      (Number(c) ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> Number(c) / 4).toString(16)\n    )\n  },\n  capitalize(s: string): string {\n    return s.charAt(0).toUpperCase() + s.substr(1)\n  },\n  toKebabCase(string: string): string {\n    return string.replace(/\\s+/g, '-').toLowerCase()\n  },\n  camelToTitleCase(camelCase: string): string {\n    return camelCase\n      .replace(/([A-Z])/g, (match) => ` ${match}`)\n      .replace(/^./, (match) => match.toUpperCase())\n      .trim()\n  },\n  pickFrom<E>(list: E[], fraction: number): E {\n    let index = this.clamp(Math.round(fraction * (list.length - 1)), 0, list.length - 1)\n    return list[index]\n  },\n  clamp(value: number, min: number, max: number) {\n    return Math.max(Math.min(value, max), min)\n  },\n  /**\n   *\n   * @param value the number that should be formatted\n   * @param relative this number determines how the value should be formatted. If not given, value is used for this.\n   */\n  showNumber(value: number, relative: number | undefined = undefined): string {\n    if (relative == undefined) relative = value\n\n    if (relative < 1) return value.toFixed(2)\n    else if (relative < 10) return value.toFixed(1)\n    return value.toFixed(0)\n  },\n  /** Ensure that a value is one of the possible values, if not, will return the first possible value as default. */\n  ensure(value: any, possibilities: any[]): any {\n    if (possibilities.find(v => v == value)) {\n      return value\n    }\n    return possibilities[0]\n  },\n  shuffle(array: any[]) {\n    let currentIndex = array.length; let temporaryValue; let randomIndex\n\n    // While there remain elements to shuffle...\n    while (currentIndex !== 0) {\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex)\n      currentIndex -= 1\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex]\n      array[currentIndex] = array[randomIndex]\n      array[randomIndex] = temporaryValue\n    }\n    return array\n  },\n  hasDuplicate(list: any[]) {\n    return new Set(list).size !== list.length\n  },\n  setTimeoutAnimationFrame(lambda: () => void, msDelay: number) {\n    let t0 = performance.now()\n    const helper = (timestamp: number) => {\n      let timePassed = timestamp - t0\n      if (timePassed >= msDelay) {\n        lambda()\n      } else {\n        requestAnimationFrame(helper)\n      }\n    }\n    requestAnimationFrame(helper)\n  },\n  download(filename: string, text: string) {\n    let element = document.createElement('a')\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text))\n    element.setAttribute('download', filename)\n\n    element.style.display = 'none'\n    document.body.appendChild(element)\n\n    element.click()\n\n    document.body.removeChild(element)\n  },\n  screenshot(id: string, savename: string = 'collection', background: string | null = null) {\n    let element = document.getElementById(id)\n    if (element == null) {\n      console.error(`Could not take a screenshot of element with id \"${id}\".`)\n      return\n    }\n\n    let childCount = Math.max(element.childNodes.length - 2, 1)\n    let childWidth = 270\n    let childHeight = 380\n    let width = element.style.width\n    let height = element.style.height\n    let minHeight = element.style.minHeight\n\n    let renderWidth = Math.min(childWidth * childCount, 2560)\n    element.style.width = `${renderWidth}px`\n\n    if (childCount * childWidth < 2560) {\n      element.style.height = `${childHeight}px`\n      element.style.minHeight = `${childHeight}px`\n    }\n\n    //let canvas = document.createElement(\"canvas\")\n    //let context = canvas.getContext(\"2d\")!\n    //context.scale(2, 2)\n\n    // @ts-ignore\n    html2canvas(element, {\n      backgroundColor: background\n    }).then((canvas: any) => {\n      let a = document.createElement('a')\n      let image\n\n      if (background == null) {\n        image = canvas.toDataURL(\"image/png\")\n        a.download = `${savename}.png`\n      } else {\n        image = canvas.toDataURL(\"image/jpeg\")\n        a.download = `${savename}.jpg`\n      }\n      a.href = image\n      //document.body.appendChild(a)\n      a.click()\n    })\n\n    element.style.width = width\n    element.style.minHeight = minHeight\n    element.style.height = height\n  }\n}\n","import CollectionPlayer from \"@/employee/CollectionPlayer\"\nimport util from \"@/util\"\nimport { identifier, list, map, primitive, serializable } from \"serializr\"\n\nexport default class ValueMod {\n  @serializable(identifier())\n  public readonly uuid: string = util.uuid()\n  @serializable\n  public readonly type: string = 'add' // add, mul\n  @serializable\n  public readonly value: number = 0\n\n  constructor(value: number, type: string) {\n    this.type = type\n    this.value = value\n  }\n\n  static activate(value: number, mod: ValueMod): number {\n    if (mod.type === 'add') return value + mod.value\n    else if (mod.type === 'mul') return value * mod.value\n\n    return value\n  }\n\n  /**\n   * Returns the value that could be activated to become X, where X is the input value\n   * @param value X\n   * @param mod\n   */\n  static reverseActivate(value: number, mod: ValueMod): number {\n    if (mod.type === 'add') return value - mod.value\n    else if (mod.type === 'mul') return value * (1 / mod.value)\n    return value\n  }\n\n  /**\n   * Activate all mods on a value. This uses a predefined order of activation.\n   * @param value the value to modify\n   * @param mods\n   */\n  static activateAll(value: number, mods: ValueMod[]): number {\n    for (let mod of mods) {\n      if (mod.type === 'add') value = ValueMod.activate(value, mod)\n    }\n\n    for (let mod of mods) {\n      if (mod.type === 'mul') value = ValueMod.activate(value, mod)\n    }\n\n    return value\n  }\n\n  /**\n   * Reverse-activates all mods on a value. This uses a predefined order of activation.\n   * @param value the value to modify\n   * @param mods\n   */\n  static reverseActivateAll(value: number, mods: ValueMod[]): number {\n    for (let mod of mods.reverse()) {\n      if (mod.type === 'mul') value = ValueMod.reverseActivate(value, mod)\n    }\n\n    for (let mod of mods.reverse()) {\n      if (mod.type === 'add') value = ValueMod.reverseActivate(value, mod)\n    }\n\n    return value\n  }\n\n  equals(mod: ValueMod) {\n    return this.value == mod.value && this.type == mod.type\n  }\n\n  toString(): string {\n    let s = \"\"\n    let value = util.showNumber(Math.abs(this.value))\n    let type = \"\"\n    if (this.type === 'add') {\n      if (this.value > 0) s = `+${value}`\n      else s = `-${value}`\n    } else if (this.type === 'mul') {\n      s = `x${value}`\n    }\n    return s\n  }\n}\n","import CollectionPlayer from \"@/employee/CollectionPlayer\"\nimport util from \"@/util\"\nimport { list, map, object, primitive, serializable } from \"serializr\"\nimport ValueMod from \"@/effects/ValueMod\"\n\nexport type MapStringAny = { [index: string]: any }\n\nexport default class ValueRange {\n  @serializable\n  private _baseValue: number = 0\n  @serializable\n  private readonly _min: number = 0\n  @serializable\n  private readonly _max: number = 0\n\n  @serializable(map(object(ValueMod)))\n  public valueMods: MapStringAny = {}\n\n  @serializable(map(object(ValueMod)))\n  public minMods: MapStringAny = {}\n\n  @serializable(map(object(ValueMod)))\n  public maxMods: MapStringAny = {}\n\n  @serializable(list(primitive()))\n  private readonly texts: string[] = []\n\n  @serializable\n  public readonly capBaseValue: boolean = false // If true, setting baseValue outside min/max range will not work\n\n  constructor(value: number, min: number, max: number | undefined = undefined, text: string[] = [], capBaseValue = false) {\n    this._baseValue = value\n    this._min = min\n    this._max = (max == undefined) ? Number.MAX_SAFE_INTEGER : max\n    this.texts = text\n    this.capBaseValue = capBaseValue\n  }\n\n  /**\n   * Adds the given amount to the current final value.\n   * @param value\n   * @return how much the value was changed\n   */\n  addValue(value: number): number {\n    let mulMods = []\n    for (let key in this.valueMods) {\n      let mod = this.valueMods[key]\n      if (mod.type == 'mul') mulMods.push(mod)\n    }\n    let oldValue = this.value\n    let oldBase = this.baseValue\n    this.baseValue += ValueMod.reverseActivateAll(value, mulMods)\n    return this.value - oldValue\n  }\n\n  /**\n   * Adds the given amount to the current base value.\n   * @param value\n   * @return how much the base value was actually changed\n   */\n  addBaseValue(value: number): number {\n    let oldBase = this.baseValue\n    this.baseValue += value\n\n    return this.baseValue - oldBase\n  }\n\n  set fraction(fraction: number) {\n    this.baseValue = this.min + this.max * fraction\n  }\n\n  get fraction(): number {\n    return (this.value - this.min) / (this.max - this.min)\n  }\n\n  get value(): number {\n    let sum = ValueMod.activateAll(this._baseValue, Object.values(this.valueMods))\n\n    if (sum > this.max) {\n      return this.max\n    } else if (sum < this.min) {\n      return this.min\n    } else {\n      return sum\n    }\n  }\n\n  set baseValue(value: number) {\n    if (this.capBaseValue) {\n      value = Math.max(Math.min(value, this.max), this.min)\n    }\n    this._baseValue = value\n  }\n\n  get baseValue(): number {\n    return this._baseValue\n  }\n\n  get min(): number {\n    return ValueMod.activateAll(this._min, Object.values(this.minMods))\n  }\n\n  //set min(value: number) {\n  //  this._min = value;\n  //}\n\n  get max(): number {\n    return ValueMod.activateAll(this._max, Object.values(this.maxMods))\n  }\n\n  //set max(value: number) {\n  //  this._max = value;\n  //}\n\n  get text(): string {\n    if (this.texts.length == 0) return this.value.toFixed(1)\n    return util.pickFrom(this.texts, this.fraction)\n  }\n\n  load(state: ValueRange) {\n    //this._min = state._min\n    //this._max = state._max\n    this._baseValue = state._baseValue\n  }\n\n  get copy(): ValueRange {\n    let v = new ValueRange(this._baseValue, this._min, this._max, this.texts)\n    v.valueMods = this.valueMods\n    return v\n  }\n}\n","\nimport { Options, Vue } from 'vue-class-component'\nimport ValueRange from '@/effects/ValueRange'\n\n@Options({\n  props: {\n    container: ValueRange,\n    barColor: String,\n    backgroundColor: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--percent-filled': this.container.fraction * 100 + '%',\n        '--background-color': this.backgroundColor,\n        '--bar-color': this.barColor\n      }\n    }\n  }\n})\nexport default class ValueMeter extends Vue {\n  container!: ValueRange | undefined\n  backgroundColor: string = '#282c3b'\n  barColor: string = '#741A32'\n}\n","import { render } from \"./ValueMeter.vue?vue&type=template&id=ef28c724&scoped=true\"\nimport script from \"./ValueMeter.vue?vue&type=script&lang=ts\"\nexport * from \"./ValueMeter.vue?vue&type=script&lang=ts\"\n\nimport \"./ValueMeter.vue?vue&type=style&index=0&id=ef28c724&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-ef28c724\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Card from \"../cards/Card\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton\n  },\n  props: {\n    card: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--border-color': 'black',\n        '--background-hue': this.card.hue,\n        '--background-image': 'url(' + require('@/assets/black-felt.png') + ')',\n        '--thumb': 'url(' + this.card.thumb + ')'\n      }\n    }\n  }\n})\nexport default class PlayingCard extends Vue {\n  card!: Card\n}\n","import { render } from \"./PlayingCard.vue?vue&type=template&id=1a237670&scoped=true\"\nimport script from \"./PlayingCard.vue?vue&type=script&lang=ts\"\nexport * from \"./PlayingCard.vue?vue&type=script&lang=ts\"\n\nimport \"./PlayingCard.vue?vue&type=style&index=0&id=1a237670&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-1a237670\"\n\nexport default script","import { reactive, toRefs } from 'vue'\nimport util from \"@/util\"\nimport axios from \"axios\"\nimport MarkdownIt from 'markdown-it'\n\nasync function fetchList<E>(pathList: string[]): Promise<E[]> {\n  let promises: any[] = []\n  for (let path of pathList) {\n    promises.push(util.fetchHjson(path))\n  }\n  let objects: E[] = await Promise.all(promises)\n  return objects\n}\n\nconst state = reactive({\n  loading: true,\n  cardFamilyString: \"\" as string,\n  dialogueString: \"\" as string,\n  dialogue2String: \"\" as string,\n  endingsString: \"\" as string,\n  artistsString: \"\" as string,\n  patreonCredits: \"\",\n  patchNotesString: \"\"\n})\n\nexport default function globalState() {\n  const load = async () => {\n    state.loading = true\n\n    // Await all resources in parallel\n    let [familyList, dialogue, dialogue2, endingsList, artists, credits, patchList] = await Promise.all([\n      util.fetchHjson('cards/series.hjson'),\n      util.fetchHjson('dialogue.hjson'),\n      util.fetchHjson('dialogue-2.hjson'),\n      util.fetchHjson('endings/content.hjson'),\n      util.fetchHjson('cards/artists.hjson'),\n      axios.get('https://www.blushingdefeat.com/assets/blushing-defeat-credits.json'),\n      util.fetchHjson('patch-notes/content.hjson')\n    ])\n\n    state.dialogueString = JSON.stringify(dialogue)\n    state.dialogue2String = JSON.stringify(dialogue2)\n    state.artistsString = JSON.stringify(artists)\n    state.patreonCredits = credits.data\n\n    // Second round of await for resources specified in the first await\n    let [families, patches, endings] = await Promise.all([\n      fetchList(familyList.map((path: string) => `cards/${path}`)),\n      fetchList(patchList.map((patchId: string) => `patch-notes/${patchId}.hjson`)),\n      fetchList(endingsList.map((id: string) => `endings/${id}.hjson`))\n    ])\n\n    // Load card families\n    state.cardFamilyString = JSON.stringify(families)\n\n    // Load patch notes\n    let md = new MarkdownIt()\n    for (let [i, patchId] of patchList.entries()) {\n      let patch: any = patches[i]\n      patch.id = patchId\n      patch.text = md.render(patch.text)\n    }\n    state.patchNotesString = JSON.stringify(patches)\n\n    // Load endings\n    state.endingsString = JSON.stringify(endings)\n\n    state.loading = false\n  }\n\n  return { ...toRefs(state), load }\n}\n","import { list, primitive, serializable } from \"serializr\"\nimport Card from \"@/cards/Card\"\nimport globalState from \"@/store/globalState\"\n\nexport default class Family {\n  @serializable\n  public readonly id: string\n  @serializable\n  public readonly name: string\n  @serializable\n  public readonly thumb: string\n  @serializable\n  public readonly artist: string\n  @serializable\n  public readonly hue: string\n\n  constructor(state: any) {\n    this.id = state.id\n    this.name = state.name\n    this.thumb = state.thumb\n    this.artist = state.artist ? state.artist : \"Gardamuse\"\n    this.hue = state.hue\n  }\n\n  private static familiesLoaded = false\n  private static _familyMap: {[key: string]: Family} = {}\n  private static familyMap(): {[key: string]: Family} {\n    if (this.familiesLoaded) return this._familyMap\n\n    let families: any = JSON.parse(globalState().cardFamilyString.value)\n    for (let state of families) {\n      let family = new Family(state)\n      this._familyMap[family.id] = family\n    }\n    this.familiesLoaded = true\n    return this._familyMap\n  }\n\n  public static familyLookup(id: string): Family {\n    let family: Family | undefined = Family.familyMap()[id]\n    if (family != undefined) return family\n    return new Family({ id: \"none\", name: \"None\", thumb: \"\", artist: \"\", hue: 0 })\n  }\n}\n","export default class DrawPreference {\n  public readonly tags: string[]\n  public readonly guaranteed: number\n  public readonly probability: number\n\n  constructor(tags: string[] = [], guaranteed: number = 0, probability: number = 0) {\n    this.tags = tags\n    this.guaranteed = guaranteed\n    this.probability = probability\n  }\n}\n","import util from \"@/util\"\nimport Card from \"@/cards/Card\"\nimport globalState from \"@/store/globalState\"\nimport Family from \"@/cards/Family\"\nimport DrawPreference from \"@/cards/DrawPreference\"\nimport FilterSetting from \"@/FilterSetting\"\n\nexport default class Deck {\n  public cards: Card[]\n\n  public static filters: FilterSetting[] = []\n  public static bannedCards: Set<string> = new Set([])\n  private static cardsLoaded = false\n  private static _cardMap: {[key: string]: Card} = {}\n  private static _referenceDeck: Deck\n  private static tags: Set<string> = new Set([])\n\n  constructor(cards: Card[] | undefined = undefined) {\n    if (cards != undefined) {\n      this.cards = cards\n    } else {\n      this.cards = []\n    }\n  }\n\n  createNew(): Deck {\n    return Deck.referenceDeck().copy().useFilters()\n  }\n\n  /** Returns a new deck with this one's cards, but with all cards of a given family removed. */\n  withoutFamily(family: string): Deck {\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      if (card.family.id != family) cards.push(card)\n    }\n    return new Deck(cards)\n  }\n\n  /** Returns a new deck with this one's cards, but only with cards of a given family or tag.\n   *\n   * Using 'all' will return a copy of this entire deck.\n   * */\n  onlyTag(family: string): Deck {\n    if (family == 'all') return new Deck(this.cards)\n\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      if (card.family.id == family) {\n        cards.push(card)\n      } else if (card.hasTag(family)) {\n        cards.push(card)\n      }\n    }\n    return new Deck(cards)\n  }\n\n  useFilters(): Deck {\n    return this.filterBy(Deck.filters, Deck.bannedCards)\n  }\n\n  filterBy(filters: FilterSetting[], bannedCards: Set<string>): Deck {\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      let addCard: boolean = true\n\n      // Filter subcards\n      if (card.isParent) {\n        for (let subcard of card.subcards) {\n          // Remove banned subcards\n          if (bannedCards.has(subcard.id)) {\n            card.subcards = card.subcards.filter(c => c.id != subcard.id)\n            continue\n          }\n\n          // Remove cards based on filters\n          if (subcard.isFiltered(filters)) card.subcards = card.subcards.filter(c => c.id != subcard.id)\n          /*for (let filter of filters) {\n            if (subcard.hasTag(filter.tag) && filter.strictness == 2) {\n              card.subcards = card.subcards.filter(c => c.id != subcard.id)\n            }\n            if (subcard.hasTag(filter.tag) && subcard.hasTag('extreme') && filter.strictness == 1) {\n              card.subcards = card.subcards.filter(c => c.id != subcard.id)\n            }\n          }*/\n        }\n      }\n\n      // Filter this card\n      if (bannedCards.has(card.id)) {\n        addCard = false\n      }\n      if (card.isFiltered(filters)) addCard = false\n      /*for (let filter of filters) {\n        if (card.hasTag(filter.tag)) {\n          if (filter.strictness == 2) {\n            addCard = false\n            break\n          }\n          if (filter.strictness == 1 && card.hasTag(\"extreme\")) {\n            addCard = false\n            break\n          }\n        }\n      }*/\n\n      // Do not add parent card if all subcards are removed\n      if (card.isParent) {\n        if (card.subcards.length == 0) addCard = false\n      }\n\n      if (addCard) cards.push(card)\n    }\n    return new Deck(cards)\n  }\n\n  /** Makes all cards in this deck references to cards in a single common reference deck. */\n  rebase(): Deck {\n    let deck: Deck = new Deck()\n    for (let card of this.cards) {\n      deck.addCard(Deck.lookup(card.id)!)\n    }\n    return deck\n  }\n\n  /** Returns this deck but with each card only appearing once. */\n  unique(): Deck {\n    let ids: any = {}\n    let deck: Deck = new Deck()\n    for (let card of this.cards) {\n      if (!(card.id in ids)) {\n        deck.addCard(card)\n        ids[card.id] = true\n      }\n    }\n\n    return deck\n  }\n\n  /** Returns this deck but packs child cards into their parents as sub-cards.*/\n  pack(): Deck {\n    let deck: Deck = new Deck()\n    for (let card of this.cards) {\n      if (card.hasParent) {\n        let parentId = card.parent!.id\n        let parent: Card\n\n        if (deck.hasCard(parentId)) {\n          // If the parent already exists in the new deck\n          parent = deck.getCardById(parentId)!\n\n        } else if (this.hasCard(parentId)) {\n          // If the parent exists in the old deck\n          parent = this.getCardById(parentId)!\n          deck.addCard(parent)\n\n        } else {\n          // If the parent doesn't exist in either deck, create it from static\n          parent = Deck.lookup(parentId)!\n          parent.subcards = []\n          deck.addCard(parent)\n        }\n        parent.addSubCard(card)\n\n      } else {\n        deck.addCard(card)\n      }\n    }\n    return deck\n  }\n\n  /** Returns this deck but with all child cards directly in the deck. All parent cards are removed. */\n  unpack(): Deck {\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      if (card.isParent) {\n        for (let i = 0; i < card.subcards.length; i++) {\n          cards.push(card.getLevel(i))\n        }\n      } else {\n        cards.push(card)\n      }\n    }\n    return new Deck(cards)\n  }\n\n  /**\n   * Returns the cards on 1-based indices specified by values.\n   * @param values\n   */\n  pick(values: number[]): Deck {\n    let cards: Card[] = []\n    for (let i = 0; i < this.cards.length; i++) {\n      for (let value of values) {\n        if (i == value - 1) cards.push(this.cards[i])\n      }\n    }\n    return new Deck(cards)\n  }\n\n  /** Draws a number of cards from the top of the deck. */\n  /*draw(value: number): Deck {\n    return this.draw2(value, { tags: [\"mind\", \"pet\"], prob: 0.5 })\n    let cards: Card[] = []\n    for (let i = 0; i < value; i++) {\n      if (!this.drawOneCardTo(cards)) break\n    }\n    return new Deck(cards)\n  }*/\n\n  // {tags: [\"mind\", \"pet\"], prob: 0.5}\n  draw(value: number, preferred: DrawPreference = new DrawPreference([], 0, 0)): Deck {\n    // Assume that index 0 is bottom of deck, highest index is top\n    let wantedCards: Card[] = this.getWantedCards(preferred.tags)\n    let cards: Card[] = []\n\n    while (cards.length < value && cards.length < preferred.guaranteed && wantedCards.length > 0) {\n      let card = util.pickFrom(wantedCards, Math.random())\n\n      // Remove that card from both wanted list and this deck\n      let wantedIndex = wantedCards.findIndex((c: Card) => c.id == card.id)\n      if (wantedIndex != -1) wantedCards.splice(wantedIndex, 1)\n      this.removeCard(card)\n\n      cards.push(card)\n      console.log(\"Guaranteed\", card.name)\n    }\n\n    while (cards.length < value) {\n      // Draw a wanted card with certain chance, otherwise just draw top card\n      if (wantedCards.length > 0 && Math.random() < preferred.probability) {\n        // Remove the topmost wanted card\n        let card = wantedCards.pop()!\n        // Remove that card from deck as well\n        this.cards.splice(this.cards.findIndex((c: Card) => c.id == card.id), 1)\n        cards.push(card)\n      } else if (this.cards.length > 0) {\n        // Remove the topmost card in the deck\n        let card = this.cards.pop()!\n        // If that card is wanted, remove it from the wanted list\n        let wantedIndex = wantedCards.findIndex((c: Card) => c.id == card.id)\n        if (wantedIndex != -1) wantedCards.splice(wantedIndex, 1)\n\n        cards.push(card)\n      } else {\n        break\n      }\n    }\n    return new Deck(cards).shuffle()\n  }\n\n  private getWantedCards(tags: string[]): Card[] {\n    // Assume that index 0 is bottom of deck, highest index is top\n    let wantedCards: Card[] = []\n    for (let card of this.cards) {\n      if (card.hasAnyTag(tags)) wantedCards.push(card)\n    }\n    return wantedCards\n  }\n\n  /** Draws a card and adds it to the list. Returns false if no card could be drawn. */\n  private drawOneCardTo(cards: Card[]): boolean {\n    let card: Card | undefined = this.cards.pop()\n    if (card != undefined) {\n      cards.push(card)\n      return true\n    }\n    return false\n  }\n\n  /** Draws the card with given index. */\n  private drawIndex(index: number) {\n    return this.cards.splice(index, 1)[0]\n  }\n\n  addCard(card: Card): Deck {\n    this.cards.push(card)\n    return this\n  }\n\n  addDeck(deck: Deck, addToBottom: boolean = false): Deck {\n    if (addToBottom) this.cards = deck.cards.concat(this.cards)\n    else this.cards = this.cards.concat(deck.cards)\n    return this\n  }\n\n  removeCard(card: Card): Deck {\n    let i = this.cards.findIndex(c => c.id == card.id)\n    if (i != -1) this.drawIndex(i)\n    return this\n  }\n\n  hasCard(cardId: string): boolean {\n    return this.findCard(cardId) != undefined\n    //return this.cards.find(card => card.id == cardId) != undefined\n  }\n\n  findCard(cardId: string): Card | undefined {\n    let card = this.cards.find(card => card.id == cardId)\n    if (card != undefined) return card\n\n    for (let parent of this.cards.filter(c => c.isParent)) {\n      card = parent.subcards.find(subcard => subcard.id == cardId)\n      if (card != undefined) return card\n    }\n    return undefined\n  }\n\n  /**\n   * Updates the first card with the same ID as the new card in this Deck. If such a card does not exist,\n   * the new card is added to the deck. Cards that have a parent cannot be replaced.\n   * @param card\n   */\n  updateCard(card: Card) {\n    if (card.hasParent) {\n      // Do not replace cards that have a parent\n      return\n    }\n\n    let refCard: Card | undefined = this.findCard(card.id)\n\n    if (refCard == undefined) {\n      // If the card doesn't exist, add it\n      this.addCard(card)\n    } else {\n      // If a card with the same id exists, update it\n      for (let i = 0; i < this.cards.length; i++) {\n        let c = this.cards[i]\n        if (c.id == card.id) this.cards[i] = card\n      }\n    }\n\n  }\n\n  /** Returns all cards, not just top level ones. */\n  get allLevels(): Card[] {\n    let cards = []\n    for (let card of this.cards) {\n      cards.push(card)\n      if (card.isParent) {\n        for (let sub of card.subcards) {\n          cards.push(sub)\n        }\n      }\n    }\n    return cards\n  }\n\n  getCardById(id: string): Card | undefined {\n    let card = this.allLevels.find(card => card.id == id)\n    return card\n  }\n\n  size(): number {\n    return this.cards.length\n  }\n\n  shuffle(): Deck {\n    this.cards = util.shuffle(this.cards)\n    return this\n  }\n\n  sortByFamily() {\n    this.cards = this.cards.sort((a, b) => (a.family.id < b.family.id) ? -1 : 1)\n    return this\n  }\n\n  sortByLevel(): Deck {\n    this.cards = this.cards.sort((a, b) => a.level - b.level)\n    return this\n  }\n\n  sortByName(): Deck {\n    this.cards = this.cards.sort((a, b) => (a.name < b.name) ? 1 : -1)\n    return this\n  }\n\n  removeAllCards(): Deck {\n    this.cards = []\n    return this\n  }\n\n  get pickableCards(): Card[] {\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      if (!card.isParent) cards.push(card)\n      for (let i = 0; i < card.subcards.length; i++) {\n        cards.push(card.getLevel(i))\n      }\n    }\n    return cards\n  }\n\n  copy(): Deck {\n    return new Deck(this.cards.map((c: Card) => c.copy()))\n  }\n\n  toString(): string {\n    let s = `--- DECK, ${this.size()} cards ---\\n`\n    s += this.cards.map(c => `${c.fullTitle}, level ${c.level}`).reduce((s, title) => `${s}\\n${title}`)\n    return s\n  }\n\n  public static createFromCardStates(cardStates: any[]): Deck {\n    let cards: Card[] = []\n    for (let state of cardStates) {\n      let card: Card | undefined = Deck.lookup(state.id)\n      if (card != undefined) {\n        cards.push(card)\n      } else {\n      }\n    }\n    return new Deck(cards)\n  }\n\n  public static isTag(tagOrFamily: string): boolean {\n    if (this.tags.size > 1) return this.tags.has(tagOrFamily)\n\n    Deck.updateTags()\n    return this.tags.has(tagOrFamily)\n  }\n\n  private static updateTags() {\n    this.tags = new Set([\"all\"])\n    for (let card of this.referenceAllLevels()) {\n      this.tags.add(card.family.id)\n      for (let tag of card.tags) {\n        this.tags.add(tag)\n      }\n    }\n  }\n\n  public static lookup(id: string): Card | undefined {\n    let card = this.cardMap()[id]\n    if (card == undefined) {\n      console.warn(`Static lookup of card \"${id}\" failed.`)\n      return undefined\n    }\n    return card.copy()\n  }\n\n  public static addReferenceCard(card: Card) {\n    // Make sure that the referenceDeck has been built\n    this.referenceDeck()\n\n    // Update the card in the card map\n    this._cardMap[card.id] = card\n\n    // Update the card in the reference deck\n    this._referenceDeck.updateCard(card)\n\n    // Add the tags of this card to the tag set\n    if (this.tags.size > 0) Deck.updateTags()\n    this.tags.add(card.family.id)\n    for (let tag of card.tags) {\n      this.tags.add(tag)\n    }\n  }\n\n  /**\n   * Returns a packed deck with all available cards.\n   */\n  public static referenceDeck(): Deck {\n    if (this._referenceDeck != undefined) {\n      return this._referenceDeck.copy()\n    }\n\n    let cards = Object.values(Deck.cardMap())\n\n    let deck: Deck = new Deck()\n    for (let card of cards) {\n      if (!card.isParent) deck.addCard(card)\n    }\n\n    this._referenceDeck = deck.pack()\n    return this._referenceDeck.copy()\n  }\n\n  public static referenceAllLevels(): Card[] {\n    if (this._referenceDeck == undefined) return this.referenceDeck().cards\n\n    return this._referenceDeck.allLevels\n  }\n\n  private static cardMap(): {[key: string]: Card} {\n    if (this.cardsLoaded) return this._cardMap\n\n    for (let card of this.parseCards(JSON.parse(globalState().cardFamilyString.value))) {\n      this._cardMap[card.id] = card\n    }\n\n    this.cardsLoaded = true\n    return this._cardMap\n  }\n\n  public static resetStaticState() {\n    this._cardMap = {}\n    this.cardsLoaded = false\n    // @ts-ignore\n    this._referenceDeck = undefined\n    this.tags = new Set([\"all\"])\n  }\n\n  public static parseCards(familyCardGroups: any, thumbRetriever: ((path: string) => string) | undefined = undefined, idPrefix: string = \"\"): Card[] {\n    let cards = []\n\n    for (let familyState of familyCardGroups) {\n      let family = Family.familyLookup(familyState.id)\n      for (let card of familyState.cards) {\n        let subcards: Card[] = []\n\n        let prefix\n        // Cards with override does not use the prefix in their id\n        if (card.override == true) {\n          prefix = \"\"\n        } else if (idPrefix != \"\") { // If there is a prefix, append an extra dot to separate the prefix from the id\n          prefix = idPrefix + \".\"\n        }\n\n        // If this card is a parent\n        if (card.levels != undefined) {\n          // Create all level cards for it\n          subcards = this.parseSubCards(card, family, thumbRetriever, prefix)\n          subcards.forEach(c => cards.push(c))\n        }\n        cards.push(this.parseCard(card, family, subcards, thumbRetriever, prefix))\n      }\n    }\n\n    return cards\n  }\n\n  /** Parses all subcards for a card. */\n  private static parseSubCards(\n    card: any,\n    family: Family,\n    thumbRetriever: ((path: string) => string) | undefined = undefined,\n    idPrefix: string = \"\"): Card[] {\n\n    let subcards: Card[] = []\n    let thumbPrefix: string = `${util.baseUrl()}/cards/`\n\n    for (let [i, subcard] of card.levels.entries()) {\n      let tags = (card.tags) ? card.tags : []\n      if (subcard.tags) tags = tags.concat(subcard.tags)\n\n      let thumb = (subcard.thumb) ? `${thumbPrefix}${subcard.thumb}` : (card.thumb) ? `${thumbPrefix}${card.thumb}` : `${thumbPrefix}${family.thumb}`\n      if (thumbRetriever != undefined) thumb = thumbRetriever(subcard.thumb ? subcard.thumb : card.thumb)\n\n      // Override default artist for modded cards\n      if (idPrefix != \"\" && (card.artist == undefined || card.artist == \"\") && (subcard.artist == undefined || subcard.artist == \"\")) {\n        subcard.artist = \"an unknown artist\"\n      }\n\n      let leveledCard: Card = new Card({\n        family: family.id,\n        thumb: thumb,\n        id: `${idPrefix}${card.id}.${subcard.id}`,\n        name: subcard.name,\n        description: subcard.description,\n        transformation: (subcard.transformation) ? subcard.transformation : (card.transformation) ? card.transformation : \"\",\n        type: card.type,\n        subcards: [],\n        levels: 1,\n        level: i + 1,\n        intensity: (subcard.intensity != undefined) ? subcard.intensity : i + 1,\n        parent: `${idPrefix}${card.id}`,\n        hue: family.hue,\n        artist: (subcard.artist) ? subcard.artist : (card.artist) ? card.artist : (family.artist) ? family.artist : \"Gardamuse\",\n        tags: tags\n      })\n      subcards.push(leveledCard)\n    }\n    return subcards\n  }\n\n  /** Parses a single card. */\n  private static parseCard(\n    card: any,\n    family: any, subcards: Card[] = [],\n    thumbRetriever: ((path: string) => string) | undefined = undefined,\n    idPrefix: string = \"\") {\n\n    let thumbPrefix: string = `${util.baseUrl()}/cards/`\n    let thumb = (card.thumb) ? `${thumbPrefix}${card.thumb}` : `${thumbPrefix}${family.thumb}`\n    if (thumbRetriever != undefined) thumb = thumbRetriever(card.thumb)\n\n    // Override default artist for modded cards\n    if (idPrefix != \"\" && (card.artist == undefined || card.artist == \"\")) {\n      card.artist = \"an unknown artist\"\n    }\n\n    return new Card({\n      family: family.id,\n      thumb: thumb,\n      id: `${idPrefix}${card.id}`,\n      name: card.name,\n      description: card.description,\n      transformation: card.transformation,\n      type: card.type,\n      subcards: subcards.map(c => c.id),\n      levels: subcards.length,\n      intensity: card.intensity,\n      hue: family.hue,\n      artist: (card.artist) ? card.artist : (family.artist) ? family.artist : \"Gardamuse\",\n      tags: (card.tags) ? card.tags : []\n    })\n  }\n\n}\n","import { identifier, list, primitive, serializable, serialize } from \"serializr\"\nimport Family from \"@/cards/Family\"\nimport Deck from \"@/cards/Deck\"\nimport FilterSetting from \"@/FilterSetting\"\n\nexport default class Card {\n\n  // Note: All properties must be added both here, in constructor, in copy() and in Deck's parser\n\n  @serializable\n  private readonly _family: string\n  @serializable\n  private readonly _parent: string\n\n  @serializable\n  public readonly thumb: string\n  @serializable(identifier())\n  public readonly id: string\n  @serializable\n  public readonly name: string\n  @serializable\n  public readonly description: string\n  @serializable\n  public readonly transformation: string\n  @serializable(list(primitive()))\n  private _subcards: string[]\n  @serializable\n  public readonly type: string // numeric, selection, single\n  @serializable\n  public readonly _level: number\n  @serializable\n  public readonly _intensity: number\n  @serializable\n  public readonly levels: number\n  @serializable\n  public readonly hue: number\n  @serializable\n  public readonly artist: string\n  @serializable(list(primitive()))\n  public readonly tags: string[]\n\n  public scale: boolean = false\n  public highlight: number = 0\n\n  constructor(state: any) {\n    if (state == undefined) state = {}\n\n    this._family = state.family ? state.family : \"none\"\n    this._parent = state.parent\n\n    this.thumb = state.thumb\n    this.id = state.id\n    this.name = state.name\n    this.description = state.description\n    this.transformation = state.transformation ? state.transformation : \"\"\n    this._subcards = state.subcards ? state.subcards : []\n    this._level = state.level ? state.level : 1\n    this._intensity = (state.intensity != undefined) ? state.intensity : this._level\n    this.levels = state.levels ? state.levels : 0\n    this.type = state.type ? state.type : \"single\"\n    this.hue = state.hue ? state.hue : 0\n    this.artist = state.artist ? state.artist : \"Gardamuse\"\n    this.tags = state.tags ? state.tags : []\n\n  }\n\n  get fullTitle(): string {\n    if (this.hasParent) return `${this.parent!.name}: ${this.name}`\n    return this.name\n  }\n\n  get title(): string {\n    if (this.hasParent) return `${this.parent!.name}`\n    return this.name\n  }\n\n  get subtitle(): string {\n    if (this.hasParent) return `${this.name}`\n    return \"\"\n  }\n\n  set subcards(cards: Card[]) {\n    this._subcards = cards.map(c => c.id)\n  }\n\n  get subcards(): Card[] {\n    return new Deck(this._subcards.map((id: string) => Deck.lookup(id)!)).sortByLevel().cards\n  }\n\n  addSubCard(card: Card) {\n    if (!this.hasSubCard(card)) {\n      this._subcards.push(card.id)\n      this._subcards.sort()\n    }\n  }\n\n  hasSubCard(card: Card): boolean {\n    return this._subcards.find(id => id == card.id) != undefined\n  }\n\n  /** How strong this card's effect is. For most cards, this is the same as its level. */\n  get intensity(): number {\n    if (!this.isParent && this.type == \"selection\") return this.parent?.intensity || 1\n    return this._intensity\n  }\n\n  get level(): number {\n    return this._level\n  }\n\n  get maxLevel(): number {\n    if (this.hasParent) {\n      return this.parent!.levels\n    }\n    return this.levels\n  }\n\n  get levelString(): string {\n    if (this.type == 'single') return '1'\n    if (this.isParent && this.levels == this.subcards.length) {\n      return this.levels.toFixed(0)\n    } else if (this.isParent) {\n      return `${this.subcards.length} / ${this.levels}`\n    } /*else if (this.type == 'selection') {\n      return ''\n      //return String.fromCharCode(96 + this.level).toUpperCase()\n    }*/\n    return `${this._level} / ${this.maxLevel}`\n  }\n\n  getLevel(level: number): Card {\n    if (this.type != \"single\" && level < this.subcards.length) {\n      return this.subcards[level]\n    }\n    return this\n  }\n\n  get parent(): Card | undefined {\n    return Deck.lookup(this._parent)\n  }\n\n  get hasParent(): boolean {\n    return this._parent != undefined\n  }\n\n  get isParent(): boolean {\n    return this.type != \"single\" && this.levels > 1\n  }\n\n  get family(): Family {\n    return Family.familyLookup(this._family)\n  }\n\n  hasTag(tag: string): boolean {\n    return this.family.id == tag || this.tags.find(t => t == tag) != undefined\n  }\n\n  hasAnyTag(tags: string[]): boolean {\n    for (let tag of tags) {\n      if (this.hasTag(tag)) return true\n    }\n    return false\n  }\n\n  isFiltered(filters: FilterSetting[]): boolean {\n    for (let filter of filters) {\n      if (this.hasTag(filter.tag) && filter.strictness == 2) {\n        return true\n      }\n      if (this.hasTag(filter.tag) && this.hasTag('extreme') && filter.strictness == 1) {\n        return true\n      }\n    }\n    return false\n  }\n\n  equals(c: Card) {\n    return this.id == c.id\n  }\n\n  copy(): Card {\n    let card = new Card({\n      id: this.id,\n      name: this.name,\n      thumb: this.thumb,\n      description: this.description,\n      transformation: this.transformation,\n      subcards: this._subcards,\n      levels: this.levels,\n      level: this._level,\n      intensity: this._intensity,\n      type: this.type,\n      hue: this.hue,\n      artist: this.artist,\n      family: this._family,\n      parent: this._parent,\n      tags: this.tags\n    })\n    return card\n  }\n\n  toJSON() {\n    return serialize(this)\n  }\n}\n","<template>\n  <div class=\"dice-view\" :class=\"{'locked-dice': dice.locked}\" :style=\"cssVars\" @click=\"dice.roll()\">\n    <p>{{ dice.value }} / {{ dice.max }}</p>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Card from \"../cards/Card\"\nimport Dice from \"@/Dice\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton\n  },\n  props: {\n    dice: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--border-color': 'black',\n      }\n    }\n  }\n})\nexport default class DiceView extends Vue {\n  dice!: Dice\n}\n</script>\n\n<style lang=\"scss\">\n.dice-view {\n  background: #fff0e8;\n  color: #111;\n  font-size: 22px;\n  font-weight: bold;\n  text-align: center;\n  border: 3px solid black;\n  border-radius: $border-radius;\n  box-sizing: border-box;\n  padding: 0 0;\n  cursor: pointer;\n  user-select: none;\n  height: $dice-size;\n  width: $dice-size;\n\n  // Align content vertically\n  display: table;\n  p {\n    display: table-cell;\n    vertical-align: middle;\n  }\n\n  backface-visibility: hidden;\n  transition: transform 0.2s, border-color 0s;\n  transform-origin: top;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n  &:active {\n    border-color: #efa200;\n    color: #efa200;\n  }\n}\n\n.locked-dice {\n  color: #222;\n  background: #777068;\n  cursor: default;\n\n  &:hover {\n    transform: scale(1);\n  }\n\n  &:active {\n    border-color: var(--border-color);\n    color: #222;\n  }\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Card from \"../cards/Card\"\nimport Dice from \"@/Dice\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton\n  },\n  props: {\n    dice: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--border-color': 'black',\n      }\n    }\n  }\n})\nexport default class DiceView extends Vue {\n  dice!: Dice\n}\n","import { render } from \"./DiceView.vue?vue&type=template&id=7289087b\"\nimport script from \"./DiceView.vue?vue&type=script&lang=ts\"\nexport * from \"./DiceView.vue?vue&type=script&lang=ts\"\n\nimport \"./DiceView.vue?vue&type=style&index=0&id=7289087b&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"dialogue-status-card window\" :class=\"{'simple': title !== undefined}\">\n    <!--<div class=\"text\" v-html=\"game.currentDialogue\">\n    </div>-->\n    <ChatView class=\"text\" :text=\"game.currentDialogue\"></ChatView>\n    <div v-if=\"title !== undefined\" style=\"grid-area: r;\">\n      <h1>{{ title }}</h1>\n    </div>\n    <template v-else>\n      <div class=\"round-counter\">\n        <h3 v-if=\"game.round.value > 0\">{{ game.roundString }}</h3>\n        <h1 v-else style=\"margin: 0; padding: 0;\">Ditzy Dice</h1>\n      </div>\n      <div v-if=\"game.round.value > 0 && game.stageId !== 'bonus'\" class=\"bonus-rolls\">\n        <h3>Bonus rolls: {{ game.state.bonusRolls.value }} / {{ game.state.bonusRolls.max }}</h3>\n      </div>\n      <div v-if=\"game.state.cardsToPick > 0\" class=\"cards-to-pick\">\n        <h3>Picked {{ game.state.cardsPickedThisRound }} of {{ game.state.cardsToPick }} cards</h3>\n      </div>\n    </template>\n    <div class=\"buttons\">\n      <template v-for=\"button in game.buttons\" v-bind:key=\"button\">\n        <TextButton @click=\"button.fun()\">\n          <p style=\"margin: 0;\">{{ button.label }}</p>\n        </TextButton>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Menu from \"@/Menu\"\nimport ChatView from \"@/components/ChatView.vue\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton, ChatView\n  },\n  props: {\n    menu: Object,\n    title: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  }\n})\nexport default class DialogueStatusCard extends Vue {\n  menu!: Menu\n  title!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .dialogue-status-card {\n    display: grid;\n    grid-gap: 5px;\n    grid-template-rows: 30px 30px 1fr 60px;\n    grid-template-columns: 2fr 2fr 1fr minmax(150px, 2fr);\n    grid-template-areas:\n      \"r r . b\"\n      \"p p . b\"\n      \"t t t t\"\n      \"n n n n\";\n\n    //white-space: pre-wrap;\n\n    @media only screen and (max-width: 1000px){\n      grid-template-rows: 25px 25px 1fr 60px;\n      grid-template-columns: 1fr 1fr minmax(100px, 1fr);\n      grid-template-areas:\n      \"r r b\"\n      \"p p b\"\n      \"t t t\"\n      \"n n n\";\n    }\n\n    .text {\n      grid-area: t;\n      padding-top: 10px;\n    }\n\n    .buttons {\n      grid-area: n;\n    }\n\n    .round-counter {\n      grid-area: r;\n    }\n\n    .cards-to-pick {\n      grid-area: p;\n    }\n\n    .bonus-rolls {\n      grid-area: b;\n    }\n  }\n\n  .simple {\n    grid-template-rows: 50px 1fr auto;\n    grid-template-columns: 2fr 2fr 1fr;\n    grid-template-areas:\n      \"r r r\"\n      \"t t t\"\n      \"n n n\";\n\n    @media only screen and (max-width: 1140px){\n      grid-template-rows: 50px 1fr 50px;\n      grid-template-columns: 2fr 2fr 1fr;\n      grid-template-areas:\n      \"r r r\"\n      \"t t t\"\n      \"n n n\";\n    }\n  }\n\n  .buttons {\n    display: flex;\n    flex-wrap: wrap;\n    background-color: $component-background-color;\n    border-radius: $border-radius;\n    border: 1px solid black;\n\n    .text-button {\n      flex: 1;\n      min-width: 100px;\n      margin: 5px 0 5px 5px;\n      border: $component-border-style;\n      border-radius: $border-radius;\n\n      &:first-child {\n        //margin-left: 0;\n      }\n\n      &:last-child {\n        margin-right: 5px;\n      }\n    }\n  }\n\n  h1, h2, h3 {\n    margin: 0;\n  }\n</style>\n","<template>\n  <BlushList class=\"chat-view\" :style=\"cssVars\">\n    <div class=\"chat-box\">\n      <div v-for=\"t in lines\" class=\"chat-item\" :class=\"t.name\">\n        <div class=\"chat-bubble\" v-html=\"t.text\"></div>\n        <div class=\"profile-image\"></div>\n      </div>\n    </div>\n  </BlushList>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport ChatMessage from \"@/ChatMessage\"\n\n@Options({\n  components: {\n    BlushList\n  },\n  props: {\n    lines: Object\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    },\n    cssVars() {\n      return {\n        '--devil-image': 'url(' + require('@/assets/devil-512px.webp') + ')',\n        '--player-image': 'url(' + require('@/assets/randomPortrait.webp') + ')'\n      }\n    }\n  }\n})\nexport default class ChatView extends Vue {\n  lines!: ChatMessage[]\n}\n</script>\n\n<style lang=\"scss\">\n.chat-box {\n  strong {\n  }\n\n  & div p {\n    &:first-child {\n      margin-top: 0;\n    }\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n}\n\n</style>\n\n<style scoped lang=\"scss\">\n\n.chat-view {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.chat-item {\n  display: grid;\n  grid-template-columns: 1fr auto;\n  grid-gap: 10px;\n}\n\n.chat-bubble {\n  position: relative;\n  padding: 10px 10px;\n  border-radius: $border-radius * 2;\n}\n\n.profile-image {\n  width: 50px;\n  height: 50px;\n  border-radius: $border-radius;\n  border: 1px solid white;\n  background-size: cover;\n  background-color: white;\n  box-sizing: border-box;\n}\n\n.demon {\n  margin: 10px 10px 10px 20%;\n\n  .profile-image {\n    background-image: var(--devil-image);\n  }\n\n  .chat-bubble {\n    background-color: #660010;\n    border-top-right-radius: 0;\n  }\n}\n\n.narrator {\n  grid-template-columns: 1fr;\n  margin: 10px 7% 10px 7%;\n  text-align: center;\n\n  .profile-image {\n    display: none;\n  }\n\n  .chat-bubble {\n    background-color: rgba(#ffffff, 0.75);\n    color: black;\n  }\n}\n\n.player {\n  grid-template-columns: auto 1fr;\n  margin: 10px 20% 10px 10px;\n\n  .profile-image {\n    grid-column: 1;\n    grid-row: 1;\n    background-image: var(--player-image);\n  }\n\n  .chat-bubble {\n    background-color: #0a3d63;\n    border-bottom-left-radius: 0;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"blush-list\">\n    <div class=\"content\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n  },\n  props: {\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BlushList extends Vue {\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.blush-list {\n  box-sizing: border-box;\n  height: 100%;\n  overflow-y: auto;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  background-color: $component-background-color;\n\n  p {\n    margin: 0;\n  }\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n  },\n  props: {\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BlushList extends Vue {\n}\n","import { render } from \"./BlushList.vue?vue&type=template&id=4ad23e39&scoped=true\"\nimport script from \"./BlushList.vue?vue&type=script&lang=ts\"\nexport * from \"./BlushList.vue?vue&type=script&lang=ts\"\n\nimport \"./BlushList.vue?vue&type=style&index=0&id=4ad23e39&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-4ad23e39\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport ChatMessage from \"@/ChatMessage\"\n\n@Options({\n  components: {\n    BlushList\n  },\n  props: {\n    lines: Object\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    },\n    cssVars() {\n      return {\n        '--devil-image': 'url(' + require('@/assets/devil-512px.webp') + ')',\n        '--player-image': 'url(' + require('@/assets/randomPortrait.webp') + ')'\n      }\n    }\n  }\n})\nexport default class ChatView extends Vue {\n  lines!: ChatMessage[]\n}\n","import { render } from \"./ChatView.vue?vue&type=template&id=2a2554f0&scoped=true\"\nimport script from \"./ChatView.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatView.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatView.vue?vue&type=style&index=0&id=2a2554f0&lang=scss\"\nimport \"./ChatView.vue?vue&type=style&index=1&id=2a2554f0&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-2a2554f0\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Menu from \"@/Menu\"\nimport ChatView from \"@/components/ChatView.vue\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton, ChatView\n  },\n  props: {\n    menu: Object,\n    title: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  }\n})\nexport default class DialogueStatusCard extends Vue {\n  menu!: Menu\n  title!: string\n}\n","import { render } from \"./DialogueStatusCard.vue?vue&type=template&id=6f0fcc3e&scoped=true\"\nimport script from \"./DialogueStatusCard.vue?vue&type=script&lang=ts\"\nexport * from \"./DialogueStatusCard.vue?vue&type=script&lang=ts\"\n\nimport \"./DialogueStatusCard.vue?vue&type=style&index=0&id=6f0fcc3e&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-6f0fcc3e\"\n\nexport default script","<template>\n  <div class=\"card-hand-window cards-wrapper drawn-cards\">\n    <div class=\"label-wrapper\">\n      <span class=\"label-row\"><slot></slot></span>\n    </div>\n    <div class=\"cards\">\n      <template v-for=\"card in deck.cards\" v-bind:key=\"card\">\n        <PlayingCard :card=\"card\" :class=\"{'scaled': card.scale}\" @click=\"toggleScale(card); game.clickCard(card);\"></PlayingCard>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport Deck from \"@/cards/Deck\"\n\n@Options({\n  components: {\n    PlayingCard\n  },\n  props: {\n    menu: Object,\n    deck: Object,\n    label: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  }\n})\nexport default class CardHandWindow extends Vue {\n  deck!: Deck\n  menu!: Menu\n  label: string = \"\"\n  scaledCard: Card = new Card({})\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .card-hand-window {\n    //z-index: 10;\n    background-color: rgba($component-background-color, 0.5);\n    position: relative;\n  }\n\n  .cards-wrapper {\n    overflow-x: auto;\n    overflow-y: visible;\n\n    border: 3px solid black;\n    border-radius: $border-radius;\n  }\n\n  .cards {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(30px, max-content));\n    grid-auto-columns: 30px;\n    grid-template-rows: 200px;\n    grid-auto-flow: column;\n    grid-gap: 10px;\n    transform: scale(1);\n    transform-origin: top left;\n\n    // The last card sticks out with a width that depends on card count and screen width.\n    // This is difficult to calculate, so we just make sure there is always space for one entire card extra.\n    width: calc(100% - #{$playing-card-width});\n\n    @media screen and (max-width: $mobile-width) {\n      grid-template-columns: repeat(auto-fit, minmax($playing-card-width * 0.5, max-content));\n      grid-auto-columns: $playing-card-width * 0.5;\n    }\n  }\n\n  .scaled {\n    transform: scale(1.06);\n    z-index: 2;\n    border-color: #939393;\n  }\n\n  .label-wrapper {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    h1, h2, h3, h4, p {\n      margin: 0;\n    }\n  }\n\n  .label-row {\n    display: flex;\n  }\n\n  .label {\n    padding: 2px 5px;\n    border-top-right-radius: $border-radius;\n    border-top: 2px solid black;\n    border-right: 2px solid black;\n    background-color: $window-background-color;\n\n    display: grid;\n    grid-auto-flow: column;\n    grid-gap: 5px;\n    margin-right: 5px;\n  }\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport Deck from \"@/cards/Deck\"\n\n@Options({\n  components: {\n    PlayingCard\n  },\n  props: {\n    menu: Object,\n    deck: Object,\n    label: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  }\n})\nexport default class CardHandWindow extends Vue {\n  deck!: Deck\n  menu!: Menu\n  label: string = \"\"\n  scaledCard: Card = new Card({})\n}\n","import { render } from \"./CardHandWindow.vue?vue&type=template&id=f487b2ac&scoped=true\"\nimport script from \"./CardHandWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./CardHandWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./CardHandWindow.vue?vue&type=style&index=0&id=f487b2ac&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-f487b2ac\"\n\nexport default script","<template>\n  <div class=\"dialogue-card window\" :class=\"{'no-title': title === undefined}\">\n    <ChatView class=\"text\" :lines=\"game.currentDialogue\">\n    </ChatView>\n    <div v-if=\"title !== undefined\" style=\"grid-area: r;\">\n      <h1>{{ title }}</h1>\n    </div>\n    <div class=\"buttons\">\n      <template v-for=\"button in game.buttons\" v-bind:key=\"button\">\n        <TextButton class=\"next-button\" @click=\"button.fun()\" v-html=\"button.label\">\n        </TextButton>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport globalState from '@/store/globalState'\nimport SaveSystem from '@/SaveSystem'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport Menu from \"@/Menu\"\nimport ChatView from \"@/components/ChatView.vue\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton, ChatView\n  },\n  props: {\n    menu: Object,\n    title: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class DialogueCard extends Vue {\n  isLoaded = false\n  menu!: Menu\n  title!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .dialogue-card {\n    display: grid;\n    grid-gap: 10px;\n    grid-template-rows: auto 1fr minmax(60px, auto);\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      \"r\"\n      \"t\"\n      \"n\";\n    padding: 10px;\n\n    .text {\n      grid-area: t;\n    }\n\n    .buttons {\n      grid-area: n;\n    }\n\n    .round-counter {\n      grid-area: r;\n    }\n\n    .cards-to-pick {\n      grid-area: p;\n    }\n\n    .bonus-rolls {\n      grid-area: b;\n    }\n  }\n\n  .no-title {\n    grid-template-areas:\n      \"t\"\n      \"t\"\n      \"n\";\n  }\n\n  .speaker-profile {\n    grid-area: b;\n\n    box-sizing: border-box;\n    width: 100%;\n    border: 1px solid white;\n    border-radius: 8px;\n  }\n\n  .buttons {\n    display: flex;\n    flex-wrap: wrap;\n    background-color: $component-background-color;\n    border-radius: $border-radius;\n    border: 1px solid black;\n\n    .next-button {\n      flex: 1;\n      padding: 0;\n      margin: 3px 0 3px 3px;\n      border: $component-border-style;\n      border-radius: $border-radius;\n      text-align: center;\n      min-width: 150px;\n      min-height: 50px;\n\n      &:first-child {\n        //margin-left: 0;\n      }\n\n      &:last-child {\n        margin-right: 3px;\n      }\n    }\n  }\n\n  h1, h2, h3 {\n    margin: 0;\n  }\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport globalState from '@/store/globalState'\nimport SaveSystem from '@/SaveSystem'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport Menu from \"@/Menu\"\nimport ChatView from \"@/components/ChatView.vue\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton, ChatView\n  },\n  props: {\n    menu: Object,\n    title: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class DialogueCard extends Vue {\n  isLoaded = false\n  menu!: Menu\n  title!: string\n}\n","import { render } from \"./DialogueCard.vue?vue&type=template&id=70747209&scoped=true\"\nimport script from \"./DialogueCard.vue?vue&type=script&lang=ts\"\nexport * from \"./DialogueCard.vue?vue&type=script&lang=ts\"\n\nimport \"./DialogueCard.vue?vue&type=style&index=0&id=70747209&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-70747209\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport CardHandWindow from \"@/components/CardHandWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, DiceView, DialogueCard, DialogueStatusCard, CardHandWindow\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    },\n    handDeck: function (): Deck {\n      if (this.showActivatedCards) return this.game.player.hand.copy().addDeck(this.game.pickedCards)\n      return this.game.pickedCards\n    }\n  }\n})\nexport default class GameScreen extends Vue {\n  menu!: Menu\n  scaledCard: Card = new Card({})\n  showActivatedCards: boolean = false\n}\n","import { render } from \"./GameScreen.vue?vue&type=template&id=5bfce8f7&scoped=true\"\nimport script from \"./GameScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./GameScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./GameScreen.vue?vue&type=style&index=0&id=5bfce8f7&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-5bfce8f7\"\n\nexport default script","import Game from \"@/Game\"\nimport util from \"@/util\"\n\nexport default class Dice {\n  private _value: number = 1\n  public max: number\n  private _locked: boolean = false\n  private isRolling: boolean = false\n  private valueUsed: boolean = true // True when dice has been rolled but its value has not yet been used\n\n  private game: Game\n\n  // @ts-ignore\n  constructor(max: number, game: Game = undefined) {\n    this.max = max\n    this.game = game\n  }\n\n  load(game: Game) {\n    this.game = game\n  }\n\n  /** Returns the dice value and marks this dice as used until it is rolled again. */\n  useValue(): number {\n    this.valueUsed = true\n    return this.value\n  }\n\n  get isUsed(): boolean {\n    return this.valueUsed\n  }\n\n  roll() {\n    if (this.isRolling || this.locked) return\n    this.isRolling = true\n    this.rollingDice(400)\n  }\n\n  private rollingDice(durationMs: number) {\n    let rolls = 9\n    let t0: number = performance.now()\n    const helper = (timestamp: number) => {\n      let timePassed = timestamp - t0\n      let fraction = 1 - util.clamp((timePassed / durationMs), 0, 1)\n      this._value = Math.round(fraction * rolls)\n\n      if (timePassed < durationMs) {\n        requestAnimationFrame(helper)\n      } else {\n        this._value = Math.floor(Math.random() * this.max) + 1\n        this.valueUsed = false\n        this.game.notifyDiceRoll(this.value)\n        this.isRolling = false\n      }\n    }\n    requestAnimationFrame(helper)\n  }\n\n  set locked(value: boolean) {\n    this._locked = value\n  }\n\n  get locked(): boolean {\n    return this._locked || !this.isUsed\n  }\n\n  get value(): number {\n    return this._value\n  }\n\n  get rolling(): boolean {\n    return this.isRolling\n  }\n\n  /*static findDuplicates(values: number[]): number[][] {\n    return []\n  }*/\n}\n","import MarkdownIt from \"markdown-it\"\n\nexport default class GameButton {\n  private _label!: string\n  public fun: () => any\n\n  constructor(label: string, fun: () => any) {\n    this.label = label\n    this.fun = fun\n  }\n\n  setLabel(label: string): GameButton {\n    this.label = label\n    return this\n  }\n\n  set label(value: string) {\n    let md = new MarkdownIt()\n    this._label = md.render(value)\n  }\n\n  get label(): string {\n    return this._label\n  }\n}\n","import Game from \"@/Game\"\nimport Card from \"@/cards/Card\"\nimport GameButton from \"@/GameButton\"\nimport { reactive } from \"vue\"\nimport ChatMessage from \"@/ChatMessage\"\n\nexport default abstract class GameStage {\n  public id: string = \"stage\"\n  protected game: Game\n  protected args: any = {}\n  protected _nextStage: GameStage | undefined\n  protected _allowDiceBuy: boolean = false\n  protected _allowManaBuy: boolean = true\n  public activeComponent: string = \"GameScreen\"\n\n  public endpoints: { [key: string]: () => any } = {}\n\n  private state: any = reactive({\n    buttons: []\n  })\n\n  protected nextButton: GameButton = new GameButton(\"Next\", () => this.nextStage())\n\n  protected constructor(game: Game, id: string) {\n    this.game = game\n    this.id = id\n  }\n\n  onStart() {}\n\n  onResume() {}\n\n  onEnd() {}\n\n  onDiceRoll(values: number[]) {}\n\n  onCardClick(card: Card) {}\n\n  link(stage: GameStage): GameStage {\n    this._nextStage = stage\n    return stage\n  }\n\n  resumeStage(stage: GameStage) {\n    this.game.setStage(stage)\n    stage.onResume()\n  }\n\n  nextStage(stage: GameStage | undefined = undefined, args: any = undefined) {\n    this.onEnd()\n    if (stage != undefined) {\n      this.gotoNext(stage, args)\n    } else if (this._nextStage != undefined) {\n      this.gotoNext(this._nextStage, args)\n    } else {\n      this.game.setStage(this)\n    }\n  }\n\n  allowDiceBuy(): boolean {\n    return this._allowDiceBuy\n  }\n\n  allowManaBuy(): boolean {\n    return this._allowManaBuy\n  }\n\n  createMessage(text: string) {\n    this.game.print(text)\n  }\n\n  sendMessage(msg: ChatMessage) {\n    this.game.sendMessage(msg)\n  }\n\n  private gotoNext(stage: GameStage, args: any = undefined) {\n    this.game.setStage(stage)\n    stage.args = args\n    stage.onStart()\n  }\n\n  get buttons(): GameButton[] {\n    return this.state.buttons\n  }\n\n  set buttons(value: GameButton[]) {\n    this.state.buttons = value\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport GameButton from \"@/GameButton\"\n\nexport default class TextStage extends GameStage {\n  private myText: string\n\n  constructor(game: Game, text: string = \"\") {\n    super(game, \"text\")\n    this.myText = text\n    this.buttons = [this.nextButton]\n  }\n\n  onStart() {\n    this.createMessage(this.myText)\n  }\n}\n","import Deck from \"@/cards/Deck\"\nimport ValueRange from \"@/effects/ValueRange\"\nimport Ability from \"@/Ability\"\n\nexport default class Player {\n  public hand: Deck = new Deck()\n  private mana: number = 0\n  public abilities: Ability[] = []\n\n  useMana(cost: number): boolean {\n    if (cost <= this.mana) {\n      this.mana -= cost\n      return true\n    }\n    return false\n  }\n\n  addMana(amount: number) {\n    this.mana += amount\n  }\n\n  getMana(): number {\n    return this.mana\n  }\n}\n","import Game from \"@/Game\"\nimport GameStage from \"@/stages/GameStage\"\n\nexport default abstract class GameMode {\n  public readonly game: Game\n\n  constructor(game: Game) {\n    this.game = game\n  }\n\n  abstract get firstStage(): GameStage\n\n  start() {\n    this.firstStage.onStart()\n  }\n}\n","import Game from \"@/Game\"\nimport util from \"@/util\"\nimport ValueMod from \"@/effects/ValueMod\"\n\nexport default class Ability {\n  private name: string = \"\"\n  private cost: { value: number; resource: string } // resource: mana, bonus\n  private fun: (game: Game) => any\n  private available: (game: Game) => boolean\n  private secret: (game: Game) => boolean\n  private visible: (game: Game) => boolean\n\n  constructor(name: string, cost: { value: number; resource: string },\n    fun: (game: Game) => any = game => {},\n    isAvailable: (game: Game) => boolean = game => true) {\n\n    this.name = name\n    this.cost = cost\n    this.fun = fun\n    this.available = isAvailable\n    this.secret = game => false\n    this.visible = game => true\n  }\n\n  setFun(fun: (game: Game) => any): Ability {\n    this.fun = fun\n    return this\n  }\n\n  setAvailableFun(isAvailable: (game: Game) => boolean): Ability {\n    this.available = isAvailable\n    return this\n  }\n\n  setSecretFun(isSecret: (game: Game) => boolean): Ability {\n    this.secret = isSecret\n    return this\n  }\n\n  setVisibleFun(isVisible: (game: Game) => boolean): Ability {\n    this.visible = isVisible\n    return this\n  }\n\n  activate(game: Game) {\n    if (this.isAvailable(game)) {\n      if (this.cost.resource == \"mana\") game.player.useMana(this.cost.value)\n      if (this.cost.resource == \"bonus\") game.bonusRolls.addValue(-this.cost.value)\n\n      this.fun(game)\n    }\n  }\n\n  isAvailable(game: Game): boolean {\n    return this.available(game) && (\n      (this.cost.resource == \"mana\" && this.cost.value <= game.player.getMana()) ||\n      (this.cost.resource == \"bonus\" && game.bonusRolls.value - this.cost.value <= game.bonusRolls.max)\n    )\n  }\n\n  isVisible(game: Game): boolean {\n    return this.visible(game) && (this.isAvailable(game) || (!this.isAvailable(game) && !this.secret(game)))\n  }\n\n  get title(): string {\n    return `${this.name}`\n  }\n\n  get subtitle(): string {\n    if (this.cost.value > 0) return `Pay ${this.cost.value} ${this.cost.resource}`\n    else if (this.cost.value < 0) return `Gain ${-this.cost.value} ${this.cost.resource}`\n    return ``\n  }\n\n  static buyMana(): Ability {\n    let a = new Ability(\"+2 mana\", { value: -1, resource: \"bonus\" },\n      game => {\n        game.player.addMana(2)\n      },\n      game => {\n        return game.allowManaBuy()\n      }\n    ).setVisibleFun(game => {\n      return game.allowManaBuy()\n    })\n    a.secret = game => true\n    return a\n  }\n\n  static buyDice(): Ability {\n    return new Ability(\"Buy dice\", { value: 2, resource: \"mana\" },\n      game => {\n        game.diceCount += 1\n      },\n      game => {\n        return game.allowDiceBuy()\n      }\n    )\n  }\n\n  static sellDice(): Ability {\n    let a = new Ability(\"Sell dice\", { value: -2, resource: \"mana\" },\n      game => {\n        game.diceCount -= 1\n      },\n      game => {\n        return game.allowDiceSale()\n      }\n    )\n    return a\n  }\n\n  static readonly PICK_ANY_CARD_COST: number = 7\n  static pickAnyCard(cardPickFunction: (diceRolls: number[]) => any, deckSize: number, fixedCost: number = -1): Ability {\n    let cost = Ability.PICK_ANY_CARD_COST + (deckSize - Ability.PICK_ANY_CARD_COST)\n    cost = util.clamp(cost, Ability.PICK_ANY_CARD_COST, 12)\n    if (fixedCost >= 0) cost = fixedCost\n\n    let a = new Ability(\"Pick Any\",\n      { value: cost, resource: \"mana\" },\n      game => {\n        let highlights = []\n        for (let i = 0; i < deckSize; i++) {\n          highlights.push(i + 1)\n        }\n        cardPickFunction(highlights)\n      }).setAvailableFun(\n      game => {\n        return game.diceReadyCount + game.diceRollingCount == 0 && !game.diceAreLocked()\n      })\n\n    return a\n  }\n\n  static addRound(): Ability {\n    let a = new Ability(\"Add Round\", { value: 7, resource: \"mana\" }).setFun(game => {\n      game.round.maxMods[util.uuid()] = new ValueMod(1, \"add\")\n    }).setAvailableFun(\n      game => {\n        return game.round.max < Game.MAX_ROUNDS\n      }\n    ).setVisibleFun(game => {\n      return game.round.max < Game.MAX_ROUNDS\n    })\n    return a\n  }\n\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Dice from \"@/Dice\"\nimport Card from \"@/cards/Card\"\nimport Deck from \"@/cards/Deck\"\nimport PickStage from \"@/stages/PickStage\"\nimport HighlightStage from \"@/stages/HighlightStage\"\nimport Ability from \"@/Ability\"\n\nexport default class IntensityStage extends GameStage {\n  private pickStage!: PickStage\n  private parentCard!: Card\n  private deck: Deck = new Deck([])\n  private done: boolean = false\n  private abilities: Ability[] = []\n\n  constructor(game: Game) {\n    super(game, \"intensity\")\n  }\n\n  onStart() {\n    this.pickStage = this.args.pickStage\n    this.parentCard = this.args.parentCard\n    this._allowDiceBuy = true\n    this._allowManaBuy = (this.args.allowManaBuy != undefined) ? this.args.allowManaBuy : true\n    //this.text = `demon: Ah, you got ${this.parentCard.name}.`\n    this.game.diceCount = 1\n    if (this.parentCard.levels >= 4) {\n      this.game.diceCount += 1\n    }\n    if (this.parentCard.type == 'numeric') {\n      this.createMessage(this.game.dialogue['intensityStage'])\n    } else {\n      this.createMessage(this.game.dialogue['intensityStageSelection'])\n      /*if (this.parentCard.levels >= 5) {\n        this.game.diceCount += 1\n        this.createMessage(`demon: Since this card is mostly just personal preference anyways, I'll let you have an extra dice for free.`)\n      }*/\n    }\n    this.done = false\n\n    this.deck = new Deck(this.parentCard.subcards).sortByLevel()\n    this.game.drawnCards = this.deck\n    this.game.diceSize = this.deck.size()\n\n    this.abilities = [\n      Ability.buyMana(),\n      Ability.sellDice(),\n      Ability.buyDice(),\n      Ability.pickAnyCard((values: number[]) => this.pickCard(values), this.deck.size())\n    ]\n\n    this.game.abilities = this.abilities\n  }\n\n  onDiceRoll(values: number[]) {\n    this.pickCard(values)\n  }\n\n  pickCard(values: number[]) {\n    if (this.done) return\n    this.done = true\n    this.game.lockDice(true)\n\n    let intensities: Deck = this.deck.pick(values)\n    this.nextStage(new HighlightStage(this.game), { pickStage: this.pickStage, availableCards: this.deck, highlights: values, allowManaBuy: this._allowManaBuy })\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Dice from \"@/Dice\"\nimport Card from \"@/cards/Card\"\nimport Deck from \"@/cards/Deck\"\nimport PickStage from \"@/stages/PickStage\"\nimport IntensityStage from \"@/stages/IntensityStage\"\nimport util from \"@/util\"\n\nexport default class HighlightStage extends GameStage {\n  private pickStage!: PickStage\n  private availableCards: Deck = new Deck([])\n  private highlights: number[] = []\n  private highlightedCards: Deck = new Deck([])\n  private done: boolean = false\n\n  constructor(game: Game) {\n    super(game, \"highlight\")\n  }\n\n  onStart() {\n    this.pickStage = this.args.pickStage\n    this.availableCards = this.args.availableCards\n    this.highlights = this.args.highlights\n\n    this.highlightedCards = this.availableCards.pick(this.highlights)\n    this._allowManaBuy = (this.args.allowManaBuy != undefined) ? this.args.allowManaBuy : true\n    this._allowDiceBuy = (this.args.allowDiceBuy != undefined) ? this.args.allowDiceBuy : true\n    if (util.hasDuplicate(this.highlights)) {\n      this.createMessage(`Destiny calls! Some of your dice rolled the same, choose that card to gain mana for every extra dice.`)\n    }\n\n    for (let highlight of this.highlights) {\n      let card = this.availableCards.pick([highlight]).cards[0]\n      card.highlight += 1\n    }\n\n    this.done = false\n  }\n\n  onCardClick(card: Card) {\n    if (card.highlight > 0) {\n\n      if (card.highlight > 1) {\n        let manaGain = card.highlight - 1\n        this.createMessage(`You gained ${manaGain} mana.`)\n        this.game.player.addMana(manaGain)\n      }\n\n      for (let c of this.availableCards.cards) {\n        c.highlight = 0\n        c.scale = false\n      }\n      if (card.isParent) {\n        this.pickStage.deck.removeCard(card)\n        this.nextStage(new IntensityStage(this.game), { pickStage: this.pickStage, parentCard: card, allowDiceBuy: this._allowDiceBuy, allowManaBuy: this._allowManaBuy })\n      } else {\n        this.pickStage.deck.removeCard(card)\n        this.game.pickCard(card)\n        this.resumeStage(this.pickStage)\n      }\n    }\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Card from \"@/cards/Card\"\nimport Dice from \"@/Dice\"\nimport ValueMod from \"@/effects/ValueMod\"\nimport HighlightStage from \"@/stages/HighlightStage\"\nimport Deck from \"@/cards/Deck\"\nimport GameButton from \"@/GameButton\"\nimport util from \"@/util\"\nimport Epilogue from \"@/Epilogue\"\nimport Epilogues from \"@/Epilogues\"\nimport DialogueTree from \"@/DialogueTree\"\n\nexport default class EndStage extends GameStage {\n  private epilogue: Epilogue | undefined\n  private dialogue: DialogueTree | undefined\n\n  constructor(game: Game) {\n    super(game, \"end\")\n    this.activeComponent = \"HandView\"\n\n    this.endpoints.end = () => {\n      this.end()\n    }\n  }\n\n  onStart() {\n    this.game.pickedCards.sortByFamily()\n    this.game.menu.saveHand()\n\n    this.createMessage(this.game.dialogue['endStage'])\n    this.createYourNewLifeButton()\n  }\n\n  createYourNewLifeButton(overrideEnding: Epilogue | undefined = undefined) {\n    let fulfilledEpilogues: Epilogue[] = this.game.menu.endings?.chooseEpilogues(this.game.player.hand) || []\n    if (overrideEnding != undefined) {\n      fulfilledEpilogues = []\n      fulfilledEpilogues.push(overrideEnding)\n    }\n\n    this.buttons = []\n    for (let ep of fulfilledEpilogues) {\n      this.buttons.push(new GameButton(ep.title, () => {\n        this.epilogue = ep\n        this.dialogue = this.epilogue.dialogueTree\n        if (overrideEnding != undefined) this.dialogue.ignoreRequirements = true\n        this.dialogue.start(this.game.player.hand, this)\n        this.game.title = this.epilogue.title\n      }))\n    }\n\n    if (this.buttons.length == 0) {\n      this.createMessage(`ERROR! No epilogues could be loaded. Please report the following to Gardamuse.`)\n      this.createMessage(`DEBUG! Available epilogues: ${this.game.menu.endings?.epilogues.length}`)\n      this.createMessage(`DEBUG! Fulfilled epilogues: ${fulfilledEpilogues}`)\n      this.buttons.push(new GameButton(\"Back to Main Menu\", () => {\n        this.end()\n      }))\n    }\n  }\n\n  end() {\n    let epilogueId = this.epilogue!.id\n    let endingId = this.dialogue!.currentSegment.id\n    endingId = endingId.substring(0, endingId.length - 4) // Remove \".end\" from the segment id\n    this.game.menu.unlockEnding(epilogueId, endingId)\n    this.game.title = this.dialogue?.currentSegment.endpointLabel || \"\"\n    this.buttons = [\n      new GameButton(\"Save Screenshot\", () => { util.screenshot('cards', `hand-${this.game.pickedCards.size()}`) }),\n      new GameButton(\"Back to Menu\", () => { this.game.end() })\n    ]\n  }\n}\n","import MarkdownIt from \"markdown-it\"\n\nexport default class ChatMessage {\n  name: string\n  text: string\n\n  constructor(name: string = \"\", text: string = \"\") {\n    this.name = name\n    this.text = text\n  }\n\n  static parseLine(line: string): ChatMessage {\n    let md = new MarkdownIt({ breaks: true })\n    let name = \"narrator\"\n    let text = line\n      .replace(/[\\u2018\\u2019]/g, \"'\") // Replace curly singly quotes\n      .replace(/[\\u201C\\u201D]/g, '\"') // Replace curly double quotes\n\n    if (line.startsWith(\"demon: \")) {\n      name = \"demon\"\n      text = line.replace(\"demon: \", \"\")\n    }\n    if (line.startsWith(\"player: \")) {\n      name = \"player\"\n      text = line.replace(\"player: \", \"\")\n    }\n\n    return new ChatMessage(name, text.split(\"\\n\").map(t => md.render(t)).join(\"\\n\"))\n  }\n\n  static parseLines(text: string): ChatMessage[] {\n    let messages = text.split(/\\n\\n/)\n      .filter((line: string) => { return line.length > 0 })\n      .map((line: string) => ChatMessage.parseLine(line))\n\n    return messages\n  }\n}\n","import Deck from \"@/cards/Deck\"\nimport { serializable, serialize } from \"serializr\"\n\nexport default class Requirement {\n  @serializable\n  mode: string = \"or\" // or, and\n  @serializable\n  private args: string[] = []\n  @serializable\n  private operator: string = \">\"\n  @serializable\n  private intensity: number = 0\n\n  private fun: (deck: Deck, args: string[]) => number = Requirement.intensitySum\n\n  constructor(mode: string, args: string[], operator: string, intensity: number, fun: (deck: Deck, args: string[]) => number = Requirement.intensitySum) {\n    this.mode = mode\n    this.args = args\n    this.operator = operator\n    this.intensity = intensity\n    this.fun = fun\n  }\n\n  static functions(name: string): (deck: Deck, args: string[]) => number {\n    let availableFunctions: { [key: string]: (deck: Deck, args: string[]) => number } = {\n      sum: Requirement.intensitySum\n    }\n    return availableFunctions[name]\n  }\n\n  isFulfilled(deck: Deck): boolean {\n    return this.scoreIsFulfilled(this.intensityScore(deck))\n  }\n\n  private scoreIsFulfilled(score: number): boolean {\n    if (this.operator == \"<\") {\n      return score < this.intensity\n    } else if (this.operator == \"<=\") {\n      return score <= this.intensity\n    } else if (this.operator == \"==\") {\n      return score == this.intensity\n    } else if (this.operator == \">=\") {\n      return score >= this.intensity\n    } else if (this.operator == \">\") {\n      return score > this.intensity\n    }\n    console.error(`Requirement operator \"${this.operator}\" was not recognized.`)\n    return false\n  }\n\n  intensityScore(deck: Deck): number {\n    return this.fun(deck, this.args)\n  }\n\n  private static intensitySum(deck: Deck, idsOrTags: string[]): number {\n    let refDeck = new Deck(Deck.referenceAllLevels())\n\n    let sum = 0\n    for (let idOrTag of idsOrTags) {\n      if (Deck.isTag(idOrTag)) { // Id may be a tag or family name\n        let cardsWithTag = deck.onlyTag(idOrTag).cards\n        for (let card of cardsWithTag) {\n          sum += Math.max(card.intensity, 1)\n        }\n      } else if (Deck.lookup(idOrTag) != undefined) { // Id may be for card\n        let card = deck.getCardById(idOrTag)\n\n        if (card == undefined) {\n          // Id may be for a parent card, in that case, count the highest available subcard\n          card = deck.pack().getCardById(idOrTag)\n          if (card != undefined) sum += card.subcards[card.subcards.length - 1].intensity\n\n        } else {\n          sum += Math.max(card.intensity, 1)\n        }\n      } else {\n        // If it was not an ID, and there were no cards with this tag or family either\n        throw new Error(`Bad requirement \"${this.toString()}\", \"${idOrTag}\" is neither an id, tag or family.`)\n      }\n    }\n    return sum\n  }\n\n  /**\n   * Checks if a single or group of requirements is fulfilled.\n   * @param deck\n   * @param orGroup\n   */\n  public static orGroupFulfilled(deck: Deck, orGroup: Requirement[]): boolean {\n    let fulfilled = true\n    for (let req of orGroup) {\n      if (!req.isFulfilled(deck)) {\n        fulfilled = false\n        break\n      }\n    }\n    return fulfilled\n  }\n\n  /**\n   * Parses all requirements from a single requirements string.\n   * @param reqs\n   * @return orgroups A list of requirement-lists. Each requirement-list represents one OR-group.\n   */\n  public static parseRequirements(reqs: string): Requirement[][] {\n    let requirements = []\n\n    // Normalize: remove lowercase any newlines\n    reqs = reqs.toLowerCase().replace(/(\\r\\n|\\n|\\r)/gm, \" \")\n\n    // Create list where each entry is an OR term. Each OR term is a list of AND terms. Each AND term is a string.\n    let ors = reqs.split(/\\bor\\b/).map(or => or.split(/\\band\\b/))\n    for (let ands of ors) {\n      let mode = \"or\"\n      for (let [i, exp] of ands.entries()) {\n        if (i > 0) mode = \"and\"\n\n        exp = exp.trim()\n        let operator = this.getOperator(exp)\n        let left = this.getLeft(exp, operator)\n        let right = this.getRight(exp, operator)\n\n        let [fun, args] = this.stripFun(left)\n        //args = args.map((arg: string) => arg.replaceAll(\"\\\"\", \"\"))\n        args = args.map((arg: string) => arg.replace(/\"/g, \"\"))\n        //console.log(`\\t[${fun}]: [${args}] [${operator}] [${right}]`)\n        requirements.push(new Requirement(mode, args, operator, Number.parseInt(right), Requirement.functions(fun)))\n      }\n    }\n\n    return this.groupRequirements(requirements)\n  }\n\n  /**\n   * Groups a list of requirements into OR groups.\n   * @param reqs\n   * @private\n   */\n  private static groupRequirements(reqs: Requirement[]): Requirement[][] {\n    let requirements: Requirement[][] = []\n    let group = []\n    for (let req of reqs) {\n      if (req.mode == \"or\" && group.length > 0) {\n        requirements.push(group)\n        group = []\n      }\n      group.push(req)\n    }\n    requirements.push(group)\n\n    return requirements\n  }\n\n  /**\n   * Finds the function and arguments of the left side of an expression\n   * @param expression the left side, such as \"iq\" or \"sum(iq, bimbo)\"\n   * @private\n   */\n  private static stripFun(expression: string): any[] {\n    let funMatch = expression.match(/.*(?=\\()/) // Everything before first parenthesis\n    let fun\n    if (funMatch != null) fun = funMatch[0] // Lookup function name\n    else fun = \"\"\n\n    let args: string[] = [expression]\n    if (fun != \"\") {\n      //let expressionMatch = expression.match(/(?<=\\().*(?=\\))/)\n      let expressionMatch = expression.match(/\\(.*(?=\\))/)\n      if (expressionMatch != null) {\n        args = this.splitArgs(expressionMatch[0])\n        args[0] = args[0].replace(\"(\", \"\")\n      } else console.error(`Bad expression: ${expression}`)\n    }\n\n    return [fun, args]\n  }\n\n  private static splitArgs(args: string): string[] {\n    return args.split(\",\").map(arg => arg.trim())\n  }\n\n  private static getLeft(exp: string, operator: string): string {\n    return exp.split(operator)[0]?.trim()\n  }\n\n  private static getRight(exp: string, operator: string): string {\n    let e = exp.split(operator)[1]?.trim()\n    return e || \"0\"\n  }\n\n  private static getOperator(exp: string): string {\n    let operatorMatch = exp.match(/ > | >= | == | <= | < /)\n    let operator\n    if (operatorMatch == null) operator = \">=\"\n    else operator = operatorMatch[0].trim()\n    return operator\n  }\n\n  toString(): string {\n    return `${this.mode.toUpperCase()} [${this.args}] [${this.operator}] [${this.intensity}]`\n  }\n\n  toJSON() {\n    return serialize(this)\n  }\n\n}\n","import GameStage from \"@/stages/GameStage\"\nimport ChatMessage from \"@/ChatMessage\"\nimport Requirement from \"@/Requirement\"\nimport Deck from \"@/cards/Deck\"\nimport DialogueNode from \"@/DialogueNode\"\nimport GameButton from \"@/GameButton\"\nimport DialogueTree from \"@/DialogueTree\"\n\n/** A linear segment of a dialogue tree, consisting of one or several nodes. */\nexport default class DialogueSegment {\n  private nodes: ChatMessage[]\n  private currentNodeIndex: number = -1\n\n  public readonly id: string\n  /** If this node is selectable, title may be used to represent it on a button. */\n  public readonly title: string\n\n  public requirements: Requirement[][] = []\n  private optionIds: string[] = []\n  private optionSegments: DialogueSegment[] = []\n  private endpointId: string = \"\"\n  public endpointLabel: string = \"Next\"\n\n  constructor(messages: ChatMessage[], id: string, title: string = \"\", endpointId: string = \"\") {\n    this.id = id\n    this.title = title\n    this.nodes = messages\n    this.endpointId = endpointId\n\n    if (this.nodes == undefined || this.nodes.length == 0) {\n      this.nodes = [new ChatMessage()]\n      this.start()\n    }\n  }\n\n  /*copy(): DialogueSegment {\n    let segment = new DialogueSegment(this.nodes, this.id, this.title, this.endpointId)\n    segment.requirements = this.requirements\n    segment.optionIds = this.optionIds\n    segment.optionSegments = this.optionSegments\n    segment.endpointLabel = this.endpointLabel\n\n    segment.currentNodeIndex = this.currentNodeIndex\n    return segment\n  }*/\n\n  currentMessage(): ChatMessage {\n    let msg = this.nodes[this.currentNodeIndex]\n    return msg || new ChatMessage()\n  }\n\n  start() {\n    this.currentNodeIndex = 0\n  }\n\n  gotoNextNode() {\n    if (this.currentNodeIndex < this.nodes.length - 1) this.currentNodeIndex += 1\n  }\n\n  isStarted(): boolean {\n    return this.currentNodeIndex >= 0\n  }\n\n  isOnLastNode(): boolean {\n    return this.currentNodeIndex == this.nodes.length - 1\n  }\n\n  hasEndpoint(): boolean {\n    return this.endpointId != \"\"\n  }\n\n  getEndpoint(stage: GameStage): () => any {\n    let endpoint = stage.endpoints[this.endpointId]\n    if (endpoint != undefined) return endpoint\n    else throw Error(`Could not select option \"${this.id}\" because endpoint ${this.endpointId} is undefined.`)\n  }\n\n  linkOptions(lookupTable: {[id: string]: DialogueSegment}) {\n    this.optionSegments = []\n    for (let optionId of this.optionIds) {\n      if (lookupTable[optionId] == undefined) {\n        console.error(`The \"${this.id}\" node has an unknown option \"${optionId}\". It has been skipped.`)\n        continue\n      }\n      this.optionSegments.push(lookupTable[optionId])\n    }\n  }\n\n  get options(): DialogueSegment[] {\n    if (this.isOnLastNode() && this.hasEndpoint()) {\n      let end = new DialogueSegment([], `${this.id}.end`, `${this.endpointLabel}`, this.endpointId)\n      end.endpointLabel = this.endpointLabel\n      return [end]\n    } else if (this.isOnLastNode()) {\n      return this.optionSegments\n    }\n    return [this]\n  }\n\n  getFulfilledOptions(deck: Deck, ignoreRequirements: boolean = false): DialogueSegment[] {\n    return this.options.filter(segment => segment.isRequirementFulfilled(deck) || ignoreRequirements)\n  }\n\n  isRequirementFulfilled(deck: Deck): boolean {\n    if (this.requirements.length == 0) return true\n\n    for (let orgroup of this.requirements) {\n      if (Requirement.orGroupFulfilled(deck, orgroup)) return true\n    }\n    return false\n  }\n\n  length(): number {\n    return this.nodes.length\n  }\n\n  /**\n   * Parses one json node to a dialogue segment.\n   * @param state\n   * @private\n   */\n  public static parseSegment(state: any): DialogueSegment {\n    let id = state.id\n    let title = (state.title) ? state.title : \"Next\"\n    let messages = (state.text) ? ChatMessage.parseLines(state.text) : []\n    let optionIds = (state.options) ? state.options : []\n\n    let endpoint = (state.endpoint) ? state.endpoint : \"\"\n    let endpointFun = (endpoint.fun) ? endpoint.fun : endpoint\n    let endpointLabel = (endpoint.label) ? endpoint.label : \"Next\"\n\n    let segment = new DialogueSegment(messages, id, title, endpointFun)\n    segment.requirements = (state.requirements) ? Requirement.parseRequirements(state.requirements) : []\n    segment.optionIds = optionIds\n    segment.endpointLabel = endpointLabel\n\n    return segment\n  }\n\n}\n","import GameStage from \"@/stages/GameStage\"\nimport ChatMessage from \"@/ChatMessage\"\nimport DialogueNode from \"@/DialogueNode\"\nimport GameButton from \"@/GameButton\"\nimport util from \"@/util\"\nimport Requirement from \"@/Requirement\"\nimport Deck from \"@/cards/Deck\"\nimport DialogueSegment from \"@/DialogueSegment\"\n\nexport default class DialogueTree {\n\n  private nodes: { [id: string]: DialogueSegment} = {}\n  private activeNode: DialogueSegment | undefined\n  private firstNode: DialogueSegment | undefined\n  ignoreRequirements: boolean = false\n\n  constructor(segments: { [id: string]: DialogueSegment}) {\n    this.nodes = segments\n  }\n\n  /*copy(): DialogueTree {\n    let tree = new DialogueTree(this.nodes)\n    tree.activeNode = this.activeNode\n    tree.firstNode = this.activeNode\n    return tree\n  }*/\n\n  get currentSegment(): DialogueSegment {\n    return this.activeNode || new DialogueSegment([new ChatMessage()], \"\", \"\", \"\")\n  }\n\n  get currentMessage(): ChatMessage {\n    return (this.activeNode) ? this.activeNode.currentMessage() : new ChatMessage(\"\", \"Error: Dialogue tree not initialized.\")\n  }\n\n  get options(): DialogueSegment[] {\n    return (this.activeNode) ? this.activeNode.options : []\n  }\n\n  createOptionButtons(options: DialogueSegment[], deck: Deck, stage: GameStage): GameButton[] {\n    let buttons: GameButton[] = []\n\n    for (let option of options) {\n      let title = (option.id != this.activeNode?.id) ? option.title : \"Next\"\n      if (option.requirements.length > 0 && !option.isStarted()) {\n        title = `__${title}__`\n      }\n\n      buttons.push(new GameButton(title, () => {\n        this.select(option, deck, stage)\n      }))\n    }\n\n    return buttons\n  }\n\n  start(deck: Deck, stage: GameStage) {\n    if (this.firstNode != undefined) {\n      this.select(this.firstNode, deck, stage)\n    } else console.error(`Could not start dialogue tree as there was no first node.`)\n  }\n\n  select(segment: DialogueSegment, deck: Deck, stage: GameStage) {\n    this.activeNode = segment\n\n    if (!segment.isStarted()) {\n      segment.start()\n    } else if (!segment.isOnLastNode()) {\n      segment.gotoNextNode()\n    } else if (segment.isOnLastNode() && segment.hasEndpoint()) {\n      segment.getEndpoint(stage)()\n      return\n    } else {\n      console.error(`Segment ${segment.id} was expected to have an endpoint but does not.`)\n    }\n\n    stage.buttons = this.createOptionButtons(segment.getFulfilledOptions(deck, this.ignoreRequirements), deck, stage)\n    stage.sendMessage(this.currentMessage)\n  }\n\n  /**\n   * Creates a linear dialogue tree from a series of messages.\n   * @param messages to use as nodes\n   * @param endpointId name of the endpoint to call when done\n   * @param endpointLabel label of the button that will call the endpoint\n   */\n  static createLinear(messages: ChatMessage[], endpointId: string, endpointLabel: string): DialogueTree {\n    let id = util.uuid()\n\n    let segment = new DialogueSegment(messages, id, \"\", endpointId)\n    segment.endpointLabel = endpointLabel\n\n    let tree = new DialogueTree({ [id]: segment })\n    tree.firstNode = segment\n\n    return tree\n  }\n\n  static parseDialogue(state: any): DialogueTree {\n    // Create a map of all linear segments in this tree\n    let segments: { [id: string]: DialogueSegment} = {}\n    for (let node of state.nodes) {\n      let linearNodes = DialogueSegment.parseSegment(node)\n      segments[linearNodes.id] = linearNodes\n    }\n\n    // Create links between nodes with completely different ids\n    for (let segment of Object.values(segments)) {\n      segment.linkOptions(segments)\n    }\n\n    let tree = new DialogueTree(segments)\n\n    // Set our active node as the first node in the parsed state\n    tree.firstNode = segments[state.nodes[0].id]\n\n    return tree\n  }\n\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Card from \"@/cards/Card\"\nimport Dice from \"@/Dice\"\nimport ValueMod from \"@/effects/ValueMod\"\nimport Deck from \"@/cards/Deck\"\nimport PickStage from \"@/stages/PickStage\"\nimport GameButton from \"@/GameButton\"\nimport util from \"@/util\"\nimport BonusStage from \"@/stages/BonusStage\"\nimport EndStage from \"@/stages/EndStage\"\nimport ChatMessage from \"@/ChatMessage\"\nimport DialogueTree from \"@/DialogueTree\"\n\nexport default class TransformStage extends GameStage {\n  constructor(game: Game) {\n    super(game, \"transform\")\n\n    this.endpoints.nextStage = () => {\n      this.nextStage()\n    }\n\n    this.endpoints.nextTransformation = () => {\n      if (this.nextCard != undefined) {\n        this.activateCard(this.nextCard)\n      }\n    }\n  }\n\n  onStart() {\n    this.game.abilities = []\n    this._nextStage = this.args.nextStage\n\n    this.prepareNextButton()\n\n    this.game.diceCount = 0\n    this.game.drawnCards = new Deck([])\n  }\n\n  onEnd() {\n    this.game.pickedCards = new Deck()\n  }\n\n  private get nextCard(): Card {\n    return this.game.pickedCards.cards[0]\n  }\n\n  prepareNextButton() {\n    if (this.game.pickedCards.size() > 0) {\n      this.buttons = [new GameButton(`Activate **${this.nextCard.fullTitle}**`, () => this.activateCard(this.nextCard))]\n    } else {\n      this.buttons = [this.nextButton]\n    }\n  }\n\n  activateCard(card: Card) {\n    this.game.pickedCards.removeCard(card)\n    this.game.drawnCards.addCard(card)\n    this.game.player.hand.addCard(card)\n    this.createNextLinearSegment(card)\n  }\n\n  createNextLinearSegment(card: Card) {\n    let messages\n    if (card.transformation != \"\") {\n      messages = ChatMessage.parseLines(card.transformation)\n    } else {\n      messages = ChatMessage.parseLines(`You don't feel any different.`)\n    }\n\n    if (this.nextCard == undefined) {\n      let label = \"Next Round\"\n      if (this.game.round.fraction == 1) {\n        if (this.game.state.bonusRolls.value > 0 && !this.game.state.isBonusRound) {\n          label = \"To Bonus Round\"\n        } else {\n          label = \"To Epilogue\"\n        }\n      }\n\n      DialogueTree.createLinear(messages, \"nextStage\", label).start(new Deck(), this)\n    } else {\n      DialogueTree.createLinear(messages, \"nextTransformation\", `Activate **${this.nextCard.fullTitle}**`).start(new Deck(), this)\n    }\n  }\n\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Card from \"@/cards/Card\"\nimport Dice from \"@/Dice\"\nimport ValueMod from \"@/effects/ValueMod\"\nimport HighlightStage from \"@/stages/HighlightStage\"\nimport Deck from \"@/cards/Deck\"\nimport EndStage from \"@/stages/EndStage\"\nimport GameButton from \"@/GameButton\"\nimport TransformStage from \"@/stages/TransformStage\"\nimport Ability from \"@/Ability\"\n\nexport default class BonusStage extends GameStage {\n  private pickedCards: Deck = new Deck([])\n  private leftToPick: number = 0\n  public deck: Deck = new Deck([])\n\n  constructor(game: Game) {\n    super(game, \"bonus\")\n  }\n\n  onStart() {\n    this.createMessage(this.game.dialogue['bonusStage'])\n    this.deck = this.game.deck.withoutFamily('reward').draw(Game.CARDS_IN_BONUS_ROUND)\n    this.game.state.drawnCards = this.deck\n\n    this.game.round.addValue(1)\n    this.game.state.cardsPickedThisRound = 0\n    this.leftToPick = this.game.state.bonusRolls.value\n    this.game.state.cardsToPick = this.leftToPick\n    this.game.diceCount = 2\n    this.game.diceSize = this.deck.size()\n    this.game.state.isBonusRound = true\n    this._allowDiceBuy = true\n    this.game.abilities = [\n      Ability.buyDice(),\n      Ability.sellDice(),\n      Ability.pickAnyCard((values: number[]) => this.onDiceRoll(values), this.game.drawnCards.size())\n    ]\n\n    if (this.leftToPick == 0) {\n      this.onResume()\n      this.nextStage(new EndStage(this.game))\n    }\n  }\n\n  onResume() {\n    this.game.state.drawnCards = this.deck\n    this.game.diceCount = 2\n    this.game.diceSize = this.deck.size()\n    this.game.abilities = this.game.abilities = [\n      Ability.buyDice(),\n      Ability.sellDice(),\n      Ability.pickAnyCard((values: number[]) => this.onDiceRoll(values), this.game.drawnCards.size())\n    ]\n    this._allowDiceBuy = true\n\n    if (this.leftToPick == 0) {\n      this.game.diceCount = 0\n      this.createMessage(`demon: Great, you've completed the bonus round.`)\n      this._nextStage = new EndStage(this.game)\n      this.nextStage(new TransformStage(this.game), { nextStage: this._nextStage })\n      this.game.lockDice(true)\n    }\n  }\n\n  onDiceRoll(values: number[]) {\n    if (this.leftToPick > 0) {\n      this.leftToPick -= 1\n      this.pickedCards = this.deck.pick(values)\n      this.game.lockDice(true)\n\n      this.nextStage(new HighlightStage(this.game), { pickStage: this, availableCards: this.deck, highlights: values, allowManaBuy: false })\n    }\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Dice from \"@/Dice\"\nimport Card from \"@/cards/Card\"\nimport Deck from \"@/cards/Deck\"\nimport IntensityStage from \"@/stages/IntensityStage\"\nimport HighlightStage from \"@/stages/HighlightStage\"\nimport BonusStage from \"@/stages/BonusStage\"\nimport GameButton from \"@/GameButton\"\nimport BargainStage from \"@/stages/BargainStage\"\nimport TransformStage from \"@/stages/TransformStage\"\nimport EndStage from \"@/stages/EndStage\"\nimport Ability from \"@/Ability\"\n\nexport default class PickStage extends GameStage {\n  private leftToPick: number = 0 // How many cards should be picked in this stage\n  private diceCount: number = 1\n  public deck: Deck = new Deck([])\n\n  private pickAnyCost: number = Ability.PICK_ANY_CARD_COST\n\n  constructor(game: Game) {\n    super(game, \"pick\")\n  }\n\n  onStart() {\n    this.leftToPick = this.args.cardsToPick\n    this._nextStage = this.args.drawStage\n\n    this.createMessage(this.game.dialogue['pickStage'])\n    this.deck = this.game.drawnCards\n\n    this.diceCount = 2\n    this.game.diceCount = this.diceCount\n    this.game.diceSize = this.deck.size()\n    this.buttons = []\n    this._allowDiceBuy = true\n    this.game.abilities = [\n      Ability.buyMana(),\n      Ability.sellDice(),\n      Ability.buyDice(),\n      Ability.pickAnyCard((values: number[]) => this.pickCard(values), this.deck.size(), this.pickAnyCost),\n      Ability.addRound()\n    ]\n  }\n\n  onResume() {\n    this.game.drawnCards = this.deck\n    this.diceCount = Math.max(2, this.diceCount - 1)\n    this.game.diceCount = this.diceCount\n    this.game.diceSize = this.deck.size()\n    this._allowDiceBuy = true\n    this.game.abilities = [\n      Ability.buyMana(),\n      Ability.sellDice(),\n      Ability.buyDice(),\n      Ability.pickAnyCard((values: number[]) => this.pickCard(values), this.deck.size(), this.pickAnyCost),\n      Ability.addRound()\n    ]\n\n    if (this.leftToPick == 0) {\n      this.createMessage(\n        `demon: Good job! You completed round ${this.game.round.value}.\\n` +\n        `Time to see what those cards will do to you!`)\n      this.game.lockDice(true)\n      this.game.deck.addDeck(this.game.drawnCards, true)\n\n      if (this.game.round.fraction == 1) {\n        if (this.game.state.bonusRolls.value > 0 && !this.game.state.isBonusRound) {\n          this._nextStage = new BonusStage(this.game)\n        } else {\n          this._nextStage = new EndStage(this.game)\n        }\n      }\n\n      this.nextStage(new TransformStage(this.game), { nextStage: this._nextStage })\n      /*this.buttons.push(new GameButton(\"Devil's Bargain\", () => this.nextStage(new BargainStage(this.game), { nextStage: this._nextStage })))*/\n    }\n  }\n\n  onDiceRoll(values: number[]) {\n    this.pickCard(values)\n  }\n\n  pickCard(diceRolls: number[]) {\n    if (this.leftToPick > 0) {\n      this.leftToPick -= 1\n      let highlightedCards = this.deck.pick(diceRolls)\n      this.game.lockDice(true)\n      //this.diceCount = diceRolls.length\n\n      this.nextStage(new HighlightStage(this.game), { pickStage: this, availableCards: this.deck, highlights: diceRolls })\n    }\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport PickStage from \"@/stages/PickStage\"\nimport GameButton from \"@/GameButton\"\nimport util from \"@/util\"\nimport Ability from \"@/Ability\"\n\nexport default class DrawStage extends GameStage {\n  public static readonly DICE_COUNT: number = 2\n  public static readonly DICE_SIZE: number = 3\n\n  private allowNext: boolean = true\n  private availableExtraDraws: number = 1\n  private diceCount: number = DrawStage.DICE_COUNT\n  private diceSize: number = DrawStage.DICE_SIZE\n  private diceHasBeenRolled: boolean = false\n\n  private abilities: Ability[] = [\n    Ability.buyMana(),\n    new Ability(\n      \"Pick Less\",\n      { value: 2, resource: \"mana\" },\n      (game) => {\n        this.addDraws(-1)\n        this.availableExtraDraws -= 1\n      },\n      (game) => {\n        return this.game.state.cardsToPick > 1 &&\n          this.availableExtraDraws > 0 &&\n          this.diceHasBeenRolled\n      }\n    ),\n    new Ability(\n      \"Pick More\",\n      { value: 2, resource: \"mana\" },\n      (game) => {\n        this.addDraws(1)\n        this.availableExtraDraws -= 1\n      },\n      (game) => {\n        return this.game.state.cardsToPick < 6 &&\n          this.availableExtraDraws > 0 &&\n          this.diceHasBeenRolled\n      }\n    ),\n    Ability.addRound()\n  ]\n\n  constructor(game: Game) {\n    super(game, \"draw\")\n  }\n\n  onStart() {\n    this.createMessage(this.game.dialogue['drawStage'])\n    this.game.state.drawnCards = this.game.drawCards(0)\n    this.game.diceCount = this.diceCount\n    this.game.diceSize = this.diceSize\n    this.allowNext = false\n    this.availableExtraDraws = 1\n    this.buttons = []\n    this.game.round.addValue(1)\n    this.game.state.cardsPickedThisRound = 0\n    this.game.state.cardsToPick = 0\n    this._allowDiceBuy = false\n    this.game.abilities = []\n    this.diceHasBeenRolled = false\n  }\n\n  onResume() {\n    this.createMessage(this.game.dialogue['drawStagePostBan'])\n    this.game.diceCount = this.diceCount\n    this.game.diceSize = this.diceSize\n    this.allowNext = false\n    this.availableExtraDraws = 1\n    this.buttons = []\n    this.game.state.cardsPickedThisRound = 0\n    this.game.state.cardsToPick = 0\n    this._allowDiceBuy = false\n    this.game.abilities = []\n    this.diceHasBeenRolled = false\n  }\n\n  onDiceRoll(values: number[]) {\n    if (this.allowNext) return\n    this.game.state.drawnCards = this.game.drawCards(Game.CARDS_PER_ROUND)\n    this.game.abilities = this.abilities\n    let value = values.reduce((prev, cur) => prev + cur)\n    this.game.state.cardsToPick = value\n    this.createMessage(`demon: You will have to pick ${this.game.state.cardsToPick} cards this round.\\nAlthough, if you want to pick more or less cards, you may spend some mana to do that, but you have to do it now.`)\n    this.allowNext = true\n    this.diceHasBeenRolled = true\n    this.game.lockDice(true)\n    this.updateButtons()\n  }\n\n  nextStage() {\n    if (this.allowNext) super.nextStage(new PickStage(this.game), { cardsToPick: this.game.state.cardsToPick, drawStage: this })\n  }\n\n  addDraws(value: number) {\n    this.game.state.cardsToPick = util.clamp(this.game.state.cardsToPick + value, 1, 6)\n    if (value >= 0) {\n      this.createMessage(`demon: An extra pick? Guess you're seeing something good, huh? You'll pick ${this.game.state.cardsToPick} cards this round.`)\n    } else {\n      this.createMessage(`demon: Alright, you only have to pick ${this.game.state.cardsToPick} cards this round.`)\n    }\n  }\n\n  updateButtons() {\n    let buttons = []\n    buttons.push(this.nextButton)\n    this.buttons = buttons\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport GameButton from \"@/GameButton\"\nimport DialogueTree from \"@/DialogueTree\"\n\nexport default class DialogueStage extends GameStage {\n\n  constructor(game: Game) {\n    super(game, \"dialogue\")\n    this.activeComponent = \"DialogueScreen\"\n  }\n\n  onStart() {\n    //this.text = this.tree.text.text\n    //this.buttons = this.tree.getOptionButtons()\n    //console.log(\"Started\", this.tree.getOptionButtons())\n    //this.tree.getOptionButtons()\n  }\n}\n","import Game from \"@/Game\"\nimport GameMode from \"@/GameMode\"\nimport DrawStage from \"@/stages/DrawStage\"\nimport GameStage from './stages/GameStage'\nimport DialogueTree from \"@/DialogueTree\"\nimport DialogueStage from \"@/stages/DialogueStage\"\nimport Deck from \"@/cards/Deck\"\n\nexport default class StoryMode extends GameMode {\n  private stage1: GameStage\n\n  constructor(game: Game) {\n    super(game)\n\n    this.stage1 = new DialogueStage(this.game)\n    let stageD = new DrawStage(this.game)\n\n    this.stage1.endpoints.drawStage = () => this.stage1.nextStage(stageD)\n    this.stage1.endpoints.leave = async () => await this.game.menu.endGame()\n    DialogueTree.parseDialogue(this.game.dialogue2).start(new Deck(), this.stage1)\n  }\n\n  get firstStage(): GameStage {\n    return this.stage1\n  }\n}\n","import { reactive } from 'vue'\nimport Deck from \"@/cards/Deck\"\nimport globalState from \"@/store/globalState\"\nimport Dice from \"@/Dice\"\nimport Card from \"@/cards/Card\"\nimport GameStage from \"@/stages/GameStage\"\nimport TextStage from \"@/stages/TextStage\"\nimport PickStage from \"@/stages/PickStage\"\nimport ValueRange from \"@/effects/ValueRange\"\nimport GameButton from \"@/GameButton\"\nimport Menu from \"@/Menu\"\nimport Player from \"@/Player\"\nimport GameMode from \"@/GameMode\"\nimport StoryMode from \"@/StoryMode\"\nimport ChatMessage from \"@/ChatMessage\"\nimport Ability from \"@/Ability\"\n\nexport default class Game {\n  // State variables are all given default values in restart function\n  public state = reactive({\n    deck: new Deck(),\n    dice: [] as Dice[],\n    drawnCards: new Deck([]) as Deck,\n    pickedCards: new Deck([]) as Deck,\n    stage: new TextStage(this) as GameStage,\n    round: new ValueRange(0, 0, 3),\n    isBonusRound: false,\n    cardsToPick: 0,\n    cardsPickedThisRound: 0,\n    rewardRolls: new ValueRange(0, 0, 0),\n    bonusRolls: new ValueRange(0, 0, 0),\n    player: new Player(),\n    lines: [] as ChatMessage[],\n    title: \"\"\n  })\n\n  public dialogue: any\n  public dialogue2: any\n  public menu: Menu\n\n  private gameMode: GameMode\n\n  public static readonly MAX_DICE: number = 5\n  public static readonly MAX_ROUNDS: number = 5\n  public static readonly CARDS_PER_ROUND: number = 9\n  public static readonly CARDS_IN_BONUS_ROUND: number = 12\n  public static readonly MAX_BONUS_ROLLS: number = 6\n\n  constructor(menu: Menu, gameMode = undefined) {\n    this.menu = menu\n    this.dialogue = JSON.parse(globalState().dialogueString.value)\n    this.dialogue2 = JSON.parse(globalState().dialogue2String.value)\n\n    // Reset state variables\n    this.state.deck = new Deck().createNew().pack()\n    this.state.dice = []\n    this.state.drawnCards = new Deck([])\n    this.state.pickedCards = new Deck([])\n    this.state.round = new ValueRange(0, 0, 3)\n    this.state.isBonusRound = false\n    this.state.cardsToPick = 0\n    this.state.cardsPickedThisRound = 0\n    this.state.rewardRolls = new ValueRange(0, 0, 6)\n    this.state.bonusRolls = new ValueRange(0, 0, Game.MAX_BONUS_ROLLS)\n    this.state.lines = []\n\n    this.gameMode = (gameMode != undefined) ? gameMode! : new StoryMode(this)\n    this.state.stage = this.gameMode.firstStage\n\n    this.state.deck.shuffle()\n    this.lockDice(true)\n    this.gameMode.start()\n    console.log(\"Deck size:\", this.state.deck.size(), this.state.deck.allLevels.length)\n\n    /** Replaces currently drawn cards. */\n    // @ts-ignore\n    window.gredraw = (value: number) => {\n      if (!(this.state.stage.id == 'draw' || this.state.stage.id == 'pick' || this.state.stage.id == 'bonus')) {\n        return `Can not redraw cards in this stage.`\n      }\n      let cards = this.drawCards(value)\n      this.state.drawnCards = cards\n      if (this.state.stage.id == 'pick') (this.state.stage as PickStage).deck = cards\n      return `Drew ${value} cards, ${this.deck.size()} cards remain in the current deck.`\n    }\n\n    // @ts-ignore\n    window.groll = (value: number, count: number = 1) => {\n      this.state.stage.onDiceRoll(Array(count).fill(value))\n    }\n\n    // @ts-ignore\n    window.gameComponent = () => {\n      return this.activeComponent\n    }\n  }\n\n  async end() {\n    return this.menu.endGame()\n  }\n\n  /** Draws cards from this games current deck using correct preferences. */\n  drawCards(amount: number): Deck {\n    return this.state.deck.draw(amount)\n  }\n\n  /** Adds a card to the players hand */\n  pickCard(card: Card) {\n    this.state.pickedCards.addCard(card)\n    this.state.cardsPickedThisRound += 1\n  }\n\n  nextStage() {\n    this.state.stage.nextStage()\n  }\n\n  get buttons(): GameButton[] {\n    return this.state.stage.buttons as GameButton[]\n  }\n\n  setStage(stage: GameStage) {\n    this.state.stage = stage\n  }\n\n  currentRolls: number[] = []\n  notifyDiceRoll(value: number) {\n    this.currentRolls.push(value)\n\n    if (this.allDiceReady) {\n      this.state.stage.onDiceRoll(this.diceValues)\n      this.currentRolls = []\n\n      for (let die of this.state.dice) {\n        die.useValue()\n      }\n    }\n  }\n\n  get diceValues(): number[] {\n    let values = []\n    for (let die of this.state.dice) {\n      values.push(die.value)\n    }\n    return values\n  }\n\n  get allDiceReady(): boolean {\n    return this.diceReadyCount == this.state.dice.length\n  }\n\n  get diceReadyCount(): number {\n    let ready = 0\n    for (let die of this.state.dice) {\n      if (!die.isUsed) ready += 1\n    }\n    return ready\n  }\n\n  get diceRollingCount(): number {\n    let rollCount = 0\n    for (let die of this.state.dice) {\n      if (die.rolling) rollCount += 1\n    }\n    return rollCount\n  }\n\n  lockDice(value: boolean) {\n    for (let die of this.state.dice) {\n      die.locked = value\n    }\n  }\n\n  diceAreLocked(): boolean {\n    let locked = 0\n    for (let die of this.state.dice) {\n      if (die.locked) locked += 1\n    }\n    return locked == this.state.dice.length\n  }\n\n  sellDice() {\n    if (!this.allowDiceSale()) return\n    this.bonusRolls.addValue(-1)\n    this.state.dice.pop()\n  }\n\n  allowDiceSale(): boolean {\n    return this.state.stage.allowDiceBuy() &&\n      this.diceReadyCount + this.diceRollingCount == 0 &&\n      !this.diceAreLocked() &&\n      this.state.dice.length > 1\n  }\n\n  allowManaBuy(): boolean {\n    return this.state.stage.allowManaBuy()\n  }\n\n  allowDiceBuy(): boolean {\n    return this.state.stage.allowDiceBuy() &&\n      this.diceReadyCount + this.diceRollingCount == 0 &&\n      !this.diceAreLocked() &&\n      this.state.dice.length < Game.MAX_DICE //&&\n      //this.state.bonusRolls.value < this.state.bonusRolls.max\n  }\n\n  get activeComponent(): string {\n    return this.state.stage.activeComponent\n  }\n\n  set diceCount(value: number) {\n    let dice: Dice[] = []\n    for (let i = 0; i < value; i++) {\n      if (this.state.dice.length == 0) dice.push(new Dice(6, this))\n      else dice.push(new Dice(this.state.dice[0].max, this))\n    }\n    this.state.dice = dice\n  }\n\n  get diceCount(): number {\n    return this.state.dice.length\n  }\n\n  set diceSize(value: number) {\n    for (let i = 0; i < this.state.dice.length; i++) {\n      this.state.dice[i] = new Dice(value, this)\n    }\n  }\n\n  get diceSize(): number {\n    if (this.diceCount > 0) {\n      return this.state.dice[0].max\n    }\n    return 0\n  }\n\n  clickCard(card: Card) {\n    this.state.stage.onCardClick(card)\n  }\n\n  get player(): Player {\n    return this.state.player as Player\n  }\n\n  get abilities(): Ability[] {\n    return this.player.abilities\n  }\n\n  set abilities(abilities: Ability[]) {\n    this.player.abilities = abilities\n  }\n\n  sendMessage(msg: ChatMessage) {\n    this.state.lines.push(msg)\n  }\n\n  print(text: string) {\n    for (let msg of ChatMessage.parseLines(text)) {\n      this.state.lines.push(msg)\n    }\n  }\n\n  get currentDialogue(): ChatMessage[] {\n    return this.state.lines\n  }\n\n  get deck(): Deck {\n    return this.state.deck as Deck\n  }\n\n  get drawnCards(): Deck {\n    return this.state.drawnCards as Deck\n  }\n\n  set drawnCards(value: Deck) {\n    this.state.drawnCards = value\n  }\n\n  get pickedCards(): Deck {\n    return this.state.pickedCards as Deck\n  }\n\n  set pickedCards(value: Deck) {\n    this.state.pickedCards = value\n  }\n\n  get round(): ValueRange {\n    return this.state.round as ValueRange\n  }\n\n  get roundString(): string {\n    if (this.state.isBonusRound) return \"Bonus Round\"\n    return `Round ${this.round.value} of ${this.round.max}`\n  }\n\n  get pickedString(): string {\n    if (this.state.cardsToPick == 0) return `Draw cards`\n    return `Picked ${this.state.cardsPickedThisRound} of ${this.state.cardsToPick} cards`\n  }\n\n  get stageId(): string {\n    return this.state.stage.id\n  }\n\n  get rewardRolls(): ValueRange {\n    return this.state.rewardRolls as ValueRange\n  }\n\n  get bonusRolls(): ValueRange {\n    return this.state.bonusRolls as ValueRange\n  }\n\n  get cardsPickedThisRound(): number {\n    return this.state.cardsPickedThisRound\n  }\n\n  get showDialogueOnly(): boolean {\n    return this.round.value == 0\n  }\n\n  get title(): string {\n    return this.state.title\n  }\n\n  set title(s: string) {\n    this.state.title = s\n  }\n}\n","import Menu from \"@/Menu\"\n\nexport default class Cheat {\n  name: string\n  description: string\n  fun: (menu: Menu, args: any) => any\n\n  constructor(name: string, description: string, cheatFunction: (menu: Menu, args: any) => any) {\n    this.name = name\n    this.description = description\n    this.fun = cheatFunction\n  }\n\n  activate(menu: Menu) {\n    // @ts-ignore\n    window[this.name] = (args: any) => { return this.fun(menu, args) }\n  }\n}\n","import Requirement from \"@/Requirement\"\nimport Deck from \"@/cards/Deck\"\nimport DialogueTree from \"@/DialogueTree\"\nimport ChatMessage from \"@/ChatMessage\"\n\nexport default class Epilogue {\n  public id: string = \"\"\n  public title: string = \"\"\n  public likelihood: number = 0\n  private readonly requirements: Requirement[][] = []\n  private nodes: any[] = [] // Dialogue nodes\n  public mod: string = \"\" // A mod id if this epilogue is added by a mod, or an empty string if not.\n\n  constructor(id: string, title: string, likelihood: number, requirements: Requirement[][], nodes: any[]) {\n    this.id = id\n    this.title = title\n    this.likelihood = likelihood\n    this.requirements = requirements\n    this.nodes = nodes\n  }\n\n  static create(state: any) {\n    let id = state.id\n    let title = state.title\n    let likelihood = (state.likelihood) ? state.likelihood : 0\n    let requirements = Requirement.parseRequirements(state.requirements)\n    let nodes = (state.nodes) ? state.nodes : []\n\n    return new Epilogue(id, title, likelihood, requirements, nodes)\n  }\n\n  get dialogueTree(): DialogueTree {\n    return DialogueTree.parseDialogue({ id: this.id, nodes: this.nodes })\n  }\n\n  isFulfilled(deck: Deck) {\n    try {\n      for (let ors of this.requirements) {\n        let fulfilled = Requirement.orGroupFulfilled(deck, ors)\n        if (fulfilled) return true\n      }\n    } catch (e) {\n      console.error(`Could not calculate fulfilment for ending \"${this.id}\".\\n${e.message}`)\n    }\n    return false\n  }\n\n  getNodes(): any[] {\n    return this.nodes\n  }\n\n  getAllEndings(): string[] {\n    let endings: string[] = []\n    for (let node of this.nodes) {\n      if ('endpoint' in node) {\n        endings.push(node.id)\n      }\n    }\n    return endings.sort((a, b) => this.getEndpointLabel(a).localeCompare(this.getEndpointLabel(b)))\n  }\n\n  findNodeParents(child: string): string[] {\n    let parents: string[] = []\n    for (let node of this.nodes) {\n      if ('options' in node && node.options.includes(child)) {\n        parents.push(node.id)\n      }\n    }\n    return parents\n  }\n\n  /** Returns the list of node ids to select, in order, to get the specified ending. */\n  getNodeChain(ending: string): string[] {\n    let chain: string[] = [ending]\n    while (true) {\n      let parents = this.findNodeParents(chain[chain.length - 1])\n      if (parents.length == 0) break\n      chain.push(parents[0])\n    }\n\n    return chain.reverse()\n  }\n\n  getEnding(ending: string): ChatMessage[] {\n    let nodeIds = this.getNodeChain(ending)\n    let messages = []\n    for (let nodeId of nodeIds) {\n      let node = this.nodes.find(n => n.id == nodeId)\n      messages.push(...ChatMessage.parseLines(node.text))\n    }\n    return messages\n  }\n\n  getEndpointLabel(ending: string): string {\n    return this.nodes.find(n => n.id == ending).endpoint.label\n  }\n\n}\n","import Deck from \"@/cards/Deck\"\nimport Epilogue from \"@/Epilogue\"\nimport globalState from \"@/store/globalState\"\nimport util from \"@/util\"\n\nexport default class Epilogues {\n\n  epilogues: Epilogue[] = []\n\n  constructor() {\n    for (let state of JSON.parse(globalState().endingsString.value)) {\n      let ending = Epilogue.create(state)\n      this.epilogues.push(ending)\n    }\n  }\n\n  addEpilogue(epilogue: Epilogue) {\n    this.epilogues.push(epilogue)\n  }\n\n  chooseEpilogues(deck: Deck): Epilogue[] {\n    let fulfilled = []\n    for (let epilogue of this.epilogues) {\n      if (epilogue.isFulfilled(deck)) fulfilled.push(epilogue)\n    }\n    let maxLikelihood = fulfilled.reduce((prev, curr) => {\n      if (curr.likelihood > prev.likelihood) return curr\n      else return prev\n    }).likelihood\n    //fulfilled.sort((a, b) => b.score(deck) - a.score(deck))\n    fulfilled = fulfilled.filter(ep => ep.likelihood == maxLikelihood)\n    return fulfilled\n  }\n\n  selectEnding(id: string): Epilogue {\n    for (let ending of this.epilogues) {\n      if (ending.id == id) return ending\n    }\n    console.warn(`Could not select epilogue with id \"${id}\". Available ids: ${this.epilogues.map(e => e.id).join(\", \")}`)\n    return this.epilogues[0]\n  }\n\n  correctnessSimulation(iterations: number = 1000, log: (text: string) => void = console.log, clear: () => void = () => {}) {\n    let endingsMap: { [id: string]: { fulfilled: number; chosen: number; score: number; appearedWith: string[] } } = {}\n    for (let ending of this.epilogues) {\n      endingsMap[ending.id] = { fulfilled: 0, chosen: 0, score: 0, appearedWith: [] }\n    }\n\n    // Simulate a bunch of hands\n    for (let i = 0; i < iterations; i++) {\n      clear()\n      log(`Simulating hand ${i + 1}`)\n      let deck = Deck.referenceDeck().shuffle()\n      let drawn = deck.draw(Math.round(6 + Math.random() * (4 * 3 + 8)))\n      let picked = new Deck()\n\n      // Add cards to the hand, if the drawn card is a parent, take a random subcard\n      for (let card of drawn.cards) {\n        if (card.isParent) {\n          picked.addCard(util.pickFrom(card.subcards, Math.random()))\n        } else {\n          picked.addCard(card)\n        }\n      }\n\n      if (iterations <= 5) {\n        log(picked.toString())\n      }\n\n      // Keep stats on each ending\n      for (let ending of this.epilogues) {\n        if (ending.isFulfilled(picked)) {\n          endingsMap[ending.id].fulfilled += 1\n        }\n      }\n      let chosenEps = this.chooseEpilogues(picked)\n      for (let chosenEp of chosenEps) {\n        endingsMap[chosenEp.id].chosen += 1\n        // Keep track of which other endings this one appeared with\n        endingsMap[chosenEp.id].appearedWith.push(...chosenEps.filter(ep => ep.id != chosenEp.id).map(ep => ep.id))\n      }\n    }\n    clear()\n    log(`After simulating ${iterations} random hands, epilogues had the following stats:`)\n\n    let sortedEndings = [...this.epilogues].sort((a, b) => endingsMap[b.id].chosen - endingsMap[a.id].chosen)\n    for (let ending of sortedEndings) {\n      let fulfilled = endingsMap[ending.id].fulfilled\n      let chosen = endingsMap[ending.id].chosen\n      let appearances: any = {}\n      for (let epId of endingsMap[ending.id].appearedWith) {\n        if (epId in appearances) appearances[epId] += 1\n        else appearances[epId] = 1\n      }\n      log(\"-\".repeat(80))\n      log(\n        `${ending.title.padEnd(12)} | ${chosen.toString().padStart(4)} available (${this.stringifyAppearances(appearances)}),\n               ${fulfilled.toString().padStart(4)} fulfilled`\n      )\n    }\n  }\n\n  private stringifyAppearances(appearances: any): string {\n    let s = \"\"\n    let epIds = Object.keys(appearances)\n    for (let [i, epilogueId] of epIds.entries()) {\n      s += `${this.epilogues.find(e => e.id == epilogueId)?.title}: ${appearances[epilogueId]}`\n      if (i + 1 < epIds.length) s += \", \"\n    }\n    return s\n  }\n\n  testBimboEnding() {\n    let ending = this.epilogues.filter(ending => ending.id == \"bimbo\")[0]\n    let deck = new Deck()\n    deck.addCard(Deck.referenceDeck().getCardById(\"intelligence.intelligence 3\")!)\n    deck.addCard(Deck.referenceDeck().getCardById(\"breast-size.breast size 3\")!)\n    //deck.addCard(Deck.referenceDeck().getCardById(\"intelligence.breast size intelligence 1\")!)\n\n    this.assert(ending.isFulfilled(deck))\n  }\n\n  private assert(value: boolean) {\n    if (!value) console.error(\"Assertion failed\")\n  }\n\n}\n","import Menu from \"@/Menu\"\nimport Epilogues from \"@/Epilogues\"\nimport Epilogue from \"@/Epilogue\"\nimport ChatMessage from \"@/ChatMessage\"\n\nexport default class EndingsCollection {\n  private menu: Menu\n  private epilogues: Epilogues\n  public currentEpilogue: Epilogue | undefined\n  public currentEnding: string = \"\"\n\n  constructor(menu: Menu) {\n    this.menu = menu\n    this.epilogues = (menu.endings) ? menu.endings : new Epilogues()\n  }\n\n  epiloguesList() {\n    return this.epilogues.epilogues.sort((a, b) => a.title.localeCompare(b.title))\n  }\n\n  select(epilogueId: string, endingId: string) {\n    this.currentEpilogue = this.epilogues.selectEnding(epilogueId)\n    this.currentEnding = endingId\n  }\n\n  currentEndingMessages(): ChatMessage[] {\n    if (this.currentEpilogue == undefined) return []\n    return this.currentEpilogue.getEnding(this.currentEnding)\n  }\n\n  currentEndingLabel(): string {\n    if (this.currentEpilogue == undefined) return \"\"\n    return this.currentEpilogue.getEndpointLabel(this.currentEnding)\n  }\n\n  parseMessages(text: string): ChatMessage[] {\n    if (text == undefined) return []\n\n    return ChatMessage.parseLines(text)\n  }\n\n  unselect() {\n    this.currentEpilogue = undefined\n  }\n\n  unlockedEpilogues(): Epilogue[] {\n    return this.epiloguesList().filter((ep: Epilogue) => this.menu.isEpilogueUnlocked(ep.id))\n  }\n\n  unlockedEndings(epilogue: Epilogue): string[] {\n    return epilogue.getAllEndings().filter(en => this.menu.isEndingUnlocked(epilogue.id, en))\n  }\n\n  nrOfAllUnlockedEndings(): number {\n    let sum = 0\n    for (let epilogue of this.epiloguesList()) {\n      sum += this.unlockedEndings(epilogue).length\n    }\n    return sum\n  }\n\n  nrOfAllEndings(): number {\n    let sum = 0\n    for (let epilogue of this.epiloguesList()) {\n      sum += epilogue.getAllEndings().length\n    }\n    return sum\n  }\n}\n","import Cheat from \"@/Cheat\"\nimport Card from \"@/cards/Card\"\nimport PickStage from \"@/stages/PickStage\"\nimport Deck from \"@/cards/Deck\"\nimport Menu from \"@/Menu\"\nimport EndStage from \"@/stages/EndStage\"\nimport Epilogue from \"@/Epilogue\"\nimport Epilogues from \"@/Epilogues\"\nimport EndingsCollection from \"@/EndingsCollection\"\n\nexport default class Cheatmode {\n  private _menu: Menu\n  private cheats: Cheat[] = [\n    new Cheat(\"roll\",\n      `(value): Rolls all dice to this value.`,\n      (menu, value: number) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        game.state.stage.onDiceRoll([value])\n      }),\n    new Cheat(\"pickCard\",\n      `(name): Picks an unseen card from the current deck and adds it to your hand.`,\n      (menu, name: string) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        let card = game.deck.allLevels.find((c: Card) => c.name.toLowerCase() == name.toLowerCase())\n        if (card != undefined) {\n          game.state.pickedCards.addCard(card)\n          return `Added ${card.name} to hand.`\n        }\n        return `Could not find the ${name} card in the current deck.`\n      }),\n    new Cheat(\"addMana\",\n      `(value): Adds this much mana.`,\n      (menu, value: number) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        game.player.addMana(value)\n\n        return `Added ${value} mana.`\n      }),\n    new Cheat(\"drawCard\",\n      `(name): Picks an unseen card from the current deck and adds it to the list of cards drawn from the deck.`,\n      (menu, name: string) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        let card = game.deck.allLevels.find((c: Card) => c.name.toLowerCase() == name.toLowerCase())\n        if (card != undefined) {\n          game.state.drawnCards.addCard(card)\n          return `Added ${card.name} to hand.`\n        }\n        return `Could not find the ${name} card in the current deck.`\n      }),\n    new Cheat(\"redraw\",\n      `(value): Discard currently drawn cards and replace them with this many.`,\n      (menu, value: number) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        if (!(game.state.stage.id == 'draw' || game.state.stage.id == 'pick' || game.state.stage.id == 'bonus')) {\n          return `Can not redraw cards in this stage.`\n        }\n        let cards: Deck = game.drawCards(value)\n        game.state.drawnCards = cards\n        if (game.state.stage.id == 'pick') (game.state.stage as PickStage).deck = cards\n        return `Drew ${value} cards, ${game.deck.size()} cards remain in the current deck.`\n      }),\n    new Cheat(\"newDeck\",\n      `(): Replaces the current deck with a new one. You may get duplicate cards.`,\n      (menu, value: number) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        if (!(game.state.stage.id == 'draw' || game.state.stage.id == 'pick' || game.state.stage.id == 'bonus')) {\n          return `Can not create a new deck in this stage.`\n        }\n        game.state.deck = new Deck().createNew().pack().shuffle()\n        let cards: Deck = game.drawCards(value)\n        game.state.drawnCards = cards\n        if (game.state.stage.id == 'pick') (game.state.stage as PickStage).deck = cards\n        return `Created a new deck with ${game.deck.size()} cards.`\n      }),\n    new Cheat(\"deck\",\n      `(): Shows info about the current deck.`,\n      (menu, value: number) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        return `Deck size: ${game.state.deck.size()}, ${game.state.deck.allLevels.length}`\n      }),\n    new Cheat(\"unlockAllCards\",\n      `(): Permanently unlocks all cards in your collection.`,\n      (menu) => {\n        menu.collection.addDeck(Deck.referenceDeck())\n        menu.save()\n        return `Done`\n      }),\n    new Cheat(\"unlockAllEndings\",\n      `(): Permanently unlocks all endings in your collection.`,\n      (menu) => {\n        let ec = new EndingsCollection(menu)\n        for (let epilogue of ec.epiloguesList()) {\n          for (let endingId of epilogue.getAllEndings()) {\n            menu.unlockEnding(epilogue.id, endingId)\n          }\n        }\n        menu.save()\n        return `Done`\n      }),\n    new Cheat(\"clearSave\",\n      `(): Clears your save. Warning! your card collection will be lost.`,\n      async (menu) => {\n        await menu.deleteCollection()\n        return `Save cleared`\n      }),\n    new Cheat(\"diagnostics\",\n      `(iterations): Runs debug diagnostics.`,\n      (menu, iterations: number = 1000) => {\n        console.log(\"Running diagnostics...\")\n        menu.endings!.correctnessSimulation(iterations)\n        return \"Diagnostics completed.\"\n      }),\n    new Cheat(\"toEnd\",\n      `(id): Goes to the end with the specified ID.`,\n      (menu, id: string) => {\n        menu.startGame()\n        let stage = new EndStage(menu.game!) // Use a Dialoguestage instead?\n        menu.game!.state.stage = stage\n        stage.onStart()\n\n        let endings: Epilogues = menu.endings || new Epilogues()\n        let ending: Epilogue = endings.selectEnding(id)\n        stage.createYourNewLifeButton(ending)\n\n        return \"End reached.\"\n      }),\n    new Cheat(\"editor\",\n      `(): Opens the editor.`,\n      (menu) => {\n        menu.showEndingsCollection()\n        return \"Editor opened.\"\n      })\n  ]\n  private activated: boolean = false\n\n  constructor(menu: Menu) {\n    this._menu = menu\n    // @ts-ignore\n    window.cheatmode = (password: string) => { return this.activateCheats(password) }\n  }\n\n  set menu(menu: Menu) {\n    this._menu = menu\n    this.registerCheats()\n  }\n\n  activateCheats(password: string): string {\n    if (password != \"rose\") return \"Wrong password. Find out the current password by becoming a Patreon supporter!\"\n    this.activated = true\n    this.registerCheats()\n\n    let s = \"Cheatmode activated. Available commands: \\n\\n\"\n    for (let cheat of this.cheats) {\n      s += `${cheat.name}${cheat.description}\\n`\n    }\n    return s\n  }\n\n  private registerCheats() {\n    if (!this.activated) return false\n\n    for (let cheat of this.cheats) {\n      cheat.activate(this._menu)\n    }\n  }\n}\n","import { serializable } from \"serializr\"\n\nexport default class Save {\n  @serializable\n  public readonly name: string\n\n  @serializable\n  public readonly version: string\n\n  @serializable\n  private readonly _state: string\n\n  constructor(name: string, version: string, state: any) {\n    this.name = name\n    this.version = version\n    this._state = JSON.stringify(state)\n  }\n\n  get state(): any {\n    return JSON.parse(this._state)\n  }\n}\n","import Save from \"@/Save\"\nimport * as localforage from \"localforage\"\nimport { deserialize, serialize } from \"serializr\"\n\nexport default class SaveSystem {\n  private saveCache: {[key: string]: Save} = {} // Working copy of all saves. This is a map from save name to save object.\n  private saveStore: LocalForage = localforage.createInstance({\n    name: \"ditzydice\",\n    version: 1.0,\n    storeName: \"saves\",\n    driver: localforage.INDEXEDDB\n  })\n\n  // Backwards compatibility flag\n  private loadedFromLocalStorage: boolean = false\n\n  public async save(save: Save) {\n    this.saveCache[save.name] = save\n    try {\n      await this.writeCacheToDB()\n    } catch (err) {\n      return Promise.reject(err)\n    }\n\n    // If there was no error, delete local storage save if existing.\n    if (this.loadedFromLocalStorage) {\n      console.log(\"Saving completed. Deleting local storage save.\")\n      this.writeCacheToLocalStorage(\"blushingdefeat-saves-old\")\n      localStorage.removeItem(\"blushingdefeat-saves\")\n    }\n\n  }\n\n  /**\n   * Returns the save. Rejects if no save with that name was found.\n   * @param name\n   */\n  public async load(name: string): Promise<Save> {\n    let localStorageCache = localStorage.getItem(\"blushingdefeat-saves\")\n    if (localStorageCache != undefined) {\n      this.loadedFromLocalStorage = true\n      this.saveCache = this.loadAllFromStorage()\n      console.log(\"Local storage save detected (<=1.5.4). This will be converted to indexeddb on save (1.5.5).\")\n    }\n\n    try {\n      if (this.saveCache == undefined || Object.keys(this.saveCache).length == 0) this.saveCache = await this.readCacheFromDB()\n    } catch (err) {\n      return Promise.reject(err)\n    }\n\n    if (name in this.saveCache) {\n      return this.saveCache[name]\n    } else return Promise.reject(Error(`No save with the name \"${name}\" was found.`))\n  }\n\n  // INDEXED DB\n\n  private async writeCacheToDB() {\n    try {\n      await Promise.all(\n        Object.keys(this.saveCache).map(saveName =>\n          this.saveStore.setItem(saveName, serialize(Save, this.saveCache[saveName]))\n        )\n      )\n    } catch (err) {\n      alert(`There was an error writing the save file to storage:\\n\\n ${err.msg}`)\n      console.error(err)\n    }\n  }\n\n  private async readCacheFromDB(): Promise<{[key: string]: Save}> {\n    try {\n      // Get the names of all saves\n      const saveNames = await this.saveStore.keys()\n\n      // Get all the saves in string format\n      let saveStrings: string[] = await Promise.all(\n        saveNames.map(saveName => this.saveStore.getItem(saveName))\n      ) as string[]\n\n      // Store all saves in the list as a map instead\n      return saveStrings.reduce((map: {[key: string]: Save}, saveString) => {\n        const save: Save = deserialize<Save>(Save, saveString)\n        map[save.name] = save\n        return map\n      }, {})\n    } catch (err) {\n      alert(`There was an error reading the save file from storage:\\n\\n ${err.message}`)\n      console.error(err)\n      return Promise.reject(err)\n    }\n  }\n\n  // LOCAL STORAGE\n\n  private deleteFromLocalStorage(name: string) {\n    delete this.saveCache[name]\n    localStorage.setItem(\"blushingdefeat-saves\", JSON.stringify(this.saveCache))\n  }\n\n  private async writeCacheToLocalStorage(key: string) {\n    localStorage.setItem(key, JSON.stringify(this.saveCache))\n  }\n\n  /*private readFromLocalStorage(name: string): Save {\n    return SaveSystem.objectToSave(this.saveCache[name])\n  }*/\n\n  private loadAllFromStorage(): {[key: string]: Save} {\n    let savesString = localStorage.getItem(\"blushingdefeat-saves\")\n    let saves: {[key: string]: Save} = {}\n    if (savesString != null) {\n      saves = JSON.parse(savesString)\n      for (let key of Object.keys(saves)) {\n        // @ts-ignore\n        // Re-deserialize since for some reason the plain object can't be deserialized directly anymore.\n        saves[key] = deserialize(Save, serialize(Save, saves[key]))\n      }\n    }\n    return saves\n  }\n\n  // STATIC\n\n  public static objectToSave(saveString: string): Save {\n    const save = deserialize(Save, saveString) as unknown as Save\n    console.log(\"Object to save:\", save)\n    return save\n  }\n}\n","import { serializable } from \"serializr\"\n\nexport default class FilterSetting {\n  @serializable\n  public readonly name: string\n  @serializable\n  public readonly description: string\n  @serializable\n  public readonly tag: string\n  @serializable\n  private _strictness: number = 0\n\n  constructor(tag: string, name: string = \"\", description: string = \"\") {\n    this.tag = tag\n    this.name = name\n    this.description = description\n  }\n\n  load(state: any) {\n    if (state == undefined) return\n\n    this._strictness = state._strictness\n  }\n\n  get strictness(): number {\n    return this._strictness\n  }\n\n  set strictness(value: number) {\n    this._strictness = value\n  }\n}\n","import { list, map, mapAsArray, object, primitive, serializable } from \"serializr\"\nimport FilterSetting from \"@/FilterSetting\"\nimport { reactive } from \"vue\"\nimport Deck from \"@/cards/Deck\"\n\nexport default class FilterSettings {\n  @serializable(list(object(FilterSetting)))\n  public filters: FilterSetting[]\n\n  @serializable(list(primitive()))\n  private bannedCards: string[] = []\n\n  constructor() {\n    this.filters = [\n      new FilterSetting(\"expansion\", \"Expansion\", \"Changes in size to body parts.\"),\n      new FilterSetting(\"iq\", \"Intelligence\", \"Changes that primarily affect intelligence.\"),\n      new FilterSetting(\"doll\", \"Doll\", \"Changes towards a plastic, fake or doll-like appearance and behavior.\"),\n      new FilterSetting(\"pet\", \"Pet\", \"Changes that enforces pet-like behavior, like having to stand on all fours, wear a leash etc.\"),\n      new FilterSetting(\"animal\", \"Mythological\", \"Changes that give horns, ears, a tail etc. Note that you always remain primarily human.\"),\n      new FilterSetting(\"lactation\", \"Lactation\", \"Changes that cause lactation.\"),\n      new FilterSetting(\"preg\", \"Pregnancy\", \"Changes related to pregnancy.\"),\n      new FilterSetting(\"reward\", \"Reward\", \"Don't care for rewards? Turn them off here.\"),\n    ]\n\n    this.filters.sort((a, b) => (a.name < b.name) ? -1 : 1)\n  }\n\n  load(state: any) {\n    if (state == undefined) return\n\n    for (let filter of state.filters) {\n      let myfilter = this.filters.find(f => f.tag == filter.tag)\n      if (myfilter == undefined) continue\n      myfilter.load(filter)\n    }\n\n    if (state.bannedCards != undefined) {\n      this.bannedCards = state.bannedCards\n    }\n  }\n\n  public banCard(cardId: string) {\n    this.bannedCards.push(cardId)\n    Deck.bannedCards = new Set(this.bannedCards)\n  }\n\n  public unbanCard(cardId: string) {\n    this.bannedCards = this.bannedCards.filter(id => id != cardId)\n    Deck.bannedCards = new Set(this.bannedCards)\n  }\n\n  public isBanned(cardId: string): boolean {\n    return this.bannedCards.find(id => id == cardId) != undefined\n  }\n\n  public isFiltered(cardId: string): boolean {\n    let card = Deck.lookup(cardId)\n    if (card == undefined) {\n      console.warn(`Could not find ${cardId} while checking if it is filtered.`)\n      return false\n    }\n    return card.isFiltered(this.filters)\n  }\n}\n","import Hjson from \"hjson\"\nimport JSZip from \"jszip\"\nimport Deck from \"@/cards/Deck\"\nimport Card from \"@/cards/Card\"\nimport { list, object, primitive, serializable, serialize } from \"serializr\"\nimport semver from \"semver/preload\"\nimport Epilogue from \"@/Epilogue\"\nimport Menu from \"@/Menu\"\n\nexport default class Mod {\n  @serializable\n  public readonly id: string\n  @serializable\n  public readonly name: string\n  @serializable\n  public readonly version: string\n  @serializable\n  public readonly gameVersion: string\n  @serializable(list(primitive()))\n  public readonly authors: string[]\n  @serializable\n  public readonly description: string\n  @serializable\n  private readonly root: string\n  @serializable\n  public readonly devmode: boolean\n  @serializable(list(object(Card)))\n  public cards: Card[] = []\n  @serializable(list(primitive()))\n  private epilogueStrings: string[] = []\n\n  private _epilogues: Epilogue[] = []\n\n  constructor(id: string, name: string, version: string, gameVersion: string, authors: string[], description: string, root: string, devmode: boolean) {\n    this.id = id\n    this.version = version\n    this.gameVersion = gameVersion\n    this.name = name\n    this.authors = authors\n    this.description = description\n    this.root = root\n    this.devmode = devmode\n  }\n\n  get epilogues(): Epilogue[] {\n    if (this._epilogues.length == this.epilogueStrings.length) return this._epilogues\n    this._epilogues = []\n    for (let s of this.epilogueStrings) {\n      let ep = Epilogue.create(Hjson.parse(s))\n      ep.id = `${this.id}.${ep.id}`\n      ep.mod = this.id\n      this._epilogues.push(ep)\n    }\n    return this._epilogues\n  }\n\n  static async createFromZip(f: File): Promise<Mod> {\n    let jszip = new JSZip()\n\n    let zip = await jszip.loadAsync(f)\n    let root: string = Object.keys(zip.files)[0]\n\n    // Map of mod relative paths to base64 images\n    let images: {[path: string]: string} = {}\n\n    let info = Hjson.parse(await zip.file(`${root}info.hjson`)?.async(\"string\") || \"\")\n    let familyCardGroups: any[] = []\n    let epilogueStrings: string[] = []\n    for (let path of Object.keys(zip.files)) {\n      // Store all hjson files in the cards folder\n      if (path.startsWith(`${root}cards/`) && path.endsWith(\".hjson\")) {\n        let content: string = await zip.file(path)?.async(\"string\") || \"\"\n        let familyCardGroup: any = Hjson.parse(content)\n        familyCardGroups.push(familyCardGroup)\n      }\n      // Store all images as base64 in a map\n      if (path.startsWith(`${root}cards/`) && path.endsWith(\".webp\")) {\n        let base64: string = await zip.file(path)?.async(\"base64\") || \"\"\n        images[path] = `data:image/png;base64,${base64}`\n      }\n      // Store all hjson files in the epilogues folder\n      if (path.startsWith(`${root}epilogues/`) && path.endsWith(\".hjson\")) {\n        let content: string = await zip.file(path)?.async(\"string\") || \"\"\n        epilogueStrings.push(content)\n      }\n    }\n\n    // Create the mod by parsing all the cards\n    let mod: Mod = Mod.create(info, root)\n    mod.cards = mod.cards.concat(\n      Deck.parseCards(\n        familyCardGroups,\n        (path: string) => {\n          let base64url = images[`${root}cards/${path}`]\n          return base64url || \"\"\n        },\n        info.id\n      )\n    )\n    mod.epilogueStrings = epilogueStrings\n    let _ = mod.epilogues // This forces parsing of all epilogues. We want to get errors now.\n\n    return mod\n  }\n\n  private static create(info: any, root: string): Mod {\n    let id = this.verifyId(info.id)\n    let name = this.verifyName(info.name)\n    let version = this.verifyVersion(info.version)\n    let gameVersion = this.verifyGameVersion(info.gameVersion)\n    let authors = this.verifyAuthors(info.authors)\n    let description = this.verifyDescription(info.description)\n    let devmode = this.verifyDevmode(info.devmode)\n\n    return new Mod(id, name, version, gameVersion, authors, description, root, devmode)\n  }\n\n  private static verifyId(id: string): string {\n    if (id == undefined || id.length == undefined || id.length < 4) {\n      throw new Error(`Bad mod id \"${id}\".`)\n    } else {\n      return id\n    }\n  }\n\n  private static verifyName(name: string): string {\n    if (name == undefined || name.length == undefined || name.length < 1) {\n      throw new Error(`Bad mod name \"${name}\".`)\n    } else {\n      return name\n    }\n  }\n\n  private static verifyVersion(version: string): string {\n    if (version == undefined) {\n      throw new Error(`Mod must specify its version, but doesn't.`)\n    } else if (semver.valid(version) == null) {\n      throw new Error(`Mod version \"${version}\" is not a valid SemVer. Make sure that it follows the Semantic Versioning syntax.`)\n    } else {\n      return version\n    }\n  }\n\n  private static verifyGameVersion(version: string): string {\n    if (version == undefined) {\n      throw new Error(`Mod must specify its latest compatible game version, but doesn't.`)\n    } else if (semver.valid(version) == null) {\n      throw new Error(`Mod game version \"${version}\" is not a valid SemVer. Make sure that it follows the Semantic Versioning syntax.`)\n    } else if (semver.gt(version, Menu.GAME_VERSION)) {\n      throw new Error(`Mod is for game version ${version}, but the current game version is only ${Menu.GAME_VERSION}`)\n    } else {\n      return version\n    }\n    return version\n  }\n\n  private static verifyAuthors(authors: string[]): string[] {\n    if (authors == undefined || authors.length == undefined || authors.length < 1) {\n      throw new Error(`Bad mod author info \"${authors}\".`)\n    } else {\n      return authors\n    }\n  }\n\n  private static verifyDescription(description: string): string {\n    if (description == undefined) {\n      return \"\"\n    } else {\n      return description\n    }\n  }\n\n  private static verifyDevmode(devmode: boolean): boolean {\n    if (devmode == undefined) {\n      return false\n    } else {\n      return devmode\n    }\n  }\n\n  toJSON() {\n    return serialize(this)\n  }\n}\n","import Game from \"@/Game\"\nimport globalState from \"@/store/globalState\"\nimport { reactive, toRaw } from \"vue\"\nimport Deck from \"@/cards/Deck\"\nimport Cheatmode from \"@/Cheatmode\"\nimport SaveSystem from \"@/SaveSystem\"\nimport { deserialize, serialize } from \"serializr\"\nimport util from \"@/util\"\nimport FilterSettings from \"@/FilterSettings\"\nimport Epilogues from \"@/Epilogues\"\nimport DrawStage from \"@/stages/DrawStage\"\nimport Save from \"@/Save\"\nimport Card from \"@/cards/Card\"\nimport Mod from \"@/Mod\"\n\nexport default class Menu {\n  public static readonly GAME_VERSION = '1.5.6'\n\n  private state: any = reactive({\n    game: undefined,\n    activeComponent: \"StartMenu\"\n  })\n  private cheatmode: Cheatmode | undefined\n  private saveSystem: SaveSystem = new SaveSystem()\n  public collection: any = reactive(new Deck([]))\n  public settings: any = reactive(new FilterSettings())\n  public unlockedEndings: {[epilogue: string]: {[ending: string]: boolean}} = {} // A key for each epilogue, each with an object where keys are ending ids\n  public endings: Epilogues | undefined\n  public mods: {[id: string]: Mod} = {}\n\n  constructor() {\n    globalState().load().then(async () => {\n      this.endings = new Epilogues()\n\n      let save: Save = await this.saveSystem.load(\"save-1\") as Save\n      if (save != undefined) {\n        this.useSave(save)\n      }\n      Deck.filters = this.settings.filters\n      Deck.bannedCards = new Set(this.settings.bannedCards)\n\n      if (this.endings == undefined || this.endings.epilogues.length < 1) {\n        alert(\"ERROR! No endings could be loaded. Refresh this page to try again.\\n\\n\" +\n              \"If this message keeps appearing, make sure you are connected to the internet, and try a different browser. \" +\n              \"If that doesn't work, contact Gardamuse, or comment that you received this error multiple times,\" +\n              \"including what browser and device you are using.\")\n        console.log(\"Menu endings:\", this.endings)\n      }\n    })\n    this.cheatmode = new Cheatmode(this)\n  }\n\n  get game(): Game | undefined {\n    return this.state.game\n  }\n\n  startGame() {\n    this.state.game = new Game(this)\n    this.activeComponent = this.game!.activeComponent\n  }\n\n  async endGame() {\n    await this.saveHand()\n\n    this.state.game = undefined\n    this.activeComponent = \"StartMenu\"\n  }\n\n  async saveHand() {\n    this.collection.addDeck(this.state.game.player.hand)\n    await this.save()\n  }\n\n  buildSave(name: string): Save {\n    let mods: Mod[] = []\n    for (let id of Object.keys(this.mods)) {\n      mods.push(this.mods[id])\n    }\n\n    return new Save(name, this.version, {\n      collection: toRaw(this.collection.unique()).cards.map((card: Card) => ({ id: card.id })),\n      settings: toRaw(this.settings),\n      unlockedEndings: toRaw(this.unlockedEndings),\n      mods: toRaw(mods)\n    })\n  }\n\n  useSave(save: Save) {\n    if (save.state.mods != undefined) {\n      for (let modState of save.state.mods) {\n        //@ts-ignore\n        let mod: Mod = deserialize(Mod, modState)\n        this.mountMod(mod)\n        this.mods[modState.id] = mod\n      }\n    }\n\n    this.collection = reactive(Deck.createFromCardStates(save.state.collection))\n    for (let mod of Object.values(this.mods)) {\n      if (mod.devmode) mod.cards.map(card => this.collection.addCard(card))\n    }\n    this.collection.sortByFamily()\n    this.unlockedEndings = save.state.unlockedEndings || {}\n    if (this.collection.size() != save.state.collection.length) {\n      console.info(`Not all saved cards were loaded. Expected size ${save.state.collection.length}, actual size ${this.collection.size()}.`)\n    }\n    this.settings.load(save.state.settings)\n  }\n\n  async save() {\n    this.collection.sortByFamily()\n    await this.saveSystem.save(this.buildSave(\"save-1\"))\n  }\n\n  async exportSave() {\n    await this.save()\n    util.download(`savegame.dd`, JSON.stringify(serialize(Save, this.buildSave(\"save-1\"))))\n  }\n\n  importSave(event: any) {\n    let file = event.target.files[0]\n    let reader = new FileReader()\n    reader.addEventListener('load', async (e) => {\n      // @ts-ignore\n      let text: string = e.target.result as string\n      //console.log(\"Importing save\")\n      let save: Save = SaveSystem.objectToSave(JSON.parse(text))\n      this.useSave(save)\n      await this.save()\n      console.log(`Imported save ${save.name}, version ${save.version}.`)\n    })\n    reader.readAsText(file)\n  }\n\n  loadMod(event: any, callback: any = undefined) {\n    let file = event.target.files[0]\n\n    Mod.createFromZip(file).then(async (mod) => {\n      this.mods[mod.id] = mod\n      Deck.resetStaticState()\n      await this.save()\n      this.useSave(await this.saveSystem.load(\"save-1\")) // Reload save to apply mods to everything\n      if (callback != undefined) callback()\n    }).catch(e => {\n      alert(`Mod loading failed with the following error:\\n\\n${e.message}`)\n    })\n  }\n\n  async unloadMod(modId: string) {\n    delete this.mods[modId]\n    await this.save()\n\n    Deck.resetStaticState()\n    this.useSave(await this.saveSystem.load(\"save-1\")) // Reload save to apply mods to everything\n  }\n\n  mountMod(mod: Mod) {\n    for (let card of mod.cards) {\n      Deck.addReferenceCard(card)\n    }\n    for (let epilogue of mod.epilogues) {\n      this.endings?.addEpilogue(epilogue)\n    }\n  }\n\n  isEpilogueUnlocked(epilogue: string) {\n    if (epilogue in this.unlockedEndings) return true\n    return false\n  }\n\n  isEndingUnlocked(epilogue: string, ending: string): boolean {\n    if (this.isEpilogueUnlocked(epilogue)) {\n      let endings = this.unlockedEndings[epilogue]\n      if (ending in endings) return true\n    }\n    return false\n  }\n\n  async unlockEnding(epilogue: string, ending: string) {\n    if (!this.isEpilogueUnlocked(epilogue)) this.unlockedEndings[epilogue] = {}\n    this.unlockedEndings[epilogue][ending] = true\n    await this.save()\n  }\n\n  showCollection() {\n    this.activeComponent = \"CollectionScreen\"\n  }\n\n  async deleteCollection() {\n    this.collection.removeAllCards()\n    this.unlockedEndings = {}\n    await this.save()\n  }\n\n  showSettings() {\n    this.activeComponent = \"SettingsScreen\"\n  }\n\n  showMods() {\n    this.activeComponent = \"ModScreen\"\n  }\n\n  showEndingsCollection() {\n    this.activeComponent = \"EndingsCollectionWindow.vue\"\n  }\n\n  cardsFilteredString(): string {\n    return `${new Deck().createNew().size()} / ${Deck.referenceDeck().size()} cards and ${new Deck().createNew().unpack().size()} / ${Deck.referenceDeck().unpack().size()} levels.`\n  }\n\n  isFilteringTooMuch(): boolean {\n    return new Deck().createNew().size() < Game.MAX_ROUNDS * DrawStage.DICE_SIZE * DrawStage.DICE_COUNT + Game.MAX_BONUS_ROLLS\n  }\n\n  get activeComponent(): string {\n    if (this.game != undefined) return this.game.activeComponent\n    return this.state.activeComponent\n  }\n\n  set activeComponent(value: string) {\n    this.state.activeComponent = value\n  }\n\n  artCredits(): any[] {\n    let artists: any = JSON.parse(globalState().artistsString.value)\n    for (let artist of artists) {\n      artist.cards = []\n    }\n    let deck = Deck.referenceDeck()\n    for (let card of deck.allLevels) {\n      // Find the artist of this card\n      let artist = artists.find((a: any) => a.artist == card.artist)\n      if (artist == undefined) continue\n\n      if (card.isParent) {\n        artist.cards.push(`${card.name}`)\n      } else if (card.hasParent) {\n        //artist.cards.push(`${card.parent.name}: ${card.name}`)\n        artist.cards.push(`${card.parent!.name}`)\n      } else {\n        artist.cards.push(`${card.name}`)\n      }\n    }\n    for (let artist of artists) {\n      artist.cards = [...new Set(artist.cards)] // Remove duplicates\n      artist.cards.sort()\n    }\n    return artists\n  }\n\n  patreonCredits() {\n    let credits = globalState().patreonCredits.value\n    return credits\n  }\n\n  get patchNotes() {\n    return JSON.parse(globalState().patchNotesString.value)\n  }\n\n  get version(): string {\n    return Menu.GAME_VERSION\n  }\n}\n","<template>\n  <template v-if=\"isLoaded\">\n    <div class=\"menu-view\">\n      <div class=\"window text-window\">\n        <div class=\"title-row\">\n          <p></p>\n          <h1>Ditzy Dice</h1>\n          <p>v{{menu.version}}</p>\n        </div>\n        <div class=\"window start-menu-text\">\n          <p>Greetings!</p>\n          <p>This is an <b>erotic transformation</b> game. That means <b>sexual content</b>, focusing on bodily and mental transformations related to bimbofication. If you are not comfortable with, or legally allowed to view such content, turn around now. </p>\n          <p>Otherwise, if you have feedback or questions, let me know in the comments!</p>\n        </div>\n\n        <div class=\"start-menu-buttons\">\n          <TextButton class=\"farm-button start-button\" @click=\"menu.startGame()\">\n            <h2>Start</h2>\n          </TextButton>\n          <TextButton class=\"farm-button collection-button\" @click=\"menu.showCollection()\">\n            <h3>My Collection</h3>\n          </TextButton>\n          <TextButton class=\"farm-button settings-button\" @click=\"menu.showSettings()\">\n            <h3>Settings</h3>\n          </TextButton>\n          <TextButton class=\"farm-button mods-button\" @click=\"menu.showMods()\">\n            <h3>Mods</h3>\n          </TextButton>\n          <TextButton class=\"farm-button patch-button\" @click=\"$emit('goto-view', 'PatchNotesScreen')\">\n            <h3>Patch Notes</h3>\n          </TextButton>\n          <TextButton class=\"farm-button credits-button\" @click=\"$emit('goto-view', 'CreditsScreen')\">\n            <h3>Credits</h3>\n          </TextButton>\n          <TextButton class=\"farm-button exit-button\" @click=\"window().location.href = 'https://www.blushingdefeat.com/play/'\">\n            <h3>Exit to Blushing Defeat</h3>\n          </TextButton>\n        </div>\n      </div>\n      <div class=\"window extras\">\n        <PatreonButton2 :image=\"require('@/assets/patreon-banner-no-text.webp')\"\n                      link=\"https://www.patreon.com/gardamuse\"\n                      class=\"patreon\"\n                      >\n          Thank you for your support on <span style=\"color: #f96854;\">Patreon</span>!\n        </PatreonButton2>\n        <h3>An extra thank you to</h3>\n        <div class=\"extra-thanks\">\n          <p v-for=\"credit in menu.patreonCredits()\" class=\"credit\">{{ credit.name }}</p>\n        </div>\n      </div>\n      <div class=\"window more\">\n        <h2>More on Blushing Defeat</h2>\n        <RelatedThumb image=\"https://www.blushingdefeat.com/projects/cowgirl-dairy-farm/thumb-2.webp\"\n                      link=\"https://www.blushingdefeat.com/play/cowgirl-dairy-farm/\">\n          Cowgirl Dairy Farm\n        </RelatedThumb>\n        <RelatedThumb image=\"https://www.blushingdefeat.com/play/bimbo-personality-quiz/thumb.jpg\"\n                      link=\"https://www.blushingdefeat.com/play/bimbo-personality-quiz/\">\n          Bimbo Personality Quiz\n        </RelatedThumb>\n        <RelatedThumb image=\"https://www.blushingdefeat.com/projects/bimbo-booth/thumb.jpg\"\n                      link=\"https://www.blushingdefeat.com/bimbo-booth/\">\n          Bimbofication Booth\n        </RelatedThumb>\n        <RelatedThumb image=\"https://www.blushingdefeat.com/projects/mispell/misspell-thumb.png\"\n                      link=\"https://www.blushingdefeat.com/mispell/\">\n          Mispell\n        </RelatedThumb>\n      </div>\n\n      <!--<PatreonButton></PatreonButton>-->\n\n    </div>\n  </template>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport RelatedThumb from \"@/components/RelatedThumb.vue\"\nimport PatreonButton2 from \"@/components/PatreonButton2.vue\"\nimport PatchNotesScreen from \"@/components/screens/PatchNotesScreen.vue\"\nimport EndingsCollectionWindow from \"@/components/EndingsCollectionWindow.vue\"\nimport ModScreen from \"@/components/screens/ModScreen.vue\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton, PatreonButton2, RelatedThumb, PatchNotesScreen, EndingsCollectionScreen: EndingsCollectionWindow, ModScreen\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    //let farm = new Farm()\n    //await farm.load()\n    //this.farm = farm\n    this.isLoaded = true\n  }\n})\nexport default class StartMenu extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.menu-view {\n  display: grid;\n  grid-template-rows: auto 3fr 2fr;\n  grid-template-columns: minmax(0, 1fr) minmax(600px, 2fr) minmax(300px, 1fr) minmax(0, 1fr);\n  grid-template-areas:\n    \". p . .\"\n    \". t e .\"\n    \". t m .\";\n  grid-gap: 10px;\n  margin: 20px;\n\n  @media screen and (max-width: 1000px){\n    grid-template-rows: repeat(4, auto);\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      \"t\"\n      \"p\"\n      \"e\"\n      \"m\";\n    margin: 0;\n  }\n}\n\n.text-window {\n  grid-area: t;\n\n  display: flex;\n  flex-direction: column;\n  min-height: 80vh;\n  height: 100%;\n  max-width: 600px;\n  margin: auto;\n\n  box-sizing: border-box;\n\n  p {\n    margin-top: 1em;\n    margin-bottom: 1em;\n  }\n\n  @media screen and (max-width: $mobile-width){\n    padding: 10px\n  }\n}\n\n.extras {\n  grid-area: e;\n\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  max-width: 600px;\n  padding: 0;\n  margin: auto;\n\n  .patreon {\n    //height: 150px;\n  }\n\n  h3 {\n    padding: 0 20px;\n    margin: 5px;\n  }\n\n  .extra-thanks {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 40px repeat(auto-fit, auto);\n    grid-column-gap: 5px;\n    padding: 0 20px;\n\n    background: rgba($component-background-color, 0.75);\n  }\n}\n\n.more {\n  grid-area: m;\n\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  max-width: 600px;\n  margin: auto;\n\n  display: grid;\n  grid-template-rows: 40px 1fr 1fr;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 10px;\n  grid-template-areas:\n    \"t t\"\n    \". .\"\n    \". .\";\n\n  h2 {\n    grid-area: t;\n  }\n}\n\n.start-menu-text {\n  background: rgba($component-background-color, 0.75);\n  margin: 10px auto 50px auto;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.start-menu-buttons {\n  display: grid;\n  grid-template-columns: repeat(12, 1fr);\n  grid-template-rows: repeat(3, minmax(40px, 3fr)) 2fr 2fr;\n  grid-gap: 10px;\n\n  height: 100%;\n  //background-color: white;\n\n  .start-button {\n    grid-column: span 12;\n  }\n\n  .collection-button {\n    grid-column: span 4;\n  }\n\n  .settings-button {\n    grid-column: span 4;\n  }\n\n  .mods-button {\n    grid-column: span 4;\n  }\n\n  .patch-button {\n    grid-column: span 6;\n  }\n\n  .credits-button {\n    grid-column: span 6;\n  }\n\n  .exit-button {\n    grid-column: 3 / span 8;\n    grid-row: -2;\n  }\n\n  .text-button {\n    width: 100%;\n    box-sizing: border-box;\n    padding: 15px;\n    border-radius: $border-radius;\n  }\n}\n\n.title-row {\n  display: grid;\n  grid-template-columns: minmax(50px, 1fr) 3fr minmax(50px, 1fr);\n  grid-auto-rows: minmax(40px, 1fr);\n  align-items: center;\n\n  h1, h2, p {\n    margin: 0;\n  }\n\n  h1 {\n    text-align: center;\n    //line-height: 50px;\n  }\n\n  p {\n    text-align: right;\n    //line-height: 50px;\n  }\n}\n\n.text-button {\n  border: $component-border-style;\n\n  display: table;\n  div {\n    display: table-cell;\n    vertical-align: middle;\n  }\n\n  & > h1, & > h2, & > h3, & > h4, & > p {\n    display: table-cell;\n    vertical-align: middle;\n    text-align: center;\n  }\n}\n</style>\n","<template>\n  <a href=\"https://www.patreon.com/gardamuse\" :style=\"cssVars\" class=\"patreon-button\" />\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\n\n@Options({\n  props: {\n    label: String\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--background-image': 'url(' + require('@/assets/patreon-banner.webp') + ')'\n      }\n    }\n  }\n})\nexport default class PatreonButton extends Vue {\n  label!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n.patreon-button {\n  background: var(--background-image);\n  background-position: center top;\n  background-repeat: no-repeat;\n  background-size: cover;\n  display: block;\n  width: 1fr;\n  //max-width: 300px;\n  height: 200px;\n  margin: 10px auto;\n  border: $component-border-style;\n  backface-visibility: hidden;\n  transition: transform 0.3s;\n\n  &:hover {\n    transform: scale(1.024) translateY(0px) translateX(0px);\n  }\n}\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\n\n@Options({\n  props: {\n    label: String\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--background-image': 'url(' + require('@/assets/patreon-banner.webp') + ')'\n      }\n    }\n  }\n})\nexport default class PatreonButton extends Vue {\n  label!: string\n}\n","import { render } from \"./PatreonButton.vue?vue&type=template&id=d5159fe2&scoped=true\"\nimport script from \"./PatreonButton.vue?vue&type=script&lang=ts\"\nexport * from \"./PatreonButton.vue?vue&type=script&lang=ts\"\n\nimport \"./PatreonButton.vue?vue&type=style&index=0&id=d5159fe2&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-d5159fe2\"\n\nexport default script","<template>\n  <a class=\"related-thumb\" :href=\"link\">\n    <h3><slot></slot></h3>\n    <img :src=\"image\">\n  </a>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    image: String,\n    link: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class RelatedThumb extends Vue {\n  image!: string\n  link!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.related-thumb {\n  position: relative;\n  display: block;\n  min-height: 100px;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  transition: transform $selection-time;\n\n  h3 {\n    position: absolute;\n    bottom: 0;\n    z-index: 2;\n    margin: 10px;\n\n    transition: bottom $selection-time, top $selection-time;\n  }\n  img {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    object-position: top;\n    border-radius: $border-radius;\n  }\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    z-index: 1;\n\n    opacity: 0.7;\n    background-image: linear-gradient(0deg, #180202 10%, rgba(#180202, 0.6) 40%, rgba(#180202, 0) 70%);\n    border-bottom-left-radius: $border-radius - 1;\n    border-bottom-right-radius: $border-radius - 1;\n\n    transition: opacity $selection-time;\n  }\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    z-index: 1;\n\n    opacity: 0;\n    background-image: linear-gradient(180deg, #180202 5%, rgba(#180202, 0.3) 100%);\n    border-bottom-left-radius: $border-radius - 1;\n    border-bottom-right-radius: $border-radius - 1;\n\n    transition: opacity $selection-time;\n  }\n\n  &:hover {\n    transform: scale(1.03);\n\n    &::before {\n      //opacity: 0;\n    }\n\n    &::after {\n      //opacity: 1;\n    }\n\n    h3 {\n      //top: 0;\n    }\n  }\n}\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    image: String,\n    link: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class RelatedThumb extends Vue {\n  image!: string\n  link!: string\n}\n","import { render } from \"./RelatedThumb.vue?vue&type=template&id=072ed195&scoped=true\"\nimport script from \"./RelatedThumb.vue?vue&type=script&lang=ts\"\nexport * from \"./RelatedThumb.vue?vue&type=script&lang=ts\"\n\nimport \"./RelatedThumb.vue?vue&type=style&index=0&id=072ed195&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-072ed195\"\n\nexport default script","<template>\n  <a class=\"patreon-button-2\" :href=\"link\">\n    <h2><slot></slot></h2>\n    <img :src=\"image\">\n  </a>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    image: String,\n    link: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class PatreonButton2 extends Vue {\n  image!: string\n  link!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.patreon-button-2 {\n  position: relative;\n  display: block;\n  min-height: 200px;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  transition: transform $selection-time;\n\n  h2, h3 {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 2;\n    margin: 10px;\n    text-align: center;\n    //font-family: \"Croissant One\", \"Open Sans\", \"Helvetica Neue\", Avenir, Helvetica, Arial, sans-serif !important;\n\n    transition: bottom $selection-time, top $selection-time;\n  }\n  img {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    object-position: top;\n    border-radius: $border-radius;\n  }\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    z-index: 1;\n\n    opacity: 0.7;\n    background-image: linear-gradient(180deg, #180202 10%, rgba(#180202, 0.8) 40%, rgba(#180202, 0) 60%);\n    border-bottom-left-radius: $border-radius - 1;\n    border-bottom-right-radius: $border-radius - 1;\n\n    transition: opacity $selection-time;\n  }\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    z-index: 1;\n\n    opacity: 0;\n    background-image: linear-gradient(180deg, #180202 5%, rgba(#180202, 0.3) 100%);\n    border-bottom-left-radius: $border-radius - 1;\n    border-bottom-right-radius: $border-radius - 1;\n\n    transition: opacity $selection-time;\n  }\n\n  &:hover {\n    transform: scale(1.03);\n\n    &::before {\n      //opacity: 0;\n    }\n\n    &::after {\n      //opacity: 1;\n    }\n\n    h3 {\n      //top: 0;\n    }\n  }\n}\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    image: String,\n    link: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class PatreonButton2 extends Vue {\n  image!: string\n  link!: string\n}\n","import { render } from \"./PatreonButton2.vue?vue&type=template&id=3333a497&scoped=true\"\nimport script from \"./PatreonButton2.vue?vue&type=script&lang=ts\"\nexport * from \"./PatreonButton2.vue?vue&type=script&lang=ts\"\n\nimport \"./PatreonButton2.vue?vue&type=style&index=0&id=3333a497&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-3333a497\"\n\nexport default script","<template>\n  <div class=\"menu-view\">\n    <BlushWindow v-on:close=\"$emit('close')\">\n      <template v-slot:title>\n        <h2 style=\"margin: 0;\">Patch Notes</h2>\n      </template>\n      <div class=\"blush-list\">\n        <div v-for=\"patch in menu.patchNotes\" class=\"patch-window\">\n          <h2 v-if=\"patch.name.length > 0\">{{patch.id}} - {{patch.name}}</h2>\n          <h2 v-else>{{patch.id}}</h2>\n          <h4 style=\"font-weight: normal; text-align: right;\">{{patch.date}}</h4>\n          <div class=\"md-patchnotes\" style=\"grid-column: span 2;\" v-html=\"patch.text\"></div>\n        </div>\n      </div>\n    </BlushWindow>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    this.isLoaded = true\n  }\n})\nexport default class PatchNotesScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n</script>\n\n<style lang=\"scss\">\n.md-patchnotes {\n  h1 {\n    font-size: large;\n  }\n\n  ul {\n    list-style-type: none;\n    padding-left: 15px;\n    margin: 10px 0;\n\n    li {\n      border-left: 3px solid #ddd;\n      padding: 0 10px;\n      margin-bottom: 7px;\n      background: rgba($component-background-color, 0);\n\n      ul {\n        padding-left: 1ch;\n        margin: 5px 0 0 0;\n\n        li {\n          list-style-type: disc;\n          list-style-position: inside;\n          color: #ccc;\n          border-left: 0 solid;\n          background: rgba($component-background-color, 0);\n          font-style: italic;\n        }\n      }\n    }\n  }\n}\n</style>\n\n<style scoped lang=\"scss\">\n.menu-view {\n  height: 100vh;\n\n  display: grid;\n  grid-template-rows: auto auto;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    \"t\"\n    \"t\";\n  grid-gap: 20px;\n\n  @media screen and (max-width: $mobile-width){\n    grid-template-areas:\n      \"t\"\n      \"t\";\n    margin: 0;\n  }\n}\n\n.blush-window {\n  grid-area: t;\n\n  box-sizing: border-box;\n  flex-direction: column;\n  min-height: 200px;\n  max-height: 100%;\n  width: 100%;\n  max-width: 700px;\n  margin: 20px auto;\n\n  @media screen and (max-width: $mobile-width){\n    padding: 10px;\n    margin: 0 auto;\n  }\n}\n\n.list-wrapper {\n  display: grid;\n  grid-template-areas: \"c\";\n\n  height: 100%;\n}\n\n.blush-list {\n  grid-area: c;\n\n  box-sizing: border-box;\n  min-height: 100%;\n  border: 1px solid black;\n  border-radius: $border-radius;\n\n  p {\n    margin: 0;\n  }\n}\n\n.patch-window {\n  display: grid;\n  grid-template-rows: auto 1fr;\n  grid-template-columns: 3fr 1fr;\n\n  margin-bottom: 10px;\n  padding: 10px;\n\n  background-color: rgba($component-background-color, 0.75);\n\n  h2, h3, h4, p {\n    margin: 0;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"blush-window\">\n    <slot name=\"title\"></slot>\n    <template v-if=\"!noCross\">\n      <TextButton class=\"farm-button close-button\" @click=\"$emit('close')\">\n        <h3>X</h3>\n      </TextButton>\n    </template>\n    <div class=\"content\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard\n  },\n  props: {\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BlushWindow extends Vue {\n  noCross: boolean = false\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .blush-window {\n    background: $window-background-color;\n    padding: 10px;\n    border: 3px solid black;\n    border-radius: $border-radius;\n\n    box-sizing: border-box;\n    min-height: 100px;\n    width: 100%;\n\n    display: grid;\n    grid-template-rows: 40px auto;\n    grid-template-columns: auto 50px;\n    grid-template-areas:\n    \"t x\"\n    \"c c\";\n    grid-gap: 10px;\n  }\n\n  .close-button {\n    border: 1px solid black;\n    margin: 0;\n    padding: 0;\n\n    h3 {\n      margin: 0;\n    }\n  }\n\n  .content {\n    grid-area: c;\n    overflow-y: auto;\n    height: 100%;\n  }\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard\n  },\n  props: {\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BlushWindow extends Vue {\n  noCross: boolean = false\n}\n","import { render } from \"./BlushWindow.vue?vue&type=template&id=640bcb6c&scoped=true\"\nimport script from \"./BlushWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./BlushWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./BlushWindow.vue?vue&type=style&index=0&id=640bcb6c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-640bcb6c\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    this.isLoaded = true\n  }\n})\nexport default class PatchNotesScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n","import { render } from \"./PatchNotesScreen.vue?vue&type=template&id=02320d62&scoped=true\"\nimport script from \"./PatchNotesScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./PatchNotesScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./PatchNotesScreen.vue?vue&type=style&index=0&id=02320d62&lang=scss\"\nimport \"./PatchNotesScreen.vue?vue&type=style&index=1&id=02320d62&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-02320d62\"\n\nexport default script","<template>\n  <BlushWindow class=\"endings-collection-window\" v-on:close=\"onClose()\" :no-cross=\"endingsCollection.currentEpilogue === undefined\">\n    <template v-slot:title>\n      <template v-if=\"endingsCollection.currentEpilogue === undefined\">\n        <h2 style=\"margin: 0;\">Epilogues</h2>\n      </template>\n      <template v-else>\n        <h2 style=\"margin: 0;\">{{ endingsCollection.currentEndingLabel() }}</h2>\n      </template>\n    </template>\n    <div class=\"blush-list\" v-if=\"endingsCollection.currentEpilogue === undefined\">\n      <div v-for=\"epilogue in endingsCollection.unlockedEpilogues()\" class=\"patch-window\">\n        <h2 style=\"grid-column: 1 / -1;\">{{ epilogue.title }}\n        <span class=\"text\" style=\"font-size: 0.6em; font-weight: normal;\">\n          Unlocked endings: {{ endingsCollection.unlockedEndings(epilogue).length }} / {{ epilogue.getAllEndings().length }}\n        </span>\n        </h2>\n        <template v-for=\"ending in endingsCollection.unlockedEndings(epilogue)\" :key=\"ending\">\n          <TextButton class=\"ending-button\" @click=\"endingsCollection.select(epilogue.id, ending)\">\n            <b>{{ epilogue.getEndpointLabel(ending) }}</b>\n          </TextButton>\n        </template>\n      </div>\n    </div>\n    <template v-else>\n      <ChatView :lines=\"endingsCollection.currentEndingMessages()\"></ChatView>\n    </template>\n  </BlushWindow>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport EndingsCollection from \"@/EndingsCollection\"\nimport ChatView from \"@/components/ChatView.vue\"\nimport Epilogue from \"@/Epilogue\"\n\n@Options({\n  components: {\n    ChatView,\n    TextButton,\n    BlushWindow\n  },\n  props: {\n    menu: Object,\n    endingsCollection: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    },\n    onClose() {\n      if (this.endingsCollection.currentEpilogue == undefined) {\n        this.$emit('close')\n      } else {\n        this.endingsCollection.unselect()\n      }\n    }\n  }\n})\nexport default class EndingsCollectionWindow extends Vue {\n  menu!: Menu\n  endingsCollection: EndingsCollection = new EndingsCollection(this.menu)\n}\n</script>\n\n<style lang=\"scss\">\n.md-patchnotes {\n  h1 {\n    font-size: large;\n  }\n\n  ul {\n    list-style-type: none;\n    padding-left: 15px;\n    margin: 10px 0;\n\n    li {\n      border-left: 3px solid #ddd;\n      padding: 0 10px;\n      margin-bottom: 7px;\n      background: rgba($component-background-color, 0);\n\n      ul {\n        padding-left: 1ch;\n        margin: 5px 0 0 0;\n\n        li {\n          list-style-type: disc;\n          list-style-position: inside;\n          color: #ccc;\n          border-left: 0 solid;\n          background: rgba($component-background-color, 0);\n          font-style: italic;\n        }\n      }\n    }\n  }\n}\n</style>\n\n<style scoped lang=\"scss\">\n.menu-view {\n  height: 100vh;\n\n  display: grid;\n  grid-template-rows: auto auto;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    \"t\"\n    \"t\";\n  grid-gap: 20px;\n\n  @media screen and (max-width: $mobile-width){\n    grid-template-areas:\n      \"t\"\n      \"t\";\n    margin: 0;\n  }\n}\n\n.blush-window {\n  //grid-area: t;\n\n  box-sizing: border-box;\n  flex-direction: column;\n  min-height: 200px;\n  max-height: 100%;\n  width: 100%;\n  max-width: 700px;\n  margin: 0px auto;\n\n  @media screen and (max-width: $mobile-width){\n    padding: 10px;\n    margin: 0 auto;\n  }\n}\n\n.list-wrapper {\n  display: grid;\n  grid-template-areas: \"c\";\n\n  height: 100%;\n}\n\n.blush-list {\n  grid-area: c;\n\n  box-sizing: border-box;\n  min-height: 100%;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  background-color: $window-background-color;\n\n  p {\n    margin: 0;\n  }\n}\n\n.patch-window {\n  display: grid;\n  grid-template-rows: auto 1fr;\n  grid-template-columns: 1fr;\n  grid-gap: 5px;\n\n  margin: 0 0 10px 0;\n  padding: 10px;\n  border-top: $component-border-style;\n  border-bottom: $component-border-style;\n  //border-radius: $border-radius;\n\n  background-color: rgba($component-background-color, 1);\n  //border-bottom: 1px solid black;\n\n  h2, h3, h4, p {\n    margin: 0;\n  }\n}\n\n.ending-button {\n  border: $component-border-style;\n  padding: 10px;\n}\n\n.chat-view {\n  flex-direction: column;\n  background-color: $component-background-color;\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport EndingsCollection from \"@/EndingsCollection\"\nimport ChatView from \"@/components/ChatView.vue\"\nimport Epilogue from \"@/Epilogue\"\n\n@Options({\n  components: {\n    ChatView,\n    TextButton,\n    BlushWindow\n  },\n  props: {\n    menu: Object,\n    endingsCollection: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    },\n    onClose() {\n      if (this.endingsCollection.currentEpilogue == undefined) {\n        this.$emit('close')\n      } else {\n        this.endingsCollection.unselect()\n      }\n    }\n  }\n})\nexport default class EndingsCollectionWindow extends Vue {\n  menu!: Menu\n  endingsCollection: EndingsCollection = new EndingsCollection(this.menu)\n}\n","import { render } from \"./EndingsCollectionWindow.vue?vue&type=template&id=2e56c106&scoped=true\"\nimport script from \"./EndingsCollectionWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./EndingsCollectionWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./EndingsCollectionWindow.vue?vue&type=style&index=0&id=2e56c106&lang=scss\"\nimport \"./EndingsCollectionWindow.vue?vue&type=style&index=1&id=2e56c106&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-2e56c106\"\n\nexport default script","<template>\n  <div class=\"settings-screen\">\n    <TabWindow :tabs=\"['mods', 'modCreation', 'tools', 'cardData', 'exit']\" @close=\"$emit('close')\">\n      <template v-slot:mods>\n        <div class=\"mods\">\n          <div>\n            <h2>Mods</h2>\n            <div class=\"button-row\">\n              <p style=\"margin: 0;\">Click the button and then select a mod zip file to load it. It is recommended to back up your save file first. There may be no error message if something goes wrong.</p>\n              <div>\n                <label for=\"mod-import\" class=\"load-button\"><b>Load Mod</b></label>\n                <input id=\"mod-import\" type=\"file\" accept=\".zip\" v-on:change=\"addMod\"\n                       style=\"display: none;\">\n              </div>\n            </div>\n            <p>Your save file may grow very large if you load many mods or mods with unoptimized images.</p>\n            <p><b>Only load mods from trusted sources!</b></p>\n          </div>\n          <div>\n            <h2>Active Mods</h2>\n          </div>\n          <BlushList style=\"overflow: auto;\">\n            <div v-for=\"mod in menu.mods\" class=\"mod\">\n              <div class=\"mod-info\">\n                <h3 class=\"mod-title\">{{ mod.name }}</h3>\n                <p class=\"mod-version\">v{{ mod.version }}</p>\n                <p class=\"mod-authors\">\n                  by\n                  <template v-for=\"(author, index) in mod.authors\">\n                    {{ author }}<span v-if=\"index + 1 < mod.authors.length\">, </span>\n                  </template>\n                </p>\n                <p class=\"mod-description\">{{ mod.description }}</p>\n                <p class=\"mod-cards\">Cards: {{ mod.cards.length }}<span style=\"margin: 0 10px;\"></span> Epilogues: {{ mod.epilogues.length }}</p>\n                <p class=\"mod-epilogues\"></p>\n              </div>\n              <TextButton class=\"delete-save-button\" @click=\"removeMod(mod.id)\">\n                <h3>Remove mod</h3>\n                <i>All mod content will be immediately removed from your save file.</i>\n              </TextButton>\n            </div>\n          </BlushList>\n        </div>\n      </template>\n      <template v-slot:modCreation>\n        <h2>Create Your Own Mod!</h2>\n        <p>If you feel there is some content missing from the game, you may be able to create a mod that adds it! Mods can currently:</p>\n        <BlushList class=\"mod-supports\">\n          <p>Override existing cards.</p>\n          <p>Add new cards.</p>\n          <p>Add new epilogues.</p>\n        </BlushList>\n        <p>Please note that mod support is new in version 1.5. I have done as much testing as I can, but there may well be bugs.</p>\n        <hr>\n        <h2>How to Create a Mod</h2>\n        <p>Mods are written in <a href=\"https://hjson.github.io/\">Hjson</a>. Don't worry, Hjson files are just text and can be opened in any plain text editor such as Notepad. I can recommend <a href=\"https://atom.io/\">Atom</a> or <a href=\"https://notepad-plus-plus.org/\">Notepad++</a>.</p>\n        <p><b>I have created an <a href=\"example-mod.zip\">Example Mod</a></b> that you can download. Look at how that mod adds the type of content you want to do, and do it the same way. I recommend looking at the example mod before reading any more here.</p>\n        <p>After opening the zip file you will see a folder, inside is a file called <code>info.hjson</code>. This file will contain information about your mod, such as its name. Inside the root folder are more folders, one for each type of moddable content, each with a specific name. You only need the folders you are adding content for.</p>\n        <p>When you have created your mod and need to zip everything up, if you're on Windows, the built-in .zip compression has been known to not work. Instead I can recommend using <a href=\"https://www.7-zip.org/\" target=\"_blank\">7-Zip</a> (you still need to create a .zip file, not .7z or anything else). In addition, if you try loading your mod and it doesn't work, you may need to reload the page before trying again. The mod loader may have crashed without giving you an error message.</p>\n        <hr>\n        <h2>Mod Distribution and Rules</h2>\n        <p>There isn't yet any dedicated mod listing site. For the time being you can upload your mods somewhere (<a href=\"https://ufile.io/\" target=\"_blank\">ufile.io</a> is a pretty good site) and post the link and a short description in the comments section.</p>\n        <p>Make sure that your mod doesn't involve illegal content. Always be clear with what content your mod does contain.</p>\n        <p>Paid mods are not allowed. Any mods you publish should be freely available.</p>\n        <hr>\n\n        <h2>Tags</h2>\n        <p>Cards can have any number of tags. These tags are used by content filters, and to determine which ending the player fulfills. Tags on a parent card are inherited by all its subcards, but the subcards can also add its own tags.</p>\n        <p>Currently, the following tags are in use:</p>\n        <BlushList style=\"height: 50px;\">\n          <div style=\"display: flex; flex-wrap: wrap;\">\n            <p v-for=\"tag in allTags()\" style=\"margin: 0 5px;\">\"{{ tag }}\"</p>\n          </div>\n        </BlushList>\n        <p>The \"extreme\" tag is used to indicate that this card is an extreme version of one of its other tags.</p>\n        <hr>\n\n        <h2>Epilogue Requirements</h2>\n        <p>Epilogues must specify requirements. If the player has cards that fulfill those requirements, the epilogue is considered fulfilled.</p>\n        <p>An epilogue is not always show even if it is fulfilled. Epilogues have priority groups (0, 10, 20, 30, 40). Only fulfilled epilogues from the highest priority group that has any fulfilled epilogues will be available to the player.</p>\n        <p>Requirements may contain card ids, card family ids, card tags and the special tag \"all\". These are compared to numbers and combined with \"AND\" and \"OR\" keywords. Let's look at some examples.</p>\n        <div class=\"code-example\">\n          <p><b>Ex 1:</b> An epilogue with the following requirement will be fulfilled if the player has at least 1 level of a card with the iq tag, and at least level 4 of the gold card.</p>\n          <code>iq > 0 AND gold > 3</code>\n        </div>\n        <br>\n        <div class=\"code-example\">\n          <p><b>Ex 2:</b> The numbers are always card levels. Many cards only have one level, and count as 1, but leveled cards count as however much their level is. The following can be fulfilled by 3 different cards with the \"iq\" tag, or by for instance, the Level 5 Intelligence card.</p>\n          <code>iq > 3</code>\n        </div>\n        <br>\n        <div class=\"code-example\">\n          <p><b>Ex 3:</b> \"OR\" separates groups of \"AND\". The following is fulfilled if there is either at least 1 level of iq tag cards and at least level 4 of the gold card, OR if there is no more than 4 pet cards, at least 2 spell cards and no more than 1 lactation cards.</p>\n          <code>iq > 0 AND gold > 3 OR pet &lt;= 4 AND spell >= 2 AND lactation &lt; 2</code>\n          <p>It is NOT possible to use parenthesis to change the order of operations. OR always separates groups of AND.</p>\n        </div>\n\n        <p>Finally, each dialogue option in the epilogue may also have a requirement. These work in the same way as for epilogues. There should always be at least one dialogue option with no requirement.</p>\n        <hr>\n\n        <h2>Epilogue Likelihood (Priority Group)</h2>\n        <div>\n          <p>Each epilogue has the field <code>likelihood</code>. The higher the number in this field, the higher the priority group the epilogue belongs to.</p>\n          <p>The player is able to choose between all fulfilled epilogues in the highest priority group that has any fulfilled epilogues.</p>\n          <p>For instance, the \"Unchanged\" epilogue has <code>likelihood: 0</code>, \"Bimbo\" has <code>likelihood: 20</code> and \"Goth\" has <code>likelihood: 20</code> too. If the player fulfill all those epilogues' requirements, they will get to choose between \"Bimbo\" and \"Goth\".</p>\n          <p>This means that endings that are in some sense \"worse\" can take priority over milder endings. So that if the player fulfills both \"Bimbo\" and \"Bimbo Ditz\", they will only be able to choose \"Bimbo Ditz\".</p>\n          <p>Below are the priority groups for all built-in and currently loaded modded epilogues.</p>\n        </div>\n        <BlushList class=\"card-ids\" style=\"min-height: 100px; height: auto;\">\n          <div v-for=\"ep in [...menu.endings.epilogues].sort((a, b) => a.likelihood - b.likelihood)\"\n               style=\"\n               display: grid;\n               grid-template-columns: 1fr 3fr;\n               border-bottom: 1px dashed #fffa;\"\n               :style=\"{'background-color': `hsl(${ep.likelihood * 6}, 50%, ${util.clamp(10 + (ep.likelihood / 70) * 50, 0, 50)}%)`}\"\n          >\n            <h3>{{ ep.title }}</h3> <p style=\"margin: 0;\"><code style=\"background-color: #0000;\">likelihood: {{ ep.likelihood }}</code></p>\n          </div>\n        </BlushList>\n\n        <hr>\n        <h2>Extra Details</h2>\n        <p>Mod version must be specified using valid <a href=\"https://semver.org/\">Semantic Versioning</a>.</p>\n        <p>It is not possible to override only a subcard. In that case you must override the entire card and all its levels.</p>\n        <p>If you encounter bugs when loading your mod, you can try opening your browser console. There could be some useful warning messages there.</p>\n\n        </template>\n        <template v-slot:cardData>\n          <h2>Card Data</h2>\n          <p>This list shows all card ids, and tags for all cards, including loaded mods. You'll want to refer to this list if you're looking to override an existing card.</p>\n          <p>Intensity is how much a card counts towards requirements. For instance, <code>ass size.ass size 2</code> gives +2 towards any requirement that it's part of, and can thus fulfill <code>ass size >= 2</code> or <code>expansion > 1</code>.</p>\n          <BlushList class=\"card-ids\">\n            <div v-for=\"card in refDeck().cards.sort((a, b) => a.name.localeCompare(b.name))\" class=\"card-entry\">\n              <div class=\"label\">\n                <h3>{{ card.name }}</h3>\n              </div>\n              <h3 class=\"card-id\">ID</h3>\n              <h3 class=\"card-tags\">Tags</h3>\n              <h3 class=\"card-level\">Intensity</h3>\n\n              <code class=\"card-id\">\"{{ card.id }}\"</code>\n              <code class=\"card-tags\"><template v-for=\"tag in card.tags\">\"{{ tag }}\" </template></code>\n              <code class=\"card-level\">{{ card.intensity }}</code>\n\n              <template v-if=\"card.isParent\">\n                <template v-for=\"subcard in card.subcards\" v-bind:key=\"subcard.id\">\n                  <code class=\"card-id\">\"{{ subcard.id }}\"</code>\n                  <code class=\"card-tags\"><template v-for=\"tag in subcard.tags\">\"{{ tag }}\" </template></code>\n                  <code class=\"card-level\">{{ subcard.intensity }}</code>\n                </template>\n              </template>\n            </div>\n          </BlushList>\n        </template>\n\n      <template v-slot:tools>\n        <h2>Epilogue Simulation</h2>\n        <p>When adding an epilogue it may be difficult to know how strict to make the requirements. This tool lets you simulate a number of games where the player picks cards at random.</p>\n          <p>The tool shows how many times each epilogue was fulfilled and how many times the epilogue was available for the user to pick at the end screen. You can also see how many times another epilogue was available at the same time.</p>\n        <p>The page may become unresponsive for a few seconds while simulating.</p>\n        <div style=\"display: grid; grid-template-columns: 1fr 1fr;\">\n          <TextButton class=\"load-button\" @click=\"simulateEpilogues(100)\">Simulate 100 games</TextButton>\n          <TextButton class=\"load-button\" @click=\"simulateEpilogues(1000)\">Simulate 1000 games</TextButton>\n        </div>\n        <pre id=\"epilogue-simulation-output\"></pre>\n        <hr>\n        <h2>Epilogue Preview</h2>\n        <p>Here you can go directly to the epilogues of any currently loaded mods with devmode activated.</p>\n        <p>You will automatically fulfill the requirements for all dialogue options in this mode.</p>\n        <p>Completing endings here will add them to the collection of your current save file.</p>\n        <div class=\"epilogue-preview-buttons\">\n          <template v-for=\"epilogue of moddedEpilogues()\" v-bind:key=\"epilogue.id\">\n            <TextButton class=\"load-button\" @click=\"toEnd(epilogue.id)\">{{ epilogue.title }}</TextButton>\n          </template>\n        </div>\n      </template>\n    </TabWindow>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\nimport FilterWindow from \"@/components/FilterWindow.vue\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport TabWindow from \"@/components/TabWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport Deck from \"@/cards/Deck\"\nimport Epilogue from \"@/Epilogue\"\nimport EndStage from \"@/stages/EndStage\"\nimport Epilogues from \"@/Epilogues\"\n\n@Options({\n  components: {\n    BlushList,\n    TextButton,\n    Credit,\n    FilterWindow,\n    BlushWindow,\n    TabWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    window() {\n      return window\n    },\n    deleteCollection() {\n      if (confirm(\"Are you sure you wish to delete your card collection? This can't be undone.\")) {\n        this.menu.deleteCollection()\n      }\n    },\n    addMod(event: any) {\n      this.menu.loadMod(event, () => {\n        console.log(\"All tags:\", this.allTags())\n      })\n    },\n    removeMod(modId: string) {\n      if (confirm(\"Unloading this mod will remove all its data from your save file. If you wish to update this mod, just load the new version instead.\\n\\nAre you sure you want to remove this mod?\")) {\n        this.menu.unloadMod(modId)\n      }\n    },\n    simulateEpilogues(iterations: number) {\n      let field = document.getElementById(\"epilogue-simulation-output\")\n      if (field == null) {\n        console.error(\"Could not find log field.\")\n        return\n      }\n      field.innerText = \"\"\n      let log = (s: string) => {\n        field!.innerText += s + \"\\n\"\n      }\n      let clear = (s: string) => {\n        field!.innerText = \"\"\n      }\n      this.menu.endings.correctnessSimulation(iterations, log, clear)\n    },\n    toEnd(epilogueId: string) {\n      this.menu.startGame()\n      let stage = new EndStage(this.menu.game!) // Use a Dialoguestage instead?\n      this.menu.game!.state.stage = stage\n      stage.onStart()\n\n      let endings: Epilogues = this.menu.endings || new Epilogues()\n      let ending: Epilogue = endings.selectEnding(epilogueId)\n      stage.createYourNewLifeButton(ending)\n    },\n    refDeck() {\n      return Deck.referenceDeck()\n    },\n    allTags() {\n      let tags = new Set<string>()\n      for (let card of Deck.referenceDeck().unpack().cards) {\n        for (let tag of card.tags) {\n          tags.add(tag)\n        }\n      }\n      return [...tags.values()].sort()\n    },\n    moddedEpilogues(): Epilogue[] {\n      let epilogues: Epilogue[] = []\n      for (let ep of this.menu.endings.epilogues) {\n        if (ep.mod == \"\") continue\n        let modId = ep.mod\n        let mod = this.menu.mods[modId]\n\n        if (mod != undefined && mod.devmode) epilogues.push(ep)\n      }\n      return epilogues\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class ModScreen extends Vue {\n  menu!: Menu\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.settings-screen {\n  height: 100vh;\n\n  display: grid;\n  grid-template-rows: auto;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    \"t\";\n  grid-gap: 20px;\n\n  h1, h2, h3, h4, h5 {\n    margin: 0px 0;\n  }\n\n  @media screen and (max-width: $mobile-width){\n    grid-template-areas: \"t\";\n    margin: 0;\n    height: auto;\n  }\n\n  hr {\n    border: 1px solid #fffa;\n  }\n}\n\n.tab-window {\n  grid-area: t;\n\n  width: 100vw;\n  max-width: 800px;\n  height: calc(100vh - 2 * 2vh);\n  margin: 2vh auto;\n}\n\n.button-row {\n  display: grid;\n  grid-template-columns: 2fr 1fr;\n  grid-gap: 10px;\n  margin-bottom: 15px;\n}\n\n.button {\n  border-radius: $border-radius;\n  border: 1px solid black;\n  text-align: center;\n  min-height: 40px;\n}\n\n.normal-button {\n  @extend .button;\n  background-color: #006622;\n  &:hover {\n    background-color: lighten(#006622, 10%);\n  }\n}\n\n.load-button {\n  @extend .button;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background-color $selection-time;\n\n  background-color: #005599;\n  &:hover {\n    background-color: lighten(#005599, 10%);\n  }\n}\n\n.delete-save-button {\n  @extend .button;\n  background-color: #700;\n  &:hover {\n    background-color: #900;\n  }\n}\n\n.mods {\n  box-sizing: border-box;\n  height: 100%;\n\n  display: grid;\n  grid-template-rows: auto auto 1fr;\n  grid-gap: 10px;\n\n  p {\n    font-size: 13px;\n  }\n}\n\n.mod {\n  background-color: $window-background-color;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  margin: 10px;\n  padding: 0 0 0 10px;\n\n  display: grid;\n  grid-template-columns: 2fr 1fr;\n  grid-template-rows: 1fr;\n  grid-gap: 15px;\n}\n\n.mod-info {\n  display: grid;\n  grid-template-rows: auto auto auto auto;\n  grid-template-columns: repeat(12, 1fr);\n  grid-gap: 10px;\n\n  p {\n    margin: auto 0;\n  }\n\n  .mod-title {\n    grid-column: span 8;\n  }\n\n  .mod-version {\n    grid-column: span 4;\n    text-align: right;\n  }\n\n  .mod-authors {\n    grid-column: span 12;\n  }\n\n  .mod-cards {\n    grid-column: span 12;\n  }\n\n  .mod-description {\n    grid-column: span 12;\n  }\n}\n\n.mod-supports {\n  height: auto;\n  padding: 10px;\n  p {\n    margin: 5px 0;\n  }\n}\n\ncode {\n  background-color: rgba($component-background-color, 0.9);\n  padding: 5px;\n}\n\n.code-example {\n  margin-left: 20px;\n  padding: 10px;\n  border-left: 2px solid #fffa;\n  background-color: rgba($component-background-color, 0.5);\n}\n\n.card-ids {\n  height: auto;\n\n  .card-entry {\n    display: grid;\n\n    grid-template-columns: 4fr 3fr 1fr;\n\n    .label {\n      grid-column: span 2;\n      grid-row: 1;\n\n      p {\n        margin: 0;\n      }\n    }\n\n    .card-row {\n      background-color: rgba(#fff, 0.1);\n      border-bottom: 1px dashed #fffa;\n      padding: 3px 10px;\n    }\n\n    .card-id {\n      @extend .card-row;\n      grid-column: 1;\n      border-right: 1px solid #fffa;\n    }\n\n    .card-tags {\n      @extend .card-row;\n      grid-column: 2;\n      border-right: 1px solid #fffa;\n    }\n\n    .card-level {\n      @extend .card-row;\n      grid-column: 3;\n    }\n\n    code {\n      padding-left: 3ch;\n    }\n  }\n}\n\n#epilogue-simulation-output {\n  font-size: 12px;\n  min-height: 100px;\n  background-color: $component-background-color;\n  border: $component-border-style;\n  border-radius: $border-radius;\n  padding: 10px;\n}\n\n.epilogue-preview-buttons {\n  display: flex;\n  background-color: $component-background-color;\n  border: $component-border-style;\n  border-radius: $border-radius;\n  flex-wrap: wrap;\n  min-height: 50px;\n\n  & > * {\n    flex: 1;\n    min-width: 100px;\n    margin: 5px;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"credit\">\n    <h3>\n      {{ name }}\n      | <span style=\"font-size: 0.8em;\" ><a :href=\"link\" target=\"_blank\" >{{ linkText }}</a></span>\n    </h3>\n    <p style=\"font-size: 0.8em; color: #ccc;\">\n      <slot></slot>\n    </p>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    name: String,\n    link: String,\n    linkText: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class Credit extends Vue {\n  name!: string\n  link!: string\n  linkText!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n.credit {\n  background-color: $component-background-color;\n  padding: 10px 5px;\n  margin-bottom: 5px;\n}\n\nh2, h3, p {\n  margin: 0;\n}\n\na:hover {\n  color: $highlight-color;\n}\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    name: String,\n    link: String,\n    linkText: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class Credit extends Vue {\n  name!: string\n  link!: string\n  linkText!: string\n}\n","import { render } from \"./Credit.vue?vue&type=template&id=27444a3f&scoped=true\"\nimport script from \"./Credit.vue?vue&type=script&lang=ts\"\nexport * from \"./Credit.vue?vue&type=script&lang=ts\"\n\nimport \"./Credit.vue?vue&type=style&index=0&id=27444a3f&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-27444a3f\"\n\nexport default script","<template>\n  <div class=\"filter-window\">\n    <div>\n      <h2>Content Filters</h2>\n      <h3 v-if=\"!menu.isFilteringTooMuch()\">Currently including {{ menu.cardsFilteredString() }}</h3>\n      <h3 v-else>\n        Currently including {{ menu.cardsFilteredString() }}. WARNING: There may not be enough cards left.\n      </h3>\n      <p>The game generally isn't very extreme, but you may not like everything. Filters will try to remove most of the content you are not interested in.</p>\n      <p><b>Tip:</b> Remove only what you actually dislike, not what makes for a \"bad end\", since those are often very fun.</p>\n    </div>\n    <BlushList class=\"instructions\">\n      <p><b>All</b> - Include all content in this category.</p>\n      <p><b>Some</b> - Do not include extreme content in this category. Example: No immobilizingly large breast expansion.</p>\n      <p><b>None</b> - Remove as much content in this category as possible.</p>\n    </BlushList>\n    <BlushList class=\"filter-entries\">\n      <div v-for=\"filter in menu.settings.filters\" class=\"filter-entry\">\n        <div class=\"label\">\n          <h3>{{ filter.name }}</h3>\n          <p>{{ filter.description }}</p>\n        </div>\n        <TextButton style=\"grid-area: b1;\" :class=\"{'selected-green': filter.strictness === 0}\" @click=\"setStrictness(filter, 0)\"><h4>All</h4></TextButton>\n        <TextButton style=\"grid-area: b2;\" :class=\"{'selected-yellow': filter.strictness === 1}\" @click=\"setStrictness(filter, 1)\"><h4>Some</h4></TextButton>\n        <TextButton style=\"grid-area: b3;\" :class=\"{'selected-red': filter.strictness === 2}\" @click=\"setStrictness(filter, 2)\"><h4>None</h4></TextButton>\n      </div>\n    </BlushList>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport Menu from \"@/Menu\"\nimport FilterSetting from \"@/FilterSetting\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow, BlushList\n  },\n  props: {\n    menu: Object,\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n    setStrictness(filter: FilterSetting, value: number) {\n      filter.strictness = value\n      this.menu.save()\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class FilterWindow extends Vue {\n  menu!: Menu\n  noCross: boolean = false\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.filter-window {\n  box-sizing: border-box;\n  height: 100%;\n\n  display: grid;\n  grid-template-rows: auto auto 1fr;\n  grid-gap: 10px;\n\n  h1, h2, h3, h4, h5, p {\n    margin: 5px 0;\n  }\n\n  p {\n    font-size: 13px;\n  }\n}\n\n.instructions {\n  p {\n    margin: 5px 10px;\n  }\n}\n\n.filter-entries {\n  overflow: auto;\n}\n\n.filter-entry {\n  display: grid;\n  grid-template-columns: 2fr repeat(3, minmax(auto, 1fr));\n  grid-template-rows: 1fr;\n  grid-template-areas:\n    \"d b1 b2 b3\";\n  grid-gap: 0;\n\n  background-color: $window-background-color;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  margin: 10px;\n\n  h1, h2, h3, h4, p{\n    margin: 0;\n  }\n\n  .label {\n    padding: 0 10px 5px 10px;\n\n    p {\n      font-size: 12px;\n    }\n  }\n\n  @media screen and (max-width: $mobile-width){\n    margin: 5px;\n  }\n}\n\n.text-button {\n  border-left: 1px solid black;\n\n  &:last-child {\n    border-top-right-radius: $border-radius;\n    border-bottom-right-radius: $border-radius;\n  }\n}\n\n.selected-green, .selected-green:hover, .selected-green:active {\n  background-color: #062;\n  cursor: default;\n}\n\n.selected-yellow, .selected-yellow:hover, .selected-yellow:active {\n  background-color: #c80;\n  cursor: default;\n}\n\n.selected-red, .selected-red:hover, .selected-red:active {\n  background-color: #700;\n  cursor: default;\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport Menu from \"@/Menu\"\nimport FilterSetting from \"@/FilterSetting\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow, BlushList\n  },\n  props: {\n    menu: Object,\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n    setStrictness(filter: FilterSetting, value: number) {\n      filter.strictness = value\n      this.menu.save()\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class FilterWindow extends Vue {\n  menu!: Menu\n  noCross: boolean = false\n}\n","import { render } from \"./FilterWindow.vue?vue&type=template&id=73496115&scoped=true\"\nimport script from \"./FilterWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./FilterWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./FilterWindow.vue?vue&type=style&index=0&id=73496115&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-73496115\"\n\nexport default script","<template>\n  <div class=\"tab-window\">\n    <div class=\"tabs\">\n      <template v-for=\"tab in tabs\" v-bind:key=\"tab\">\n        <TextButton :class=\"{'active-tab': tab === activeTab}\" @click=\"activateTab(tab)\">\n          <h3 class=\"tab-label\">{{ util.camelToTitleCase(tab) }}</h3>\n        </TextButton>\n      </template>\n    </div>\n    <div class=\"content-window\">\n      <div class=\"content\">\n        <slot :name=\"activeTab\"></slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard\n  },\n  props: {\n    tabs: Array\n  },\n  emits: ['close', 'activatedTab'],\n  methods: {\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.$emit('activatedTab', tab)\n      if (tab == 'exit' || tab == 'close') this.$emit('close')\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  },\n  created() {\n    this.activateTab(this.tabs[0])\n  }\n})\nexport default class TabWindow extends Vue {\n  tabs: string[] = []\n  activeTab: string = \"\"\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .tab-window {\n    display: grid;\n    grid-template-rows: 60px 1fr;\n    grid-template-areas:\n        \"t\"\n        \"c\";\n  }\n\n  .content-window {\n    background: $window-background-color;\n    padding: 10px;\n    border: 3px solid black;\n    border-radius: $border-radius;\n\n    box-sizing: border-box;\n    min-height: 100px;\n    width: 100%;\n\n    display: grid;\n    grid-template-rows: auto;\n    grid-template-columns: auto 50px;\n    grid-template-areas:\n    \"c c\";\n    grid-gap: 10px;\n  }\n\n  .tabs {\n    grid-area: t;\n\n    display: flex;\n    height: 63px;\n    margin: 0 5px;\n    overflow-x: auto;\n\n    .text-button {\n      flex-grow: 1;\n      border-top-left-radius: $border-radius;\n      border-top-right-radius: $border-radius;\n      border-top: 3px solid black;\n      border-left: 3px solid black;\n      border-right: 3px solid black;\n      border-bottom: 3px solid black;\n      margin-right: 5px;\n      z-index: 11;\n\n      background-color: darken($window-background-color, 12%);\n\n      &:hover {\n        background-color: darken($window-background-color, 5%);\n      }\n    }\n\n    .active-tab {\n      background-color: $window-background-color;\n      border-bottom-color: $window-background-color;\n      cursor: default;\n\n      &:hover {\n        background-color: darken($window-background-color, 0%);\n      }\n    }\n\n    h1, h2, h3 {\n      margin: 0;\n    }\n  }\n\n  .close-button {\n    border: 1px solid black;\n    margin: 0;\n    padding: 0;\n\n    h3 {\n      margin: 0;\n    }\n  }\n\n  .content {\n    grid-area: c;\n    overflow-y: auto;\n    height: 100%;\n  }\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard\n  },\n  props: {\n    tabs: Array\n  },\n  emits: ['close', 'activatedTab'],\n  methods: {\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.$emit('activatedTab', tab)\n      if (tab == 'exit' || tab == 'close') this.$emit('close')\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  },\n  created() {\n    this.activateTab(this.tabs[0])\n  }\n})\nexport default class TabWindow extends Vue {\n  tabs: string[] = []\n  activeTab: string = \"\"\n}\n","import { render } from \"./TabWindow.vue?vue&type=template&id=e79496f8&scoped=true\"\nimport script from \"./TabWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./TabWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./TabWindow.vue?vue&type=style&index=0&id=e79496f8&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-e79496f8\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\nimport FilterWindow from \"@/components/FilterWindow.vue\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport TabWindow from \"@/components/TabWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport Deck from \"@/cards/Deck\"\nimport Epilogue from \"@/Epilogue\"\nimport EndStage from \"@/stages/EndStage\"\nimport Epilogues from \"@/Epilogues\"\n\n@Options({\n  components: {\n    BlushList,\n    TextButton,\n    Credit,\n    FilterWindow,\n    BlushWindow,\n    TabWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    window() {\n      return window\n    },\n    deleteCollection() {\n      if (confirm(\"Are you sure you wish to delete your card collection? This can't be undone.\")) {\n        this.menu.deleteCollection()\n      }\n    },\n    addMod(event: any) {\n      this.menu.loadMod(event, () => {\n        console.log(\"All tags:\", this.allTags())\n      })\n    },\n    removeMod(modId: string) {\n      if (confirm(\"Unloading this mod will remove all its data from your save file. If you wish to update this mod, just load the new version instead.\\n\\nAre you sure you want to remove this mod?\")) {\n        this.menu.unloadMod(modId)\n      }\n    },\n    simulateEpilogues(iterations: number) {\n      let field = document.getElementById(\"epilogue-simulation-output\")\n      if (field == null) {\n        console.error(\"Could not find log field.\")\n        return\n      }\n      field.innerText = \"\"\n      let log = (s: string) => {\n        field!.innerText += s + \"\\n\"\n      }\n      let clear = (s: string) => {\n        field!.innerText = \"\"\n      }\n      this.menu.endings.correctnessSimulation(iterations, log, clear)\n    },\n    toEnd(epilogueId: string) {\n      this.menu.startGame()\n      let stage = new EndStage(this.menu.game!) // Use a Dialoguestage instead?\n      this.menu.game!.state.stage = stage\n      stage.onStart()\n\n      let endings: Epilogues = this.menu.endings || new Epilogues()\n      let ending: Epilogue = endings.selectEnding(epilogueId)\n      stage.createYourNewLifeButton(ending)\n    },\n    refDeck() {\n      return Deck.referenceDeck()\n    },\n    allTags() {\n      let tags = new Set<string>()\n      for (let card of Deck.referenceDeck().unpack().cards) {\n        for (let tag of card.tags) {\n          tags.add(tag)\n        }\n      }\n      return [...tags.values()].sort()\n    },\n    moddedEpilogues(): Epilogue[] {\n      let epilogues: Epilogue[] = []\n      for (let ep of this.menu.endings.epilogues) {\n        if (ep.mod == \"\") continue\n        let modId = ep.mod\n        let mod = this.menu.mods[modId]\n\n        if (mod != undefined && mod.devmode) epilogues.push(ep)\n      }\n      return epilogues\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class ModScreen extends Vue {\n  menu!: Menu\n}\n","import { render } from \"./ModScreen.vue?vue&type=template&id=fa5433b4&scoped=true\"\nimport script from \"./ModScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./ModScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./ModScreen.vue?vue&type=style&index=0&id=fa5433b4&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-fa5433b4\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport RelatedThumb from \"@/components/RelatedThumb.vue\"\nimport PatreonButton2 from \"@/components/PatreonButton2.vue\"\nimport PatchNotesScreen from \"@/components/screens/PatchNotesScreen.vue\"\nimport EndingsCollectionWindow from \"@/components/EndingsCollectionWindow.vue\"\nimport ModScreen from \"@/components/screens/ModScreen.vue\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton, PatreonButton2, RelatedThumb, PatchNotesScreen, EndingsCollectionScreen: EndingsCollectionWindow, ModScreen\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    //let farm = new Farm()\n    //await farm.load()\n    //this.farm = farm\n    this.isLoaded = true\n  }\n})\nexport default class StartMenu extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n","import { render } from \"./StartMenu.vue?vue&type=template&id=1393f094&scoped=true\"\nimport script from \"./StartMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./StartMenu.vue?vue&type=script&lang=ts\"\n\nimport \"./StartMenu.vue?vue&type=style&index=0&id=1393f094&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-1393f094\"\n\nexport default script","<template>\n  <div class=\"milkfarm dialogue-view\" v-if=\"isLoaded\">\n    <DialogueCard :menu=\"menu\" title=\"Ditzy Dice\"></DialogueCard>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport globalState from '@/store/globalState'\nimport SaveSystem from '@/SaveSystem'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, DialogueCard\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class DialogueScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .milkfarm {\n    background-size: cover;\n    background-attachment: fixed;\n    position: relative;\n\n    min-width: 360px;\n    min-height: 100vh;\n    height: 100vh;\n    box-sizing: border-box; // Include padding in height so that we don't get scrollbars.\n\n    @media only screen and (min-width: 1000px){\n      padding: 10px;\n    }\n\n    @media only screen and (min-width: 1700px){\n      padding-left: 100px;\n      padding-right: 100px;\n    }\n  }\n\n  .dialogue-view {\n    display: grid;\n    grid-template-columns: 1fr minmax(800px, 2fr) 1fr;\n    grid-template-rows: 1fr minmax(600px, 2fr) 1fr;\n    grid-template-areas:\n      \". . .\"\n      \". s .\"\n      \". . .\";\n\n    .cards-wrapper, .picked-cards, .dices {\n      display: none;\n    }\n\n    .dialogue {\n      height: 500px;\n    }\n\n    @media only screen and (max-width: $mobile-width){\n      grid-template-columns: 1fr;\n      grid-template-rows: 1fr;\n      grid-template-areas:\n      \"s\";\n      grid-gap: 0;\n\n      .dialogue {\n        width: 100vw;\n        max-width: 90vw;\n        justify-self: center;\n      }\n    }\n  }\n\n  .dialogue-card {\n    grid-area: s;\n\n    box-sizing: border-box;\n    height: 100%;\n    width: 100%;\n    max-width: 800px;\n    margin: auto;\n  }\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport globalState from '@/store/globalState'\nimport SaveSystem from '@/SaveSystem'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, DialogueCard\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class DialogueScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n","import { render } from \"./DialogueScreen.vue?vue&type=template&id=5f4c2c54&scoped=true\"\nimport script from \"./DialogueScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./DialogueScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./DialogueScreen.vue?vue&type=style&index=0&id=5f4c2c54&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-5f4c2c54\"\n\nexport default script","<template>\n  <div class=\"milkfarm\" v-if=\"isLoaded\">\n    <CollectionWindow :deck=\"game.player.hand\"></CollectionWindow>\n    <DialogueCard :menu=\"menu\" :title=\"endTitle\"></DialogueCard>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport CollectionWindow from \"@/components/CollectionWindow.vue\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, DialogueCard, DialogueStatusCard, CollectionWindow\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    },\n    endTitle: function (): string {\n      let title = this.game.title\n      if (title == \"\") return \"The End\"\n      return `The End - ${title}`\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class HandView extends Vue {\n  isLoaded = false\n  //saveSystem!: SaveSystem\n  //farm!: Farm\n  _game!: Game\n  menu!: Menu\n  scaledCard: Card = new Card({})\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .milkfarm {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: minmax(230px, auto) 1fr;\n    grid-template-areas:\n      \"s\"\n      \"c\";\n    grid-gap: 10px;\n\n    background-size: cover;\n    background-attachment: fixed;\n    position: relative;\n\n    min-width: 360px;\n    min-height: 100vh;\n    box-sizing: border-box; // Include padding in height so that we don't get scrollbars.\n\n    .dialogue-card {\n      max-height: 500px;\n    }\n\n    @media only screen and (min-width: 1140px){\n      padding: 10px;\n      grid-template-columns: 1fr 550px;\n      grid-template-rows: 1fr 200px 200px;\n      grid-template-areas:\n      \"c s\"\n      \"c s\"\n      \"c s\";\n\n      height: 100vh;\n\n      .dialogue-card {\n        max-height: none;\n      }\n    }\n  }\n\n  .dialogue-card {\n    grid-area: s;\n  }\n\n  .collection-window {\n    grid-area: c;\n  }\n\n</style>\n","<template>\n  <div class=\"collection-window\">\n    <div class=\"collection-tabs\">\n      <template v-for=\"tab in tabs\" v-bind:key=\"tab\">\n        <TextButton :class=\"{'active-tab': activeTab === tab}\" @click=\"activateTab(tab)\">\n          <template v-if=\"isInspectingCard && activeTab === tab\">\n            <!--<b style=\"margin-top: -15px; margin-bottom: -20px;\">Back to</b>-->\n            <h3 class=\"tab-label tab-back-label\">Back</h3>\n          </template>\n          <h3 class=\"tab-label\" v-else>{{ util.capitalize(tab) }}</h3>\n        </TextButton>\n      </template>\n    </div>\n    <div class=\"cards-border\">\n      <div class=\"cards-wrapper\">\n        <div class=\"cards\" id=\"cards\">\n          <template v-for=\"card in internalDeck.cards\" v-bind:key=\"card.id\">\n            <PlayingCard :card=\"card\" :class=\"{'scaled': card.scale}\" @click=\"activateCard(card);\" ></PlayingCard>\n          </template>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport Menu from \"@/Menu\"\nimport { reactive } from \"vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, BlushWindow\n  },\n  props: {\n    menu: Object,\n    deck: Object,\n    groupByParent: Boolean\n  },\n  emits: ['close', 'activate-tab', 'activate-card', 'activate-subcard'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    },\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.activeCard = new Card({})\n      this.$emit('activate-tab', tab)\n    },\n    activateCard(card: Card) {\n      this.$emit('activate-card', card)\n\n      if (card.isParent) {\n        this.activeCard = card\n        this.activeSubCard.highlight = 0\n        this.activeSubCard = new Card({})\n      } else {\n        if (this.activeSubCard.id != card.id) this.activeSubCard.highlight = 0\n        this.activeSubCard = card\n        this.activeSubCard.highlight += 1\n        if (this.activeSubCard.highlight == 5) this.activeSubCard.highlight = 1\n      }\n      this.$forceUpdate()\n    },\n    lookup(id: string): Card {\n      return Deck.lookup(id)!\n    }\n  },\n  computed: {\n    tabs(): string[] {\n      return [\n        'all',\n        'behavior',\n        'body',\n        'clothing',\n        'event',\n        'mind',\n        'reward'\n      ]\n    },\n    util() {\n      return util\n    },\n    refDeck(): Deck {\n      return Deck.referenceDeck().useFilters()\n    },\n    internalDeck(): Deck {\n      if (this.isInspectingCard) {\n        return new Deck(this.activeCard.subcards).sortByLevel().useFilters()\n      }\n      if (this.groupByParent) {\n        return this.deck.copy().onlyTag(this.activeTab).pack().unique().sortByName().sortByFamily().useFilters()\n      }\n      return this.deck.copy().onlyTag(this.activeTab).unpack().unique().sortByName().sortByFamily().useFilters()\n    },\n    isInspectingCard(): boolean {\n      return this.activeCard.id != undefined && this.activeCard.isParent\n    }\n  }\n})\nexport default class CollectionWindow extends Vue {\n  menu!: Menu\n  deck!: Deck\n  groupByParent: boolean = false\n  scaledCard: Card = new Card({})\n  activeTab: string = 'all'\n  activeCard: Card = new Card({})\n  activeSubCard: Card = reactive(new Card({})) as Card\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .collection-window {\n    display: grid;\n    grid-template-rows: 60px 1fr;\n    grid-template-areas:\n      \"t\"\n      \"c\";\n    //height: 500px;\n  }\n\n  $card-background-color: $window-background-color;\n  .cards-border {\n    grid-area: c;\n    z-index: 10;\n\n    background-color: $card-background-color;\n    border: 3px solid black;\n    border-radius: $border-radius;\n    padding: 10px;\n    overflow: hidden;\n  }\n\n  .cards-wrapper {\n    overflow-x: auto;\n    overflow-y: auto;\n\n    padding: 10px;\n    padding-right: 20px;\n    background-color: $component-background-color;\n    border-radius: $border-radius;\n    border: 1px solid black;\n    box-sizing: border-box;\n    height: 100%;\n  }\n\n  .cards {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    grid-template-rows: repeat(auto-fit, $playing-card-height);\n    grid-gap: 10px;\n    justify-items: center;\n    transform: scale(1);\n    transform-origin: top left;\n    //min-height: 100%;\n    padding-bottom: 20px;\n    padding-right: 10px;\n  }\n\n  .scaled {\n    transform: scale(1.06);\n    z-index: 2;\n    border-color: #939393;\n  }\n\n  .collection-tabs {\n    grid-area: t;\n\n    display: flex;\n    height: 63px;\n    margin: 0 5px;\n    overflow-x: auto;\n\n    .text-button {\n      flex-grow: 1;\n      border-top-left-radius: $border-radius;\n      border-top-right-radius: $border-radius;\n      border-top: 3px solid black;\n      border-left: 3px solid black;\n      border-right: 3px solid black;\n      border-bottom: 3px solid black;\n      margin-right: 5px;\n      z-index: 11;\n\n      background-color: darken($card-background-color, 12%);\n\n      &:hover {\n        background-color: darken($card-background-color, 5%);\n      }\n    }\n\n    .active-tab {\n      background-color: $card-background-color;\n      border-bottom-color: $card-background-color;\n      //cursor: default;\n\n      &:hover {\n        background-color: darken($card-background-color, 0%);\n      }\n    }\n\n    .tab-label {\n      text-align: center;\n      margin: 0;\n    }\n\n    .tab-back-label {\n      color: $highlight-color;\n    }\n  }\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport Menu from \"@/Menu\"\nimport { reactive } from \"vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, BlushWindow\n  },\n  props: {\n    menu: Object,\n    deck: Object,\n    groupByParent: Boolean\n  },\n  emits: ['close', 'activate-tab', 'activate-card', 'activate-subcard'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    },\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.activeCard = new Card({})\n      this.$emit('activate-tab', tab)\n    },\n    activateCard(card: Card) {\n      this.$emit('activate-card', card)\n\n      if (card.isParent) {\n        this.activeCard = card\n        this.activeSubCard.highlight = 0\n        this.activeSubCard = new Card({})\n      } else {\n        if (this.activeSubCard.id != card.id) this.activeSubCard.highlight = 0\n        this.activeSubCard = card\n        this.activeSubCard.highlight += 1\n        if (this.activeSubCard.highlight == 5) this.activeSubCard.highlight = 1\n      }\n      this.$forceUpdate()\n    },\n    lookup(id: string): Card {\n      return Deck.lookup(id)!\n    }\n  },\n  computed: {\n    tabs(): string[] {\n      return [\n        'all',\n        'behavior',\n        'body',\n        'clothing',\n        'event',\n        'mind',\n        'reward'\n      ]\n    },\n    util() {\n      return util\n    },\n    refDeck(): Deck {\n      return Deck.referenceDeck().useFilters()\n    },\n    internalDeck(): Deck {\n      if (this.isInspectingCard) {\n        return new Deck(this.activeCard.subcards).sortByLevel().useFilters()\n      }\n      if (this.groupByParent) {\n        return this.deck.copy().onlyTag(this.activeTab).pack().unique().sortByName().sortByFamily().useFilters()\n      }\n      return this.deck.copy().onlyTag(this.activeTab).unpack().unique().sortByName().sortByFamily().useFilters()\n    },\n    isInspectingCard(): boolean {\n      return this.activeCard.id != undefined && this.activeCard.isParent\n    }\n  }\n})\nexport default class CollectionWindow extends Vue {\n  menu!: Menu\n  deck!: Deck\n  groupByParent: boolean = false\n  scaledCard: Card = new Card({})\n  activeTab: string = 'all'\n  activeCard: Card = new Card({})\n  activeSubCard: Card = reactive(new Card({})) as Card\n}\n","import { render } from \"./CollectionWindow.vue?vue&type=template&id=35f50ee3&scoped=true\"\nimport script from \"./CollectionWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./CollectionWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./CollectionWindow.vue?vue&type=style&index=0&id=35f50ee3&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-35f50ee3\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport CollectionWindow from \"@/components/CollectionWindow.vue\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, DialogueCard, DialogueStatusCard, CollectionWindow\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    },\n    endTitle: function (): string {\n      let title = this.game.title\n      if (title == \"\") return \"The End\"\n      return `The End - ${title}`\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class HandView extends Vue {\n  isLoaded = false\n  //saveSystem!: SaveSystem\n  //farm!: Farm\n  _game!: Game\n  menu!: Menu\n  scaledCard: Card = new Card({})\n}\n","import { render } from \"./HandView.vue?vue&type=template&id=622854ee&scoped=true\"\nimport script from \"./HandView.vue?vue&type=script&lang=ts\"\nexport * from \"./HandView.vue?vue&type=script&lang=ts\"\n\nimport \"./HandView.vue?vue&type=style&index=0&id=622854ee&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-622854ee\"\n\nexport default script","<template>\n  <template v-if=\"isLoaded\">\n    <div class=\"menu-view\">\n      <div class=\"window text-window\" id=\"help-window\">\n        <div>\n          <h1 style=\"margin: 0;\">Credits</h1>\n        </div>\n        <TextButton class=\"farm-button\" @click=\"$emit('close')\">\n          <h3>X</h3>\n        </TextButton>\n        <div class=\"farm-list help-list\">\n          <div class=\"farm-window credits-block\">\n            <h2>Development and Design</h2>\n            <h3 class=\"credit\">Gardamuse</h3>\n          </div>\n          <div class=\"farm-window credits-block\">\n            <h2>Writing</h2>\n            <Credit name=\"Duhad\" link=\"https://www.deviantart.com/motherduhad\" linkText=\"DeviantArt\">\n              Transformation descriptions and epilogues.\n            </Credit>\n          </div>\n          <div class=\"farm-window credits-block\">\n            <h2>Artwork</h2>\n            <template v-for=\"credit in menu.artCredits()\" v-bind:key=\"credit\">\n              <Credit :name=\"credit.artist\" :link=\"credit.link\" :linkText=\"credit.linkText\">\n                For illustrations on:\n                <span v-for=\"(card,index) in credit.cards\">\n                  {{ card }}<span v-if=\"index !== credit.cards.length - 1\">, </span>\n                </span>.\n              </Credit>\n            </template>\n          </div>\n          <div class=\"farm-window credits-block\">\n            <h2>Graphics</h2>\n            <Credit name=\"Transparent Textures\" link=\"https://www.transparenttextures.com/\" linkText=\"Website\">\n              Card textures.\n            </Credit>\n            <Credit name=\"Artbreeder\" link=\"https://www.artbreeder.com\" linkText=\"Website\">\n              Tool for generating images.\n            </Credit>\n          </div>\n          <div class=\"farm-window credits-block\">\n            <h2>Special Thanks to</h2>\n            <h3 v-for=\"credit in menu.patreonCredits()\" class=\"credit\">{{ credit.name }}</h3>\n            <p class=\"credit\">And everyone else who supports Blushing Defeat on Patreon!</p>\n          </div>\n          <div class=\"farm-window credits-block double-columns\">\n            <h2>Game Inspired by</h2>\n            <Credit name=\"Xsentisus\" link=\"https://www.deviantart.com/xsentisus\" linkText=\"DeviantArt\">\n              For their\n              <a href=\"https://www.deviantart.com/xsentisus/art/Bimbo-Dice-700-Watcher-25k-Page-Views-SPECIAL-865174538\"  target=\"_blank\">\n                Bimbo Dice</a>\n              caption series.\n            </Credit>\n            <Credit name=\"MythicalCreatureBone\" link=\"https://www.deviantart.com/mythicalcreaturebone\" linkText=\"DeviantArt\">\n              For their\n              <a href=\"https://imgur.com/a/bXlN6Fe\" target=\"_blank\">Eliminated</a>\n              choose-your-own-adventure.\n            </Credit>\n            <Credit name=\"GrapplerOfBooty\" link=\"https://www.deviantart.com/grapplerofbooty\" linkText=\"DeviantArt\">\n              For their\n              <a href=\"https://www.deviantart.com/grapplerofbooty/art/Transmoria-The-Realm-of-Chang-Faerie-Mind-Shaper-859293252\" target=\"_blank\">\n                Transoria</a>\n              statblocks and\n              <a href=\"https://www.deviantart.com/grapplerofbooty/art/MTG-TG-Self-Inflicted-Stupidity-790655990\" target=\"_blank\">MTG</a>\n              card series.\n            </Credit>\n            <Credit name=\"TF Me Please!\" link=\"https://www.tumblr.com/blog/view/transformmeplease\" linkText=\"Tumblr\">\n              For their transformation spins caption series.\n            </Credit>\n            <Credit name=\"Unknown\" link=\"https://imgur.com/W0YNL6l\" linkText=\"Imgur\">\n              For the\n              <a href=\"https://imgur.com/W0YNL6l\" target=\"_blank\">\n                Bimbofication Curse</a>\n              spreadsheet.\n            </Credit>\n          </div>\n        </div>\n      </div>\n    </div>\n  </template>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton, Credit\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    //let farm = new Farm()\n    //await farm.load()\n    //this.farm = farm\n    this.isLoaded = true\n  }\n})\nexport default class CreditsScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.menu-view {\n  //max-width: $full-page-width;\n  height: 100vh;\n\n  display: grid;\n  grid-template-rows: auto auto;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    \"t\"\n    \"t\";\n  grid-gap: 20px;\n\n  @media screen and (max-width: $mobile-width){\n    grid-template-areas:\n      \"t\"\n      \"t\";\n    margin: 0;\n  }\n}\n\n.text-window {\n  grid-area: t;\n\n  box-sizing: border-box;\n  flex-direction: column;\n  min-height: 200px;\n  max-height: 100%;\n  width: 100%;\n  max-width: 700px;\n  margin: 20px auto;\n\n  display: grid;\n  grid-template-rows: 30px auto;\n  grid-template-columns: auto 50px;\n  grid-template-areas:\n    \"t x\"\n    \"c c\";\n  grid-gap: 10px;\n\n  p {\n    margin-top: 1em;\n    margin-bottom: 1em;\n  }\n\n  @media screen and (max-width: $mobile-width){\n    padding: 10px;\n    margin: 0 auto;\n  }\n}\n\n.text-button {\n  border: $component-border-style;\n\n  display: table;\n  div {\n    display: table-cell;\n    vertical-align: middle;\n  }\n\n  & > h3 {\n    display: table-cell;\n    vertical-align: middle;\n    text-align: center;\n  }\n}\n\n.help-list {\n  grid-area: c;\n\n  overflow-y: auto;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  margin-top: 10px;\n\n  .farm-window {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n  }\n\n  p {\n    margin: 0;\n  }\n}\n\n.credits-block {\n  h2 {\n    margin: 0;\n    margin-left: 5px;\n    color: $tertiary-color;\n  }\n\n  h3 {\n    margin: 0;\n  }\n\n  .credit {\n    background-color: rgba($component-background-color, 0.7);\n    padding: 10px 5px;\n    margin-bottom: 5px;\n  }\n\n  a {\n    transition: color $selection-time;\n\n    &:hover {\n      color: $highlight-color;\n    }\n  }\n}\n\n.double-columns {\n  display: grid !important;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 40px repeat(auto-fit, auto);\n  grid-column-gap: 5px;\n\n  h2 {\n    grid-column: span 2;\n  }\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton, Credit\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    //let farm = new Farm()\n    //await farm.load()\n    //this.farm = farm\n    this.isLoaded = true\n  }\n})\nexport default class CreditsScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n","import { render } from \"./CreditsScreen.vue?vue&type=template&id=0e922dc8&scoped=true\"\nimport script from \"./CreditsScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./CreditsScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./CreditsScreen.vue?vue&type=style&index=0&id=0e922dc8&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-0e922dc8\"\n\nexport default script","<template>\n  <div class=\"milkfarm\" v-if=\"isLoaded\">\n    <template v-if=\"activeMenuTab === 'cards'\">\n      <CollectionWindow :deck=\"menu.collection\"\n                        :menu=\"menu\"\n                        groupByParent\n                        v-on:activate-tab=\"activateTab\"\n                        v-on:activate-card=\"activateCard\">\n      </CollectionWindow>\n    </template>\n    <template v-else>\n      <EndingsCollectionWindow :menu=\"menu\" :endings-collection=\"endingsCollection\"></EndingsCollectionWindow>\n    </template>\n    <TabWindow style=\"grid-area: s;\" :tabs=\"['cards', 'endings', 'exit']\" v-on:activatedTab=\"activateMenuTab\">\n      <template v-slot:cards>\n      <div class=\"status-content\">\n        <div class=\"status-text\">\n          <template v-if=\"isInspectingCard\">\n            <p>These are all levels of the \"{{ activeCard.name }}\" card you've collected.</p>\n            <p>To go back, click the current tab.</p>\n            <p><b>Levels owned</b>:\n              <span class=\"status-number\">{{ activeCard.subcards.length }} / {{ activeCard.levels }}</span></p>\n          </template>\n          <template v-else>\n            <p>These are all the cards you've collected.</p>\n            <p>To inspect a card with multiple levels, click it.</p>\n            <p><b>Owned</b>:\n              <span class=\"status-number\">\n                {{ deck.size() }} / {{ refDeck.onlyTag(activeTab).size() }}</span> cards,\n                <span class=\"status-number\">\n                  {{ deck.unpack().size() }} / {{ refDeck.onlyTag(activeTab).unpack().size() }}\n                </span> levels\n            </p>\n          </template>\n        </div>\n        <ChatView class=\"transformation-chat\" :lines=\"transformationText()\"></ChatView>\n        <div class=\"buttons\">\n          <TextButton @click=\"util.screenshot('cards', screenshotName())\">Save Screenshot</TextButton>\n        </div>\n      </div>\n      </template>\n      <template v-slot:endings>\n        <p>These are all the epilogues and endings you've found.</p>\n        <p>Epilogues are unlocked by having a certain set of cards by the end of the game.</p>\n        <p>Endings are unlocked by making dialogue choices in the epilogue. Some dialogue choices will only show up if you have a specific card.</p>\n        <p>Click an ending to read it.</p>\n        <br>\n        <p><b>Unlocked epilogues</b>:\n          <span style=\"font-size: 1.1em;\">{{ endingsCollection.unlockedEpilogues().length }} / {{ endingsCollection.epiloguesList().length }}</span>\n        </p>\n        <p><b>Unlocked endings</b>:\n          <span style=\"font-size: 1.1em;\">{{ endingsCollection.nrOfAllUnlockedEndings() }} / {{ endingsCollection.nrOfAllEndings() }}</span>\n        </p>\n        <p></p>\n      </template>\n    </TabWindow>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport Menu from \"@/Menu\"\nimport util from \"@/util\"\nimport Deck from \"@/cards/Deck\"\nimport CollectionWindow from \"@/components/CollectionWindow.vue\"\nimport ChatView from \"@/components/ChatView.vue\"\nimport ChatMessage from \"@/ChatMessage\"\nimport TabWindow from \"@/components/TabWindow.vue\"\nimport EndingsCollectionWindow from \"@/components/EndingsCollectionWindow.vue\"\nimport EndingsCollection from \"@/EndingsCollection\"\n\n@Options({\n  components: {\n    ChatView,\n    TextButton,\n    PlayingCard,\n    TabWindow,\n    CollectionWindow,\n    EndingsCollectionWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    },\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.activeCard = new Card({})\n      this.activeSubCard = new Card({})\n      //console.log(`Active Tab: ${this.activeTab}`)\n      //console.log(this.refDeck.onlyTag(this.activeTab).cards.map((c: Card) => c.name).sort())\n    },\n    activateCard(card: Card) {\n      if (card.isParent) {\n        this.activeCard = card\n        this.activeSubCard = new Card({})\n      } else {\n        this.activeSubCard = card\n      }\n    },\n    activateMenuTab(tab: string) {\n      this.activeMenuTab = tab\n      if (tab == \"exit\") {\n        this.$emit(\"close\")\n      }\n    },\n    transformationText() {\n      return ChatMessage.parseLines(this.activeSubCard.transformation)\n    },\n    lookup(id: string): Card {\n      return Deck.lookup(id)!\n    },\n    screenshotName(): string {\n      if (this.isInspectingCard) {\n        return `${util.toKebabCase(this.activeCard.name)}-${this.activeCard.subcards.length}-of-${this.activeCard.levels}`\n      }\n      return `${this.activeTab}-${this.deck.unpack().size()}-of-${this.refDeck.onlyTag(this.activeTab).unpack().size()}`\n    }\n  },\n  computed: {\n    tabs(): string[] {\n      return [\n        'all',\n        'behavior',\n        'body',\n        'clothing',\n        'event',\n        'mind',\n        'reward'\n      ]\n    },\n    util() {\n      return util\n    },\n    refDeck(): Deck {\n      return Deck.referenceDeck().useFilters()\n    },\n    deck(): Deck {\n      if (this.isInspectingCard) {\n        return new Deck(this.activeCard.subcards).sortByLevel().useFilters()\n      }\n      return this.menu.collection.copy().onlyTag(this.activeTab).pack().unique().useFilters()\n    },\n    isInspectingCard(): boolean {\n      return this.activeCard.id != undefined && this.activeCard.isParent\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class CollectionScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n  endingsCollection: EndingsCollection = new EndingsCollection(this.menu)\n  scaledCard: Card = new Card({})\n  activeTab: string = 'all'\n  activeCard: Card = new Card({})\n  activeSubCard: Card = new Card({})\n  activeMenuTab: string = \"\"\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .milkfarm {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 500px 1fr;\n    grid-template-areas:\n      \"s\"\n      \"c\";\n    grid-gap: 10px;\n\n    background-size: cover;\n    background-attachment: fixed;\n    position: relative;\n\n    min-width: 360px;\n    //height: 100vh;\n    box-sizing: border-box; // Include padding in height so that we don't get scrollbars.\n\n    @media only screen and (min-width: 1140px){\n      padding: 10px;\n      grid-template-columns: 6fr minmax(400px, 1fr);\n      grid-template-rows: 50px 1fr;\n      grid-template-areas:\n      \"c s\"\n      \"c s\";\n\n      height: 100vh;\n    }\n  }\n\n  .collection-window {\n    grid-area: c;\n  }\n\n  $card-background-color: $window-background-color;\n  .cards-wrapper {\n    overflow-x: auto;\n    overflow-y: auto;\n\n    background-color: $card-background-color;\n    border: 3px solid black;\n    border-radius: $border-radius;\n    padding: 10px 20px 0 20px;\n  }\n\n  .cards {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    grid-template-rows: repeat(auto-fit, 360px);\n    grid-gap: 10px;\n    justify-items: center;\n    transform: scale(1);\n    transform-origin: top left;\n    min-height: 100%;\n  }\n\n  .scaled {\n    transform: scale(1.06);\n    z-index: 2;\n    border-color: #939393;\n  }\n\n  .collection-tabs {\n    grid-area: t;\n\n    display: flex;\n    height: 63px;\n    margin: 0 5px;\n    overflow-x: auto;\n\n    .text-button {\n      flex-grow: 1;\n      border-top-left-radius: $border-radius;\n      border-top-right-radius: $border-radius;\n      border-top: 3px solid black;\n      border-left: 3px solid black;\n      border-right: 3px solid black;\n      border-bottom: 3px solid black;\n      margin-right: 5px;\n      z-index: 11;\n\n      background-color: darken($card-background-color, 12%);\n\n      &:hover {\n        background-color: darken($card-background-color, 5%);\n      }\n    }\n\n    .active-tab {\n      background-color: $card-background-color;\n      border-bottom-color: $card-background-color;\n      cursor: default;\n\n      &:hover {\n        background-color: darken($card-background-color, 0%);\n      }\n    }\n\n    h1, h2, h3 {\n      margin: 0;\n    }\n  }\n\n  .status-window {\n    grid-area: s;\n  }\n\n  .status-content {\n    height: 100%;\n\n    display: grid;\n    grid-template-rows: auto 1fr auto;\n    grid-template-areas:\n      \"c\"\n      \"t\"\n      \"b\";\n  }\n\n  .status-number {\n    font-size: 1.1em;\n  }\n\n  .transformation-chat {\n    grid-area: t;\n\n    flex-direction: column;\n  }\n\n  .buttons {\n    grid-area: b;\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: 10px;\n\n    .text-button {\n      flex: 1;\n      min-width: 100px;\n      margin: 5px;\n      border: $component-border-style;\n      border-radius: $border-radius;\n    }\n  }\n\n  .endings-collection-window {\n    grid-area: c;\n  }\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport Menu from \"@/Menu\"\nimport util from \"@/util\"\nimport Deck from \"@/cards/Deck\"\nimport CollectionWindow from \"@/components/CollectionWindow.vue\"\nimport ChatView from \"@/components/ChatView.vue\"\nimport ChatMessage from \"@/ChatMessage\"\nimport TabWindow from \"@/components/TabWindow.vue\"\nimport EndingsCollectionWindow from \"@/components/EndingsCollectionWindow.vue\"\nimport EndingsCollection from \"@/EndingsCollection\"\n\n@Options({\n  components: {\n    ChatView,\n    TextButton,\n    PlayingCard,\n    TabWindow,\n    CollectionWindow,\n    EndingsCollectionWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    },\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.activeCard = new Card({})\n      this.activeSubCard = new Card({})\n      //console.log(`Active Tab: ${this.activeTab}`)\n      //console.log(this.refDeck.onlyTag(this.activeTab).cards.map((c: Card) => c.name).sort())\n    },\n    activateCard(card: Card) {\n      if (card.isParent) {\n        this.activeCard = card\n        this.activeSubCard = new Card({})\n      } else {\n        this.activeSubCard = card\n      }\n    },\n    activateMenuTab(tab: string) {\n      this.activeMenuTab = tab\n      if (tab == \"exit\") {\n        this.$emit(\"close\")\n      }\n    },\n    transformationText() {\n      return ChatMessage.parseLines(this.activeSubCard.transformation)\n    },\n    lookup(id: string): Card {\n      return Deck.lookup(id)!\n    },\n    screenshotName(): string {\n      if (this.isInspectingCard) {\n        return `${util.toKebabCase(this.activeCard.name)}-${this.activeCard.subcards.length}-of-${this.activeCard.levels}`\n      }\n      return `${this.activeTab}-${this.deck.unpack().size()}-of-${this.refDeck.onlyTag(this.activeTab).unpack().size()}`\n    }\n  },\n  computed: {\n    tabs(): string[] {\n      return [\n        'all',\n        'behavior',\n        'body',\n        'clothing',\n        'event',\n        'mind',\n        'reward'\n      ]\n    },\n    util() {\n      return util\n    },\n    refDeck(): Deck {\n      return Deck.referenceDeck().useFilters()\n    },\n    deck(): Deck {\n      if (this.isInspectingCard) {\n        return new Deck(this.activeCard.subcards).sortByLevel().useFilters()\n      }\n      return this.menu.collection.copy().onlyTag(this.activeTab).pack().unique().useFilters()\n    },\n    isInspectingCard(): boolean {\n      return this.activeCard.id != undefined && this.activeCard.isParent\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class CollectionScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n  endingsCollection: EndingsCollection = new EndingsCollection(this.menu)\n  scaledCard: Card = new Card({})\n  activeTab: string = 'all'\n  activeCard: Card = new Card({})\n  activeSubCard: Card = new Card({})\n  activeMenuTab: string = \"\"\n}\n","import { render } from \"./CollectionScreen.vue?vue&type=template&id=3f224c2e&scoped=true\"\nimport script from \"./CollectionScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./CollectionScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./CollectionScreen.vue?vue&type=style&index=0&id=3f224c2e&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-3f224c2e\"\n\nexport default script","<template>\n  <div class=\"settings-screen\">\n    <TabWindow :tabs=\"['contentFilters', 'banCards', 'saves', 'exit']\" @close=\"$emit('close')\">\n      <template v-slot:contentFilters>\n        <FilterWindow :menu=\"menu\" v-on:close=\"$emit('close')\"></FilterWindow>\n      </template>\n      <template v-slot:banCards>\n        <BanWindow :menu=\"menu\" v-on:close=\"$emit('close')\"></BanWindow>\n      </template>\n      <template v-slot:saves>\n        <h2>Manual Saves</h2>\n        <div class=\"button-row\">\n          <p style=\"margin: 0;\">Running the game in incognito mode, or just want to back up your save? Download your current save game here. This includes all active mods.</p>\n          <TextButton class=\"normal-button\" @click=\"menu.exportSave()\">\n            <b>Download Save</b>\n          </TextButton>\n        </div>\n        <div class=\"button-row\">\n          <p style=\"margin: 0;\">Restore your save game from a previously downloaded save file. This will overwrite your current save file, including mods.</p>\n          <div>\n            <label for=\"save-import\" class=\"load-button\"><b>Restore Save</b></label>\n            <input id=\"save-import\" type=\"file\" accept=\".dd\" v-on:change=\"menu.importSave\"\n                   style=\"display: none;\">\n          </div>\n        </div>\n        <h2 style=\"margin-top: 40px;\">Delete Saves</h2>\n        <div class=\"button-row\">\n          <p style=\"margin: 0;\">Do you want to start your collection from scratch? Press this button to clear your save and start again.</p>\n          <TextButton class=\"delete-save-button\" @click=\"deleteCollection()\">\n            <b>Clear Collection</b>\n          </TextButton>\n        </div>\n      </template>\n    </TabWindow>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\nimport FilterWindow from \"@/components/FilterWindow.vue\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport TabWindow from \"@/components/TabWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport BanWindow from \"@/components/BanWindow.vue\"\n\n@Options({\n  components: {\n    BlushList,\n    TextButton,\n    Credit,\n    FilterWindow,\n    BanWindow,\n    BlushWindow,\n    TabWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    window() {\n      return window\n    },\n    deleteCollection() {\n      if (confirm(\"Are you sure you wish to delete your card collection? This can't be undone.\")) {\n        this.menu.deleteCollection()\n      }\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class SettingsScreen extends Vue {\n  menu!: Menu\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.settings-screen {\n  height: 100vh;\n\n  display: grid;\n  grid-template-rows: auto;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    \"t\";\n  grid-gap: 20px;\n\n  h1, h2, h3, h4, h5 {\n    margin: 0px 0;\n  }\n\n  @media screen and (max-width: $mobile-width){\n    grid-template-areas: \"t\";\n    margin: 0;\n    height: auto;\n  }\n}\n\n.tab-window {\n  grid-area: t;\n\n  width: 100vw;\n  max-width: 800px;\n  height: calc(100vh - 2 * 2vh);\n  margin: 2vh auto;\n}\n\n.button-row {\n  display: grid;\n  grid-template-columns: 2fr 1fr;\n  grid-gap: 10px;\n  margin-bottom: 15px;\n}\n\n.button {\n  border-radius: $border-radius;\n  border: 1px solid black;\n  text-align: center;\n  min-height: 40px;\n}\n\n.normal-button {\n  @extend .button;\n  background-color: #006622;\n  &:hover {\n    background-color: lighten(#006622, 10%);\n  }\n}\n\n.load-button {\n  @extend .button;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background-color $selection-time;\n\n  background-color: #005599;\n  &:hover {\n    background-color: lighten(#005599, 10%);\n  }\n}\n\n.delete-save-button {\n  @extend .button;\n  background-color: #700;\n  &:hover {\n    background-color: #900;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"ban-window\">\n    <div>\n      <h2>Ban Individual Cards</h2>\n      <h3 v-if=\"!menu.isFilteringTooMuch()\">Currently including {{ menu.cardsFilteredString() }}</h3>\n      <h3 v-else>\n        Currently including {{ menu.cardsFilteredString() }}. WARNING: There may not be enough cards left.\n      </h3>\n      <p>If the filters don't remove just that one card you don't want you can choose to ban any specific card, irregardless of your filter settings.</p>\n      <p><b>Tip:</b> Only ban cards you really dislike. Ban too much and you'll ruin your own fun!</p>\n    </div>\n    <BlushList class=\"filter-entries\">\n      <div v-for=\"card in refDeck.cards.sort((a, b) => a.name.localeCompare(b.name))\" class=\"filter-entry\">\n        <div class=\"label\">\n          <h3>{{ card.name }}</h3>\n        </div>\n        <template v-if=\"!card.isParent\">\n          <TextButton style=\"\"\n                      :class=\"{'selected-green': !isBanned(card.id) && !isFiltered(card.id),\n                               'selected-yellow': isFiltered(card.id),\n                               'selected-red': isBanned(card.id)}\"\n                      @click=\"toggleBan(card.id)\" >\n            <p v-if=\"isBanned(card.id)\"> Banned </p>\n            <p v-else-if=\"isFiltered(card.id)\"> Filtered </p>\n            <p v-else> Allowed </p>\n          </TextButton>\n        </template>\n        <template v-else>\n          <template v-for=\"subcard in card.subcards\" v-bind:key=\"subcard.id\">\n            <TextButton style=\"\"\n                        :class=\"{'selected-green': !isBanned(subcard.id) && !isFiltered(subcard.id),\n                               'selected-yellow': isFiltered(subcard.id),\n                               'selected-red': isBanned(subcard.id)}\"\n                        @click=\"toggleBan(subcard.id)\" >\n              <p v-if=\"isBanned(subcard.id)\"> Banned </p>\n              <p v-else-if=\"isFiltered(subcard.id)\" style=\"text-decoration: line-through;\"> {{ subcard.name }} </p>\n              <p v-else> {{ subcard.name }} </p>\n            </TextButton>\n          </template>\n        </template>\n      </div>\n    </BlushList>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport Menu from \"@/Menu\"\nimport FilterSetting from \"@/FilterSetting\"\nimport Deck from \"@/cards/Deck\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow, BlushList\n  },\n  props: {\n    menu: Object,\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n    isBanned(cardId: string): boolean {\n      return this.menu.settings.isBanned(cardId)\n    },\n    isFiltered(cardId: string): boolean {\n      return this.menu.settings.isFiltered(cardId)\n    },\n    toggleBan(cardId: string) {\n      if (this.isBanned(cardId)) this.menu.settings.unbanCard(cardId)\n      else this.menu.settings.banCard(cardId)\n      this.menu.save()\n      this.$forceUpdate()\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BanWindow extends Vue {\n  menu!: Menu\n  noCross: boolean = false\n  refDeck: Deck = Deck.referenceDeck()\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.ban-window {\n  box-sizing: border-box;\n  height: 100%;\n\n  display: grid;\n  grid-template-rows: auto auto 1fr;\n  grid-gap: 10px;\n\n  h1, h2, h3, h4, h5, p {\n    margin: 5px 0;\n  }\n\n  p {\n    font-size: 13px;\n  }\n}\n\n.instructions {\n  p {\n    margin: 5px 10px;\n  }\n}\n\n.filter-entries {\n  overflow: auto;\n}\n\n.filter-entry {\n  display: grid;\n  grid-template-columns: 150px;\n  grid-auto-columns: 1fr;\n  grid-auto-flow: column;\n  grid-template-rows: 1fr;\n  grid-gap: 0;\n\n  background-color: $window-background-color;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  margin: 10px;\n\n  h1, h2, h3, h4, p{\n    margin: 0;\n  }\n\n  .label {\n    padding: 5px 10px 5px 10px;\n    display: flex;\n    align-items: center;\n    text-align: left;\n  }\n\n  p {\n    text-align: center;\n  }\n\n  @media screen and (max-width: $mobile-width){\n    margin: 5px;\n  }\n}\n\n.text-button {\n  border-left: 1px solid black;\n\n  &:last-child {\n    border-top-right-radius: $border-radius;\n    border-bottom-right-radius: $border-radius;\n  }\n}\n\n.selected-green, .selected-green:active {\n  background-color: #062;\n}\n\n.selected-green:hover {\n  background-color: lighten(#062, 10%);\n}\n\n.selected-yellow, .selected-yellow:active {\n  background-color: #c80;\n}\n\n.selected-yellow:hover {\n  background-color: lighten(#c80, 10%);\n}\n\n.selected-red, .selected-red:active {\n  background-color: #700;\n}\n\n.selected-red:hover {\n  background-color: lighten(#700, 10%);\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport Menu from \"@/Menu\"\nimport FilterSetting from \"@/FilterSetting\"\nimport Deck from \"@/cards/Deck\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow, BlushList\n  },\n  props: {\n    menu: Object,\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n    isBanned(cardId: string): boolean {\n      return this.menu.settings.isBanned(cardId)\n    },\n    isFiltered(cardId: string): boolean {\n      return this.menu.settings.isFiltered(cardId)\n    },\n    toggleBan(cardId: string) {\n      if (this.isBanned(cardId)) this.menu.settings.unbanCard(cardId)\n      else this.menu.settings.banCard(cardId)\n      this.menu.save()\n      this.$forceUpdate()\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BanWindow extends Vue {\n  menu!: Menu\n  noCross: boolean = false\n  refDeck: Deck = Deck.referenceDeck()\n}\n","import { render } from \"./BanWindow.vue?vue&type=template&id=1e833d82&scoped=true\"\nimport script from \"./BanWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./BanWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./BanWindow.vue?vue&type=style&index=0&id=1e833d82&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-1e833d82\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\nimport FilterWindow from \"@/components/FilterWindow.vue\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport TabWindow from \"@/components/TabWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport BanWindow from \"@/components/BanWindow.vue\"\n\n@Options({\n  components: {\n    BlushList,\n    TextButton,\n    Credit,\n    FilterWindow,\n    BanWindow,\n    BlushWindow,\n    TabWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    window() {\n      return window\n    },\n    deleteCollection() {\n      if (confirm(\"Are you sure you wish to delete your card collection? This can't be undone.\")) {\n        this.menu.deleteCollection()\n      }\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class SettingsScreen extends Vue {\n  menu!: Menu\n}\n","import { render } from \"./SettingsScreen.vue?vue&type=template&id=7abe1b76&scoped=true\"\nimport script from \"./SettingsScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./SettingsScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./SettingsScreen.vue?vue&type=style&index=0&id=7abe1b76&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-7abe1b76\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport GameScreen from '@/components/screens/GameScreen.vue'\nimport Menu from \"@/Menu\"\nimport StartMenu from \"@/components/screens/StartMenu.vue\"\nimport DialogueScreen from \"@/components/screens/DialogueScreen.vue\"\nimport globalState from \"@/store/globalState\"\nimport HandView from \"@/components/screens/HandView.vue\"\nimport CreditsScreen from \"@/components/screens/CreditsScreen.vue\"\nimport CollectionScreen from \"@/components/screens/CollectionScreen.vue\"\nimport PatchNotesScreen from \"@/components/screens/PatchNotesScreen.vue\"\nimport BargainScreen from \"@/components/screens/BargainScreen.vue\"\nimport SettingsScreen from \"@/components/screens/SettingsScreen.vue\"\nimport EndingsCollectionWindow from \"@/components/EndingsCollectionWindow.vue\"\nimport ModScreen from \"@/components/screens/ModScreen.vue\"\n\n@Options({\n  components: {\n    GameScreen,\n    StartMenu,\n    DialogueScreen,\n    HandView,\n    CreditsScreen,\n    CollectionScreen,\n    PatchNotesScreen,\n    SettingsScreen,\n    EndingsCollectionScreen: EndingsCollectionWindow,\n    ModScreen\n  },\n  methods: {\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--background-image': 'url(' + require('@/assets/background.webp') + ')',\n        '--maven-pro-path': 'url(' + require('@/assets/fonts/MavenPro-VariableFont_wght.ttf') + ')'\n      }\n    },\n    globalState() {\n      return globalState()\n    }\n  }\n})\nexport default class App extends Vue {\n  menu: Menu = new Menu()\n}\n","import { render } from \"./App.vue?vue&type=template&id=34e99f59&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=34e99f59&lang=scss\"\nimport \"./App.vue?vue&type=style&index=1&id=34e99f59&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-34e99f59\"\n\nexport default script","import { createWebHistory, createRouter, createWebHashHistory } from \"vue-router\"\nimport GameScreen from \"@/components/screens/GameScreen.vue\"\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Milkfarm\",\n    component: GameScreen,\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory('/'),\n  //history: createWebHashHistory('/gallery/'),\n  // @ts-ignore\n  routes: routes\n})\n\nexport default router\n","import * as Vue from 'vue'\nimport App from './App.vue'\nimport router from \"@/router\"\n\n// @ts-ignore\nVue.createApp(App).use(router).mount('#app')\n","module.exports = __webpack_public_path__ + \"img/devil-512px.webp\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ValueMeter.vue?vue&type=style&index=0&id=ef28c724&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DialogueCard.vue?vue&type=style&index=0&id=70747209&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./RelatedThumb.vue?vue&type=style&index=0&id=072ed195&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CreditsScreen.vue?vue&type=style&index=0&id=0e922dc8&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./HandView.vue?vue&type=style&index=0&id=622854ee&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TextButton.vue?vue&type=style&index=1&id=2b92d90a&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PatchNotesScreen.vue?vue&type=style&index=0&id=02320d62&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EndingsCollectionWindow.vue?vue&type=style&index=0&id=2e56c106&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StartMenu.vue?vue&type=style&index=0&id=1393f094&scoped=true&lang=scss\""],"sourceRoot":""}