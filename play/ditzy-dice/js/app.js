(function(e){function t(t){for(var a,c,s=t[0],o=t[1],u=t[2],d=0,h=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&h.push(i[c][0]),i[c]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var o=n[s];0!==i[o]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},i={app:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/play/ditzy-dice/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=o;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"04fb":function(e,t,n){},"05c1":function(e,t,n){},"065e":function(e,t,n){"use strict";n("92db")},"0bb2":function(e,t,n){"use strict";n("28ad")},"0be7":function(e,t,n){},"0d0a":function(e,t,n){"use strict";n("c50c")},1323:function(e,t,n){},1348:function(e,t,n){"use strict";n("9d22")},"157a":function(e,t,n){e.exports=n.p+"img/patreon-banner-no-text.webp"},"1a08":function(e,t,n){e.exports=n.p+"fonts/MavenPro-VariableFont_wght.ttf"},"28ad":function(e,t,n){},"34ce":function(e,t,n){"use strict";n("b8a3")},"364d":function(e,t,n){},"369f":function(e,t,n){},3905:function(e,t,n){},"39d9":function(e,t,n){e.exports=n.p+"img/background.webp"},"3df8":function(e,t,n){},"3f35":function(e,t,n){},"44c3":function(e,t,n){},5235:function(e,t,n){"use strict";n("e31e")},"55cd":function(e,t,n){},"58cc":function(e,t,n){},"60bf":function(e,t,n){},"67a4":function(e,t,n){"use strict";n("ce52")},"6ad1":function(e,t,n){"use strict";n("3905")},7127:function(e,t,n){e.exports=n.p+"img/randomPortrait.webp"},7219:function(e,t,n){"use strict";n("7dfb")},7599:function(e,t,n){"use strict";n("d08b")},"7a1e":function(e,t,n){},"7d37":function(e,t,n){},"7dfb":function(e,t,n){},8020:function(e,t,n){"use strict";n("fb01")},8743:function(e,t,n){"use strict";n("04fb")},"87b3":function(e,t,n){"use strict";n("937c")},"89da":function(e,t,n){},"8d53":function(e,t,n){"use strict";n("05c1")},"90ac":function(e,t,n){"use strict";n("89da")},"92d9":function(e,t,n){"use strict";n("93f3")},"92db":function(e,t,n){},"937c":function(e,t,n){},"93f3":function(e,t,n){},"9a27":function(e,t,n){"use strict";n("44c3")},"9b25":function(e,t,n){"use strict";n("3df8")},"9d22":function(e,t,n){},a01d:function(e,t,n){"use strict";n("7d37")},a08e:function(e,t,n){},a17f:function(e,t,n){e.exports=n.p+"img/black-felt.png"},b74c:function(e,t,n){},b783:function(e,t,n){"use strict";n("0be7")},b8a3:function(e,t,n){},ba9d:function(e,t,n){e.exports=n.p+"img/patreon-banner.webp"},bd0e:function(e,t,n){"use strict";n("1323")},c421:function(e,t,n){},c50c:function(e,t,n){},c725:function(e,t,n){"use strict";n("3f35")},c735:function(e,t,n){"use strict";n("369f")},ca78:function(e,t,n){"use strict";n("58cc")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),i=Object(a["H"])("data-v-ea0623fc");Object(a["u"])("data-v-ea0623fc");var r={key:0,class:"loading"},c=Object(a["g"])("h1",null,"Loading...",-1);Object(a["r"])();var s=i((function(e,t,n,i,s,o){return Object(a["q"])(),Object(a["d"])("div",{id:"milkfarm-app",style:e.cssVars},[e.globalState.loading.value?(Object(a["q"])(),Object(a["d"])("div",r,[c])):(Object(a["q"])(),Object(a["d"])(Object(a["A"])(e.menu.activeComponent),Object(a["l"])({key:1},{menu:e.menu},{onGotoView:t[1]||(t[1]=function(t){e.menu.activeComponent=t}),onClose:t[2]||(t[2]=function(t){return e.menu.activeComponent="StartMenu"})}),null,16))],4)})),o=n("d4ec"),u=n("262e"),l=n("2caf"),d=n("9ab4"),h=n("ce1f"),f=Object(a["H"])("data-v-5bfce8f7");Object(a["u"])("data-v-5bfce8f7");var b={class:"milkfarm"},g={class:"hand-labels"},v={class:"hand-label"},p={class:"hand-label mana-label"},O={class:"hand-label mana-label"},m={class:"hand-label"},j={class:"hand-labels"},y=Object(a["f"])("Show All: On"),k=Object(a["f"])("Show All: Off"),w={class:"dices"},C={class:"abilities"},S={class:"ability-title"},x={class:"ability-subtitle"};Object(a["r"])();var _=f((function(e,t,n,i,r,c){var s=Object(a["z"])("CardHandWindow"),o=Object(a["z"])("TextButton"),u=Object(a["z"])("DialogueCard"),l=Object(a["z"])("DiceView");return Object(a["q"])(),Object(a["d"])("div",b,[Object(a["g"])(s,{menu:e.menu,deck:e.game.drawnCards,class:"drawn-cards"},{default:f((function(){return[Object(a["g"])("div",g,[Object(a["g"])("div",v,Object(a["C"])(e.game.roundString),1),Object(a["g"])("div",p," Bonus rolls: "+Object(a["C"])(e.game.state.bonusRolls.value)+" / "+Object(a["C"])(e.game.state.bonusRolls.max),1),Object(a["g"])("div",O," Mana: "+Object(a["C"])(e.game.player.getMana()),1),Object(a["g"])("div",m,Object(a["C"])(e.game.pickedString),1)])]})),_:1},8,["menu","deck"]),Object(a["g"])(s,{menu:e.menu,deck:e.handDeck,class:"picked-cards"},{default:f((function(){return[Object(a["g"])("div",j,[Object(a["g"])(o,{class:"hand-button",onClick:t[1]||(t[1]=function(t){return e.showActivatedCards=!e.showActivatedCards})},{default:f((function(){return[e.showActivatedCards?(Object(a["q"])(),Object(a["d"])(a["a"],{key:0},[y],64)):(Object(a["q"])(),Object(a["d"])(a["a"],{key:1},[k],64))]})),_:1})])]})),_:1},8,["menu","deck"]),Object(a["g"])(u,{menu:e.menu},null,8,["menu"]),Object(a["g"])("div",w,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.state.dice,(function(e){return Object(a["q"])(),Object(a["d"])(l,{key:e,dice:e},null,8,["dice"])})),128))]),Object(a["g"])("div",C,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.abilities,(function(t){return Object(a["q"])(),Object(a["d"])(a["a"],{key:t},[t.isVisible(e.game)?(Object(a["q"])(),Object(a["d"])(o,{key:0,class:"ability",disabled:!t.isAvailable(e.game),onClick:function(n){return t.activate(e.game)}},{default:f((function(){return[Object(a["g"])("p",S,Object(a["C"])(t.title),1),Object(a["g"])("p",x,Object(a["C"])(t.subtitle),1)]})),_:2},1032,["disabled","onClick"])):Object(a["e"])("",!0)],64)})),128))])])})),T=Object(a["H"])("data-v-2b92d90a"),D=T((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:["text-button",{disabled:e.disabled}],onselectstart:"return false"},[Object(a["y"])(e.$slots,"default")],2)})),B=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.disabled=!1,e}return n}(h["b"]);B=Object(d["a"])([Object(h["a"])({props:{disabled:Boolean}})],B);var R=B;n("6ad1"),n("e733");R.render=D,R.__scopeId="data-v-2b92d90a";var M=R,N=(n("a4d3"),n("e01a"),Object(a["H"])("data-v-3bf17204"));Object(a["u"])("data-v-3bf17204");var E={class:"title-field",title:"Name of this card"},P={class:"levels-field",title:"Level of this card / Max level of this card"},L=Object(a["g"])("div",{class:"thumb-container"},null,-1),A={key:0,class:"subtitle-field",title:"Name of this level of this card"},q={class:"description-field"},z={class:"artist-field"};Object(a["r"])();var I=N((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:["playing-card",{"single-card":"single"===e.card.type,"child-card":e.card.hasParent,"highlight-1":1===e.card.highlight,"highlight-2":2===e.card.highlight,"highlight-3":3===e.card.highlight,"highlight-4":e.card.highlight>=4}],style:e.cssVars},[Object(a["g"])("div",E,[Object(a["g"])("h3",null,Object(a["C"])(e.card.title),1)]),Object(a["g"])("div",P,[Object(a["g"])("h3",null,Object(a["C"])(e.card.levelString),1)]),L,""!==e.card.subtitle?(Object(a["q"])(),Object(a["d"])("div",A,[Object(a["g"])("h3",null,Object(a["C"])(e.card.subtitle),1)])):Object(a["e"])("",!0),Object(a["g"])("div",q,[Object(a["g"])("p",null,Object(a["C"])(e.card.description),1)]),Object(a["g"])("div",z,[Object(a["g"])("p",null,"Art by "+Object(a["C"])(e.card.artist),1)])],6)})),F=Object(a["H"])("data-v-ef28c724");Object(a["u"])("data-v-ef28c724");var V=Object(a["g"])("div",{class:"filled-bar"},null,-1),H={class:"label"};Object(a["r"])();var U=F((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:"value-meter",style:e.cssVars},[V,Object(a["g"])("div",H,[Object(a["y"])(e.$slots,"default")])],4)})),G=(n("a9e3"),n("aff5"),n("b680"),n("07ac"),n("bee2")),W=(n("99af"),n("7db0"),n("d3b7"),n("ac1f"),n("25f0"),n("6062"),n("3ca3"),n("4d90"),n("5319"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("96cf"),n("1da1")),$=n("bc3a"),J=n.n($),X=n("d5d0"),Y=n.n(X),K=n("c0e9"),Z={baseUrl:function(){return"https://www.blushingdefeat.com/play/ditzy-dice"},wait:function(e){return new Promise((function(t,n){setTimeout(t,e)}))},fetchHjson:function(e){var t=this;return Object(W["a"])(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,J.a.get(t.baseUrl()+"/"+e,{transformResponse:[function(e){return e}]});case 2:return a=n.sent,i=a.data,r=Y.a.parse(i),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()},getInfo:function(e){var t=this;return Object(W["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.fetchHjson(e+"/info.hjson");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},isVideo:function(e){return/\.webm$/i.test(e)},sample:function(e){return e[Math.floor(Math.random()*e.length)]},timeToDays:function(e){return e/60},currentDate:function(e){var t=Math.floor(this.timeToDays(e)),n=e%60/60*24,a=Math.floor(n),i=60*(n-a);return"Day ".concat(t,", ").concat(a.toFixed(0).padStart(2,"0"),":").concat(i.toFixed(0).padStart(2,"0"))},displayTime:function(e){var t=Math.floor(this.timeToDays(e)),n=e%60/60*24,a=Math.floor(n),i=60*(n-a),r="";return 1==t&&(r+="".concat(t," day")),t>1&&(r+="".concat(t," days")),t>=1&&a>0&&(r+=", "),1==a&&(r+="".concat(a," hour")),a>1&&(r+="".concat(a," hours")),0==t&&0==a&&(r="".concat(i," minutes")),r},uuid:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)}))},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},toKebabCase:function(e){return e.replace(/\s+/g,"-").toLowerCase()},pickFrom:function(e,t){var n=this.clamp(Math.round(t*(e.length-1)),0,e.length-1);return e[n]},clamp:function(e,t,n){return Math.max(Math.min(e,n),t)},showNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0==t&&(t=e),t<1?e.toFixed(2):t<10?e.toFixed(1):e.toFixed(0)},ensure:function(e,t){return t.find((function(t){return t==e}))?e:t[0]},shuffle:function(e){var t,n,a=e.length;while(0!==a)n=Math.floor(Math.random()*a),a-=1,t=e[a],e[a]=e[n],e[n]=t;return e},hasDuplicate:function(e){return new Set(e).size!==e.length},screenshot:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collection",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=document.getElementById(e);if(null!=a){var i=Math.max(a.childNodes.length-2,1),r=270,c=380,s=a.style.width,o=a.style.height,u=a.style.minHeight,l=Math.min(r*i,2560);a.style.width="".concat(l,"px"),i*r<2560&&(a.style.height="".concat(c,"px"),a.style.minHeight="".concat(c,"px")),K(a,{backgroundColor:n}).then((function(e){var a,i=document.createElement("a");null==n?(a=e.toDataURL("image/png"),i.download="".concat(t,".png")):(a=e.toDataURL("image/jpeg"),i.download="".concat(t,".jpg")),i.href=a,i.click()})),a.style.width=s,a.style.minHeight=u,a.style.height=o}else console.error('Could not take a screenshot of element with id "'.concat(e,'".'))}},Q=n("e46d"),ee=n("b85c"),te=function(){function e(t,n){Object(o["a"])(this,e),this.uuid=Z.uuid(),this.type="add",this.value=0,this.type=n,this.value=t}return Object(G["a"])(e,[{key:"equals",value:function(e){return this.value==e.value&&this.type==e.type}},{key:"toString",value:function(){var e="",t=Z.showNumber(Math.abs(this.value));return"add"===this.type?e=this.value>0?"+".concat(t):"-".concat(t):"mul"===this.type&&(e="x".concat(t)),e}}],[{key:"activate",value:function(e,t){return"add"===t.type?e+t.value:"mul"===t.type?e*t.value:e}},{key:"reverseActivate",value:function(e,t){return"add"===t.type?e-t.value:"mul"===t.type?e*(1/t.value):e}},{key:"activateAll",value:function(t,n){var a,i=Object(ee["a"])(n);try{for(i.s();!(a=i.n()).done;){var r=a.value;"add"===r.type&&(t=e.activate(t,r))}}catch(u){i.e(u)}finally{i.f()}var c,s=Object(ee["a"])(n);try{for(s.s();!(c=s.n()).done;){var o=c.value;"mul"===o.type&&(t=e.activate(t,o))}}catch(u){s.e(u)}finally{s.f()}return t}},{key:"reverseActivateAll",value:function(t,n){var a,i=Object(ee["a"])(n.reverse());try{for(i.s();!(a=i.n()).done;){var r=a.value;"mul"===r.type&&(t=e.reverseActivate(t,r))}}catch(u){i.e(u)}finally{i.f()}var c,s=Object(ee["a"])(n.reverse());try{for(s.s();!(c=s.n()).done;){var o=c.value;"add"===o.type&&(t=e.reverseActivate(t,o))}}catch(u){s.e(u)}finally{s.f()}return t}}]),e}();Object(d["a"])([Object(Q["g"])(Object(Q["b"])())],te.prototype,"uuid",void 0),Object(d["a"])([Q["g"]],te.prototype,"type",void 0),Object(d["a"])([Q["g"]],te.prototype,"value",void 0);var ne=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(o["a"])(this,e),this._baseValue=0,this._min=0,this._max=0,this.valueMods={},this.minMods={},this.maxMods={},this.texts=[],this.capBaseValue=!1,this._baseValue=t,this._min=n,this._max=void 0==a?Number.MAX_SAFE_INTEGER:a,this.texts=i,this.capBaseValue=r}return Object(G["a"])(e,[{key:"addValue",value:function(e){var t=[];for(var n in this.valueMods){var a=this.valueMods[n];"mul"==a.type&&t.push(a)}var i=this.value;this.baseValue;return this.baseValue+=te.reverseActivateAll(e,t),this.value-i}},{key:"addBaseValue",value:function(e){var t=this.baseValue;return this.baseValue+=e,this.baseValue-t}},{key:"load",value:function(e){this._baseValue=e._baseValue}},{key:"fraction",set:function(e){this.baseValue=this.min+this.max*e},get:function(){return(this.value-this.min)/(this.max-this.min)}},{key:"value",get:function(){var e=te.activateAll(this._baseValue,Object.values(this.valueMods));return e>this.max?this.max:e<this.min?this.min:e}},{key:"baseValue",set:function(e){this.capBaseValue&&(e=Math.max(Math.min(e,this.max),this.min)),this._baseValue=e},get:function(){return this._baseValue}},{key:"min",get:function(){return te.activateAll(this._min,Object.values(this.minMods))}},{key:"max",get:function(){return te.activateAll(this._max,Object.values(this.maxMods))}},{key:"text",get:function(){return 0==this.texts.length?this.value.toFixed(1):Z.pickFrom(this.texts,this.fraction)}},{key:"copy",get:function(){var t=new e(this._baseValue,this._min,this._max,this.texts);return t.valueMods=this.valueMods,t}}]),e}();Object(d["a"])([Q["g"]],ne.prototype,"_baseValue",void 0),Object(d["a"])([Q["g"]],ne.prototype,"_min",void 0),Object(d["a"])([Q["g"]],ne.prototype,"_max",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["d"])(Object(Q["e"])(te)))],ne.prototype,"valueMods",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["d"])(Object(Q["e"])(te)))],ne.prototype,"minMods",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["d"])(Object(Q["e"])(te)))],ne.prototype,"maxMods",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],ne.prototype,"texts",void 0),Object(d["a"])([Q["g"]],ne.prototype,"capBaseValue",void 0);var ae=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.backgroundColor="#282c3b",e.barColor="#741A32",e}return n}(h["b"]);ae=Object(d["a"])([Object(h["a"])({props:{container:ne,barColor:String,backgroundColor:String},methods:{log:function(e){console.log(e)}},computed:{cssVars:function(){return{"--percent-filled":100*this.container.fraction+"%","--background-color":this.backgroundColor,"--bar-color":this.barColor}}}})],ae);var ie=ae;n("d4b5");ie.render=U,ie.__scopeId="data-v-ef28c724";var re=ie,ce=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);ce=Object(d["a"])([Object(h["a"])({components:{ValueMeter:re,TextButton:M},props:{card:Object},methods:{log:function(e){console.log(e)}},computed:{cssVars:function(){return{"--border-color":"black","--background-hue":this.card.hue,"--background-image":"url("+n("a17f")+")","--thumb":"url("+Z.baseUrl()+"/"+this.card.thumb+")"}}}})],ce);var se=ce;n("c735");se.render=I,se.__scopeId="data-v-3bf17204";var oe=se,ue=(n("d81d"),n("b0c0"),n("5530")),le=n("3835"),de=n("d4cd"),he=n.n(de);function fe(e){return be.apply(this,arguments)}function be(){return be=Object(W["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=[],a=Object(ee["a"])(t);try{for(a.s();!(i=a.n()).done;)r=i.value,n.push(Z.fetchHjson(r))}catch(s){a.e(s)}finally{a.f()}return e.next=5,Promise.all(n);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}var ge=Object(a["v"])({loading:!0,cardFamilyString:"",dialogueString:"",dialogue2String:"",endingsString:"",artistsString:"",patreonCredits:"",patchNotesString:""});function ve(){var e=function(){var e=Object(W["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,r,c,s,o,u,l,d,h,f,b,g,v,p,O,m,j,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ge.loading=!0,e.next=3,Promise.all([Z.fetchHjson("cards/series.hjson"),Z.fetchHjson("dialogue.hjson"),Z.fetchHjson("dialogue-2.hjson"),Z.fetchHjson("endings/content.hjson"),Z.fetchHjson("cards/artists.hjson"),J.a.get("https://www.blushingdefeat.com/assets/blushing-defeat-credits.json"),Z.fetchHjson("patch-notes/content.hjson")]);case 3:return t=e.sent,n=Object(le["a"])(t,7),a=n[0],i=n[1],r=n[2],c=n[3],s=n[4],o=n[5],u=n[6],ge.dialogueString=JSON.stringify(i),ge.dialogue2String=JSON.stringify(r),ge.artistsString=JSON.stringify(s),ge.patreonCredits=o.data,e.next=18,Promise.all([fe(a.map((function(e){return"cards/".concat(e)}))),fe(u.map((function(e){return"patch-notes/".concat(e,".hjson")}))),fe(c.map((function(e){return"endings/".concat(e,".hjson")})))]);case 18:l=e.sent,d=Object(le["a"])(l,3),h=d[0],f=d[1],b=d[2],ge.cardFamilyString=JSON.stringify(h),g=new he.a,v=Object(ee["a"])(u.entries());try{for(v.s();!(p=v.n()).done;)O=Object(le["a"])(p.value,2),m=O[0],j=O[1],y=f[m],y.id=j,y.text=g.render(y.text)}catch(k){v.e(k)}finally{v.f()}ge.patchNotesString=JSON.stringify(f),ge.endingsString=JSON.stringify(b),ge.loading=!1;case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ue["a"])(Object(ue["a"])({},Object(a["E"])(ge)),{},{load:e})}var pe=function(){function e(t){Object(o["a"])(this,e),this.id=t.id,this.name=t.name,this.thumb=t.thumb,this.artist=t.artist?t.artist:"Gardamuse",this.hue=t.hue,this.cards=t.cards.map((function(e){return e.id}))}return Object(G["a"])(e,null,[{key:"familyMap",value:function(){if(this.familiesLoaded)return this._familyMap;var t,n=JSON.parse(ve().cardFamilyString.value),a=Object(ee["a"])(n);try{for(a.s();!(t=a.n()).done;){var i=t.value,r=new e(i);this._familyMap[r.id]=r}}catch(c){a.e(c)}finally{a.f()}return this.familiesLoaded=!0,this._familyMap}}]),e}();pe.familiesLoaded=!1,pe._familyMap={},Object(d["a"])([Q["g"]],pe.prototype,"id",void 0),Object(d["a"])([Q["g"]],pe.prototype,"name",void 0),Object(d["a"])([Q["g"]],pe.prototype,"thumb",void 0),Object(d["a"])([Q["g"]],pe.prototype,"artist",void 0),Object(d["a"])([Q["g"]],pe.prototype,"hue",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],pe.prototype,"cards",void 0);n("4de4"),n("c740"),n("13d5"),n("a434");var Oe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(o["a"])(this,e),this.tags=t,this.guaranteed=n,this.probability=a},me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Object(o["a"])(this,e),this.cards=void 0!=t?t:[]}return Object(G["a"])(e,[{key:"createNew",value:function(){return e.referenceDeck().copy().useFilters()}},{key:"withoutFamily",value:function(t){var n,a=[],i=Object(ee["a"])(this.cards);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.family.id!=t&&a.push(r)}}catch(c){i.e(c)}finally{i.f()}return new e(a)}},{key:"onlyTag",value:function(t){if("all"==t)return new e(this.cards);var n,a=[],i=Object(ee["a"])(this.cards);try{for(i.s();!(n=i.n()).done;){var r=n.value;(r.family.id==t||r.hasTag(t))&&a.push(r)}}catch(c){i.e(c)}finally{i.f()}return new e(a)}},{key:"useFilters",value:function(){return this.filterBy(e.filters)}},{key:"filterBy",value:function(t){var n,a=[],i=Object(ee["a"])(this.cards);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=!0;if(r.isParent){var s,o=Object(ee["a"])(r.subcards);try{var u=function(){var e,n=s.value,a=Object(ee["a"])(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;n.hasTag(i.tag)&&2==i.strictness&&(r.subcards=r.subcards.filter((function(e){return e.id!=n.id}))),n.hasTag(i.tag)&&n.hasTag("extreme")&&1==i.strictness&&(r.subcards=r.subcards.filter((function(e){return e.id!=n.id})))}}catch(c){a.e(c)}finally{a.f()}};for(o.s();!(s=o.n()).done;)u()}catch(f){o.e(f)}finally{o.f()}}var l,d=Object(ee["a"])(t);try{for(d.s();!(l=d.n()).done;){var h=l.value;if(r.hasTag(h.tag)){if(2==h.strictness){c=!1;break}if(1==h.strictness&&r.hasTag("extreme")){c=!1;break}}}}catch(f){d.e(f)}finally{d.f()}c&&a.push(r)}}catch(f){i.e(f)}finally{i.f()}return new e(a)}},{key:"rebase",value:function(){var t,n=new e,a=Object(ee["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.addCard(e.lookup(i.id))}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"unique",value:function(){var t,n={},a=new e,i=Object(ee["a"])(this.cards);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.id in n||(a.addCard(r),n[r.id]=!0)}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"pack",value:function(){var t,n=new e,a=Object(ee["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.hasParent){var r=i.parent.id,c=void 0;n.hasCard(r)?c=n.getCardById(r):this.hasCard(r)?(c=this.getCardById(r),n.addCard(c)):(c=e.lookup(r),c.subcards=[],n.addCard(c)),c.addSubCard(i)}else n.addCard(i)}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"unpack",value:function(){var t,n=[],a=Object(ee["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.isParent)for(var r=0;r<i.subcards.length;r++)n.push(i.getLevel(r));else n.push(i)}}catch(c){a.e(c)}finally{a.f()}return new e(n)}},{key:"pick",value:function(t){for(var n=[],a=0;a<this.cards.length;a++){var i,r=Object(ee["a"])(t);try{for(r.s();!(i=r.n()).done;){var c=i.value;a==c-1&&n.push(this.cards[a])}}catch(s){r.e(s)}finally{r.f()}}return new e(n)}},{key:"draw",value:function(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oe([],0,0),i=this.getWantedCards(a.tags),r=[],c=function(){var e=Z.pickFrom(i,Math.random()),t=i.findIndex((function(t){return t.id==e.id}));-1!=t&&i.splice(t,1),n.removeCard(e),r.push(e),console.log("Guaranteed",e.name)};while(r.length<t&&r.length<a.guaranteed&&i.length>0)c();while(r.length<t)if(i.length>0&&Math.random()<a.probability)(function(){var e=i.pop();n.cards.splice(n.cards.findIndex((function(t){return t.id==e.id})),1),r.push(e)})();else{if(!(this.cards.length>0))break;(function(){var e=n.cards.pop(),t=i.findIndex((function(t){return t.id==e.id}));-1!=t&&i.splice(t,1),r.push(e)})()}return new e(r).shuffle()}},{key:"getWantedCards",value:function(e){var t,n=[],a=Object(ee["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.hasAnyTag(e)&&n.push(i)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"drawOneCardTo",value:function(e){var t=this.cards.pop();return void 0!=t&&(e.push(t),!0)}},{key:"drawIndex",value:function(e){return this.cards.splice(e,1)[0]}},{key:"addCard",value:function(e){return this.cards.push(e),this}},{key:"addDeck",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.cards=t?e.cards.concat(this.cards):this.cards.concat(e.cards),this}},{key:"removeCard",value:function(e){var t=this.cards.findIndex((function(t){return t.id==e.id}));return-1!=t&&this.drawIndex(t),this}},{key:"hasCard",value:function(e){return void 0!=this.findCard(e)}},{key:"findCard",value:function(e){var t=this.cards.find((function(t){return t.id==e}));if(void 0!=t)return t;var n,a=Object(ee["a"])(this.cards.filter((function(e){return e.isParent})));try{for(a.s();!(n=a.n()).done;){var i=n.value;if(t=i.subcards.find((function(t){return t.id==e})),void 0!=t)return t}}catch(r){a.e(r)}finally{a.f()}}},{key:"getCardById",value:function(e){var t=this.allLevels.find((function(t){return t.id==e}));return t}},{key:"size",value:function(){return this.cards.length}},{key:"shuffle",value:function(){return this.cards=Z.shuffle(this.cards),this}},{key:"sortByFamily",value:function(){return this.cards=this.cards.sort((function(e,t){return e.family.id<t.family.id?-1:1})),this}},{key:"sortByLevel",value:function(){return this.cards=this.cards.sort((function(e,t){return e.level-t.level})),this}},{key:"sortByName",value:function(){return this.cards=this.cards.sort((function(e,t){return e.name<t.name?1:-1})),this}},{key:"removeAllCards",value:function(){return this.cards=[],this}},{key:"copy",value:function(){return new e(this.cards.map((function(e){return e.copy()})))}},{key:"toString",value:function(){var e="--- DECK, ".concat(this.size()," cards ---\n");return e+=this.cards.map((function(e){return"".concat(e.fullTitle,", level ").concat(e.level)})).reduce((function(e,t){return"".concat(e,"\n").concat(t)})),e}},{key:"allLevels",get:function(){var e,t=[],n=Object(ee["a"])(this.cards);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(t.push(a),a.isParent){var i,r=Object(ee["a"])(a.subcards);try{for(r.s();!(i=r.n()).done;){var c=i.value;t.push(c)}}catch(s){r.e(s)}finally{r.f()}}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"pickableCards",get:function(){var e,t=[],n=Object(ee["a"])(this.cards);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.isParent||t.push(a);for(var i=0;i<a.subcards.length;i++)t.push(a.getLevel(i))}}catch(r){n.e(r)}finally{n.f()}return t}}],[{key:"createFromCardStates",value:function(t){var n,a=[],i=Object(ee["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=e.lookup(r.id);void 0!=c&&a.push(c)}}catch(s){i.e(s)}finally{i.f()}return new e(a)}},{key:"lookup",value:function(e){var t=this.cardMap()[e];if(void 0!=t)return t.copy();console.warn('Static lookup of card "'.concat(e,'" failed.'))}},{key:"referenceDeck",value:function(){if(void 0!=this._referenceDeck)return this._referenceDeck.copy();var t,n=this.parseCards(),a=new e,i=Object(ee["a"])(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.isParent||a.addCard(r)}}catch(c){i.e(c)}finally{i.f()}return this._referenceDeck=a.pack(),this._referenceDeck.copy()}},{key:"cardMap",value:function(){if(this.cardsLoaded)return this._cardMap;var e,t=Object(ee["a"])(this.parseCards());try{for(t.s();!(e=t.n()).done;){var n=e.value;this._cardMap[n.id]=n}}catch(a){t.e(a)}finally{t.f()}return this.cardsLoaded=!0,this._cardMap}},{key:"parseCards",value:function(){var e,t=JSON.parse(ve().cardFamilyString.value),n=[],a=Object(ee["a"])(t);try{for(a.s();!(e=a.n()).done;){var i,r=e.value,c=new pe(r),s=Object(ee["a"])(r.cards);try{for(s.s();!(i=s.n()).done;){var o=i.value,u=[];if(void 0!=o.levels){var l,d=Object(ee["a"])(o.levels.entries());try{for(d.s();!(l=d.n()).done;){var h=Object(le["a"])(l.value,2),f=h[0],b=h[1],g=o.tags?o.tags:[];b.tags&&(g=g.concat(b.tags));var v=new je({family:c.id,thumb:b.thumb?"cards/".concat(b.thumb):o.thumb?"cards/".concat(o.thumb):"cards/".concat(c.thumb),id:"".concat(o.id,".").concat(b.id),name:b.name,description:b.description,transformation:b.transformation?b.transformation:o.transformation?o.transformation:"",type:o.type,subcards:[],levels:1,level:f+1,parent:o.id,hue:c.hue,artist:b.artist?b.artist:o.artist?o.artist:c.artist?c.artist:"Gardamuse",tags:g});u.push(v),n.push(v)}}catch(p){d.e(p)}finally{d.f()}}n.push(this.parseCard(o,c,u))}}catch(p){s.e(p)}finally{s.f()}}}catch(p){a.e(p)}finally{a.f()}return n}},{key:"parseCard",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new je({family:t.id,thumb:e.thumb?"cards/".concat(e.thumb):"cards/".concat(t.thumb),id:e.id,name:e.name,description:e.description,transformation:e.transformation,type:e.type,subcards:n.map((function(e){return e.id})),levels:n.length,hue:t.hue,artist:e.artist?e.artist:t.artist?t.artist:"Gardamuse",tags:e.tags?e.tags:[]})}}]),e}();me.filters=[],me.cardsLoaded=!1,me._cardMap={};var je=function(){function e(t){Object(o["a"])(this,e),this.scale=!1,this.highlight=0,void 0==t&&(t={}),this._family=t.family?t.family:"none",this._parent=t.parent,this.thumb=t.thumb,this.id=t.id,this.name=t.name,this.description=t.description,this.transformation=t.transformation?t.transformation:"",this._subcards=t.subcards?t.subcards:[],this._level=t.level?t.level:1,this.levels=t.levels?t.levels:0,this.type=t.type?t.type:"single",this.hue=t.hue?t.hue:0,this.artist=t.artist?t.artist:"Gardamuse",this.tags=t.tags?t.tags:[]}return Object(G["a"])(e,[{key:"addSubCard",value:function(e){this.hasSubCard(e)||(this._subcards.push(e.id),this._subcards.sort())}},{key:"hasSubCard",value:function(e){return void 0!=this._subcards.find((function(t){return t==e.id}))}},{key:"getLevel",value:function(e){return"single"!=this.type&&e<this.subcards.length?this.subcards[e]:this}},{key:"hasTag",value:function(e){return this.family.id==e||void 0!=this.tags.find((function(t){return t==e}))}},{key:"hasAnyTag",value:function(e){var t,n=Object(ee["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(this.hasTag(a))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"equals",value:function(e){return this.id==e.id}},{key:"copy",value:function(){var t=new e({id:this.id,name:this.name,thumb:this.thumb,description:this.description,transformation:this.transformation,subcards:this._subcards,levels:this.levels,level:this._level,type:this.type,hue:this.hue,artist:this.artist,family:this._family,parent:this._parent,tags:this.tags});return t}},{key:"toJSON",value:function(){return Object(Q["h"])(this)}},{key:"fullTitle",get:function(){return this.hasParent?"".concat(this.parent.name,": ").concat(this.name):this.name}},{key:"title",get:function(){return this.hasParent?"".concat(this.parent.name):this.name}},{key:"subtitle",get:function(){return this.hasParent?"".concat(this.name):""}},{key:"subcards",set:function(e){this._subcards=e.map((function(e){return e.id}))},get:function(){return this._subcards.map((function(e){return me.lookup(e)}))}},{key:"intensity",get:function(){return this.isParent||"selection"!=this.type?this._level:1}},{key:"level",get:function(){return this._level}},{key:"maxLevel",get:function(){return this.hasParent?this.parent.levels:this.levels}},{key:"levelString",get:function(){return"single"==this.type?"1":this.isParent&&this.levels==this.subcards.length?this.levels.toFixed(0):this.isParent?"".concat(this.subcards.length," / ").concat(this.levels):"".concat(this._level," / ").concat(this.maxLevel)}},{key:"parent",get:function(){return me.lookup(this._parent)}},{key:"hasParent",get:function(){return void 0!=this._parent}},{key:"isParent",get:function(){return"single"!=this.type&&this.levels>1}},{key:"family",get:function(){return pe.familyMap()[this._family]}}]),e}();function ye(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:["dice-view",{"locked-dice":e.dice.locked}],style:e.cssVars,onClick:t[1]||(t[1]=function(t){return e.dice.roll()})},[Object(a["g"])("p",null,Object(a["C"])(e.dice.value)+" / "+Object(a["C"])(e.dice.max),1)],6)}Object(d["a"])([Q["g"]],je.prototype,"_family",void 0),Object(d["a"])([Q["g"]],je.prototype,"_parent",void 0),Object(d["a"])([Q["g"]],je.prototype,"thumb",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["b"])())],je.prototype,"id",void 0),Object(d["a"])([Q["g"]],je.prototype,"name",void 0),Object(d["a"])([Q["g"]],je.prototype,"description",void 0),Object(d["a"])([Q["g"]],je.prototype,"transformation",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],je.prototype,"_subcards",void 0),Object(d["a"])([Q["g"]],je.prototype,"type",void 0),Object(d["a"])([Q["g"]],je.prototype,"_level",void 0),Object(d["a"])([Q["g"]],je.prototype,"levels",void 0),Object(d["a"])([Q["g"]],je.prototype,"hue",void 0),Object(d["a"])([Q["g"]],je.prototype,"artist",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],je.prototype,"tags",void 0);var ke=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);ke=Object(d["a"])([Object(h["a"])({components:{ValueMeter:re,TextButton:M},props:{dice:Object},methods:{log:function(e){console.log(e)}},computed:{cssVars:function(){return{"--border-color":"black"}}}})],ke);var we=ke;n("bd0e");we.render=ye;var Ce=we,Se=Object(a["H"])("data-v-6f0fcc3e");Object(a["u"])("data-v-6f0fcc3e");var xe={key:0,style:{"grid-area":"r"}},_e={class:"round-counter"},Te={key:0},De={key:1,style:{margin:"0",padding:"0"}},Be={key:0,class:"bonus-rolls"},Re={key:1,class:"cards-to-pick"},Me={class:"buttons"},Ne={style:{margin:"0"}};Object(a["r"])();var Ee=Se((function(e,t,n,i,r,c){var s=Object(a["z"])("ChatView"),o=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",{class:["dialogue-status-card window",{simple:void 0!==e.title}]},[Object(a["g"])(s,{class:"text",text:e.game.currentDialogue},null,8,["text"]),void 0!==e.title?(Object(a["q"])(),Object(a["d"])("div",xe,[Object(a["g"])("h1",null,Object(a["C"])(e.title),1)])):(Object(a["q"])(),Object(a["d"])(a["a"],{key:1},[Object(a["g"])("div",_e,[e.game.round.value>0?(Object(a["q"])(),Object(a["d"])("h3",Te,Object(a["C"])(e.game.roundString),1)):(Object(a["q"])(),Object(a["d"])("h1",De,"Ditzy Dice"))]),e.game.round.value>0&&"bonus"!==e.game.stageId?(Object(a["q"])(),Object(a["d"])("div",Be,[Object(a["g"])("h3",null,"Bonus rolls: "+Object(a["C"])(e.game.state.bonusRolls.value)+" / "+Object(a["C"])(e.game.state.bonusRolls.max),1)])):Object(a["e"])("",!0),e.game.state.cardsToPick>0?(Object(a["q"])(),Object(a["d"])("div",Re,[Object(a["g"])("h3",null,"Picked "+Object(a["C"])(e.game.state.cardsPickedThisRound)+" of "+Object(a["C"])(e.game.state.cardsToPick)+" cards",1)])):Object(a["e"])("",!0)],64)),Object(a["g"])("div",Me,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.buttons,(function(e){return Object(a["q"])(),Object(a["d"])(o,{key:e,onClick:function(t){return e.fun()}},{default:Se((function(){return[Object(a["g"])("p",Ne,Object(a["C"])(e.label),1)]})),_:2},1032,["onClick"])})),128))])],2)})),Pe=Object(a["H"])("data-v-2a2554f0");Object(a["u"])("data-v-2a2554f0");var Le={class:"chat-box"},Ae=Object(a["g"])("div",{class:"profile-image"},null,-1);Object(a["r"])();var qe=Pe((function(e,t,n,i,r,c){var s=Object(a["z"])("BlushList");return Object(a["q"])(),Object(a["d"])(s,{class:"chat-view",style:e.cssVars},{default:Pe((function(){return[Object(a["g"])("div",Le,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.lines,(function(e){return Object(a["q"])(),Object(a["d"])("div",{class:["chat-item",e.name]},[Object(a["g"])("div",{class:"chat-bubble",innerHTML:e.text},null,8,["innerHTML"]),Ae],2)})),256))])]})),_:1},8,["style"])})),ze=Object(a["H"])("data-v-4ad23e39");Object(a["u"])("data-v-4ad23e39");var Ie={class:"blush-list"},Fe={class:"content"};Object(a["r"])();var Ve=ze((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",Ie,[Object(a["g"])("div",Fe,[Object(a["y"])(e.$slots,"default")])])})),He=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);He=Object(d["a"])([Object(h["a"])({components:{},props:{},emits:["close"],methods:{},computed:{util:function(){return Z}}})],He);var Ue=He;n("8020");Ue.render=Ve,Ue.__scopeId="data-v-4ad23e39";var Ge=Ue,We=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);We=Object(d["a"])([Object(h["a"])({components:{BlushList:Ge},props:{lines:Object},emits:["close"],methods:{},computed:{util:function(){return Z},cssVars:function(){return{"--devil-image":"url("+n("ce6a")+")","--player-image":"url("+n("7127")+")"}}}})],We);var $e=We;n("7599"),n("0d0a");$e.render=qe,$e.__scopeId="data-v-2a2554f0";var Je=$e,Xe=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Xe=Object(d["a"])([Object(h["a"])({components:{ValueMeter:re,TextButton:M,ChatView:Je},props:{menu:Object,title:String},methods:{log:function(e){console.log(e)}},computed:{game:function(){return this.menu.game}}})],Xe);var Ye=Xe;n("34ce");Ye.render=Ee,Ye.__scopeId="data-v-6f0fcc3e";var Ke=Ye,Ze=Object(a["H"])("data-v-f487b2ac");Object(a["u"])("data-v-f487b2ac");var Qe={class:"card-hand-window cards-wrapper drawn-cards"},et={class:"label-wrapper"},tt={class:"label-row"},nt={class:"cards"};Object(a["r"])();var at=Ze((function(e,t,n,i,r,c){var s=Object(a["z"])("PlayingCard");return Object(a["q"])(),Object(a["d"])("div",Qe,[Object(a["g"])("div",et,[Object(a["g"])("span",tt,[Object(a["y"])(e.$slots,"default")])]),Object(a["g"])("div",nt,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.deck.cards,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t,card:t,class:{scaled:t.scale},onClick:function(n){e.toggleScale(t),e.game.clickCard(t)}},null,8,["card","class","onClick"])})),128))])])})),it=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.label="",e.scaledCard=new je({}),e}return n}(h["b"]);it=Object(d["a"])([Object(h["a"])({components:{PlayingCard:oe},props:{menu:Object,deck:Object,label:String},methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new je({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)}},computed:{game:function(){return this.menu.game}}})],it);var rt=it;n("8743");rt.render=at,rt.__scopeId="data-v-f487b2ac";var ct=rt,st=Object(a["H"])("data-v-70747209");Object(a["u"])("data-v-70747209");var ot={key:0,style:{"grid-area":"r"}},ut={class:"buttons"};Object(a["r"])();var lt=st((function(e,t,n,i,r,c){var s=Object(a["z"])("ChatView"),o=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",{class:["dialogue-card window",{"no-title":void 0===e.title}]},[Object(a["g"])(s,{class:"text",lines:e.game.currentDialogue},null,8,["lines"]),void 0!==e.title?(Object(a["q"])(),Object(a["d"])("div",ot,[Object(a["g"])("h1",null,Object(a["C"])(e.title),1)])):Object(a["e"])("",!0),Object(a["g"])("div",ut,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.buttons,(function(e){return Object(a["q"])(),Object(a["d"])(o,{key:e,class:"next-button",onClick:function(t){return e.fun()},innerHTML:e.label},null,8,["onClick","innerHTML"])})),128))])],2)})),dt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);dt=Object(d["a"])([Object(h["a"])({components:{ValueMeter:re,TextButton:M,ChatView:Je},props:{menu:Object,title:String},methods:{log:function(e){console.log(e)}},computed:{game:function(){return this.menu.game}},created:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],dt);var ht=dt;n("d736");ht.render=lt,ht.__scopeId="data-v-70747209";var ft=ht,bt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.scaledCard=new je({}),e.showActivatedCards=!1,e}return n}(h["b"]);bt=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PlayingCard:oe,DiceView:Ce,DialogueCard:ft,DialogueStatusCard:Ke,CardHandWindow:ct},props:{menu:Object},methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new je({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)}},computed:{game:function(){return this.menu.game},handDeck:function(){return this.showActivatedCards?this.game.player.hand.copy().addDeck(this.game.pickedCards):this.game.pickedCards}}})],bt);var gt=bt;n("ca78");gt.render=_,gt.__scopeId="data-v-5bfce8f7";var vt=gt,pt=n("2909"),Ot=(n("cb29"),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;Object(o["a"])(this,e),this._value=1,this._locked=!1,this.isRolling=!1,this.valueUsed=!0,this.max=t,this.game=n}return Object(G["a"])(e,[{key:"load",value:function(e){this.game=e}},{key:"roll",value:function(){this.isRolling||this.locked||(this.isRolling=!0,this.rollingDice(9))}},{key:"useValue",value:function(){return this.valueUsed=!0,this.value}},{key:"rollingDice",value:function(e){var t=this;e>0?(this._value=e,setTimeout((function(){t.rollingDice(e-1)}),50)):(this._value=Math.floor(Math.random()*this.max)+1,this.valueUsed=!1,this.game.notifyDiceRoll(this.value),this.isRolling=!1)}},{key:"isUsed",get:function(){return this.valueUsed}},{key:"locked",set:function(e){this._locked=e},get:function(){return this._locked||!this.isUsed}},{key:"value",get:function(){return this._value}},{key:"rolling",get:function(){return this.isRolling}}]),e}()),mt=function(){function e(t,n){Object(o["a"])(this,e),this.label=t,this.fun=n}return Object(G["a"])(e,[{key:"setLabel",value:function(e){return this.label=e,this}},{key:"label",set:function(e){var t=new he.a;this._label=t.render(e)},get:function(){return this._label}}]),e}(),jt=function(){function e(t,n){var i=this;Object(o["a"])(this,e),this.id="stage",this.args={},this._allowDiceBuy=!1,this._allowManaBuy=!0,this.activeComponent="GameScreen",this.endpoints={},this.state=Object(a["v"])({buttons:[]}),this.nextButton=new mt("Next",(function(){return i.nextStage()})),this.game=t,this.id=n}return Object(G["a"])(e,[{key:"onStart",value:function(){}},{key:"onResume",value:function(){}},{key:"onEnd",value:function(){}},{key:"onDiceRoll",value:function(e){}},{key:"onCardClick",value:function(e){}},{key:"link",value:function(e){return this._nextStage=e,e}},{key:"resumeStage",value:function(e){this.game.setStage(e),e.onResume()}},{key:"nextStage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.onEnd(),void 0!=e?this.gotoNext(e,t):void 0!=this._nextStage?this.gotoNext(this._nextStage,t):this.game.setStage(this)}},{key:"allowDiceBuy",value:function(){return this._allowDiceBuy}},{key:"allowManaBuy",value:function(){return this._allowManaBuy}},{key:"createMessage",value:function(e){this.game.print(e)}},{key:"sendMessage",value:function(e){this.game.sendMessage(e)}},{key:"gotoNext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.game.setStage(e),e.args=t,e.onStart()}},{key:"buttons",get:function(){return this.state.buttons},set:function(e){this.state.buttons=e}}]),e}(),yt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(o["a"])(this,n),a=t.call(this,e,"text"),a.myText=i,a.buttons=[a.nextButton],a}return Object(G["a"])(n,[{key:"onStart",value:function(){this.createMessage(this.myText)}}]),n}(jt),kt=function(){function e(){Object(o["a"])(this,e),this.hand=new me,this.mana=0,this.abilities=[]}return Object(G["a"])(e,[{key:"useMana",value:function(e){return e<=this.mana&&(this.mana-=e,!0)}},{key:"addMana",value:function(e){this.mana+=e}},{key:"getMana",value:function(){return this.mana}}]),e}(),wt=function(){function e(t){Object(o["a"])(this,e),this.game=t}return Object(G["a"])(e,[{key:"start",value:function(){this.firstStage.onStart()}}]),e}(),Ct=n("45eb"),St=n("7e84"),xt=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return!0};Object(o["a"])(this,e),this.name="",this.name=t,this.cost=n,this.fun=a,this.available=i,this.secret=function(e){return!1},this.visible=function(e){return!0}}return Object(G["a"])(e,[{key:"setFun",value:function(e){return this.fun=e,this}},{key:"setAvailableFun",value:function(e){return this.available=e,this}},{key:"setSecretFun",value:function(e){return this.secret=e,this}},{key:"setVisibleFun",value:function(e){return this.visible=e,this}},{key:"activate",value:function(e){this.isAvailable(e)&&("mana"==this.cost.resource&&e.player.useMana(this.cost.value),"bonus"==this.cost.resource&&e.bonusRolls.addValue(-this.cost.value),this.fun(e))}},{key:"isAvailable",value:function(e){return this.available(e)&&("mana"==this.cost.resource&&this.cost.value<=e.player.getMana()||"bonus"==this.cost.resource&&e.bonusRolls.value-this.cost.value<=e.bonusRolls.max)}},{key:"isVisible",value:function(e){return this.visible(e)&&(this.isAvailable(e)||!this.isAvailable(e)&&!this.secret(e))}},{key:"title",get:function(){return"".concat(this.name)}},{key:"subtitle",get:function(){return this.cost.value>0?"Pay ".concat(this.cost.value," ").concat(this.cost.resource):this.cost.value<0?"Gain ".concat(-this.cost.value," ").concat(this.cost.resource):""}}],[{key:"buyMana",value:function(){var t=new e("+2 mana",{value:-1,resource:"bonus"},(function(e){e.player.addMana(2)}),(function(e){return e.allowManaBuy()})).setVisibleFun((function(e){return e.allowManaBuy()}));return t.secret=function(e){return!0},t}},{key:"buyDice",value:function(){return new e("Buy dice",{value:2,resource:"mana"},(function(e){e.diceCount+=1}),(function(e){return e.allowDiceBuy()}))}},{key:"sellDice",value:function(){var t=new e("Sell dice",{value:-2,resource:"mana"},(function(e){e.diceCount-=1}),(function(e){return e.allowDiceSale()}));return t}},{key:"pickAnyCard",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=e.PICK_ANY_CARD_COST+(n-e.PICK_ANY_CARD_COST);i=Z.clamp(i,e.PICK_ANY_CARD_COST,12),a>=0&&(i=a);var r=new e("Pick Any",{value:i,resource:"mana"},(function(e){for(var a=[],i=0;i<n;i++)a.push(i+1);t(a)})).setAvailableFun((function(e){return e.diceReadyCount+e.diceRollingCount==0&&!e.diceAreLocked()}));return r}},{key:"addRound",value:function(){var t=new e("Add Round",{value:7,resource:"mana"}).setFun((function(e){e.round.maxMods[Z.uuid()]=new te(1,"add")})).setAvailableFun((function(e){return e.round.max<Ft.MAX_ROUNDS})).setVisibleFun((function(e){return e.round.max<Ft.MAX_ROUNDS}));return t}}]),e}();xt.PICK_ANY_CARD_COST=7;var _t=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"intensity"),a.deck=new me([]),a.done=!1,a.abilities=[],a}return Object(G["a"])(n,[{key:"onStart",value:function(){var e=this;this.pickStage=this.args.pickStage,this.parentCard=this.args.parentCard,this._allowDiceBuy=!0,this._allowManaBuy=void 0==this.args.allowManaBuy||this.args.allowManaBuy,this.game.diceCount=1,this.parentCard.levels>=4&&(this.game.diceCount+=1),"numeric"==this.parentCard.type?this.createMessage(this.game.dialogue["intensityStage"]):this.createMessage(this.game.dialogue["intensityStageSelection"]),this.done=!1,this.deck=new me(this.parentCard.subcards).sortByLevel(),this.game.drawnCards=this.deck,this.game.diceSize=this.deck.size(),this.abilities=[xt.buyMana(),xt.sellDice(),xt.buyDice(),xt.pickAnyCard((function(t){return e.pickCard(t)}),this.deck.size())],this.game.abilities=this.abilities}},{key:"onDiceRoll",value:function(e){this.pickCard(e)}},{key:"pickCard",value:function(e){if(!this.done){this.done=!0,this.game.lockDice(!0);this.deck.pick(e);this.nextStage(new Tt(this.game),{pickStage:this.pickStage,availableCards:this.deck,highlights:e,allowManaBuy:this._allowManaBuy})}}}]),n}(jt),Tt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"highlight"),a.availableCards=new me([]),a.highlights=[],a.highlightedCards=new me([]),a.done=!1,a}return Object(G["a"])(n,[{key:"onStart",value:function(){this.pickStage=this.args.pickStage,this.availableCards=this.args.availableCards,this.highlights=this.args.highlights,this.highlightedCards=this.availableCards.pick(this.highlights),this._allowManaBuy=void 0==this.args.allowManaBuy||this.args.allowManaBuy,this._allowDiceBuy=void 0==this.args.allowDiceBuy||this.args.allowDiceBuy,Z.hasDuplicate(this.highlights)&&this.createMessage("Destiny calls! Some of your dice rolled the same, choose that card to gain mana for every extra dice.");var e,t=Object(ee["a"])(this.highlights);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=this.availableCards.pick([n]).cards[0];a.highlight+=1}}catch(i){t.e(i)}finally{t.f()}this.done=!1}},{key:"onCardClick",value:function(e){if(e.highlight>0){if(e.highlight>1){var t=e.highlight-1;this.createMessage("You gained ".concat(t," mana.")),this.game.player.addMana(t)}var n,a=Object(ee["a"])(this.availableCards.cards);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.highlight=0,i.scale=!1}}catch(r){a.e(r)}finally{a.f()}e.isParent?(this.pickStage.deck.removeCard(e),this.nextStage(new _t(this.game),{pickStage:this.pickStage,parentCard:e,allowDiceBuy:this._allowDiceBuy,allowManaBuy:this._allowManaBuy})):(this.pickStage.deck.removeCard(e),this.game.pickCard(e),this.resumeStage(this.pickStage))}}}]),n}(jt),Dt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"end"),a.activeComponent="HandView",a.endpoints.end=function(){a.end()},a}return Object(G["a"])(n,[{key:"onStart",value:function(){this.game.pickedCards.sortByFamily(),this.game.menu.saveHand(),this.createMessage(this.game.dialogue["endStage"]),this.createYourNewLifeButton()}},{key:"createYourNewLifeButton",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.buttons=[new mt("Your New Life",(function(){var n,a;if(e.epilogue=t||(null===(n=e.game.menu.endings)||void 0===n?void 0:n.chooseEpilogue(e.game.player.hand)),void 0==e.epilogue)return e.createMessage("ERROR! The epilogue could not be loaded. Available endings: ".concat(null===(a=e.game.menu.endings)||void 0===a?void 0:a.epilogues.length)),void e.end();e.dialogue=e.epilogue.dialogueTree,e.dialogue.start(e.game.player.hand,e),e.game.title=e.epilogue.title}))]}},{key:"end",value:function(){var e,t=this,n=this.epilogue.id,a=this.dialogue.currentSegment.id;a=a.substring(0,a.length-4),this.game.menu.unlockEnding(n,a),this.game.title=(null===(e=this.dialogue)||void 0===e?void 0:e.currentSegment.endpointLabel)||"",this.buttons=[new mt("Save Screenshot",(function(){Z.screenshot("cards","hand-".concat(t.game.pickedCards.size()))})),new mt("Back to Menu",(function(){t.game.end()}))]}}]),n}(jt),Bt=(n("a15b"),n("1276"),n("2ca0"),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(o["a"])(this,e),this.name=t,this.text=n}return Object(G["a"])(e,null,[{key:"parseLine",value:function(t){var n=new he.a({breaks:!0}),a="narrator",i=t.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"');return t.startsWith("demon: ")&&(a="demon",i=t.replace("demon: ","")),t.startsWith("player: ")&&(a="player",i=t.replace("player: ","")),new e(a,i.split("\n").map((function(e){return n.render(e)})).join("\n"))}},{key:"parseLines",value:function(t){var n=t.split(/\n\n/).filter((function(e){return e.length>0})).map((function(t){return e.parseLine(t)}));return n}}]),e}()),Rt=n("ade3"),Mt=(n("25eb"),n("466d"),n("498a"),function(){function e(t,n,a,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.intensitySum;Object(o["a"])(this,e),this.mode="or",this.args=[],this.operator=">",this.intensity=0,this.fun=e.intensitySum,this.mode=t,this.args=n,this.operator=a,this.intensity=i,this.fun=r}return Object(G["a"])(e,[{key:"score",value:function(e){return"all"==this.args[0]||"<"==this.operator||"<="==this.operator||"=="==this.operator?0:">="==this.operator?this.intensityScore(e):">"==this.operator?this.intensityScore(e)-1:(console.error('Requirement operator "'.concat(this.operator,'" was not recognized.')),0)}},{key:"isFulfilled",value:function(e){return"<"==this.operator?this.intensityScore(e)<this.intensity:"<="==this.operator?this.intensityScore(e)<=this.intensity:"=="==this.operator?this.intensityScore(e)==this.intensity:">="==this.operator?this.intensityScore(e)>=this.intensity:">"==this.operator?this.intensityScore(e)>this.intensity:(console.error('Requirement operator "'.concat(this.operator,'" was not recognized.')),!1)}},{key:"intensityScore",value:function(e){return this.fun(e,this.args)}},{key:"toString",value:function(){return"".concat(this.mode.toUpperCase()," [").concat(this.args,"] [").concat(this.operator,"] [").concat(this.intensity,"]")}}],[{key:"functions",value:function(t){var n={sum:e.intensitySum};return n[t]}},{key:"intensitySum",value:function(e,t){var n,a=0,i=Object(ee["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(me.referenceDeck().hasCard(r)){var c=e.getCardById(r);void 0==c?(c=e.pack().getCardById(r),void 0!=c&&(a+=c.subcards[c.subcards.length-1].intensity)):a+=Math.max(c.intensity,1)}else{if(!(me.referenceDeck().onlyTag(r).size()>0))throw new Error('Bad requirement "'.concat(this.toString(),'", "').concat(r,'" is neither an id, tag or family.'));var s,o=Object(ee["a"])(e.onlyTag(r).cards);try{for(o.s();!(s=o.n()).done;){var u=s.value;a+=Math.max(u.intensity,1)}}catch(l){o.e(l)}finally{o.f()}}}}catch(l){i.e(l)}finally{i.f()}return a}},{key:"orGroupFulfilled",value:function(e,t){var n,a=!0,i=Object(ee["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!r.isFulfilled(e)){a=!1;break}}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"parseRequirements",value:function(t){var n=[];t=t.toLowerCase().replace(/(\r\n|\n|\r)/gm," ");var a,i=t.split(/\bor\b/).map((function(e){return e.split(/\band\b/)})),r=Object(ee["a"])(i);try{for(r.s();!(a=r.n()).done;){var c,s=a.value,o="or",u=Object(ee["a"])(s.entries());try{for(u.s();!(c=u.n()).done;){var l=Object(le["a"])(c.value,2),d=l[0],h=l[1];d>0&&(o="and"),h=h.trim();var f=this.getOperator(h),b=this.getLeft(h,f),g=this.getRight(h,f),v=this.stripFun(b),p=Object(le["a"])(v,2),O=p[0],m=p[1];m=m.map((function(e){return e.replaceAll('"',"")})),n.push(new e(o,m,f,Number.parseInt(g),e.functions(O)))}}catch(j){u.e(j)}finally{u.f()}}}catch(j){r.e(j)}finally{r.f()}return this.groupRequirements(n)}},{key:"groupRequirements",value:function(e){var t,n=[],a=[],i=Object(ee["a"])(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;"or"==r.mode&&a.length>0&&(n.push(a),a=[]),a.push(r)}}catch(c){i.e(c)}finally{i.f()}return n.push(a),n}},{key:"stripFun",value:function(e){var t,n=e.match(/.*(?=\()/);t=null!=n?n[0]:"";var a=[e];if(""!=t){var i=e.match(/\(.*(?=\))/);null!=i?(a=this.splitArgs(i[0]),a[0]=a[0].replace("(","")):console.error("Bad expression: ".concat(e))}return[t,a]}},{key:"splitArgs",value:function(e){return e.split(",").map((function(e){return e.trim()}))}},{key:"getLeft",value:function(e,t){var n;return null===(n=e.split(t)[0])||void 0===n?void 0:n.trim()}},{key:"getRight",value:function(e,t){var n,a=null===(n=e.split(t)[1])||void 0===n?void 0:n.trim();return a||"0"}},{key:"getOperator",value:function(e){var t,n=e.match(/ > | >= | == | <= | < /);return t=null==n?">=":n[0].trim(),t}}]),e}()),Nt=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(o["a"])(this,e),this.currentNodeIndex=-1,this.requirements=[],this.optionIds=[],this.optionSegments=[],this.endpointId="",this.endpointLabel="Next",this.id=n,this.title=a,this.nodes=t,this.endpointId=i,void 0!=this.nodes&&0!=this.nodes.length||(this.nodes=[new Bt],this.start())}return Object(G["a"])(e,[{key:"currentMessage",value:function(){var e=this.nodes[this.currentNodeIndex];return e||new Bt}},{key:"start",value:function(){this.currentNodeIndex=0}},{key:"gotoNextNode",value:function(){this.currentNodeIndex<this.nodes.length-1&&(this.currentNodeIndex+=1)}},{key:"isStarted",value:function(){return this.currentNodeIndex>=0}},{key:"isOnLastNode",value:function(){return this.currentNodeIndex==this.nodes.length-1}},{key:"hasEndpoint",value:function(){return""!=this.endpointId}},{key:"getEndpoint",value:function(e){var t=e.endpoints[this.endpointId];if(void 0!=t)return t;throw Error('Could not select option "'.concat(this.id,'" because endpoint ').concat(this.endpointId," is undefined."))}},{key:"linkOptions",value:function(e){this.optionSegments=[];var t,n=Object(ee["a"])(this.optionIds);try{for(n.s();!(t=n.n()).done;){var a=t.value;void 0!=e[a]?this.optionSegments.push(e[a]):console.error('The "'.concat(this.id,'" node has an unknown option "').concat(a,'". It has been skipped.'))}}catch(i){n.e(i)}finally{n.f()}}},{key:"getFulfilledOptions",value:function(e){return this.options.filter((function(t){return t.isRequirementFulfilled(e)}))}},{key:"isRequirementFulfilled",value:function(e){if(0==this.requirements.length)return!0;var t,n=Object(ee["a"])(this.requirements);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(Mt.orGroupFulfilled(e,a))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"length",value:function(){return this.nodes.length}},{key:"options",get:function(){if(this.isOnLastNode()&&this.hasEndpoint()){var t=new e([],"".concat(this.id,".end"),"".concat(this.endpointLabel),this.endpointId);return t.endpointLabel=this.endpointLabel,[t]}return this.isOnLastNode()?this.optionSegments:[this]}}],[{key:"parseSegment",value:function(t){var n=t.id,a=t.title?t.title:"Next",i=t.text?Bt.parseLines(t.text):[],r=t.options?t.options:[],c=t.endpoint?t.endpoint:"",s=c.fun?c.fun:c,o=c.label?c.label:"Next",u=new e(i,n,a,s);return u.requirements=t.requirements?Mt.parseRequirements(t.requirements):[],u.optionIds=r,u.endpointLabel=o,u}}]),e}(),Et=function(){function e(t){Object(o["a"])(this,e),this.nodes={},this.nodes=t}return Object(G["a"])(e,[{key:"createOptionButtons",value:function(e,t,n){var a,i=this,r=[],c=Object(ee["a"])(e);try{var s=function(){var e,c=a.value,s=c.id!=(null===(e=i.activeNode)||void 0===e?void 0:e.id)?c.title:"Next";c.requirements.length>0&&!c.isStarted()&&(s="__".concat(s,"__")),r.push(new mt(s,(function(){i.select(c,t,n)})))};for(c.s();!(a=c.n()).done;)s()}catch(o){c.e(o)}finally{c.f()}return r}},{key:"start",value:function(e,t){void 0!=this.firstNode?this.select(this.firstNode,e,t):console.error("Could not start dialogue tree as there was no first node.")}},{key:"select",value:function(e,t,n){if(this.activeNode=e,e.isStarted())if(e.isOnLastNode()){if(e.isOnLastNode()&&e.hasEndpoint())return void e.getEndpoint(n)();console.error("Segment ".concat(e.id," was expected to have an endpoint but does not."))}else e.gotoNextNode();else e.start();n.buttons=this.createOptionButtons(e.getFulfilledOptions(t),t,n),n.sendMessage(this.currentMessage)}},{key:"currentSegment",get:function(){return this.activeNode||new Nt([new Bt],"","","")}},{key:"currentMessage",get:function(){return this.activeNode?this.activeNode.currentMessage():new Bt("","Error: Dialogue tree not initialized.")}},{key:"options",get:function(){return this.activeNode?this.activeNode.options:[]}}],[{key:"createLinear",value:function(t,n,a){var i=Z.uuid(),r=new Nt(t,i,"",n);r.endpointLabel=a;var c=new e(Object(Rt["a"])({},i,r));return c.firstNode=r,c}},{key:"parseDialogue",value:function(t){var n,a={},i=Object(ee["a"])(t.nodes);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=Nt.parseSegment(r);a[c.id]=c}}catch(d){i.e(d)}finally{i.f()}for(var s=0,o=Object.values(a);s<o.length;s++){var u=o[s];u.linkOptions(a)}var l=new e(a);return l.firstNode=a[t.nodes[0].id],l}}]),e}(),Pt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"transform"),a.endpoints.nextStage=function(){a.nextStage()},a.endpoints.nextTransformation=function(){void 0!=a.nextCard&&a.activateCard(a.nextCard)},a}return Object(G["a"])(n,[{key:"onStart",value:function(){this.game.abilities=[],this._nextStage=this.args.nextStage,this.prepareNextButton(),this.game.diceCount=0,this.game.drawnCards=new me([])}},{key:"onEnd",value:function(){this.game.pickedCards=new me}},{key:"prepareNextButton",value:function(){var e=this;this.game.pickedCards.size()>0?this.buttons=[new mt("Activate **".concat(this.nextCard.fullTitle,"**"),(function(){return e.activateCard(e.nextCard)}))]:this.buttons=[this.nextButton]}},{key:"activateCard",value:function(e){this.game.pickedCards.removeCard(e),this.game.drawnCards.addCard(e),this.game.player.hand.addCard(e),this.createNextLinearSegment(e)}},{key:"createNextLinearSegment",value:function(e){var t;if(t=""!=e.transformation?Bt.parseLines(e.transformation):Bt.parseLines("You don't feel any different."),void 0==this.nextCard){var n="Next Round";1==this.game.round.fraction&&(n=this.game.state.bonusRolls.value>0&&!this.game.state.isBonusRound?"To Bonus Round":"To Epilogue"),Et.createLinear(t,"nextStage",n).start(new me,this)}else Et.createLinear(t,"nextTransformation","Activate **".concat(this.nextCard.fullTitle,"**")).start(new me,this)}},{key:"nextCard",get:function(){return this.game.pickedCards.cards[0]}}]),n}(jt),Lt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"bonus"),a.pickedCards=new me([]),a.leftToPick=0,a.deck=new me([]),a}return Object(G["a"])(n,[{key:"onStart",value:function(){var e=this;this.createMessage(this.game.dialogue["bonusStage"]),this.deck=this.game.deck.withoutFamily("reward").draw(Ft.CARDS_IN_BONUS_ROUND),this.game.state.drawnCards=this.deck,this.game.round.addValue(1),this.game.state.cardsPickedThisRound=0,this.leftToPick=this.game.state.bonusRolls.value,this.game.state.cardsToPick=this.leftToPick,this.game.diceCount=2,this.game.diceSize=this.deck.size(),this.game.state.isBonusRound=!0,this._allowDiceBuy=!0,this.game.abilities=[xt.buyDice(),xt.sellDice(),xt.pickAnyCard((function(t){return e.onDiceRoll(t)}),this.game.drawnCards.size())],0==this.leftToPick&&(this.onResume(),this.nextStage(new Dt(this.game)))}},{key:"onResume",value:function(){var e=this;this.game.state.drawnCards=this.deck,this.game.diceCount=2,this.game.diceSize=this.deck.size(),this.game.abilities=this.game.abilities=[xt.buyDice(),xt.sellDice(),xt.pickAnyCard((function(t){return e.onDiceRoll(t)}),this.game.drawnCards.size())],this._allowDiceBuy=!0,0==this.leftToPick&&(this.game.diceCount=0,this.createMessage("demon: Great, you've completed the bonus round."),this._nextStage=new Dt(this.game),this.nextStage(new Pt(this.game),{nextStage:this._nextStage}),this.game.lockDice(!0))}},{key:"onDiceRoll",value:function(e){this.leftToPick>0&&(this.leftToPick-=1,this.pickedCards=this.deck.pick(e),this.game.lockDice(!0),this.nextStage(new Tt(this.game),{pickStage:this,availableCards:this.deck,highlights:e,allowManaBuy:!1}))}}]),n}(jt),At=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"pick"),a.leftToPick=0,a.diceCount=1,a.deck=new me([]),a.pickAnyCost=xt.PICK_ANY_CARD_COST,a}return Object(G["a"])(n,[{key:"onStart",value:function(){var e=this;this.leftToPick=this.args.cardsToPick,this._nextStage=this.args.drawStage,this.createMessage(this.game.dialogue["pickStage"]),this.deck=this.game.drawnCards,this.diceCount=2,this.game.diceCount=this.diceCount,this.game.diceSize=this.deck.size(),this.buttons=[],this._allowDiceBuy=!0,this.game.abilities=[xt.buyMana(),xt.sellDice(),xt.buyDice(),xt.pickAnyCard((function(t){return e.pickCard(t)}),this.deck.size(),this.pickAnyCost),xt.addRound()]}},{key:"onResume",value:function(){var e=this;this.game.drawnCards=this.deck,this.diceCount=Math.max(2,this.diceCount-1),this.game.diceCount=this.diceCount,this.game.diceSize=this.deck.size(),this._allowDiceBuy=!0,this.game.abilities=[xt.buyMana(),xt.sellDice(),xt.buyDice(),xt.pickAnyCard((function(t){return e.pickCard(t)}),this.deck.size(),this.pickAnyCost),xt.addRound()],0==this.leftToPick&&(this.createMessage("demon: Good job! You completed round ".concat(this.game.round.value,".\n")+"Time to see what those cards will do to you!"),this.game.lockDice(!0),this.game.deck.addDeck(this.game.drawnCards,!0),1==this.game.round.fraction&&(this.game.state.bonusRolls.value>0&&!this.game.state.isBonusRound?this._nextStage=new Lt(this.game):this._nextStage=new Dt(this.game)),this.nextStage(new Pt(this.game),{nextStage:this._nextStage}))}},{key:"onDiceRoll",value:function(e){this.pickCard(e)}},{key:"pickCard",value:function(e){if(this.leftToPick>0){this.leftToPick-=1;this.deck.pick(e);this.game.lockDice(!0),this.nextStage(new Tt(this.game),{pickStage:this,availableCards:this.deck,highlights:e})}}}]),n}(jt),qt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"draw"),a.allowNext=!0,a.availableExtraDraws=1,a.diceCount=n.DICE_COUNT,a.diceSize=n.DICE_SIZE,a.diceHasBeenRolled=!1,a.abilities=[xt.buyMana(),new xt("Pick less",{value:2,resource:"mana"},(function(e){a.addDraws(-1),a.availableExtraDraws-=1}),(function(e){return a.game.state.cardsToPick>1&&a.game.state.bonusRolls.value<a.game.state.bonusRolls.max&&a.availableExtraDraws>0&&a.diceHasBeenRolled})),new xt("Pick more",{value:2,resource:"mana"},(function(e){a.addDraws(1),a.availableExtraDraws-=1}),(function(e){return a.game.state.cardsToPick<6&&a.game.state.bonusRolls.value<a.game.state.bonusRolls.max&&a.availableExtraDraws>0&&a.diceHasBeenRolled})),xt.addRound()],a}return Object(G["a"])(n,[{key:"onStart",value:function(){this.createMessage(this.game.dialogue["drawStage"]),this.game.state.drawnCards=this.game.drawCards(0),this.game.diceCount=this.diceCount,this.game.diceSize=this.diceSize,this.allowNext=!1,this.availableExtraDraws=1,this.buttons=[],this.game.round.addValue(1),this.game.state.cardsPickedThisRound=0,this.game.state.cardsToPick=0,this._allowDiceBuy=!1,this.game.abilities=[],this.diceHasBeenRolled=!1}},{key:"onResume",value:function(){this.createMessage(this.game.dialogue["drawStagePostBan"]),this.game.diceCount=this.diceCount,this.game.diceSize=this.diceSize,this.allowNext=!1,this.availableExtraDraws=1,this.buttons=[],this.game.state.cardsPickedThisRound=0,this.game.state.cardsToPick=0,this._allowDiceBuy=!1,this.game.abilities=[],this.diceHasBeenRolled=!1}},{key:"onDiceRoll",value:function(e){if(!this.allowNext){this.game.state.drawnCards=this.game.drawCards(Ft.CARDS_PER_ROUND),this.game.abilities=this.abilities;var t=e.reduce((function(e,t){return e+t}));this.game.state.cardsToPick=t,this.createMessage("demon: You will have to pick ".concat(this.game.state.cardsToPick," cards this round.\nAlthough, if you want to pick more or less cards, you may spend some mana to do that, but you have to do it now.")),this.allowNext=!0,this.diceHasBeenRolled=!0,this.game.lockDice(!0),this.updateButtons()}}},{key:"nextStage",value:function(){this.allowNext&&Object(Ct["a"])(Object(St["a"])(n.prototype),"nextStage",this).call(this,new At(this.game),{cardsToPick:this.game.state.cardsToPick,drawStage:this})}},{key:"addDraws",value:function(e){this.game.state.cardsToPick=Z.clamp(this.game.state.cardsToPick+e,1,6),e>=0?this.createMessage("demon: An extra pick? Guess you're seeing something good, huh? You'll pick ".concat(this.game.state.cardsToPick," cards this round.")):this.createMessage("demon: Alright, you only have to pick ".concat(this.game.state.cardsToPick," cards this round. But you do get an extra roll in the bonus round."))}},{key:"updateButtons",value:function(){var e=[];e.push(this.nextButton),this.buttons=e}}]),n}(jt);qt.DICE_COUNT=2,qt.DICE_SIZE=3;var zt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"dialogue"),a.activeComponent="DialogueScreen",a}return Object(G["a"])(n,[{key:"onStart",value:function(){}}]),n}(jt),It=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;Object(o["a"])(this,n),a=t.call(this,e),a.stage1=new zt(a.game);var i=new qt(a.game);return a.stage1.endpoints.drawStage=function(){return a.stage1.nextStage(i)},a.stage1.endpoints.leave=function(){return a.game.menu.endGame()},Et.parseDialogue(a.game.dialogue2).start(new me,a.stage1),a}return Object(G["a"])(n,[{key:"firstStage",get:function(){return this.stage1}}]),n}(wt),Ft=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;Object(o["a"])(this,e),this.state=Object(a["v"])({deck:new me,dice:[],drawnCards:new me([]),pickedCards:new me([]),stage:new yt(this),round:new ne(0,0,3),isBonusRound:!1,cardsToPick:0,cardsPickedThisRound:0,rewardRolls:new ne(0,0,0),bonusRolls:new ne(0,0,0),player:new kt,lines:[],title:""}),this.currentRolls=[],this.menu=t,this.dialogue=JSON.parse(ve().dialogueString.value),this.dialogue2=JSON.parse(ve().dialogue2String.value),this.state.deck=(new me).createNew().pack(),this.state.dice=[],this.state.drawnCards=new me([]),this.state.pickedCards=new me([]),this.state.round=new ne(0,0,3),this.state.isBonusRound=!1,this.state.cardsToPick=0,this.state.cardsPickedThisRound=0,this.state.rewardRolls=new ne(0,0,6),this.state.bonusRolls=new ne(0,0,e.MAX_BONUS_ROLLS),this.state.lines=[],this.gameMode=void 0!=i?i:new It(this),this.state.stage=this.gameMode.firstStage,this.state.deck.shuffle(),this.lockDice(!0),this.gameMode.start(),console.log("Deck size:",this.state.deck.size(),this.state.deck.allLevels.length),window.gredraw=function(e){if("draw"!=n.state.stage.id&&"pick"!=n.state.stage.id&&"bonus"!=n.state.stage.id)return"Can not redraw cards in this stage.";var t=n.drawCards(e);return n.state.drawnCards=t,"pick"==n.state.stage.id&&(n.state.stage.deck=t),"Drew ".concat(e," cards, ").concat(n.deck.size()," cards remain in the current deck.")},window.groll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n.state.stage.onDiceRoll(Array(t).fill(e))},window.gameComponent=function(){return n.activeComponent}}return Object(G["a"])(e,[{key:"end",value:function(){this.menu.endGame()}},{key:"drawCards",value:function(e){return this.state.deck.draw(e)}},{key:"pickCard",value:function(e){this.state.pickedCards.addCard(e),this.state.cardsPickedThisRound+=1}},{key:"nextStage",value:function(){this.state.stage.nextStage()}},{key:"setStage",value:function(e){this.state.stage=e}},{key:"notifyDiceRoll",value:function(e){if(this.currentRolls.push(e),this.allDiceReady){this.state.stage.onDiceRoll(this.diceValues),this.currentRolls=[];var t,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.useValue()}}catch(i){n.e(i)}finally{n.f()}}}},{key:"lockDice",value:function(e){var t,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.locked=e}}catch(i){n.e(i)}finally{n.f()}}},{key:"diceAreLocked",value:function(){var e,t=0,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.locked&&(t+=1)}}catch(i){n.e(i)}finally{n.f()}return t==this.state.dice.length}},{key:"sellDice",value:function(){this.allowDiceSale()&&(this.bonusRolls.addValue(-1),this.state.dice.pop())}},{key:"allowDiceSale",value:function(){return this.state.stage.allowDiceBuy()&&this.diceReadyCount+this.diceRollingCount==0&&!this.diceAreLocked()&&this.state.dice.length>1}},{key:"allowManaBuy",value:function(){return this.state.stage.allowManaBuy()}},{key:"allowDiceBuy",value:function(){return this.state.stage.allowDiceBuy()&&this.diceReadyCount+this.diceRollingCount==0&&!this.diceAreLocked()&&this.state.dice.length<e.MAX_DICE}},{key:"clickCard",value:function(e){this.state.stage.onCardClick(e)}},{key:"sendMessage",value:function(e){this.state.lines.push(e)}},{key:"print",value:function(e){var t,n=Object(ee["a"])(Bt.parseLines(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;this.state.lines.push(a)}}catch(i){n.e(i)}finally{n.f()}}},{key:"buttons",get:function(){return this.state.stage.buttons}},{key:"diceValues",get:function(){var e,t=[],n=Object(ee["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.value)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"allDiceReady",get:function(){return this.diceReadyCount==this.state.dice.length}},{key:"diceReadyCount",get:function(){var e,t=0,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.isUsed||(t+=1)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"diceRollingCount",get:function(){var e,t=0,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.rolling&&(t+=1)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"activeComponent",get:function(){return this.state.stage.activeComponent}},{key:"diceCount",set:function(e){for(var t=[],n=0;n<e;n++)0==this.state.dice.length?t.push(new Ot(6,this)):t.push(new Ot(this.state.dice[0].max,this));this.state.dice=t},get:function(){return this.state.dice.length}},{key:"diceSize",set:function(e){for(var t=0;t<this.state.dice.length;t++)this.state.dice[t]=new Ot(e,this)},get:function(){return this.diceCount>0?this.state.dice[0].max:0}},{key:"player",get:function(){return this.state.player}},{key:"abilities",get:function(){return this.player.abilities},set:function(e){this.player.abilities=e}},{key:"currentDialogue",get:function(){return this.state.lines}},{key:"deck",get:function(){return this.state.deck}},{key:"drawnCards",get:function(){return this.state.drawnCards},set:function(e){this.state.drawnCards=e}},{key:"pickedCards",get:function(){return this.state.pickedCards},set:function(e){this.state.pickedCards=e}},{key:"round",get:function(){return this.state.round}},{key:"roundString",get:function(){return this.state.isBonusRound?"Bonus Round":"Round ".concat(this.round.value," of ").concat(this.round.max)}},{key:"pickedString",get:function(){return 0==this.state.cardsToPick?"Draw cards":"Picked ".concat(this.state.cardsPickedThisRound," of ").concat(this.state.cardsToPick," cards")}},{key:"stageId",get:function(){return this.state.stage.id}},{key:"rewardRolls",get:function(){return this.state.rewardRolls}},{key:"bonusRolls",get:function(){return this.state.bonusRolls}},{key:"cardsPickedThisRound",get:function(){return this.state.cardsPickedThisRound}},{key:"showDialogueOnly",get:function(){return 0==this.round.value}},{key:"title",get:function(){return this.state.title},set:function(e){this.state.title=e}}]),e}();Ft.MAX_DICE=5,Ft.MAX_ROUNDS=5,Ft.CARDS_PER_ROUND=9,Ft.CARDS_IN_BONUS_ROUND=12,Ft.MAX_BONUS_ROLLS=6;var Vt=function(){function e(t,n,a){Object(o["a"])(this,e),this.name=t,this.description=n,this.fun=a}return Object(G["a"])(e,[{key:"activate",value:function(e){var t=this;window[this.name]=function(n){return t.fun(e,n)}}}]),e}(),Ht=(n("843c"),n("caad"),n("2532"),function(){function e(t,n,a,i,r){Object(o["a"])(this,e),this.id="",this.title="",this.likelihood=0,this.requirements=[],this.nodes=[],this.id=t,this.title=n,this.likelihood=a,this.requirements=i,this.nodes=r}return Object(G["a"])(e,[{key:"isFulfilled",value:function(e){try{var t,n=Object(ee["a"])(this.requirements);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Mt.orGroupFulfilled(e,a);if(i)return!0}}catch(r){n.e(r)}finally{n.f()}}catch(c){console.error('Could calculate fulfilment for ending "'.concat(this.id,'".\n').concat(c.message))}return!1}},{key:"score",value:function(e){var t=[];try{var n,a=Object(ee["a"])(this.requirements);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=0;if(Mt.orGroupFulfilled(e,i)){var c,s=Object(ee["a"])(i);try{for(s.s();!(c=s.n()).done;){var o=c.value;r+=o.score(e)}}catch(u){s.e(u)}finally{s.f()}}t.push(r)}}catch(u){a.e(u)}finally{a.f()}}catch(l){console.error('Could not calculate score for ending "'.concat(this.id,'".\n').concat(l.message))}return Math.max.apply(Math,t)*this.likelihood}},{key:"getNodes",value:function(){return this.nodes}},{key:"getAllEndings",value:function(){var e,t=this,n=[],a=Object(ee["a"])(this.nodes);try{for(a.s();!(e=a.n()).done;){var i=e.value;"endpoint"in i&&n.push(i.id)}}catch(r){a.e(r)}finally{a.f()}return n.sort((function(e,n){return t.getEndpointLabel(e).localeCompare(t.getEndpointLabel(n))}))}},{key:"findNodeParents",value:function(e){var t,n=[],a=Object(ee["a"])(this.nodes);try{for(a.s();!(t=a.n()).done;){var i=t.value;"options"in i&&i.options.includes(e)&&n.push(i.id)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"getNodeChain",value:function(e){var t=[e];while(1){var n=this.findNodeParents(t[t.length-1]);if(0==n.length)break;t.push(n[0])}return t.reverse()}},{key:"getEnding",value:function(e){var t,n=this,a=this.getNodeChain(e),i=[],r=Object(ee["a"])(a);try{var c=function(){var e=t.value,a=n.nodes.find((function(t){return t.id==e}));i.push.apply(i,Object(pt["a"])(Bt.parseLines(a.text)))};for(r.s();!(t=r.n()).done;)c()}catch(s){r.e(s)}finally{r.f()}return i}},{key:"getEndpointLabel",value:function(e){return this.nodes.find((function(t){return t.id==e})).endpoint.label}},{key:"dialogueTree",get:function(){return Et.parseDialogue({id:this.id,nodes:this.nodes})}}],[{key:"create",value:function(t){var n=t.id,a=t.title,i=t.likelihood?t.likelihood:0,r=Mt.parseRequirements(t.requirements),c=t.nodes?t.nodes:[];return new e(n,a,i,r,c)}}]),e}()),Ut=function(){function e(){Object(o["a"])(this,e),this.epilogues=[];var t,n=Object(ee["a"])(JSON.parse(ve().endingsString.value));try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Ht.create(a);this.epilogues.push(i)}}catch(r){n.e(r)}finally{n.f()}}return Object(G["a"])(e,[{key:"chooseEpilogue",value:function(e){var t,n=[],a=Object(ee["a"])(this.epilogues);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.isFulfilled(e)&&n.push(i)}}catch(r){a.e(r)}finally{a.f()}return n.sort((function(t,n){return n.score(e)-t.score(e)})),n[0]}},{key:"selectEnding",value:function(e){var t,n=Object(ee["a"])(this.epilogues);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.id==e)return a}}catch(i){n.e(i)}finally{n.f()}return console.warn('Could not select ending with id "'.concat(e,'".')),this.epilogues[0]}},{key:"correctnessSimulation",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n={},a=Object(ee["a"])(this.epilogues);try{for(a.s();!(e=a.n()).done;){var i=e.value;n[i.id]={fulfilled:0,chosen:0,score:0}}}catch(k){a.e(k)}finally{a.f()}for(var r=0;r<t;r++){var c,s=me.referenceDeck().shuffle(),o=s.draw(Math.round(6+20*Math.random())),u=new me,l=Object(ee["a"])(o.cards);try{for(l.s();!(c=l.n()).done;){var d=c.value;d.isParent?u.addCard(Z.pickFrom(d.subcards,Math.random())):u.addCard(d)}}catch(k){l.e(k)}finally{l.f()}t<=5&&console.log(u.toString());var h,f=Object(ee["a"])(this.epilogues);try{for(f.s();!(h=f.n()).done;){var b=h.value;b.isFulfilled(u)&&(n[b.id].fulfilled+=1,n[b.id].score+=b.score(u))}}catch(k){f.e(k)}finally{f.f()}n[this.chooseEpilogue(u).id].chosen+=1}console.log("After simulating ".concat(t," random hands, endings had the following stats:"));var g,v=Object(pt["a"])(this.epilogues).sort((function(e,t){return n[t.id].chosen-n[e.id].chosen})),p=Object(ee["a"])(v);try{for(p.s();!(g=p.n()).done;){var O=g.value,m=n[O.id].fulfilled,j=n[O.id].chosen,y=n[O.id].score/Math.max(m,1);console.log("".concat(O.title.padEnd(12)," | Fulfilled ").concat(m.toString().padStart(4),", chosen ").concat(j.toString().padStart(4),", avg score ").concat(y.toFixed(1).padStart(4)))}}catch(k){p.e(k)}finally{p.f()}}},{key:"testBimboEnding",value:function(){var e=this.epilogues.filter((function(e){return"bimbo"==e.id}))[0],t=new me;t.addCard(me.referenceDeck().getCardById("intelligence.intelligence 3")),t.addCard(me.referenceDeck().getCardById("breast-size.breast size 3")),this.assert(e.isFulfilled(t))}},{key:"assert",value:function(e){e||console.error("Assertion failed")}}]),e}(),Gt=function(){function e(t){Object(o["a"])(this,e),this.currentEnding="",this.menu=t,this.epilogues=t.endings?t.endings:new Ut}return Object(G["a"])(e,[{key:"epiloguesList",value:function(){return this.epilogues.epilogues.sort((function(e,t){return e.title.localeCompare(t.title)}))}},{key:"select",value:function(e,t){this.currentEpilogue=this.epilogues.selectEnding(e),this.currentEnding=t}},{key:"currentEndingMessages",value:function(){return void 0==this.currentEpilogue?[]:this.currentEpilogue.getEnding(this.currentEnding)}},{key:"currentEndingLabel",value:function(){return void 0==this.currentEpilogue?"":this.currentEpilogue.getEndpointLabel(this.currentEnding)}},{key:"parseMessages",value:function(e){return void 0==e?[]:Bt.parseLines(e)}},{key:"unselect",value:function(){this.currentEpilogue=void 0}},{key:"unlockedEpilogues",value:function(){var e=this;return this.epiloguesList().filter((function(t){return e.menu.isEpilogueUnlocked(t.id)}))}},{key:"unlockedEndings",value:function(e){var t=this;return e.getAllEndings().filter((function(n){return t.menu.isEndingUnlocked(e.id,n)}))}},{key:"nrOfAllUnlockedEndings",value:function(){var e,t=0,n=Object(ee["a"])(this.epiloguesList());try{for(n.s();!(e=n.n()).done;){var a=e.value;t+=this.unlockedEndings(a).length}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"nrOfAllEndings",value:function(){var e,t=0,n=Object(ee["a"])(this.epiloguesList());try{for(n.s();!(e=n.n()).done;){var a=e.value;t+=a.getAllEndings().length}}catch(i){n.e(i)}finally{n.f()}return t}}]),e}(),Wt=function(){function e(t){var n=this;Object(o["a"])(this,e),this.cheats=[new Vt("roll","(value): Rolls all dice to this value.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";n.state.stage.onDiceRoll([t])})),new Vt("pickCard","(name): Picks an unseen card from the current deck and adds it to your hand.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";var a=n.deck.allLevels.find((function(e){return e.name.toLowerCase()==t.toLowerCase()}));return void 0!=a?(n.state.pickedCards.addCard(a),"Added ".concat(a.name," to hand.")):"Could not find the ".concat(t," card in the current deck.")})),new Vt("addMana","(value): Adds this much mana.",(function(e,t){var n=e.game;return void 0==n?"That command cannot be used from this screen.":(n.player.addMana(t),"Added ".concat(t," mana."))})),new Vt("drawCard","(name): Picks an unseen card from the current deck and adds it to the list of cards drawn from the deck.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";var a=n.deck.allLevels.find((function(e){return e.name.toLowerCase()==t.toLowerCase()}));return void 0!=a?(n.state.drawnCards.addCard(a),"Added ".concat(a.name," to hand.")):"Could not find the ".concat(t," card in the current deck.")})),new Vt("redraw","(value): Discard currently drawn cards and replace them with this many.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";if("draw"!=n.state.stage.id&&"pick"!=n.state.stage.id&&"bonus"!=n.state.stage.id)return"Can not redraw cards in this stage.";var a=n.drawCards(t);return n.state.drawnCards=a,"pick"==n.state.stage.id&&(n.state.stage.deck=a),"Drew ".concat(t," cards, ").concat(n.deck.size()," cards remain in the current deck.")})),new Vt("deck","(): Shows info about the current deck.",(function(e,t){var n=e.game;return void 0==n?"That command cannot be used from this screen.":"Deck size: ".concat(n.state.deck.size(),", ").concat(n.state.deck.allLevels.length)})),new Vt("unlockAllCards","(): Permanently unlocks all cards in your collection.",(function(e){return e.collection.addDeck(me.referenceDeck()),e.save(),"Done"})),new Vt("unlockAllEndings","(): Permanently unlocks all endings in your collection.",(function(e){var t,n=new Gt(e),a=Object(ee["a"])(n.epiloguesList());try{for(a.s();!(t=a.n()).done;){var i,r=t.value,c=Object(ee["a"])(r.getAllEndings());try{for(c.s();!(i=c.n()).done;){var s=i.value;e.unlockEnding(r.id,s)}}catch(o){c.e(o)}finally{c.f()}}}catch(o){a.e(o)}finally{a.f()}return e.save(),"Done"})),new Vt("clearSave","(): Clears your save. Warning! your card collection will be lost.",(function(e){return e.deleteCollection(),"Save cleared"})),new Vt("diagnostics","(iterations): Runs debug diagnostics.",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return console.log("Running diagnostics..."),e.endings.correctnessSimulation(t),"Diagnostics completed."})),new Vt("toEnd","(id): Goes to the end with the specified ID.",(function(e,t){e.startGame();var n=new Dt(e.game);e.game.state.stage=n,n.onStart();var a=new Ut,i=a.selectEnding(t);return i.dialogueTree.start(me.referenceDeck().unpack(),n),n.createYourNewLifeButton(i),"End reached."})),new Vt("editor","(): Opens the editor.",(function(e){return e.showEndingsCollection(),"Editor opened."}))],this.activated=!1,this._menu=t,window.cheatmode=function(e){return n.activateCheats(e)}}return Object(G["a"])(e,[{key:"activateCheats",value:function(e){if("rose"!=e)return"Wrong password. Find out the current password by becoming a Patreon supporter!";this.activated=!0,this.registerCheats();var t,n="Cheatmode activated. Available commands: \n\n",a=Object(ee["a"])(this.cheats);try{for(a.s();!(t=a.n()).done;){var i=t.value;n+="".concat(i.name).concat(i.description,"\n")}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"registerCheats",value:function(){if(!this.activated)return!1;var e,t=Object(ee["a"])(this.cheats);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.activate(this._menu)}}catch(a){t.e(a)}finally{t.f()}}},{key:"menu",set:function(e){this._menu=e,this.registerCheats()}}]),e}(),$t=function(){function e(t,n,a){Object(o["a"])(this,e),this.name=t,this.version=n,this._state=JSON.stringify(a)}return Object(G["a"])(e,[{key:"state",get:function(){return JSON.parse(this._state)}}]),e}();Object(d["a"])([Q["g"]],$t.prototype,"name",void 0),Object(d["a"])([Q["g"]],$t.prototype,"version",void 0),Object(d["a"])([Q["g"]],$t.prototype,"_state",void 0);var Jt=function(){function e(){Object(o["a"])(this,e),this.saves=this.loadAllFromStorage()}return Object(G["a"])(e,[{key:"save",value:function(e,t,n){var a=new $t(e,t,n);this.writeToLocalStorage(a)}},{key:"load",value:function(e){if(e in this.saves)return this.readFromLocalStorage(e)}},{key:"deleteFromLocalStorage",value:function(e){delete this.saves[e],localStorage.setItem("blushingdefeat-saves",JSON.stringify(this.saves))}},{key:"writeToLocalStorage",value:function(e){this.saves[e.name]=e,localStorage.setItem("blushingdefeat-saves",JSON.stringify(this.saves))}},{key:"readFromLocalStorage",value:function(e){return Object(Q["a"])($t,this.saves[e])}},{key:"loadAllFromStorage",value:function(){var e=localStorage.getItem("blushingdefeat-saves"),t={};return null!=e&&(t=JSON.parse(e)),t}}]),e}(),Xt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(o["a"])(this,e),this._strictness=0,this.tag=t,this.name=n,this.description=a}return Object(G["a"])(e,[{key:"load",value:function(e){void 0!=e&&(this._strictness=e._strictness)}},{key:"strictness",get:function(){return this._strictness},set:function(e){this._strictness=e}}]),e}();Object(d["a"])([Q["g"]],Xt.prototype,"name",void 0),Object(d["a"])([Q["g"]],Xt.prototype,"description",void 0),Object(d["a"])([Q["g"]],Xt.prototype,"tag",void 0),Object(d["a"])([Q["g"]],Xt.prototype,"_strictness",void 0);var Yt=function(){function e(){Object(o["a"])(this,e),this.filters=[new Xt("expansion","Expansion","Changes in size to body parts."),new Xt("iq","Intelligence","Changes that primarily affect intelligence."),new Xt("doll","Doll","Changes towards a plastic, fake or doll-like appearance and behavior."),new Xt("pet","Pet","Changes that enforces pet-like behavior, like having to stand on all fours, wear a leash etc."),new Xt("animal","Mythological","Changes that give horns, ears, a tail etc. Note that you always remain primarily human."),new Xt("lactation","Lactation","Changes that cause lactation."),new Xt("reward","Reward","Don't care for rewards? Turn them off here.")],this.filters.sort((function(e,t){return e.name<t.name?-1:1}))}return Object(G["a"])(e,[{key:"load",value:function(e){var t=this;if(void 0!=e){var n,a=Object(ee["a"])(e.filters);try{var i=function(){var e=n.value,a=t.filters.find((function(t){return t.tag==e.tag}));if(void 0==a)return"continue";a.load(e)};for(a.s();!(n=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}}}}]),e}();Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["e"])(Xt)))],Yt.prototype,"filters",void 0);var Kt=function(){function e(){var t=this;Object(o["a"])(this,e),this.state=Object(a["v"])({game:void 0,activeComponent:"StartMenu"}),this.saveSystem=new Jt,this.collection=Object(a["v"])(new me([])),this.settings=Object(a["v"])(new Yt),this.unlockedEndings={},ve().load().then((function(){var e=t.saveSystem.load("save-1");void 0!=e&&(t.collection=Object(a["v"])(me.createFromCardStates(e.state.collection)),t.collection.sortByFamily(),t.unlockedEndings=e.state.unlockedEndings||{},t.collection.size()!=e.state.collection.length&&(console.warn("Not all saved cards were loaded. Expected size ".concat(e.state.collection.length,", actual size ").concat(t.collection.size(),".")),console.warn(e.state.collection)),t.settings.load(e.state.settings)),me.filters=t.settings.filters,t.endings=new Ut,(void 0==t.endings||t.endings.epilogues.length<1)&&alert("ERROR! No endings could be loaded. Refresh this page to try again.\n\nIf this message keeps appearing, make sure you are connected to the internet, and try a different browser. If that doesn't work, contact Gardamuse, or comment that you received this error multiple times,including what browser and device you are using.")})),this.cheatmode=new Wt(this)}return Object(G["a"])(e,[{key:"startGame",value:function(){this.state.game=new Ft(this),this.activeComponent=this.game.activeComponent}},{key:"endGame",value:function(){this.saveHand(),this.state.game=void 0,this.activeComponent="StartMenu"}},{key:"saveHand",value:function(){this.collection.addDeck(this.state.game.player.hand),this.save()}},{key:"save",value:function(){this.collection.sortByFamily(),this.saveSystem.save("save-1",this.version,{collection:Object(a["D"])(this.collection).cards,settings:Object(a["D"])(this.settings),unlockedEndings:Object(a["D"])(this.unlockedEndings)})}},{key:"isEpilogueUnlocked",value:function(e){return e in this.unlockedEndings}},{key:"isEndingUnlocked",value:function(e,t){if(this.isEpilogueUnlocked(e)){var n=this.unlockedEndings[e];if(t in n)return!0}return!1}},{key:"unlockEnding",value:function(e,t){this.isEpilogueUnlocked(e)||(this.unlockedEndings[e]={}),this.unlockedEndings[e][t]=!0,this.save()}},{key:"showCollection",value:function(){this.activeComponent="CollectionScreen"}},{key:"deleteCollection",value:function(){this.collection.removeAllCards(),this.unlockedEndings={},this.save()}},{key:"showSettings",value:function(){this.activeComponent="SettingsScreen"}},{key:"showEndingsCollection",value:function(){this.activeComponent="EndingsCollectionWindow.vue"}},{key:"cardsFilteredString",value:function(){return"".concat((new me).createNew().size()," / ").concat(me.referenceDeck().size()," cards (and ").concat((new me).createNew().unpack().size()," / ").concat(me.referenceDeck().unpack().size()," levels)")}},{key:"isFilteringTooMuch",value:function(){return console.log(Ft.MAX_ROUNDS*qt.DICE_SIZE*qt.DICE_COUNT+Ft.MAX_BONUS_ROLLS),(new me).createNew().size()<Ft.MAX_ROUNDS*qt.DICE_SIZE*qt.DICE_COUNT+Ft.MAX_BONUS_ROLLS}},{key:"artCredits",value:function(){var e,t=JSON.parse(ve().artistsString.value),n=Object(ee["a"])(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.cards=[]}}catch(d){n.e(d)}finally{n.f()}var i,r=me.referenceDeck(),c=Object(ee["a"])(r.allLevels);try{var s=function(){var e=i.value,n=t.find((function(t){return t.artist==e.artist}));if(void 0==n)return"continue";e.isParent?n.cards.push("".concat(e.name)):e.hasParent?n.cards.push("".concat(e.parent.name)):n.cards.push("".concat(e.name))};for(c.s();!(i=c.n()).done;)s()}catch(d){c.e(d)}finally{c.f()}var o,u=Object(ee["a"])(t);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.cards=Object(pt["a"])(new Set(l.cards)),l.cards.sort()}}catch(d){u.e(d)}finally{u.f()}return t}},{key:"patreonCredits",value:function(){var e=ve().patreonCredits.value;return e}},{key:"game",get:function(){return this.state.game}},{key:"activeComponent",get:function(){return void 0!=this.game?this.game.activeComponent:this.state.activeComponent},set:function(e){this.state.activeComponent=e}},{key:"patchNotes",get:function(){return JSON.parse(ve().patchNotesString.value)}},{key:"version",get:function(){return e.GAME_VERSION}}]),e}();Kt.GAME_VERSION="1.4.2";var Zt=Object(a["H"])("data-v-4d42b94a");Object(a["u"])("data-v-4d42b94a");var Qt={key:0,class:"menu-view"},en={class:"window text-window"},tn={class:"title-row"},nn=Object(a["g"])("p",null,null,-1),an=Object(a["g"])("h1",null,"Ditzy Dice",-1),rn=Object(a["g"])("div",{class:"window start-menu-text"},[Object(a["g"])("p",null,"Greetings!"),Object(a["g"])("p",null,[Object(a["f"])("This is an "),Object(a["g"])("b",null,"erotic transformation"),Object(a["f"])(" game. That means "),Object(a["g"])("b",null,"sexual content"),Object(a["f"])(", focusing on bodily and mental transformations related to bimbofication. If you are not comfortable with, or legally allowed to view such content, turn around now. ")]),Object(a["g"])("p",null,"Otherwise, if you have feedback or questions, let me know in the comments!")],-1),cn={class:"start-menu-buttons"},sn=Object(a["g"])("h2",null,"Start",-1),on=Object(a["g"])("h3",null,"My Collection",-1),un=Object(a["g"])("h3",null,"Settings",-1),ln=Object(a["g"])("h3",null,"Patch Notes",-1),dn=Object(a["g"])("h3",null,"Credits",-1),hn=Object(a["g"])("h3",null,"Exit to Blushing Defeat",-1),fn={class:"window extras"},bn=Object(a["f"])(" Thank you for your support on "),gn=Object(a["g"])("span",{style:{color:"#f96854"}},"Patreon",-1),vn=Object(a["f"])("! "),pn=Object(a["g"])("h3",null,"An extra thank you to",-1),On={class:"extra-thanks"},mn={class:"credit"},jn={class:"window more"},yn=Object(a["g"])("h2",null,"More on Blushing Defeat",-1),kn=Object(a["f"])(" Cowgirl Dairy Farm "),wn=Object(a["f"])(" Bimbo Personality Quiz "),Cn=Object(a["f"])(" Bimbofication Booth "),Sn=Object(a["f"])(" Mispell ");Object(a["r"])();var xn=Zt((function(e,t,i,r,c,s){var o=Object(a["z"])("TextButton"),u=Object(a["z"])("PatreonButton2"),l=Object(a["z"])("RelatedThumb");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",Qt,[Object(a["g"])("div",en,[Object(a["g"])("div",tn,[nn,an,Object(a["g"])("p",null,"v"+Object(a["C"])(e.menu.version),1)]),rn,Object(a["g"])("div",cn,[Object(a["g"])(o,{class:"farm-button start-button",onClick:t[1]||(t[1]=function(t){return e.menu.startGame()})},{default:Zt((function(){return[sn]})),_:1}),Object(a["g"])(o,{class:"farm-button collection-button",onClick:t[2]||(t[2]=function(t){return e.menu.showCollection()})},{default:Zt((function(){return[on]})),_:1}),Object(a["g"])(o,{class:"farm-button settings-button",onClick:t[3]||(t[3]=function(t){return e.menu.showSettings()})},{default:Zt((function(){return[un]})),_:1}),Object(a["g"])(o,{class:"farm-button patch-button",onClick:t[4]||(t[4]=function(t){return e.$emit("goto-view","PatchNotesScreen")})},{default:Zt((function(){return[ln]})),_:1}),Object(a["g"])(o,{class:"farm-button credits-button",onClick:t[5]||(t[5]=function(t){return e.$emit("goto-view","CreditsScreen")})},{default:Zt((function(){return[dn]})),_:1}),Object(a["g"])(o,{class:"farm-button exit-button",onClick:t[6]||(t[6]=function(t){return e.window().location.href="https://www.blushingdefeat.com/play/"})},{default:Zt((function(){return[hn]})),_:1})])]),Object(a["g"])("div",fn,[Object(a["g"])(u,{image:n("157a"),link:"https://www.patreon.com/gardamuse",class:"patreon"},{default:Zt((function(){return[bn,gn,vn]})),_:1},8,["image"]),pn,Object(a["g"])("div",On,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.patreonCredits(),(function(e){return Object(a["q"])(),Object(a["d"])("p",mn,Object(a["C"])(e.name),1)})),256))])]),Object(a["g"])("div",jn,[yn,Object(a["g"])(l,{image:"https://www.blushingdefeat.com/projects/cowgirl-dairy-farm/thumb-2.webp",link:"https://www.blushingdefeat.com/play/cowgirl-dairy-farm/"},{default:Zt((function(){return[kn]})),_:1}),Object(a["g"])(l,{image:"https://www.blushingdefeat.com/play/bimbo-personality-quiz/thumb.jpg",link:"https://www.blushingdefeat.com/play/bimbo-personality-quiz/"},{default:Zt((function(){return[wn]})),_:1}),Object(a["g"])(l,{image:"https://www.blushingdefeat.com/projects/bimbo-booth/thumb.jpg",link:"https://www.blushingdefeat.com/bimbo-booth/"},{default:Zt((function(){return[Cn]})),_:1}),Object(a["g"])(l,{image:"https://www.blushingdefeat.com/projects/mispell/misspell-thumb.png",link:"https://www.blushingdefeat.com/mispell/"},{default:Zt((function(){return[Sn]})),_:1})])])):Object(a["e"])("",!0)})),_n=Object(a["H"])("data-v-d5159fe2"),Tn=_n((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("a",{href:"https://www.patreon.com/gardamuse",style:e.cssVars,class:"patreon-button"},null,4)})),Dn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Dn=Object(d["a"])([Object(h["a"])({props:{label:String},computed:{cssVars:function(){return{"--background-image":"url("+n("ba9d")+")"}}}})],Dn);var Bn=Dn;n("92d9");Bn.render=Tn,Bn.__scopeId="data-v-d5159fe2";var Rn=Bn,Mn=(n("9911"),Object(a["H"])("data-v-072ed195")),Nn=Mn((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("a",{class:"related-thumb",href:e.link},[Object(a["g"])("h3",null,[Object(a["y"])(e.$slots,"default")]),Object(a["g"])("img",{src:e.image},null,8,["src"])],8,["href"])})),En=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);En=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PatreonButton:Rn},props:{image:String,link:String},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){return Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})],En);var Pn=En;n("d9d0");Pn.render=Nn,Pn.__scopeId="data-v-072ed195";var Ln=Pn,An=Object(a["H"])("data-v-3333a497"),qn=An((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("a",{class:"patreon-button-2",href:e.link},[Object(a["g"])("h2",null,[Object(a["y"])(e.$slots,"default")]),Object(a["g"])("img",{src:e.image},null,8,["src"])],8,["href"])})),zn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);zn=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PatreonButton:Rn},props:{image:String,link:String},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){return Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})],zn);var In=zn;n("b783");In.render=qn,In.__scopeId="data-v-3333a497";var Fn=In,Vn=Object(a["H"])("data-v-02320d62");Object(a["u"])("data-v-02320d62");var Hn={class:"menu-view"},Un=Object(a["g"])("h2",{style:{margin:"0"}},"Patch Notes",-1),Gn={class:"blush-list"},Wn={class:"patch-window"},$n={key:0},Jn={key:1},Xn={style:{"font-weight":"normal","text-align":"right"}};Object(a["r"])();var Yn=Vn((function(e,t,n,i,r,c){var s=Object(a["z"])("BlushWindow");return Object(a["q"])(),Object(a["d"])("div",Hn,[Object(a["g"])(s,{onClose:t[1]||(t[1]=function(t){return e.$emit("close")})},{title:Vn((function(){return[Un]})),default:Vn((function(){return[Object(a["g"])("div",Gn,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.patchNotes,(function(e){return Object(a["q"])(),Object(a["d"])("div",Wn,[e.name.length>0?(Object(a["q"])(),Object(a["d"])("h2",$n,Object(a["C"])(e.id)+" - "+Object(a["C"])(e.name),1)):(Object(a["q"])(),Object(a["d"])("h2",Jn,Object(a["C"])(e.id),1)),Object(a["g"])("h4",Xn,Object(a["C"])(e.date),1),Object(a["g"])("div",{class:"md-patchnotes",style:{"grid-column":"span 2"},innerHTML:e.text},null,8,["innerHTML"])])})),256))])]})),_:1})])})),Kn=Object(a["H"])("data-v-640bcb6c");Object(a["u"])("data-v-640bcb6c");var Zn={class:"blush-window"},Qn=Object(a["g"])("h3",null,"X",-1),ea={class:"content"};Object(a["r"])();var ta=Kn((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",Zn,[Object(a["y"])(e.$slots,"title"),e.noCross?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])(s,{key:0,class:"farm-button close-button",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},{default:Kn((function(){return[Qn]})),_:1})),Object(a["g"])("div",ea,[Object(a["y"])(e.$slots,"default")])])})),na=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.noCross=!1,e}return n}(h["b"]);na=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PlayingCard:oe},props:{noCross:Boolean},emits:["close"],methods:{},computed:{util:function(){return Z}}})],na);var aa=na;n("8d53");aa.render=ta,aa.__scopeId="data-v-640bcb6c";var ia=aa,ra=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);ra=Object(d["a"])([Object(h["a"])({components:{TextButton:M,BlushWindow:ia},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],ra);var ca=ra;n("e7c0"),n("0bb2");ca.render=Yn,ca.__scopeId="data-v-02320d62";var sa=ca,oa=Object(a["H"])("data-v-547ef27e");Object(a["u"])("data-v-547ef27e");var ua={key:0,style:{margin:"0"}},la={key:1,style:{margin:"0"}},da={key:0,class:"blush-list"},ha={class:"patch-window"},fa={style:{"grid-column":"1 / -1"}},ba={class:"text",style:{"font-size":"0.6em","font-weight":"normal"}};Object(a["r"])();var ga=oa((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("ChatView"),u=Object(a["z"])("BlushWindow");return Object(a["q"])(),Object(a["d"])(u,{class:"endings-collection-window",onClose:t[1]||(t[1]=function(t){return e.onClose()}),"no-cross":void 0===e.endingsCollection.currentEpilogue},{title:oa((function(){return[void 0===e.endingsCollection.currentEpilogue?(Object(a["q"])(),Object(a["d"])("h2",ua,"Epilogues")):(Object(a["q"])(),Object(a["d"])("h2",la,Object(a["C"])(e.endingsCollection.currentEndingLabel()),1))]})),default:oa((function(){return[void 0===e.endingsCollection.currentEpilogue?(Object(a["q"])(),Object(a["d"])("div",da,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.endingsCollection.unlockedEpilogues(),(function(t){return Object(a["q"])(),Object(a["d"])("div",ha,[Object(a["g"])("h2",fa,[Object(a["f"])(Object(a["C"])(t.title)+" ",1),Object(a["g"])("span",ba," Unlocked endings: "+Object(a["C"])(e.endingsCollection.unlockedEndings(t).length)+" / "+Object(a["C"])(t.getAllEndings().length),1)]),(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.endingsCollection.unlockedEndings(t),(function(n){return Object(a["q"])(),Object(a["d"])(s,{key:n,class:"ending-button",onClick:function(a){return e.endingsCollection.select(t.id,n)}},{default:oa((function(){return[Object(a["g"])("b",null,Object(a["C"])(t.getEndpointLabel(n)),1)]})),_:2},1032,["onClick"])})),128))])})),256))])):(Object(a["q"])(),Object(a["d"])(o,{key:1,lines:e.endingsCollection.currentEndingMessages()},null,8,["lines"]))]})),_:1},8,["no-cross"])})),va=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.endingsCollection=new Gt(e.menu),e}return n}(h["b"]);va=Object(d["a"])([Object(h["a"])({components:{ChatView:Je,TextButton:M,BlushWindow:ia},props:{menu:Object,endingsCollection:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window})),onClose:function(){void 0==this.endingsCollection.currentEpilogue?this.$emit("close"):this.endingsCollection.unselect()}}})],va);var pa=va;n("7219"),n("f888");pa.render=ga,pa.__scopeId="data-v-547ef27e";var Oa=pa,ma=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);ma=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PatreonButton:Rn,PatreonButton2:Fn,RelatedThumb:Ln,PatchNotesScreen:sa,EndingsCollectionScreen:Oa},props:{menu:Object},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],ma);var ja=ma;n("9a27");ja.render=xn,ja.__scopeId="data-v-4d42b94a";var ya=ja,ka=Object(a["H"])("data-v-5f4c2c54");Object(a["u"])("data-v-5f4c2c54");var wa={key:0,class:"milkfarm dialogue-view"};Object(a["r"])();var Ca=ka((function(e,t,n,i,r,c){var s=Object(a["z"])("DialogueCard");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",wa,[Object(a["g"])(s,{menu:e.menu,title:"Ditzy Dice"},null,8,["menu"])])):Object(a["e"])("",!0)})),Sa=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);Sa=Object(d["a"])([Object(h["a"])({components:{TextButton:M,DialogueCard:ft},props:{menu:Object},methods:{log:function(e){console.log(e)}},computed:{game:function(){return this.menu.game}},created:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Sa);var xa=Sa;n("065e");xa.render=Ca,xa.__scopeId="data-v-5f4c2c54";var _a=xa,Ta=Object(a["H"])("data-v-622854ee");Object(a["u"])("data-v-622854ee");var Da={key:0,class:"milkfarm"};Object(a["r"])();var Ba=Ta((function(e,t,n,i,r,c){var s=Object(a["z"])("CollectionWindow"),o=Object(a["z"])("DialogueCard");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",Da,[Object(a["g"])(s,{deck:e.game.player.hand},null,8,["deck"]),Object(a["g"])(o,{menu:e.menu,title:e.endTitle},null,8,["menu","title"])])):Object(a["e"])("",!0)})),Ra=Object(a["H"])("data-v-63033964");Object(a["u"])("data-v-63033964");var Ma={class:"collection-window"},Na={class:"collection-tabs"},Ea={key:0,class:"tab-label tab-back-label"},Pa={key:1,class:"tab-label"},La={class:"cards-border"},Aa={class:"cards-wrapper"},qa={class:"cards",id:"cards"};Object(a["r"])();var za=Ra((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("PlayingCard");return Object(a["q"])(),Object(a["d"])("div",Ma,[Object(a["g"])("div",Na,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.tabs,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t,class:{"active-tab":e.activeTab===t},onClick:function(n){return e.activateTab(t)}},{default:Ra((function(){return[e.isInspectingCard&&e.activeTab===t?(Object(a["q"])(),Object(a["d"])("h3",Ea,"Back")):(Object(a["q"])(),Object(a["d"])("h3",Pa,Object(a["C"])(e.util.capitalize(t)),1))]})),_:2},1032,["class","onClick"])})),128))]),Object(a["g"])("div",La,[Object(a["g"])("div",Aa,[Object(a["g"])("div",qa,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.internalDeck.cards,(function(t){return Object(a["q"])(),Object(a["d"])(o,{key:t.id,card:t,class:{scaled:t.scale},onClick:function(n){e.activateCard(t)}},null,8,["card","class","onClick"])})),128))])])])])})),Ia=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.groupByParent=!1,e.scaledCard=new je({}),e.activeTab="all",e.activeCard=new je({}),e.activeSubCard=Object(a["v"])(new je({})),e}return n}(h["b"]);Ia=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PlayingCard:oe,BlushWindow:ia},props:{menu:Object,deck:Object,groupByParent:Boolean},emits:["close","activate-tab","activate-card","activate-subcard"],methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new je({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)},activateTab:function(e){this.activeTab=e,this.activeCard=new je({}),this.$emit("activate-tab",e)},activateCard:function(e){this.$emit("activate-card",e),e.isParent?(this.activeCard=e,this.activeSubCard.highlight=0,this.activeSubCard=new je({})):(this.activeSubCard.id!=e.id&&(this.activeSubCard.highlight=0),this.activeSubCard=e,this.activeSubCard.highlight+=1),this.$forceUpdate()},lookup:function(e){return me.lookup(e)}},computed:{tabs:function(){return["all","behavior","body","clothing","event","mind","reward"]},util:function(){return Z},refDeck:function(){return me.referenceDeck().useFilters()},internalDeck:function(){return this.isInspectingCard?new me(this.activeCard.subcards).sortByLevel().useFilters():this.groupByParent?this.deck.copy().onlyTag(this.activeTab).pack().unique().sortByName().sortByFamily().useFilters():this.deck.copy().onlyTag(this.activeTab).unpack().unique().sortByName().sortByFamily().useFilters()},isInspectingCard:function(){return void 0!=this.activeCard.id&&this.activeCard.isParent}}})],Ia);var Fa=Ia;n("5235");Fa.render=za,Fa.__scopeId="data-v-63033964";var Va=Fa,Ha=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e.scaledCard=new je({}),e}return n}(h["b"]);Ha=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PlayingCard:oe,DialogueCard:ft,DialogueStatusCard:Ke,CollectionWindow:Va},props:{menu:Object},methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new je({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)}},computed:{game:function(){return this.menu.game},endTitle:function(){var e=this.game.title;return""==e?"The End":"The End - ".concat(e)}},created:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Ha);var Ua=Ha;n("e6f3");Ua.render=Ba,Ua.__scopeId="data-v-622854ee";var Ga=Ua,Wa=Object(a["H"])("data-v-0e922dc8");Object(a["u"])("data-v-0e922dc8");var $a={key:0,class:"menu-view"},Ja={class:"window text-window",id:"help-window"},Xa=Object(a["g"])("div",null,[Object(a["g"])("h1",{style:{margin:"0"}},"Credits")],-1),Ya=Object(a["g"])("h3",null,"X",-1),Ka={class:"farm-list help-list"},Za=Object(a["g"])("div",{class:"farm-window credits-block"},[Object(a["g"])("h2",null,"Development and Design"),Object(a["g"])("h3",{class:"credit"},"Gardamuse")],-1),Qa={class:"farm-window credits-block"},ei=Object(a["g"])("h2",null,"Writing",-1),ti=Object(a["f"])(" Transformation descriptions and epilogues. "),ni={class:"farm-window credits-block"},ai=Object(a["g"])("h2",null,"Artwork",-1),ii=Object(a["f"])(" For illustrations on: "),ri={key:0},ci=Object(a["f"])(". "),si={class:"farm-window credits-block"},oi=Object(a["g"])("h2",null,"Graphics",-1),ui=Object(a["f"])(" Card textures. "),li=Object(a["f"])(" Tool for generating images. "),di={class:"farm-window credits-block"},hi=Object(a["g"])("h2",null,"Special Thanks to",-1),fi={class:"credit"},bi=Object(a["g"])("p",{class:"credit"},"And everyone else who supports Blushing Defeat on Patreon!",-1),gi={class:"farm-window credits-block double-columns"},vi=Object(a["g"])("h2",null,"Game Inspired by",-1),pi=Object(a["f"])(" For their "),Oi=Object(a["g"])("a",{href:"https://www.deviantart.com/xsentisus/art/Bimbo-Dice-700-Watcher-25k-Page-Views-SPECIAL-865174538",target:"_blank"}," Bimbo Dice",-1),mi=Object(a["f"])(" caption series. "),ji=Object(a["f"])(" For their "),yi=Object(a["g"])("a",{href:"https://imgur.com/a/bXlN6Fe",target:"_blank"},"Eliminated",-1),ki=Object(a["f"])(" choose-your-own-adventure. "),wi=Object(a["f"])(" For their "),Ci=Object(a["g"])("a",{href:"https://www.deviantart.com/grapplerofbooty/art/Transmoria-The-Realm-of-Chang-Faerie-Mind-Shaper-859293252",target:"_blank"}," Transoria",-1),Si=Object(a["f"])(" statblocks and "),xi=Object(a["g"])("a",{href:"https://www.deviantart.com/grapplerofbooty/art/MTG-TG-Self-Inflicted-Stupidity-790655990",target:"_blank"},"MTG",-1),_i=Object(a["f"])(" card series. "),Ti=Object(a["f"])(" For their transformation spins caption series. "),Di=Object(a["f"])(" For the "),Bi=Object(a["g"])("a",{href:"https://imgur.com/W0YNL6l",target:"_blank"}," Bimbofication Curse",-1),Ri=Object(a["f"])(" spreadsheet. ");Object(a["r"])();var Mi=Wa((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("Credit");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",$a,[Object(a["g"])("div",Ja,[Xa,Object(a["g"])(s,{class:"farm-button",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},{default:Wa((function(){return[Ya]})),_:1}),Object(a["g"])("div",Ka,[Za,Object(a["g"])("div",Qa,[ei,Object(a["g"])(o,{name:"Duhad",link:"https://www.deviantart.com/motherduhad",linkText:"DeviantArt"},{default:Wa((function(){return[ti]})),_:1})]),Object(a["g"])("div",ni,[ai,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.artCredits(),(function(e){return Object(a["q"])(),Object(a["d"])(o,{key:e,name:e.artist,link:e.link,linkText:e.linkText},{default:Wa((function(){return[ii,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.cards,(function(t,n){return Object(a["q"])(),Object(a["d"])("span",null,[Object(a["f"])(Object(a["C"])(t),1),n!==e.cards.length-1?(Object(a["q"])(),Object(a["d"])("span",ri,", ")):Object(a["e"])("",!0)])})),256)),ci]})),_:2},1032,["name","link","linkText"])})),128))]),Object(a["g"])("div",si,[oi,Object(a["g"])(o,{name:"Transparent Textures",link:"https://www.transparenttextures.com/",linkText:"Website"},{default:Wa((function(){return[ui]})),_:1}),Object(a["g"])(o,{name:"Artbreeder",link:"https://www.artbreeder.com",linkText:"Website"},{default:Wa((function(){return[li]})),_:1})]),Object(a["g"])("div",di,[hi,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.patreonCredits(),(function(e){return Object(a["q"])(),Object(a["d"])("h3",fi,Object(a["C"])(e.name),1)})),256)),bi]),Object(a["g"])("div",gi,[vi,Object(a["g"])(o,{name:"Xsentisus",link:"https://www.deviantart.com/xsentisus",linkText:"DeviantArt"},{default:Wa((function(){return[pi,Oi,mi]})),_:1}),Object(a["g"])(o,{name:"MythicalCreatureBone",link:"https://www.deviantart.com/mythicalcreaturebone",linkText:"DeviantArt"},{default:Wa((function(){return[ji,yi,ki]})),_:1}),Object(a["g"])(o,{name:"GrapplerOfBooty",link:"https://www.deviantart.com/grapplerofbooty",linkText:"DeviantArt"},{default:Wa((function(){return[wi,Ci,Si,xi,_i]})),_:1}),Object(a["g"])(o,{name:"TF Me Please!",link:"https://www.tumblr.com/blog/view/transformmeplease",linkText:"Tumblr"},{default:Wa((function(){return[Ti]})),_:1}),Object(a["g"])(o,{name:"Unknown",link:"https://imgur.com/W0YNL6l",linkText:"Imgur"},{default:Wa((function(){return[Di,Bi,Ri]})),_:1})])])])])):Object(a["e"])("",!0)})),Ni=Object(a["H"])("data-v-27444a3f");Object(a["u"])("data-v-27444a3f");var Ei={class:"credit"},Pi={style:{"font-size":"0.8em"}},Li={style:{"font-size":"0.8em",color:"#ccc"}};Object(a["r"])();var Ai=Ni((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",Ei,[Object(a["g"])("h3",null,[Object(a["f"])(Object(a["C"])(e.name)+" | ",1),Object(a["g"])("span",Pi,[Object(a["g"])("a",{href:e.link,target:"_blank"},Object(a["C"])(e.linkText),9,["href"])])]),Object(a["g"])("p",Li,[Object(a["y"])(e.$slots,"default")])])})),qi=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);qi=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PatreonButton:Rn},props:{name:String,link:String,linkText:String},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){return Object(W["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})],qi);var zi=qi;n("9b25");zi.render=Ai,zi.__scopeId="data-v-27444a3f";var Ii=zi,Fi=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);Fi=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PatreonButton:Rn,Credit:Ii},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Fi);var Vi=Fi;n("dcaf");Vi.render=Mi,Vi.__scopeId="data-v-0e922dc8";var Hi=Vi,Ui=Object(a["H"])("data-v-00f32196");Object(a["u"])("data-v-00f32196");var Gi={key:0,class:"milkfarm"},Wi={class:"status-content"},$i={class:"status-text"},Ji=Object(a["g"])("p",null,"To go back, click the current tab.",-1),Xi=Object(a["g"])("p",null,"These are all the cards you've collected.",-1),Yi=Object(a["g"])("p",null,"To inspect a card with multiple levels, click it.",-1),Ki=Object(a["g"])("b",null,"Owned",-1),Zi=Object(a["f"])(": "),Qi={style:{"font-size":"1.1em"}},er=Object(a["f"])(" cards, "),tr={style:{"font-size":"1.1em"}},nr=Object(a["f"])(" levels"),ar={class:"buttons"},ir=Object(a["f"])("Save Screenshot"),rr=Object(a["g"])("p",null,"These are all the epilogues and endings you've found.",-1),cr=Object(a["g"])("p",null,"Epilogues are unlocked by having a certain set of cards by the end of the game.",-1),sr=Object(a["g"])("p",null,"Endings are unlocked by making dialogue choices in the epilogue. Some dialogue choices will only show up if you have a specific card.",-1),or=Object(a["g"])("p",null,"Click an ending to read it.",-1),ur=Object(a["g"])("br",null,null,-1),lr=Object(a["g"])("b",null,"Unlocked epilogues",-1),dr=Object(a["f"])(": "),hr={style:{"font-size":"1.1em"}},fr=Object(a["g"])("b",null,"Unlocked endings",-1),br=Object(a["f"])(": "),gr={style:{"font-size":"1.1em"}},vr=Object(a["g"])("p",null,null,-1);Object(a["r"])();var pr=Ui((function(e,t,n,i,r,c){var s=Object(a["z"])("CollectionWindow"),o=Object(a["z"])("EndingsCollectionWindow"),u=Object(a["z"])("ChatView"),l=Object(a["z"])("TextButton"),d=Object(a["z"])("TabWindow");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",Gi,["cards"===e.activeMenuTab?(Object(a["q"])(),Object(a["d"])(s,{key:0,deck:e.menu.collection,menu:e.menu,groupByParent:"",onActivateTab:e.activateTab,onActivateCard:e.activateCard},null,8,["deck","menu","onActivateTab","onActivateCard"])):(Object(a["q"])(),Object(a["d"])(o,{key:1,menu:e.menu,"endings-collection":e.endingsCollection},null,8,["menu","endings-collection"])),Object(a["g"])(d,{style:{"grid-area":"s"},tabs:["cards","endings","exit"],onActivatedTab:e.activateMenuTab},{cards:Ui((function(){return[Object(a["g"])("div",Wi,[Object(a["g"])("div",$i,[e.isInspectingCard?(Object(a["q"])(),Object(a["d"])(a["a"],{key:0},[Object(a["g"])("p",null,'These are all levels of the "'+Object(a["C"])(e.activeCard.name)+"\" card you've collected.",1),Ji,Object(a["g"])("p",null,"Levels owned: "+Object(a["C"])(e.activeCard.subcards.length)+" / "+Object(a["C"])(e.activeCard.levels),1)],64)):(Object(a["q"])(),Object(a["d"])(a["a"],{key:1},[Xi,Yi,Object(a["g"])("p",null,[Ki,Zi,Object(a["g"])("span",Qi,Object(a["C"])(e.deck.size())+" / "+Object(a["C"])(e.refDeck.onlyTag(e.activeTab).size()),1),er,Object(a["g"])("span",tr,Object(a["C"])(e.deck.unpack().size())+" / "+Object(a["C"])(e.refDeck.onlyTag(e.activeTab).unpack().size()),1),nr])],64))]),Object(a["g"])(u,{class:"transformation-chat",lines:e.transformationText()},null,8,["lines"]),Object(a["g"])("div",ar,[Object(a["g"])(l,{onClick:t[1]||(t[1]=function(t){return e.util.screenshot("cards",e.screenshotName())})},{default:Ui((function(){return[ir]})),_:1})])])]})),endings:Ui((function(){return[rr,cr,sr,or,ur,Object(a["g"])("p",null,[lr,dr,Object(a["g"])("span",hr,Object(a["C"])(e.endingsCollection.unlockedEpilogues().length)+" / "+Object(a["C"])(e.endingsCollection.epiloguesList().length),1)]),Object(a["g"])("p",null,[fr,br,Object(a["g"])("span",gr,Object(a["C"])(e.endingsCollection.nrOfAllUnlockedEndings())+" / "+Object(a["C"])(e.endingsCollection.nrOfAllEndings()),1)]),vr]})),_:1},8,["onActivatedTab"])])):Object(a["e"])("",!0)})),Or=Object(a["H"])("data-v-24d592b9");Object(a["u"])("data-v-24d592b9");var mr={class:"tab-window"},jr={class:"tabs"},yr={class:"tab-label"},kr={class:"content-window"},wr={class:"content"};Object(a["r"])();var Cr=Or((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",mr,[Object(a["g"])("div",jr,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.tabs,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t,class:{"active-tab":t===e.activeTab},onClick:function(n){return e.activateTab(t)}},{default:Or((function(){return[Object(a["g"])("h3",yr,Object(a["C"])(e.util.capitalize(t)),1)]})),_:2},1032,["class","onClick"])})),128))]),Object(a["g"])("div",kr,[Object(a["g"])("div",wr,[Object(a["y"])(e.$slots,e.activeTab)])])])})),Sr=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.tabs=[],e.activeTab="",e}return n}(h["b"]);Sr=Object(d["a"])([Object(h["a"])({components:{TextButton:M,PlayingCard:oe},props:{tabs:Array},emits:["close","activatedTab"],methods:{activateTab:function(e){this.activeTab=e,this.$emit("activatedTab",e)}},computed:{util:function(){return Z}},created:function(){this.activateTab(this.tabs[0])}})],Sr);var xr=Sr;n("c725");xr.render=Cr,xr.__scopeId="data-v-24d592b9";var _r=xr,Tr=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e.endingsCollection=new Gt(e.menu),e.scaledCard=new je({}),e.activeTab="all",e.activeCard=new je({}),e.activeSubCard=new je({}),e.activeMenuTab="",e}return n}(h["b"]);Tr=Object(d["a"])([Object(h["a"])({components:{ChatView:Je,TextButton:M,PlayingCard:oe,TabWindow:_r,CollectionWindow:Va,EndingsCollectionWindow:Oa},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new je({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)},activateTab:function(e){this.activeTab=e,this.activeCard=new je({}),this.activeSubCard=new je({})},activateCard:function(e){e.isParent?(this.activeCard=e,this.activeSubCard=new je({})):this.activeSubCard=e},activateMenuTab:function(e){this.activeMenuTab=e,"exit"==e&&this.$emit("close")},transformationText:function(){return Bt.parseLines(this.activeSubCard.transformation)},lookup:function(e){return me.lookup(e)},screenshotName:function(){return this.isInspectingCard?"".concat(Z.toKebabCase(this.activeCard.name),"-").concat(this.activeCard.subcards.length,"-of-").concat(this.activeCard.levels):"".concat(this.activeTab,"-").concat(this.deck.unpack().size(),"-of-").concat(this.refDeck.onlyTag(this.activeTab).unpack().size())}},computed:{tabs:function(){return["all","behavior","body","clothing","event","mind","reward"]},util:function(){return Z},refDeck:function(){return me.referenceDeck().useFilters()},deck:function(){return this.isInspectingCard?new me(this.activeCard.subcards).sortByLevel().useFilters():this.menu.collection.copy().onlyTag(this.activeTab).pack().unique().useFilters()},isInspectingCard:function(){return void 0!=this.activeCard.id&&this.activeCard.isParent}},created:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Tr);var Dr=Tr;n("1348");Dr.render=pr,Dr.__scopeId="data-v-00f32196";var Br=Dr,Rr=Object(a["H"])("data-v-1652069e");Object(a["u"])("data-v-1652069e");var Mr={class:"settings-screen"},Nr=Object(a["g"])("h2",{style:{margin:"0"}},"Options",-1),Er={class:"button-row"},Pr=Object(a["f"])(" Clear Card Collection "),Lr=Object(a["g"])("p",{style:{margin:"0"}},"Do you want to restart your card collection? Here you can clear your save to start again.",-1);Object(a["r"])();var Ar=Rr((function(e,t,n,i,r,c){var s=Object(a["z"])("FilterWindow"),o=Object(a["z"])("TextButton"),u=Object(a["z"])("BlushWindow");return Object(a["q"])(),Object(a["d"])("div",Mr,[Object(a["g"])(s,{menu:e.menu,onClose:t[1]||(t[1]=function(t){return e.$emit("close")})},null,8,["menu"]),Object(a["g"])(u,{class:"options-window","no-cross":""},{title:Rr((function(){return[Nr]})),default:Rr((function(){return[Object(a["g"])("div",Er,[Object(a["g"])(o,{class:"delete-save-button",onClick:t[2]||(t[2]=function(t){return e.deleteCollection()})},{default:Rr((function(){return[Pr]})),_:1}),Lr])]})),_:1})])})),qr=Object(a["H"])("data-v-98abe514");Object(a["u"])("data-v-98abe514");var zr=Object(a["g"])("h2",{style:{margin:"0"}},"Content Filters",-1),Ir={class:"content"},Fr={key:0},Vr={key:1},Hr=Object(a["g"])("p",null,"The game generally isn't very extreme, but you may not like everything. Filters will try to remove most of the content you are not interested in.",-1),Ur=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Tip:"),Object(a["f"])(' Remove only what you actually dislike, not what makes for a "bad end", since those are often very fun.')],-1),Gr=Object(a["g"])("p",null,[Object(a["g"])("b",null,"All"),Object(a["f"])(" - Include all content in this category.")],-1),Wr=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Some"),Object(a["f"])(" - Do not include extreme content in this category. Example: No immobilizingly large breast expansion.")],-1),$r=Object(a["g"])("p",null,[Object(a["g"])("b",null,"None"),Object(a["f"])(" - Remove as much content in this category as possible.")],-1),Jr={class:"filter-entry"},Xr={class:"label"},Yr=Object(a["g"])("h4",null,"All",-1),Kr=Object(a["g"])("h4",null,"Some",-1),Zr=Object(a["g"])("h4",null,"None",-1);Object(a["r"])();var Qr=qr((function(e,t,n,i,r,c){var s=Object(a["z"])("BlushList"),o=Object(a["z"])("TextButton"),u=Object(a["z"])("BlushWindow");return Object(a["q"])(),Object(a["d"])(u,{class:"filter-window",onClose:t[1]||(t[1]=function(t){return e.$emit("close")})},{title:qr((function(){return[zr]})),default:qr((function(){return[Object(a["g"])("div",Ir,[Object(a["g"])("div",null,[e.menu.isFilteringTooMuch()?(Object(a["q"])(),Object(a["d"])("h3",Vr," Currently including "+Object(a["C"])(e.menu.cardsFilteredString())+". WARNING: There may not be enough cards left. ",1)):(Object(a["q"])(),Object(a["d"])("h3",Fr,"Currently including "+Object(a["C"])(e.menu.cardsFilteredString()),1)),Hr,Ur]),Object(a["g"])(s,{class:"instructions"},{default:qr((function(){return[Gr,Wr,$r]})),_:1}),Object(a["g"])(s,null,{default:qr((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.settings.filters,(function(t){return Object(a["q"])(),Object(a["d"])("div",Jr,[Object(a["g"])("div",Xr,[Object(a["g"])("h3",null,Object(a["C"])(t.name),1),Object(a["g"])("p",null,Object(a["C"])(t.description),1)]),Object(a["g"])(o,{style:{"grid-area":"b1"},class:{"selected-green":0===t.strictness},onClick:function(n){return e.setStrictness(t,0)}},{default:qr((function(){return[Yr]})),_:2},1032,["class","onClick"]),Object(a["g"])(o,{style:{"grid-area":"b2"},class:{"selected-yellow":1===t.strictness},onClick:function(n){return e.setStrictness(t,1)}},{default:qr((function(){return[Kr]})),_:2},1032,["class","onClick"]),Object(a["g"])(o,{style:{"grid-area":"b3"},class:{"selected-red":2===t.strictness},onClick:function(n){return e.setStrictness(t,2)}},{default:qr((function(){return[Zr]})),_:2},1032,["class","onClick"])])})),256))]})),_:1})])]})),_:1})})),ec=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.noCross=!1,e}return n}(h["b"]);ec=Object(d["a"])([Object(h["a"])({components:{TextButton:M,BlushWindow:ia,BlushList:Ge},props:{menu:Object,noCross:Boolean},emits:["close"],methods:{setStrictness:function(e,t){e.strictness=t,this.menu.save()}},computed:{util:function(){return Z}}})],ec);var tc=ec;n("a01d");tc.render=Qr,tc.__scopeId="data-v-98abe514";var nc=tc,ac=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);ac=Object(d["a"])([Object(h["a"])({components:{TextButton:M,Credit:Ii,FilterWindow:nc,BlushWindow:ia},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window})),deleteCollection:function(){confirm("Are you sure you wish to delete your card collection? This can't be undone.")&&this.menu.deleteCollection()}}})],ac);var ic=ac;n("90ac");ic.render=Ar,ic.__scopeId="data-v-1652069e";var rc=ic,cc=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.menu=new Kt,e}return n}(h["b"]);cc=Object(d["a"])([Object(h["a"])({components:{GameScreen:vt,StartMenu:ya,DialogueScreen:_a,HandView:Ga,CreditsScreen:Hi,CollectionScreen:Br,PatchNotesScreen:sa,SettingsScreen:rc,EndingsCollectionScreen:Oa},methods:{},computed:{cssVars:function(){return{"--background-image":"url("+n("39d9")+")","--maven-pro-path":"url("+n("1a08")+")"}},globalState:function(){return ve()}}})],cc);var sc=cc;n("67a4"),n("87b3");sc.render=s,sc.__scopeId="data-v-ea0623fc";var oc=sc,uc=n("6c02"),lc=[{path:"/",name:"Milkfarm",component:vt}],dc=Object(uc["a"])({history:Object(uc["b"])("/"),routes:lc}),hc=dc;a["c"](oc).use(hc).mount("#app")},ce52:function(e,t,n){},ce6a:function(e,t,n){e.exports=n.p+"img/devil-512px.webp"},d08b:function(e,t,n){},d4b5:function(e,t,n){"use strict";n("60bf")},d736:function(e,t,n){"use strict";n("364d")},d771:function(e,t,n){},d9d0:function(e,t,n){"use strict";n("a08e")},dcaf:function(e,t,n){"use strict";n("d771")},e31e:function(e,t,n){},e6f3:function(e,t,n){"use strict";n("55cd")},e733:function(e,t,n){"use strict";n("7a1e")},e7c0:function(e,t,n){"use strict";n("c421")},f888:function(e,t,n){"use strict";n("b74c")},fb01:function(e,t,n){}});
//# sourceMappingURL=app.js.map