!function(e){var n={};function I(g){if(n[g])return n[g].exports;var t=n[g]={i:g,l:!1,exports:{}};return e[g].call(t.exports,t,t.exports,I),t.l=!0,t.exports}I.m=e,I.c=n,I.d=function(e,n,g){I.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:g})},I.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},I.t=function(e,n){if(1&n&&(e=I(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var g=Object.create(null);if(I.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)I.d(g,t,function(n){return e[n]}.bind(null,t));return g},I.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(n,"a",n),n},I.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},I.p="",I(I.s=1)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SKIP", function() { return SKIP; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "alias", function() { return alias; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cancelDeserialize", function() { return cancelDeserialize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createModelSchema", function() { return createModelSchema; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createSimpleSchema", function() { return createSimpleSchema; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "custom", function() { return custom; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "date", function() { return date; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deserialize", function() { return deserialize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDefaultModelSchema", function() { return getDefaultModelSchema; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "identifier", function() { return identifier; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "list", function() { return list; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "map", function() { return map; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mapAsArray", function() { return mapAsArray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "object", function() { return object; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "optional", function() { return optional; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "primitive", function() { return primitive; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "raw", function() { return raw; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reference", function() { return reference; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "serializable", function() { return serializable; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "serialize", function() { return serialize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "serializeAll", function() { return serializeAll; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setDefaultModelSchema", function() { return setDefaultModelSchema; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "update", function() { return update; });\n/**\n * Creates a model schema that (de)serializes from / to plain javascript objects.\n * Its factory method is: `() => ({})`\n *\n * @example\n * const todoSchema = createSimpleSchema({\n *     title: true,\n *     done: true,\n * })\n *\n * const json = serialize(todoSchema, { title: \'Test\', done: false })\n * const todo = deserialize(todoSchema, json)\n *\n * @param props property mapping,\n * @returns model schema\n */\nfunction createSimpleSchema(props) {\n    return {\n        factory: function () {\n            return {};\n        },\n        props: props\n    };\n}\n\nvar formatters = {\n    j: function json(v) {\n        try {\n            return JSON.stringify(v);\n        }\n        catch (error) {\n            return "[UnexpectedJSONParseError]: " + error.message;\n        }\n    },\n    l: function symbol(s) {\n        return s.toString();\n    }\n};\nfunction invariant(condition, message) {\n    var variables = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        variables[_i - 2] = arguments[_i];\n    }\n    if (!condition) {\n        var variablesToLog_1 = [];\n        var index_1 = 0;\n        var formattedMessage = message.replace(/%([a-zA-Z%])/g, function (match, format) {\n            if (match === "%%")\n                return match;\n            var formatter = formatters[format];\n            if (typeof formatter === "function") {\n                var variable = variables[index_1++];\n                variablesToLog_1.push(variable);\n                return formatter(variable);\n            }\n            return match;\n        });\n        if (console && variablesToLog_1.length > 0) {\n            // eslint-disable-next-line no-console\n            console.log.apply(console, variablesToLog_1);\n        }\n        throw new Error("[serializr] " + (formattedMessage || "Illegal State"));\n    }\n}\n\nfunction GUARDED_NOOP(err) {\n    if (err)\n        // unguarded error...\n        throw new Error(err);\n}\nfunction once(fn) {\n    var fired = false;\n    return function () {\n        if (!fired) {\n            fired = true;\n            return fn.apply(null, arguments);\n        }\n        invariant(false, "callback was invoked twice");\n    };\n}\nfunction parallel(ar, processor, cb) {\n    // TODO: limit parallelization?\n    if (ar.length === 0)\n        return void cb(null, []);\n    var left = ar.filter(function (x) { return true; }).length; // only count items processed by forEach\n    var resultArray = [];\n    var failed = false;\n    ar.forEach(function (value, idx) {\n        processor(value, function (err, result) {\n            if (err) {\n                if (!failed) {\n                    failed = true;\n                    cb(err);\n                }\n            }\n            else {\n                resultArray[idx] = result;\n                if (--left === 0)\n                    cb(null, resultArray);\n            }\n        }, idx);\n    });\n}\nfunction isPrimitive(value) {\n    if (value === null)\n        return true;\n    return typeof value !== "object" && typeof value !== "function";\n}\nfunction isModelSchema(thing) {\n    return thing && thing.factory && thing.props;\n}\nfunction isPropSchema(thing) {\n    return thing && thing.serializer && thing.deserializer;\n}\nfunction isAliasedPropSchema(propSchema) {\n    return typeof propSchema === "object" && "string" == typeof propSchema.jsonname;\n}\nfunction isIdentifierPropSchema(propSchema) {\n    return typeof propSchema === "object" && propSchema.identifier === true;\n}\nfunction isAssignableTo(actualType, expectedType) {\n    var currentActualType = actualType;\n    while (currentActualType) {\n        if (currentActualType === expectedType)\n            return true;\n        currentActualType = currentActualType.extends;\n    }\n    return false;\n}\nfunction isMapLike(thing) {\n    return thing && typeof thing.keys === "function" && typeof thing.clear === "function";\n}\nfunction getIdentifierProp(modelSchema) {\n    invariant(isModelSchema(modelSchema), "modelSchema must be a ModelSchema");\n    // optimization: cache this lookup\n    var currentModelSchema = modelSchema;\n    while (currentModelSchema) {\n        for (var propName in currentModelSchema.props)\n            if (isIdentifierPropSchema(currentModelSchema.props[propName]))\n                return propName;\n        currentModelSchema = currentModelSchema.extends;\n    }\n    return undefined;\n}\nfunction processAdditionalPropArgs(propSchema, additionalArgs) {\n    if (additionalArgs) {\n        invariant(isPropSchema(propSchema), "expected a propSchema");\n        Object.assign(propSchema, additionalArgs);\n    }\n    return propSchema;\n}\n\n/**\n * Returns the standard model schema associated with a class / constructor function\n *\n */\nfunction getDefaultModelSchema(thing) {\n    if (!thing)\n        return undefined;\n    if (isModelSchema(thing))\n        return thing;\n    if (isModelSchema(thing.serializeInfo))\n        return thing.serializeInfo;\n    if (thing.constructor && thing.constructor.serializeInfo)\n        return thing.constructor.serializeInfo;\n}\n\n/**\n * Sets the default model schema for class / constructor function.\n * Everywhere where a model schema is required as argument, this class / constructor function\n * can be passed in as well (for example when using `object` or `ref`.\n *\n * When passing an instance of this class to `serialize`, it is not required to pass the model schema\n * as first argument anymore, because the default schema will be inferred from the instance type.\n *\n * @param clazz class or constructor function\n * @param modelSchema - a model schema\n * @returns model schema\n */\nfunction setDefaultModelSchema(clazz, modelSchema) {\n    invariant(isModelSchema(modelSchema), "expected modelSchema, got " + modelSchema);\n    clazz.serializeInfo = modelSchema;\n    return modelSchema;\n}\n\n/**\n * Creates a model schema that (de)serializes an object created by a constructor function (class).\n * The created model schema is associated by the targeted type as default model schema, see setDefaultModelSchema.\n * Its factory method is `() => new clazz()` (unless overriden, see third arg).\n *\n * @example\n * function Todo(title, done) {\n *     this.title = title\n *     this.done = done\n * }\n *\n * createModelSchema(Todo, {\n *     title: true,\n *     done: true,\n * })\n *\n * const json = serialize(new Todo(\'Test\', false))\n * const todo = deserialize(Todo, json)\n *\n * @param clazz class or constructor function\n * @param props property mapping\n * @param factory optional custom factory. Receives context as first arg\n * @returns model schema\n */\nfunction createModelSchema(clazz, props, factory) {\n    invariant(clazz !== Object, "one cannot simply put define a model schema for Object");\n    invariant(typeof clazz === "function", "expected constructor function");\n    var model = {\n        targetClass: clazz,\n        factory: factory ||\n            function () {\n                return new clazz();\n            },\n        props: props\n    };\n    // find super model\n    if (clazz.prototype.constructor !== Object) {\n        var s = getDefaultModelSchema(clazz.prototype.constructor);\n        if (s && s.targetClass !== clazz)\n            model.extends = s;\n    }\n    setDefaultModelSchema(clazz, model);\n    return model;\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the "License"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\n/**\n * Indicates that this field contains a primitive value (or Date) which should be serialized literally to json.\n *\n * @example\n * createModelSchema(Todo, {\n *     title: primitive(),\n * })\n *\n * serialize(new Todo(\'test\')) // { "title": "test" }\n *\n * @param additionalArgs optional object that contains beforeDeserialize and/or afterDeserialize handlers\n */\nfunction primitive(additionalArgs) {\n    var result = {\n        serializer: function (value) {\n            invariant(isPrimitive(value), "this value is not primitive: " + value);\n            return value;\n        },\n        deserializer: function (jsonValue, done) {\n            if (!isPrimitive(jsonValue))\n                return void done("[serializr] this value is not primitive: " + jsonValue);\n            return void done(null, jsonValue);\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\n/**\n * If you want to skip serialization or deserialization, you can use SKIP.\n *\n * @example\n * const schema = createSimpleSchema({\n *     a: custom(\n *         () => SKIP,\n *         v => v,\n *     ),\n * })\n * serialize(s, { a: 4 }) // {}\n * deserialize(s, { "a": 4 }) // { a: 4 }\n *\n * @example\n * // Skipping deserialization with computed mobx property.\n *\n * class TodoState {\n *     // Todo.category is @serializable(reference(...))\n *     \\@serializable(list(object(Todo)))\n *     \\@observable\n *     todos: Todo[]\n *\n *     // we want to serialize the categories, so that the references in\n *     // this.todos can be resolved, but we don\'t want to set this property\n *     \\@serializable(\n *         list(object(TodoCategory),\n *         { afterDeserialize: callback => callback(undefined, SKIP) }))\n *     \\@computed\n *     get categories() {\n *         return this.todos.map(todo => todo.category)\n *     }\n * }\n */\nvar SKIP = typeof Symbol !== "undefined" ? Symbol("SKIP") : { SKIP: true };\nvar _defaultPrimitiveProp = primitive();\n\n// Ugly way to get the parameter names since they aren\'t easily retrievable via reflection\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/gm;\nvar ARGUMENT_NAMES = /([^\\s,]+)/g;\nfunction getParamNames(func) {\n    var _a;\n    var fnStr = func.toString().replace(STRIP_COMMENTS, "");\n    return _a = fnStr.slice(fnStr.indexOf("(") + 1, fnStr.indexOf(")")).match(ARGUMENT_NAMES), (_a !== null && _a !== void 0 ? _a : []);\n}\nfunction serializableDecorator(propSchema, target, propName, descriptor) {\n    invariant(arguments.length >= 2, "too few arguments. Please use @serializable as property decorator");\n    // Fix for @serializable used in class constructor params (typescript)\n    var factory;\n    if (propName === undefined &&\n        typeof target === "function" &&\n        target.prototype &&\n        descriptor !== undefined &&\n        typeof descriptor === "number") {\n        invariant(isPropSchema(propSchema), "Constructor params must use alias(name)");\n        invariant(isAliasedPropSchema(propSchema), "Constructor params must use alias(name)");\n        var paramNames = getParamNames(target);\n        if (paramNames.length >= descriptor) {\n            propName = paramNames[descriptor];\n            propSchema.paramNumber = descriptor;\n            descriptor = undefined;\n            target = target.prototype;\n            // Create a factory so the constructor is called properly\n            factory = function (context) {\n                var _a;\n                var params = [];\n                var _loop_1 = function (i) {\n                    Object.keys(context.modelSchema.props).forEach(function (key) {\n                        var prop = context.modelSchema.props[key];\n                        if (prop.paramNumber === i) {\n                            params[i] = context.json[prop.jsonname];\n                        }\n                    });\n                };\n                for (var i = 0; i < target.constructor.length; i++) {\n                    _loop_1(i);\n                }\n                return (_a = target.constructor).bind.apply(_a, __spreadArrays([undefined], params));\n            };\n        }\n    }\n    invariant(typeof propName === "string", "incorrect usage of @serializable decorator");\n    var info = getDefaultModelSchema(target);\n    if (!info || !target.constructor.hasOwnProperty("serializeInfo"))\n        info = createModelSchema(target.constructor, {}, factory);\n    if (info && info.targetClass !== target.constructor)\n        // fixes typescript issue that tends to copy fields from super constructor to sub constructor in extends\n        info = createModelSchema(target.constructor, {}, factory);\n    info.props[propName] = propSchema;\n    // MWE: why won\'t babel work without?\n    if (descriptor && !descriptor.get && !descriptor.set)\n        descriptor.writable = true;\n    return descriptor;\n}\nfunction serializable(targetOrPropSchema, key, baseDescriptor) {\n    if (!key) {\n        // decorated with propSchema\n        var propSchema = targetOrPropSchema === true ? _defaultPrimitiveProp : targetOrPropSchema;\n        invariant(isPropSchema(propSchema), "@serializable expects prop schema");\n        var result = serializableDecorator.bind(null, propSchema);\n        return result;\n    }\n    else {\n        // decorated without arguments, treat as primitive\n        serializableDecorator(primitive(), targetOrPropSchema, key, baseDescriptor);\n    }\n}\n\nfunction serialize(modelSchemaOrInstance, arg2) {\n    invariant(arguments.length === 1 || arguments.length === 2, "serialize expects one or 2 arguments");\n    var instance = ((arg2 !== null && arg2 !== void 0 ? arg2 : modelSchemaOrInstance));\n    var schema = (arg2 && modelSchemaOrInstance);\n    if (Array.isArray(instance)) {\n        if (instance.length === 0)\n            return [];\n        // don\'t bother finding a schema\n        else if (!schema)\n            schema = getDefaultModelSchema(instance[0]);\n        else if (typeof schema !== "object")\n            schema = getDefaultModelSchema(schema);\n    }\n    else if (!schema) {\n        schema = getDefaultModelSchema(instance);\n    }\n    else if (typeof schema !== "object") {\n        schema = getDefaultModelSchema(schema);\n    }\n    var foundSchema = schema;\n    invariant(foundSchema, "Failed to find default schema for " + modelSchemaOrInstance);\n    if (Array.isArray(instance))\n        return instance.map(function (item) { return serializeWithSchema(foundSchema, item); });\n    return serializeWithSchema(foundSchema, instance);\n}\nfunction serializeWithSchema(schema, obj) {\n    invariant(schema && typeof schema === "object" && schema.props, "Expected schema");\n    invariant(obj && typeof obj === "object", "Expected object");\n    var res;\n    if (schema.extends)\n        res = serializeWithSchema(schema.extends, obj);\n    else {\n        // TODO: make invariant?:  invariant(!obj.constructor.prototype.constructor.serializeInfo, "object has a serializable supertype, but modelschema did not provide extends clause")\n        res = {};\n    }\n    Object.keys(schema.props).forEach(function (key) {\n        var propDef = schema.props[key];\n        if (!propDef)\n            return;\n        if (key === "*") {\n            serializeStarProps(schema, propDef, obj, res);\n            return;\n        }\n        if (propDef === true)\n            propDef = _defaultPrimitiveProp;\n        var jsonValue = propDef.serializer(obj[key], key, obj);\n        if (jsonValue === SKIP) {\n            return;\n        }\n        res[propDef.jsonname || key] = jsonValue;\n    });\n    return res;\n}\nfunction serializeStarProps(schema, propDef, obj, target) {\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (!(key in schema.props)) {\n            if (propDef === true || (propDef && (!propDef.pattern || propDef.pattern.test(key)))) {\n                var value = obj[key];\n                if (propDef === true) {\n                    if (isPrimitive(value)) {\n                        target[key] = value;\n                    }\n                }\n                else {\n                    var jsonValue = propDef.serializer(value, key, obj);\n                    if (jsonValue === SKIP) {\n                        return;\n                    }\n                    // TODO: propDef.jsonname could be a transform function on key\n                    target[key] = jsonValue;\n                }\n            }\n        }\n    }\n}\n\nvar rootContextCache = new WeakMap();\nvar Context = /** @class */ (function () {\n    function Context(parentContext, modelSchema, json, onReadyCb, customArgs) {\n        this.parentContext = parentContext;\n        this.modelSchema = modelSchema;\n        this.json = json;\n        this.onReadyCb = onReadyCb;\n        this.isRoot = !parentContext;\n        this.pendingCallbacks = 0;\n        this.pendingRefsCount = 0;\n        this.target = undefined; // always set this property using setTarget\n        this.hasError = false;\n        if (!parentContext) {\n            this.rootContext = this;\n            this.args = customArgs;\n            this.pendingRefs = {};\n            this.resolvedRefs = {};\n        }\n        else {\n            this.rootContext = parentContext.rootContext;\n            this.args = parentContext.args;\n        }\n    }\n    Context.prototype.createCallback = function (fn) {\n        var _this = this;\n        this.pendingCallbacks++;\n        // once: defend against user-land calling \'done\' twice\n        return once(function (err, value) {\n            if (err) {\n                if (!_this.hasError) {\n                    _this.hasError = true;\n                    _this.onReadyCb(err);\n                    rootContextCache.delete(_this);\n                }\n            }\n            else if (!_this.hasError) {\n                fn(value);\n                if (--_this.pendingCallbacks === _this.pendingRefsCount) {\n                    if (_this.pendingRefsCount > 0) {\n                        // all pending callbacks are pending reference resolvers. not good.\n                        _this.onReadyCb(new Error(\'Unresolvable references in json: "\' +\n                            Object.keys(_this.pendingRefs)\n                                .filter(function (uuid) { return _this.pendingRefs[uuid].length > 0; })\n                                .join(\'", "\') +\n                            \'"\'));\n                        rootContextCache.delete(_this);\n                    }\n                    else {\n                        _this.onReadyCb(null, _this.target);\n                        rootContextCache.delete(_this);\n                    }\n                }\n            }\n        });\n    };\n    // given an object with uuid, modelSchema, callback, awaits until the given uuid is available\n    // resolve immediately if possible\n    Context.prototype.await = function (modelSchema, uuid, callback) {\n        invariant(this.isRoot, "await can only be called on the root context");\n        if (uuid in this.resolvedRefs) {\n            var match = this.resolvedRefs[uuid].filter(function (resolved) {\n                return isAssignableTo(resolved.modelSchema, modelSchema);\n            })[0];\n            if (match)\n                return void callback(null, match.value);\n        }\n        this.pendingRefsCount++;\n        if (!this.pendingRefs[uuid])\n            this.pendingRefs[uuid] = [];\n        this.pendingRefs[uuid].push({\n            modelSchema: modelSchema,\n            uuid: uuid,\n            callback: callback\n        });\n    };\n    // given a model schema, uuid and value, resolve all references that were looking for this object\n    Context.prototype.resolve = function (modelSchema, uuid, value) {\n        invariant(this.isRoot, "resolve can only called on the root context");\n        if (!this.resolvedRefs[uuid])\n            this.resolvedRefs[uuid] = [];\n        this.resolvedRefs[uuid].push({\n            modelSchema: modelSchema,\n            value: value\n        });\n        if (uuid in this.pendingRefs) {\n            for (var i = this.pendingRefs[uuid].length - 1; i >= 0; i--) {\n                var opts = this.pendingRefs[uuid][i];\n                if (isAssignableTo(modelSchema, opts.modelSchema)) {\n                    this.pendingRefs[uuid].splice(i, 1);\n                    this.pendingRefsCount--;\n                    opts.callback(null, value);\n                }\n            }\n        }\n    };\n    // set target and update root context cache\n    Context.prototype.setTarget = function (target) {\n        if (this.isRoot && this.target) {\n            rootContextCache.delete(this.target);\n        }\n        this.target = target;\n        rootContextCache.set(this.target, this);\n    };\n    // call all remaining reference lookup callbacks indicating an error during ref resolution\n    Context.prototype.cancelAwaits = function () {\n        invariant(this.isRoot, "cancelAwaits can only be called on the root context");\n        var self = this;\n        Object.keys(this.pendingRefs).forEach(function (uuid) {\n            self.pendingRefs[uuid].forEach(function (refOpts) {\n                self.pendingRefsCount--;\n                refOpts.callback(new Error("Reference resolution canceled for " + uuid));\n            });\n        });\n        this.pendingRefs = {};\n        this.pendingRefsCount = 0;\n    };\n    return Context;\n}());\nfunction getTargetContext(target) {\n    return rootContextCache.get(target);\n}\n\n/*\n * Deserialization\n */\nfunction schemaHasAlias(schema, name) {\n    for (var key in schema.props) {\n        var propSchema = schema.props[key];\n        if (typeof propSchema === "object" && propSchema.jsonname === name)\n            return true;\n    }\n    return false;\n}\nfunction deserializeStarProps(context, schema, propDef, obj, json) {\n    var _loop_1 = function (key) {\n        if (!(key in schema.props) && !schemaHasAlias(schema, key)) {\n            var jsonValue = json[key];\n            if (propDef === true) {\n                // when deserializing we don\'t want to silently ignore \'unparseable data\' to avoid\n                // confusing bugs\n                invariant(isPrimitive(jsonValue), "encountered non primitive value while deserializing \'*\' properties in property \'" +\n                    key +\n                    "\': " +\n                    jsonValue);\n                obj[key] = jsonValue;\n            }\n            else if (propDef && (!propDef.pattern || propDef.pattern.test(key))) {\n                propDef.deserializer(jsonValue, \n                // for individual props, use root context based callbacks\n                // this allows props to complete after completing the object itself\n                // enabling reference resolving and such\n                context.rootContext.createCallback(function (r) { return r !== SKIP && (obj[key] = r); }), context);\n            }\n        }\n    };\n    for (var key in json) {\n        _loop_1(key);\n    }\n}\nfunction deserialize(clazzOrModelSchema, json, callback, customArgs) {\n    if (callback === void 0) { callback = GUARDED_NOOP; }\n    invariant(arguments.length >= 2, "deserialize expects at least 2 arguments");\n    var schema = getDefaultModelSchema(clazzOrModelSchema);\n    invariant(isModelSchema(schema), "first argument should be model schema");\n    if (Array.isArray(json)) {\n        var items_1 = [];\n        parallel(json, function (childJson, itemDone) {\n            var instance = deserializeObjectWithSchema(undefined, schema, childJson, itemDone, customArgs);\n            // instance is created synchronously so can be pushed\n            items_1.push(instance);\n        }, callback);\n        return items_1;\n    }\n    else {\n        return deserializeObjectWithSchema(undefined, schema, json, callback, customArgs);\n    }\n}\nfunction deserializeObjectWithSchema(parentContext, modelSchema, json, callback, customArgs) {\n    if (json === null || json === undefined || typeof json !== "object")\n        return void callback(null, null);\n    var context = new Context(parentContext, modelSchema, json, callback, customArgs);\n    var target = modelSchema.factory(context);\n    // todo async invariant\n    invariant(!!target, "No object returned from factory");\n    // TODO: make invariant?            invariant(schema.extends ||\n    // !target.constructor.prototype.constructor.serializeInfo, "object has a serializable\n    // supertype, but modelschema did not provide extends clause")\n    context.setTarget(target);\n    var lock = context.createCallback(GUARDED_NOOP);\n    deserializePropsWithSchema(context, modelSchema, json, target);\n    lock();\n    return target;\n}\nfunction deserializePropsWithSchema(context, modelSchema, json, target) {\n    var _a;\n    if (modelSchema.extends)\n        deserializePropsWithSchema(context, modelSchema.extends, json, target);\n    function deserializeProp(propDef, jsonValue, propName) {\n        var whenDone = context.rootContext.createCallback(function (r) { return r !== SKIP && (target[propName] = r); });\n        propDef.deserializer(jsonValue, \n        // for individual props, use root context based callbacks\n        // this allows props to complete after completing the object itself\n        // enabling reference resolving and such\n        function (err, newValue) {\n            return onAfterDeserialize(whenDone, err, newValue, jsonValue, json, propName, context, propDef);\n        }, context, target[propName] // initial value\n        );\n    }\n    var _loop_2 = function (key) {\n        var propDef = modelSchema.props[key];\n        if (!propDef)\n            return { value: void 0 };\n        if (key === "*") {\n            deserializeStarProps(context, modelSchema, propDef, target, json);\n            return { value: void 0 };\n        }\n        if (propDef === true)\n            propDef = _defaultPrimitiveProp;\n        var jsonAttr = (_a = propDef.jsonname, (_a !== null && _a !== void 0 ? _a : key));\n        invariant("symbol" !== typeof jsonAttr, "You must alias symbol properties. prop = %l", key);\n        var jsonValue = json[jsonAttr];\n        var propSchema = propDef;\n        var callbackDeserialize = function (err, jsonValue) {\n            if (!err && jsonValue !== undefined) {\n                deserializeProp(propSchema, jsonValue, key);\n            }\n        };\n        onBeforeDeserialize(callbackDeserialize, jsonValue, json, jsonAttr, context, propDef);\n    };\n    for (var _i = 0, _b = Object.keys(modelSchema.props); _i < _b.length; _i++) {\n        var key = _b[_i];\n        var state_1 = _loop_2(key);\n        if (typeof state_1 === "object")\n            return state_1.value;\n    }\n}\nvar onBeforeDeserialize = function (callback, jsonValue, jsonParentValue, propNameOrIndex, context, propDef) {\n    if (propDef && typeof propDef.beforeDeserialize === "function") {\n        propDef.beforeDeserialize(callback, jsonValue, jsonParentValue, propNameOrIndex, context, propDef);\n    }\n    else {\n        callback(null, jsonValue);\n    }\n};\nvar onAfterDeserialize = function (callback, err, newValue, jsonValue, jsonParentValue, propNameOrIndex, context, propDef) {\n    if (propDef && typeof propDef.afterDeserialize === "function") {\n        propDef.afterDeserialize(callback, err, newValue, jsonValue, jsonParentValue, propNameOrIndex, context, propDef);\n    }\n    else {\n        callback(err, newValue);\n    }\n};\n\n/**\n * `object` indicates that this property contains an object that needs to be (de)serialized\n * using its own model schema.\n *\n * N.B. mind issues with circular dependencies when importing model schema\'s from other files! The module resolve algorithm might expose classes before `createModelSchema` is executed for the target class.\n *\n * @example\n * class SubTask {}\n * class Todo {}\n *\n * createModelSchema(SubTask, {\n *     title: true,\n * })\n * createModelSchema(Todo, {\n *     title: true,\n *     subTask: object(SubTask),\n * })\n *\n * const todo = deserialize(Todo, {\n *     title: \'Task\',\n *     subTask: {\n *         title: \'Sub task\',\n *     },\n * })\n *\n * @param modelSchema to be used to (de)serialize the object\n * @param additionalArgs optional object that contains beforeDeserialize and/or afterDeserialize handlers\n */\nfunction object(modelSchema, additionalArgs) {\n    invariant(typeof modelSchema === "object" || typeof modelSchema === "function", "No modelschema provided. If you are importing it from another file be aware of circular dependencies.");\n    var result = {\n        serializer: function (item) {\n            modelSchema = getDefaultModelSchema(modelSchema);\n            invariant(isModelSchema(modelSchema), "expected modelSchema, got " + modelSchema);\n            if (item === null || item === undefined)\n                return item;\n            return serialize(modelSchema, item);\n        },\n        deserializer: function (childJson, done, context) {\n            modelSchema = getDefaultModelSchema(modelSchema);\n            invariant(isModelSchema(modelSchema), "expected modelSchema, got " + modelSchema);\n            if (childJson === null || childJson === undefined)\n                return void done(null, childJson);\n            return void deserializeObjectWithSchema(context, modelSchema, childJson, done, undefined);\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\nfunction serializeAll(targetOrPattern, propertyType) {\n    var propSchema;\n    if (arguments.length === 1) {\n        propSchema = true;\n        return decorator(targetOrPattern);\n    }\n    else {\n        invariant(typeof targetOrPattern === "object" && targetOrPattern.test, "@serializeAll pattern doesn\'t have test");\n        if (typeof propertyType === "function") {\n            propertyType = object(propertyType);\n        }\n        if (true === propertyType) {\n            propertyType = _defaultPrimitiveProp;\n        }\n        invariant(isPropSchema(propertyType), "couldn\'t resolve schema");\n        propSchema = Object.assign({}, propertyType, {\n            pattern: targetOrPattern\n        });\n    }\n    function decorator(target) {\n        invariant(typeof target === "function", "@serializeAll can only be used as class decorator");\n        var info = getDefaultModelSchema(target);\n        if (!info) {\n            info = createModelSchema(target, {});\n            setDefaultModelSchema(target, info);\n        }\n        info.props["*"] = propSchema;\n        return target;\n    }\n    return decorator;\n}\n\n/*\n * Deserialization\n */\n/**\n * Cancels an asynchronous deserialization or update operation for the specified target object.\n * @param instance object that was previously returned from deserialize or update method\n */\nfunction cancelDeserialize(instance) {\n    invariant(typeof instance === "object" && instance && !Array.isArray(instance), "cancelDeserialize needs an object");\n    var context = getTargetContext(instance);\n    if (context) {\n        context.cancelAwaits();\n    }\n}\n\n/*\n * Update\n */\nfunction update(modelSchema, target, json, callback, customArgs) {\n    var inferModelSchema = arguments.length === 2 || typeof arguments[2] === "function"; // only target and json // callback as third arg\n    if (inferModelSchema) {\n        target = arguments[0];\n        modelSchema = getDefaultModelSchema(target);\n        json = arguments[1];\n        callback = arguments[2];\n        customArgs = arguments[3];\n    }\n    else {\n        modelSchema = getDefaultModelSchema(modelSchema);\n    }\n    invariant(isModelSchema(modelSchema), "update failed to determine schema");\n    invariant(typeof target === "object" && target && !Array.isArray(target), "update needs an object");\n    var context = new Context(undefined, modelSchema, json, callback || GUARDED_NOOP, customArgs);\n    context.setTarget(target);\n    var lock = context.createCallback(GUARDED_NOOP);\n    var result = deserializePropsWithSchema(context, modelSchema, json, target);\n    lock();\n    return result;\n}\n\nvar defaultRegisterFunction = function (id, value, context) {\n    context.rootContext.resolve(context.modelSchema, id, context.target);\n};\nfunction identifier(arg1, arg2) {\n    var registerFn;\n    var additionalArgs;\n    if (typeof arg1 === "function") {\n        registerFn = arg1;\n        additionalArgs = arg2;\n    }\n    else {\n        additionalArgs = arg1;\n    }\n    invariant(!additionalArgs || typeof additionalArgs === "object", "Additional property arguments should be an object, register function should be omitted or a funtion");\n    var result = {\n        identifier: true,\n        serializer: _defaultPrimitiveProp.serializer,\n        deserializer: function (jsonValue, done, context) {\n            _defaultPrimitiveProp.deserializer(jsonValue, function (err, id) {\n                defaultRegisterFunction(id, context.target, context);\n                if (registerFn)\n                    registerFn(id, context.target, context);\n                done(err, id);\n            }, context);\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\n/**\n * Similar to primitive, serializes instances of Date objects\n *\n * @param additionalArgs optional object that contains beforeDeserialize and/or afterDeserialize handlers\n */\nfunction date(additionalArgs) {\n    // TODO: add format option?\n    var result = {\n        serializer: function (value) {\n            if (value === null || value === undefined)\n                return value;\n            invariant(value instanceof Date, "Expected Date object");\n            return value.getTime();\n        },\n        deserializer: function (jsonValue, done) {\n            if (jsonValue === null || jsonValue === undefined)\n                return void done(null, jsonValue);\n            return void done(null, new Date(jsonValue));\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\n/**\n * Alias indicates that this model property should be named differently in the generated json.\n * Alias should be the outermost propschema.\n *\n * @example\n * createModelSchema(Todo, {\n *     title: alias(\'task\', primitive()),\n * })\n *\n * serialize(new Todo(\'test\')) // { "task": "test" }\n *\n * @param name name of the json field to be used for this property\n * @param propSchema propSchema to (de)serialize the contents of this field\n */\nfunction alias(name, propSchema) {\n    invariant(name && typeof name === "string", "expected prop name as first argument");\n    propSchema = !propSchema || propSchema === true ? _defaultPrimitiveProp : propSchema;\n    invariant(isPropSchema(propSchema), "expected prop schema as second argument");\n    invariant(!isAliasedPropSchema(propSchema), "provided prop is already aliased");\n    return {\n        jsonname: name,\n        serializer: propSchema.serializer,\n        deserializer: propSchema.deserializer,\n        identifier: isIdentifierPropSchema(propSchema) || undefined,\n        beforeDeserialize: propSchema.beforeDeserialize,\n        afterDeserialize: propSchema.afterDeserialize\n    };\n}\n\nfunction custom(serializer, deserializer, additionalArgs) {\n    invariant(typeof serializer === "function", "first argument should be function");\n    invariant(typeof deserializer === "function", "second argument should be a function or promise");\n    var result = {\n        serializer: serializer,\n        deserializer: function (jsonValue, done, context, oldValue) {\n            var result = deserializer(jsonValue, context, oldValue, done);\n            // FIXME: checking for result === undefined instead of Function.length\n            // would be nicer, but strictly speaking a breaking change.\n            if (deserializer.length !== 4) {\n                done(null, result);\n            }\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\n/**\n * Optional indicates that this model property shouldn\'t be serialized if it isn\'t present.\n *\n * Note that if we use `optional` together with another prop schema such as `custom`,\n * the prop schema for `custom` will be applied first and the result of that serialization\n * will be used to feed into `optional`.\n *\n * @example\n * createModelSchema(Todo, {\n *     title: optional(primitive()),\n *     user: optional(custom(value => value.name, () => SKIP))\n * })\n *\n * serialize(new Todo()) // {}\n *\n * @param propSchema propSchema to (de)serialize the contents of this field\n */\nfunction optional(propSchema) {\n    propSchema = !propSchema || propSchema === true ? _defaultPrimitiveProp : propSchema;\n    invariant(isPropSchema(propSchema), "expected prop schema as second argument");\n    var propSerializer = propSchema.serializer;\n    invariant(typeof propSerializer === "function", "expected prop schema to have a callable serializer");\n    var serializer = function (sourcePropertyValue, key, sourceObject) {\n        var result = propSerializer(sourcePropertyValue, key, sourceObject);\n        if (result === undefined) {\n            return SKIP;\n        }\n        return result;\n    };\n    return Object.assign({}, propSchema, { serializer: serializer });\n}\n\nfunction createDefaultRefLookup(modelSchema) {\n    return function resolve(uuid, cb, context) {\n        context.rootContext.await(modelSchema, uuid, cb);\n    };\n}\nfunction reference(target, lookupFnOrAdditionalPropArgs, additionalArgs) {\n    invariant(!!target, "No modelSchema provided. If you are importing it from another file be aware of circular dependencies.");\n    var lookupFn = "function" === typeof lookupFnOrAdditionalPropArgs\n        ? lookupFnOrAdditionalPropArgs\n        : undefined;\n    additionalArgs =\n        additionalArgs ||\n            (lookupFn ? undefined : lookupFnOrAdditionalPropArgs);\n    var initialized = false;\n    var childIdentifierAttribute;\n    function initialize() {\n        initialized = true;\n        invariant(typeof target !== "string" || typeof lookupFn === "function", "if the reference target is specified by attribute name, a lookup function is required");\n        invariant(!lookupFn || typeof lookupFn === "function", "second argument should be a lookup function or additional arguments object");\n        if (typeof target === "string") {\n            childIdentifierAttribute = target;\n        }\n        else {\n            var modelSchema = getDefaultModelSchema(target);\n            invariant(isModelSchema(modelSchema), "expected model schema or string as first argument for \'ref\', got " + modelSchema);\n            lookupFn = lookupFn || createDefaultRefLookup(modelSchema);\n            childIdentifierAttribute = getIdentifierProp(modelSchema);\n            invariant(!!childIdentifierAttribute, "provided model schema doesn\'t define an identifier() property and cannot be used by \'ref\'.");\n        }\n    }\n    var result = {\n        serializer: function (item) {\n            if (!initialized)\n                initialize();\n            return item ? item[childIdentifierAttribute] : null;\n        },\n        deserializer: function (identifierValue, done, context) {\n            if (!initialized)\n                initialize();\n            if (identifierValue === null || identifierValue === undefined)\n                done(null, identifierValue);\n            else\n                lookupFn(identifierValue, done, context);\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\n/**\n * List indicates that this property contains a list of things.\n * Accepts a sub model schema to serialize the contents\n *\n * @example\n * class SubTask {}\n * class Task {}\n * class Todo {}\n *\n * createModelSchema(SubTask, {\n *     title: true,\n * })\n * createModelSchema(Todo, {\n *     title: true,\n *     subTask: list(object(SubTask)),\n * })\n *\n * const todo = deserialize(Todo, {\n *     title: \'Task\',\n *     subTask: [\n *         {\n *             title: \'Sub task 1\',\n *         },\n *     ],\n * })\n *\n * @param propSchema to be used to (de)serialize the contents of the array\n * @param additionalArgs optional object that contains beforeDeserialize and/or afterDeserialize handlers\n */\nfunction list(propSchema, additionalArgs) {\n    propSchema = propSchema || _defaultPrimitiveProp;\n    invariant(isPropSchema(propSchema), "expected prop schema as first argument");\n    invariant(!isAliasedPropSchema(propSchema), "provided prop is aliased, please put aliases first");\n    var result = {\n        serializer: function (ar) {\n            if (ar === undefined) {\n                return SKIP;\n            }\n            invariant(ar && "length" in ar && "map" in ar, "expected array (like) object");\n            return ar.map(propSchema.serializer);\n        },\n        deserializer: function (jsonArray, done, context) {\n            if (!Array.isArray(jsonArray))\n                return void done("[serializr] expected JSON array");\n            function processItem(jsonValue, onItemDone, itemIndex) {\n                function callbackBefore(err, value) {\n                    if (!err) {\n                        propSchema.deserializer(value, deserializeDone, context);\n                    }\n                    else {\n                        onItemDone(err);\n                    }\n                }\n                function deserializeDone(err, value) {\n                    if (typeof propSchema.afterDeserialize === "function") {\n                        onAfterDeserialize(onItemDone, err, value, jsonValue, jsonArray, itemIndex, context, propSchema);\n                    }\n                    else {\n                        onItemDone(err, value);\n                    }\n                }\n                onBeforeDeserialize(callbackBefore, jsonValue, jsonArray, itemIndex, context, propSchema);\n            }\n            parallel(jsonArray, processItem, function (err, result) {\n                if (err) {\n                    return void done(err);\n                }\n                done(undefined, result.filter(function (x) { return SKIP !== x; }));\n            });\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\n/**\n * Similar to list, but map represents a string keyed dynamic collection.\n * This can be both plain objects (default) or ES6 Map like structures.\n * This will be inferred from the initial value of the targetted attribute.\n *\n * @param additionalArgs optional object that contains beforeDeserialize and/or afterDeserialize handlers\n */\nfunction map(propSchema, additionalArgs) {\n    propSchema = propSchema || _defaultPrimitiveProp;\n    invariant(isPropSchema(propSchema), "expected prop schema as first argument");\n    invariant(!isAliasedPropSchema(propSchema), "provided prop is aliased, please put aliases first");\n    var result = {\n        serializer: function (m) {\n            invariant(m && typeof m === "object", "expected object or Map");\n            var result = {};\n            if (isMapLike(m)) {\n                m.forEach(function (value, key) { return (result[key] = propSchema.serializer(value, key, m)); });\n            }\n            else {\n                for (var key in m)\n                    result[key] = propSchema.serializer(m[key], key, m);\n            }\n            return result;\n        },\n        deserializer: function (jsonObject, done, context, oldValue) {\n            if (!jsonObject || typeof jsonObject !== "object")\n                return void done("[serializr] expected JSON object");\n            var keys = Object.keys(jsonObject);\n            list(propSchema, additionalArgs).deserializer(keys.map(function (key) {\n                return jsonObject[key];\n            }), function (err, values) {\n                if (err)\n                    return void done(err);\n                var isMap = isMapLike(oldValue);\n                var newValue;\n                if (isMap) {\n                    // if the oldValue is a map, we recycle it\n                    // there are many variations and this way we don\'t have to\n                    // know about the original constructor\n                    oldValue.clear();\n                    newValue = oldValue;\n                }\n                else\n                    newValue = {};\n                for (var i = 0, l = keys.length; i < l; i++)\n                    if (isMap)\n                        newValue.set(keys[i], values[i]);\n                    else\n                        newValue[keys[i]] = values[i];\n                done(null, newValue);\n            }, context);\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\n/**\n * Similar to map, mapAsArray can be used to serialize a map-like collection where the key is\n * contained in the \'value object\'. Example: consider Map<id: number, customer: Customer> where the\n * Customer object has the id stored on itself. mapAsArray stores all values from the map into an\n * array which is serialized. Deserialization returns a ES6 Map or plain object object where the\n * `keyPropertyName` of each object is used for keys. For ES6 maps this has the benefit of being\n * allowed to have non-string keys in the map. The serialized json also may be slightly more\n * compact.\n *\n * @param keyPropertyName - the property of stored objects used as key in the map\n * @param additionalArgs optional object that contains beforeDeserialize and/or afterDeserialize handlers\n */\nfunction mapAsArray(propSchema, keyPropertyName, additionalArgs) {\n    propSchema = propSchema || _defaultPrimitiveProp;\n    invariant(isPropSchema(propSchema), "expected prop schema as first argument");\n    invariant(!!keyPropertyName, "expected key property name as second argument");\n    var result = {\n        serializer: function (m) {\n            invariant(m && typeof m === "object", "expected object or Map");\n            var result = [];\n            // eslint-disable-next-line no-unused-vars\n            if (isMapLike(m)) {\n                m.forEach(function (value, key) { return result.push(propSchema.serializer(value, key, m)); });\n            }\n            else {\n                for (var key in m)\n                    result.push(propSchema.serializer(m[key], key, m));\n            }\n            return result;\n        },\n        deserializer: function (jsonArray, done, context, oldValue) {\n            list(propSchema, additionalArgs).deserializer(jsonArray, function (err, values) {\n                if (err)\n                    return void done(err);\n                var oldValueIsMap = isMapLike(oldValue);\n                var newValue;\n                if (oldValueIsMap) {\n                    oldValue.clear();\n                    newValue = oldValue;\n                }\n                else {\n                    newValue = {};\n                }\n                for (var i = 0, l = jsonArray.length; i < l; i++)\n                    if (oldValueIsMap)\n                        newValue.set(values[i][keyPropertyName], values[i]);\n                    else\n                        newValue[values[i][keyPropertyName].toString()] = values[i];\n                done(null, newValue);\n            }, context, undefined);\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\n/**\n * Indicates that this field is only need to putted in the serialized json or\n * deserialized instance, without any transformations. Stay with its original value\n *\n * @example\n * createModelSchema(Model, {\n *     rawData: raw(),\n * })\n *\n * serialize(new Model({ rawData: { a: 1, b: [], c: {} } } }))\n * // { "rawData": { a: 1, b: [], c: {} } } }\n *\n * @param additionalArgs optional object that contains beforeDeserialize and/or afterDeserialize handlers\n */\nfunction raw(additionalArgs) {\n    var result = {\n        serializer: function (value) {\n            return value;\n        },\n        deserializer: function (jsonValue, done) {\n            return void done(null, jsonValue);\n        }\n    };\n    result = processAdditionalPropArgs(result, additionalArgs);\n    return result;\n}\n\n\n//# sourceMappingURL=serializr.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2VyaWFsaXpyL2xpYi9lcy9zZXJpYWxpenIuanM/OTY3ZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSx1Q0FBdUMsNkJBQTZCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxhQUFhLEVBQUUsU0FBUztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaURBQWlELFFBQVE7QUFDekQsd0NBQXdDLFFBQVE7QUFDaEQsd0RBQXdELFFBQVE7QUFDaEU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osaUJBQWlCLE9BQU87QUFDeEIsbUJBQW1CLFNBQVMsTUFBTTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwREFBMEQ7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZEO0FBQzdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSwrQkFBK0IsK0JBQStCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RDtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLCtDQUErQyxFQUFFO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsZ0JBQWdCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCwyQ0FBMkMsRUFBRTtBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLDJEQUEyRCxRQUFRO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxxQ0FBcUMsRUFBRTtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHlCQUF5QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLDZDQUE2QyxFQUFFO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxnQkFBZ0I7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RkFBd0Y7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZUFBZSx5QkFBeUI7QUFDbkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELG1CQUFtQixFQUFFO0FBQ2pGLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDZEQUE2RCxFQUFFO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsT0FBTztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsMERBQTBELEVBQUU7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELE9BQU87QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esd0JBQXdCLFdBQVcsbUJBQW1CLEVBQUUsRUFBRSxFQUFFO0FBQzVELE9BQU8sYUFBYSxtQkFBbUIsRUFBRSxFQUFFO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUV5UjtBQUN6UiIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVzIGEgbW9kZWwgc2NoZW1hIHRoYXQgKGRlKXNlcmlhbGl6ZXMgZnJvbSAvIHRvIHBsYWluIGphdmFzY3JpcHQgb2JqZWN0cy5cbiAqIEl0cyBmYWN0b3J5IG1ldGhvZCBpczogYCgpID0+ICh7fSlgXG4gKlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IHRvZG9TY2hlbWEgPSBjcmVhdGVTaW1wbGVTY2hlbWEoe1xuICogICAgIHRpdGxlOiB0cnVlLFxuICogICAgIGRvbmU6IHRydWUsXG4gKiB9KVxuICpcbiAqIGNvbnN0IGpzb24gPSBzZXJpYWxpemUodG9kb1NjaGVtYSwgeyB0aXRsZTogJ1Rlc3QnLCBkb25lOiBmYWxzZSB9KVxuICogY29uc3QgdG9kbyA9IGRlc2VyaWFsaXplKHRvZG9TY2hlbWEsIGpzb24pXG4gKlxuICogQHBhcmFtIHByb3BzIHByb3BlcnR5IG1hcHBpbmcsXG4gKiBAcmV0dXJucyBtb2RlbCBzY2hlbWFcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU2ltcGxlU2NoZW1hKHByb3BzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmFjdG9yeTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9LFxuICAgICAgICBwcm9wczogcHJvcHNcbiAgICB9O1xufVxuXG52YXIgZm9ybWF0dGVycyA9IHtcbiAgICBqOiBmdW5jdGlvbiBqc29uKHYpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBcIltVbmV4cGVjdGVkSlNPTlBhcnNlRXJyb3JdOiBcIiArIGVycm9yLm1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGw6IGZ1bmN0aW9uIHN5bWJvbChzKSB7XG4gICAgICAgIHJldHVybiBzLnRvU3RyaW5nKCk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgICB2YXIgdmFyaWFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyaWFibGVzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgICB2YXIgdmFyaWFibGVzVG9Mb2dfMSA9IFtdO1xuICAgICAgICB2YXIgaW5kZXhfMSA9IDA7XG4gICAgICAgIHZhciBmb3JtYXR0ZWRNZXNzYWdlID0gbWVzc2FnZS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywgZnVuY3Rpb24gKG1hdGNoLCBmb3JtYXQpIHtcbiAgICAgICAgICAgIGlmIChtYXRjaCA9PT0gXCIlJVwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgICAgIHZhciBmb3JtYXR0ZXIgPSBmb3JtYXR0ZXJzW2Zvcm1hdF07XG4gICAgICAgICAgICBpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhcmlhYmxlID0gdmFyaWFibGVzW2luZGV4XzErK107XG4gICAgICAgICAgICAgICAgdmFyaWFibGVzVG9Mb2dfMS5wdXNoKHZhcmlhYmxlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVyKHZhcmlhYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjb25zb2xlICYmIHZhcmlhYmxlc1RvTG9nXzEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIHZhcmlhYmxlc1RvTG9nXzEpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIltzZXJpYWxpenJdIFwiICsgKGZvcm1hdHRlZE1lc3NhZ2UgfHwgXCJJbGxlZ2FsIFN0YXRlXCIpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEdVQVJERURfTk9PUChlcnIpIHtcbiAgICBpZiAoZXJyKVxuICAgICAgICAvLyB1bmd1YXJkZWQgZXJyb3IuLi5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XG59XG5mdW5jdGlvbiBvbmNlKGZuKSB7XG4gICAgdmFyIGZpcmVkID0gZmFsc2U7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFmaXJlZCkge1xuICAgICAgICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgaW52YXJpYW50KGZhbHNlLCBcImNhbGxiYWNrIHdhcyBpbnZva2VkIHR3aWNlXCIpO1xuICAgIH07XG59XG5mdW5jdGlvbiBwYXJhbGxlbChhciwgcHJvY2Vzc29yLCBjYikge1xuICAgIC8vIFRPRE86IGxpbWl0IHBhcmFsbGVsaXphdGlvbj9cbiAgICBpZiAoYXIubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gdm9pZCBjYihudWxsLCBbXSk7XG4gICAgdmFyIGxlZnQgPSBhci5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHRydWU7IH0pLmxlbmd0aDsgLy8gb25seSBjb3VudCBpdGVtcyBwcm9jZXNzZWQgYnkgZm9yRWFjaFxuICAgIHZhciByZXN1bHRBcnJheSA9IFtdO1xuICAgIHZhciBmYWlsZWQgPSBmYWxzZTtcbiAgICBhci5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaWR4KSB7XG4gICAgICAgIHByb2Nlc3Nvcih2YWx1ZSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFmYWlsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY2IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRBcnJheVtpZHhdID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICgtLWxlZnQgPT09IDApXG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHJlc3VsdEFycmF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaWR4KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiO1xufVxuZnVuY3Rpb24gaXNNb2RlbFNjaGVtYSh0aGluZykge1xuICAgIHJldHVybiB0aGluZyAmJiB0aGluZy5mYWN0b3J5ICYmIHRoaW5nLnByb3BzO1xufVxuZnVuY3Rpb24gaXNQcm9wU2NoZW1hKHRoaW5nKSB7XG4gICAgcmV0dXJuIHRoaW5nICYmIHRoaW5nLnNlcmlhbGl6ZXIgJiYgdGhpbmcuZGVzZXJpYWxpemVyO1xufVxuZnVuY3Rpb24gaXNBbGlhc2VkUHJvcFNjaGVtYShwcm9wU2NoZW1hKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBwcm9wU2NoZW1hID09PSBcIm9iamVjdFwiICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHByb3BTY2hlbWEuanNvbm5hbWU7XG59XG5mdW5jdGlvbiBpc0lkZW50aWZpZXJQcm9wU2NoZW1hKHByb3BTY2hlbWEpIHtcbiAgICByZXR1cm4gdHlwZW9mIHByb3BTY2hlbWEgPT09IFwib2JqZWN0XCIgJiYgcHJvcFNjaGVtYS5pZGVudGlmaWVyID09PSB0cnVlO1xufVxuZnVuY3Rpb24gaXNBc3NpZ25hYmxlVG8oYWN0dWFsVHlwZSwgZXhwZWN0ZWRUeXBlKSB7XG4gICAgdmFyIGN1cnJlbnRBY3R1YWxUeXBlID0gYWN0dWFsVHlwZTtcbiAgICB3aGlsZSAoY3VycmVudEFjdHVhbFR5cGUpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRBY3R1YWxUeXBlID09PSBleHBlY3RlZFR5cGUpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY3VycmVudEFjdHVhbFR5cGUgPSBjdXJyZW50QWN0dWFsVHlwZS5leHRlbmRzO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc01hcExpa2UodGhpbmcpIHtcbiAgICByZXR1cm4gdGhpbmcgJiYgdHlwZW9mIHRoaW5nLmtleXMgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgdGhpbmcuY2xlYXIgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIGdldElkZW50aWZpZXJQcm9wKG1vZGVsU2NoZW1hKSB7XG4gICAgaW52YXJpYW50KGlzTW9kZWxTY2hlbWEobW9kZWxTY2hlbWEpLCBcIm1vZGVsU2NoZW1hIG11c3QgYmUgYSBNb2RlbFNjaGVtYVwiKTtcbiAgICAvLyBvcHRpbWl6YXRpb246IGNhY2hlIHRoaXMgbG9va3VwXG4gICAgdmFyIGN1cnJlbnRNb2RlbFNjaGVtYSA9IG1vZGVsU2NoZW1hO1xuICAgIHdoaWxlIChjdXJyZW50TW9kZWxTY2hlbWEpIHtcbiAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gY3VycmVudE1vZGVsU2NoZW1hLnByb3BzKVxuICAgICAgICAgICAgaWYgKGlzSWRlbnRpZmllclByb3BTY2hlbWEoY3VycmVudE1vZGVsU2NoZW1hLnByb3BzW3Byb3BOYW1lXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3BOYW1lO1xuICAgICAgICBjdXJyZW50TW9kZWxTY2hlbWEgPSBjdXJyZW50TW9kZWxTY2hlbWEuZXh0ZW5kcztcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NBZGRpdGlvbmFsUHJvcEFyZ3MocHJvcFNjaGVtYSwgYWRkaXRpb25hbEFyZ3MpIHtcbiAgICBpZiAoYWRkaXRpb25hbEFyZ3MpIHtcbiAgICAgICAgaW52YXJpYW50KGlzUHJvcFNjaGVtYShwcm9wU2NoZW1hKSwgXCJleHBlY3RlZCBhIHByb3BTY2hlbWFcIik7XG4gICAgICAgIE9iamVjdC5hc3NpZ24ocHJvcFNjaGVtYSwgYWRkaXRpb25hbEFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcFNjaGVtYTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzdGFuZGFyZCBtb2RlbCBzY2hlbWEgYXNzb2NpYXRlZCB3aXRoIGEgY2xhc3MgLyBjb25zdHJ1Y3RvciBmdW5jdGlvblxuICpcbiAqL1xuZnVuY3Rpb24gZ2V0RGVmYXVsdE1vZGVsU2NoZW1hKHRoaW5nKSB7XG4gICAgaWYgKCF0aGluZylcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAoaXNNb2RlbFNjaGVtYSh0aGluZykpXG4gICAgICAgIHJldHVybiB0aGluZztcbiAgICBpZiAoaXNNb2RlbFNjaGVtYSh0aGluZy5zZXJpYWxpemVJbmZvKSlcbiAgICAgICAgcmV0dXJuIHRoaW5nLnNlcmlhbGl6ZUluZm87XG4gICAgaWYgKHRoaW5nLmNvbnN0cnVjdG9yICYmIHRoaW5nLmNvbnN0cnVjdG9yLnNlcmlhbGl6ZUluZm8pXG4gICAgICAgIHJldHVybiB0aGluZy5jb25zdHJ1Y3Rvci5zZXJpYWxpemVJbmZvO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGRlZmF1bHQgbW9kZWwgc2NoZW1hIGZvciBjbGFzcyAvIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICogRXZlcnl3aGVyZSB3aGVyZSBhIG1vZGVsIHNjaGVtYSBpcyByZXF1aXJlZCBhcyBhcmd1bWVudCwgdGhpcyBjbGFzcyAvIGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gKiBjYW4gYmUgcGFzc2VkIGluIGFzIHdlbGwgKGZvciBleGFtcGxlIHdoZW4gdXNpbmcgYG9iamVjdGAgb3IgYHJlZmAuXG4gKlxuICogV2hlbiBwYXNzaW5nIGFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MgdG8gYHNlcmlhbGl6ZWAsIGl0IGlzIG5vdCByZXF1aXJlZCB0byBwYXNzIHRoZSBtb2RlbCBzY2hlbWFcbiAqIGFzIGZpcnN0IGFyZ3VtZW50IGFueW1vcmUsIGJlY2F1c2UgdGhlIGRlZmF1bHQgc2NoZW1hIHdpbGwgYmUgaW5mZXJyZWQgZnJvbSB0aGUgaW5zdGFuY2UgdHlwZS5cbiAqXG4gKiBAcGFyYW0gY2xhenogY2xhc3Mgb3IgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAqIEBwYXJhbSBtb2RlbFNjaGVtYSAtIGEgbW9kZWwgc2NoZW1hXG4gKiBAcmV0dXJucyBtb2RlbCBzY2hlbWFcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdE1vZGVsU2NoZW1hKGNsYXp6LCBtb2RlbFNjaGVtYSkge1xuICAgIGludmFyaWFudChpc01vZGVsU2NoZW1hKG1vZGVsU2NoZW1hKSwgXCJleHBlY3RlZCBtb2RlbFNjaGVtYSwgZ290IFwiICsgbW9kZWxTY2hlbWEpO1xuICAgIGNsYXp6LnNlcmlhbGl6ZUluZm8gPSBtb2RlbFNjaGVtYTtcbiAgICByZXR1cm4gbW9kZWxTY2hlbWE7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1vZGVsIHNjaGVtYSB0aGF0IChkZSlzZXJpYWxpemVzIGFuIG9iamVjdCBjcmVhdGVkIGJ5IGEgY29uc3RydWN0b3IgZnVuY3Rpb24gKGNsYXNzKS5cbiAqIFRoZSBjcmVhdGVkIG1vZGVsIHNjaGVtYSBpcyBhc3NvY2lhdGVkIGJ5IHRoZSB0YXJnZXRlZCB0eXBlIGFzIGRlZmF1bHQgbW9kZWwgc2NoZW1hLCBzZWUgc2V0RGVmYXVsdE1vZGVsU2NoZW1hLlxuICogSXRzIGZhY3RvcnkgbWV0aG9kIGlzIGAoKSA9PiBuZXcgY2xhenooKWAgKHVubGVzcyBvdmVycmlkZW4sIHNlZSB0aGlyZCBhcmcpLlxuICpcbiAqIEBleGFtcGxlXG4gKiBmdW5jdGlvbiBUb2RvKHRpdGxlLCBkb25lKSB7XG4gKiAgICAgdGhpcy50aXRsZSA9IHRpdGxlXG4gKiAgICAgdGhpcy5kb25lID0gZG9uZVxuICogfVxuICpcbiAqIGNyZWF0ZU1vZGVsU2NoZW1hKFRvZG8sIHtcbiAqICAgICB0aXRsZTogdHJ1ZSxcbiAqICAgICBkb25lOiB0cnVlLFxuICogfSlcbiAqXG4gKiBjb25zdCBqc29uID0gc2VyaWFsaXplKG5ldyBUb2RvKCdUZXN0JywgZmFsc2UpKVxuICogY29uc3QgdG9kbyA9IGRlc2VyaWFsaXplKFRvZG8sIGpzb24pXG4gKlxuICogQHBhcmFtIGNsYXp6IGNsYXNzIG9yIGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gKiBAcGFyYW0gcHJvcHMgcHJvcGVydHkgbWFwcGluZ1xuICogQHBhcmFtIGZhY3Rvcnkgb3B0aW9uYWwgY3VzdG9tIGZhY3RvcnkuIFJlY2VpdmVzIGNvbnRleHQgYXMgZmlyc3QgYXJnXG4gKiBAcmV0dXJucyBtb2RlbCBzY2hlbWFcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTW9kZWxTY2hlbWEoY2xhenosIHByb3BzLCBmYWN0b3J5KSB7XG4gICAgaW52YXJpYW50KGNsYXp6ICE9PSBPYmplY3QsIFwib25lIGNhbm5vdCBzaW1wbHkgcHV0IGRlZmluZSBhIG1vZGVsIHNjaGVtYSBmb3IgT2JqZWN0XCIpO1xuICAgIGludmFyaWFudCh0eXBlb2YgY2xhenogPT09IFwiZnVuY3Rpb25cIiwgXCJleHBlY3RlZCBjb25zdHJ1Y3RvciBmdW5jdGlvblwiKTtcbiAgICB2YXIgbW9kZWwgPSB7XG4gICAgICAgIHRhcmdldENsYXNzOiBjbGF6eixcbiAgICAgICAgZmFjdG9yeTogZmFjdG9yeSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgY2xhenooKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIHByb3BzOiBwcm9wc1xuICAgIH07XG4gICAgLy8gZmluZCBzdXBlciBtb2RlbFxuICAgIGlmIChjbGF6ei5wcm90b3R5cGUuY29uc3RydWN0b3IgIT09IE9iamVjdCkge1xuICAgICAgICB2YXIgcyA9IGdldERlZmF1bHRNb2RlbFNjaGVtYShjbGF6ei5wcm90b3R5cGUuY29uc3RydWN0b3IpO1xuICAgICAgICBpZiAocyAmJiBzLnRhcmdldENsYXNzICE9PSBjbGF6eilcbiAgICAgICAgICAgIG1vZGVsLmV4dGVuZHMgPSBzO1xuICAgIH1cbiAgICBzZXREZWZhdWx0TW9kZWxTY2hlbWEoY2xhenosIG1vZGVsKTtcbiAgICByZXR1cm4gbW9kZWw7XG59XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG5mdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XG5cbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgdGhpcyBmaWVsZCBjb250YWlucyBhIHByaW1pdGl2ZSB2YWx1ZSAob3IgRGF0ZSkgd2hpY2ggc2hvdWxkIGJlIHNlcmlhbGl6ZWQgbGl0ZXJhbGx5IHRvIGpzb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGNyZWF0ZU1vZGVsU2NoZW1hKFRvZG8sIHtcbiAqICAgICB0aXRsZTogcHJpbWl0aXZlKCksXG4gKiB9KVxuICpcbiAqIHNlcmlhbGl6ZShuZXcgVG9kbygndGVzdCcpKSAvLyB7IFwidGl0bGVcIjogXCJ0ZXN0XCIgfVxuICpcbiAqIEBwYXJhbSBhZGRpdGlvbmFsQXJncyBvcHRpb25hbCBvYmplY3QgdGhhdCBjb250YWlucyBiZWZvcmVEZXNlcmlhbGl6ZSBhbmQvb3IgYWZ0ZXJEZXNlcmlhbGl6ZSBoYW5kbGVyc1xuICovXG5mdW5jdGlvbiBwcmltaXRpdmUoYWRkaXRpb25hbEFyZ3MpIHtcbiAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICBzZXJpYWxpemVyOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGludmFyaWFudChpc1ByaW1pdGl2ZSh2YWx1ZSksIFwidGhpcyB2YWx1ZSBpcyBub3QgcHJpbWl0aXZlOiBcIiArIHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVzZXJpYWxpemVyOiBmdW5jdGlvbiAoanNvblZhbHVlLCBkb25lKSB7XG4gICAgICAgICAgICBpZiAoIWlzUHJpbWl0aXZlKGpzb25WYWx1ZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgZG9uZShcIltzZXJpYWxpenJdIHRoaXMgdmFsdWUgaXMgbm90IHByaW1pdGl2ZTogXCIgKyBqc29uVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgZG9uZShudWxsLCBqc29uVmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXN1bHQgPSBwcm9jZXNzQWRkaXRpb25hbFByb3BBcmdzKHJlc3VsdCwgYWRkaXRpb25hbEFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogSWYgeW91IHdhbnQgdG8gc2tpcCBzZXJpYWxpemF0aW9uIG9yIGRlc2VyaWFsaXphdGlvbiwgeW91IGNhbiB1c2UgU0tJUC5cbiAqXG4gKiBAZXhhbXBsZVxuICogY29uc3Qgc2NoZW1hID0gY3JlYXRlU2ltcGxlU2NoZW1hKHtcbiAqICAgICBhOiBjdXN0b20oXG4gKiAgICAgICAgICgpID0+IFNLSVAsXG4gKiAgICAgICAgIHYgPT4gdixcbiAqICAgICApLFxuICogfSlcbiAqIHNlcmlhbGl6ZShzLCB7IGE6IDQgfSkgLy8ge31cbiAqIGRlc2VyaWFsaXplKHMsIHsgXCJhXCI6IDQgfSkgLy8geyBhOiA0IH1cbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gU2tpcHBpbmcgZGVzZXJpYWxpemF0aW9uIHdpdGggY29tcHV0ZWQgbW9ieCBwcm9wZXJ0eS5cbiAqXG4gKiBjbGFzcyBUb2RvU3RhdGUge1xuICogICAgIC8vIFRvZG8uY2F0ZWdvcnkgaXMgQHNlcmlhbGl6YWJsZShyZWZlcmVuY2UoLi4uKSlcbiAqICAgICBcXEBzZXJpYWxpemFibGUobGlzdChvYmplY3QoVG9kbykpKVxuICogICAgIFxcQG9ic2VydmFibGVcbiAqICAgICB0b2RvczogVG9kb1tdXG4gKlxuICogICAgIC8vIHdlIHdhbnQgdG8gc2VyaWFsaXplIHRoZSBjYXRlZ29yaWVzLCBzbyB0aGF0IHRoZSByZWZlcmVuY2VzIGluXG4gKiAgICAgLy8gdGhpcy50b2RvcyBjYW4gYmUgcmVzb2x2ZWQsIGJ1dCB3ZSBkb24ndCB3YW50IHRvIHNldCB0aGlzIHByb3BlcnR5XG4gKiAgICAgXFxAc2VyaWFsaXphYmxlKFxuICogICAgICAgICBsaXN0KG9iamVjdChUb2RvQ2F0ZWdvcnkpLFxuICogICAgICAgICB7IGFmdGVyRGVzZXJpYWxpemU6IGNhbGxiYWNrID0+IGNhbGxiYWNrKHVuZGVmaW5lZCwgU0tJUCkgfSkpXG4gKiAgICAgXFxAY29tcHV0ZWRcbiAqICAgICBnZXQgY2F0ZWdvcmllcygpIHtcbiAqICAgICAgICAgcmV0dXJuIHRoaXMudG9kb3MubWFwKHRvZG8gPT4gdG9kby5jYXRlZ29yeSlcbiAqICAgICB9XG4gKiB9XG4gKi9cbnZhciBTS0lQID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IFN5bWJvbChcIlNLSVBcIikgOiB7IFNLSVA6IHRydWUgfTtcbnZhciBfZGVmYXVsdFByaW1pdGl2ZVByb3AgPSBwcmltaXRpdmUoKTtcblxuLy8gVWdseSB3YXkgdG8gZ2V0IHRoZSBwYXJhbWV0ZXIgbmFtZXMgc2luY2UgdGhleSBhcmVuJ3QgZWFzaWx5IHJldHJpZXZhYmxlIHZpYSByZWZsZWN0aW9uXG52YXIgU1RSSVBfQ09NTUVOVFMgPSAvKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvZ207XG52YXIgQVJHVU1FTlRfTkFNRVMgPSAvKFteXFxzLF0rKS9nO1xuZnVuY3Rpb24gZ2V0UGFyYW1OYW1lcyhmdW5jKSB7XG4gICAgdmFyIF9hO1xuICAgIHZhciBmblN0ciA9IGZ1bmMudG9TdHJpbmcoKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCBcIlwiKTtcbiAgICByZXR1cm4gX2EgPSBmblN0ci5zbGljZShmblN0ci5pbmRleE9mKFwiKFwiKSArIDEsIGZuU3RyLmluZGV4T2YoXCIpXCIpKS5tYXRjaChBUkdVTUVOVF9OQU1FUyksIChfYSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXSk7XG59XG5mdW5jdGlvbiBzZXJpYWxpemFibGVEZWNvcmF0b3IocHJvcFNjaGVtYSwgdGFyZ2V0LCBwcm9wTmFtZSwgZGVzY3JpcHRvcikge1xuICAgIGludmFyaWFudChhcmd1bWVudHMubGVuZ3RoID49IDIsIFwidG9vIGZldyBhcmd1bWVudHMuIFBsZWFzZSB1c2UgQHNlcmlhbGl6YWJsZSBhcyBwcm9wZXJ0eSBkZWNvcmF0b3JcIik7XG4gICAgLy8gRml4IGZvciBAc2VyaWFsaXphYmxlIHVzZWQgaW4gY2xhc3MgY29uc3RydWN0b3IgcGFyYW1zICh0eXBlc2NyaXB0KVxuICAgIHZhciBmYWN0b3J5O1xuICAgIGlmIChwcm9wTmFtZSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgIHR5cGVvZiB0YXJnZXQgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICB0YXJnZXQucHJvdG90eXBlICYmXG4gICAgICAgIGRlc2NyaXB0b3IgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICB0eXBlb2YgZGVzY3JpcHRvciA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBpbnZhcmlhbnQoaXNQcm9wU2NoZW1hKHByb3BTY2hlbWEpLCBcIkNvbnN0cnVjdG9yIHBhcmFtcyBtdXN0IHVzZSBhbGlhcyhuYW1lKVwiKTtcbiAgICAgICAgaW52YXJpYW50KGlzQWxpYXNlZFByb3BTY2hlbWEocHJvcFNjaGVtYSksIFwiQ29uc3RydWN0b3IgcGFyYW1zIG11c3QgdXNlIGFsaWFzKG5hbWUpXCIpO1xuICAgICAgICB2YXIgcGFyYW1OYW1lcyA9IGdldFBhcmFtTmFtZXModGFyZ2V0KTtcbiAgICAgICAgaWYgKHBhcmFtTmFtZXMubGVuZ3RoID49IGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIHByb3BOYW1lID0gcGFyYW1OYW1lc1tkZXNjcmlwdG9yXTtcbiAgICAgICAgICAgIHByb3BTY2hlbWEucGFyYW1OdW1iZXIgPSBkZXNjcmlwdG9yO1xuICAgICAgICAgICAgZGVzY3JpcHRvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBmYWN0b3J5IHNvIHRoZSBjb25zdHJ1Y3RvciBpcyBjYWxsZWQgcHJvcGVybHlcbiAgICAgICAgICAgIGZhY3RvcnkgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gW107XG4gICAgICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjb250ZXh0Lm1vZGVsU2NoZW1hLnByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gY29udGV4dC5tb2RlbFNjaGVtYS5wcm9wc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AucGFyYW1OdW1iZXIgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNbaV0gPSBjb250ZXh0Lmpzb25bcHJvcC5qc29ubmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXQuY29uc3RydWN0b3IubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfYSA9IHRhcmdldC5jb25zdHJ1Y3RvcikuYmluZC5hcHBseShfYSwgX19zcHJlYWRBcnJheXMoW3VuZGVmaW5lZF0sIHBhcmFtcykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbnZhcmlhbnQodHlwZW9mIHByb3BOYW1lID09PSBcInN0cmluZ1wiLCBcImluY29ycmVjdCB1c2FnZSBvZiBAc2VyaWFsaXphYmxlIGRlY29yYXRvclwiKTtcbiAgICB2YXIgaW5mbyA9IGdldERlZmF1bHRNb2RlbFNjaGVtYSh0YXJnZXQpO1xuICAgIGlmICghaW5mbyB8fCAhdGFyZ2V0LmNvbnN0cnVjdG9yLmhhc093blByb3BlcnR5KFwic2VyaWFsaXplSW5mb1wiKSlcbiAgICAgICAgaW5mbyA9IGNyZWF0ZU1vZGVsU2NoZW1hKHRhcmdldC5jb25zdHJ1Y3Rvciwge30sIGZhY3RvcnkpO1xuICAgIGlmIChpbmZvICYmIGluZm8udGFyZ2V0Q2xhc3MgIT09IHRhcmdldC5jb25zdHJ1Y3RvcilcbiAgICAgICAgLy8gZml4ZXMgdHlwZXNjcmlwdCBpc3N1ZSB0aGF0IHRlbmRzIHRvIGNvcHkgZmllbGRzIGZyb20gc3VwZXIgY29uc3RydWN0b3IgdG8gc3ViIGNvbnN0cnVjdG9yIGluIGV4dGVuZHNcbiAgICAgICAgaW5mbyA9IGNyZWF0ZU1vZGVsU2NoZW1hKHRhcmdldC5jb25zdHJ1Y3Rvciwge30sIGZhY3RvcnkpO1xuICAgIGluZm8ucHJvcHNbcHJvcE5hbWVdID0gcHJvcFNjaGVtYTtcbiAgICAvLyBNV0U6IHdoeSB3b24ndCBiYWJlbCB3b3JrIHdpdGhvdXQ/XG4gICAgaWYgKGRlc2NyaXB0b3IgJiYgIWRlc2NyaXB0b3IuZ2V0ICYmICFkZXNjcmlwdG9yLnNldClcbiAgICAgICAgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgcmV0dXJuIGRlc2NyaXB0b3I7XG59XG5mdW5jdGlvbiBzZXJpYWxpemFibGUodGFyZ2V0T3JQcm9wU2NoZW1hLCBrZXksIGJhc2VEZXNjcmlwdG9yKSB7XG4gICAgaWYgKCFrZXkpIHtcbiAgICAgICAgLy8gZGVjb3JhdGVkIHdpdGggcHJvcFNjaGVtYVxuICAgICAgICB2YXIgcHJvcFNjaGVtYSA9IHRhcmdldE9yUHJvcFNjaGVtYSA9PT0gdHJ1ZSA/IF9kZWZhdWx0UHJpbWl0aXZlUHJvcCA6IHRhcmdldE9yUHJvcFNjaGVtYTtcbiAgICAgICAgaW52YXJpYW50KGlzUHJvcFNjaGVtYShwcm9wU2NoZW1hKSwgXCJAc2VyaWFsaXphYmxlIGV4cGVjdHMgcHJvcCBzY2hlbWFcIik7XG4gICAgICAgIHZhciByZXN1bHQgPSBzZXJpYWxpemFibGVEZWNvcmF0b3IuYmluZChudWxsLCBwcm9wU2NoZW1hKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGRlY29yYXRlZCB3aXRob3V0IGFyZ3VtZW50cywgdHJlYXQgYXMgcHJpbWl0aXZlXG4gICAgICAgIHNlcmlhbGl6YWJsZURlY29yYXRvcihwcmltaXRpdmUoKSwgdGFyZ2V0T3JQcm9wU2NoZW1hLCBrZXksIGJhc2VEZXNjcmlwdG9yKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZShtb2RlbFNjaGVtYU9ySW5zdGFuY2UsIGFyZzIpIHtcbiAgICBpbnZhcmlhbnQoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyLCBcInNlcmlhbGl6ZSBleHBlY3RzIG9uZSBvciAyIGFyZ3VtZW50c1wiKTtcbiAgICB2YXIgaW5zdGFuY2UgPSAoKGFyZzIgIT09IG51bGwgJiYgYXJnMiAhPT0gdm9pZCAwID8gYXJnMiA6IG1vZGVsU2NoZW1hT3JJbnN0YW5jZSkpO1xuICAgIHZhciBzY2hlbWEgPSAoYXJnMiAmJiBtb2RlbFNjaGVtYU9ySW5zdGFuY2UpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGluc3RhbmNlKSkge1xuICAgICAgICBpZiAoaW5zdGFuY2UubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAvLyBkb24ndCBib3RoZXIgZmluZGluZyBhIHNjaGVtYVxuICAgICAgICBlbHNlIGlmICghc2NoZW1hKVxuICAgICAgICAgICAgc2NoZW1hID0gZ2V0RGVmYXVsdE1vZGVsU2NoZW1hKGluc3RhbmNlWzBdKTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHNjaGVtYSAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgIHNjaGVtYSA9IGdldERlZmF1bHRNb2RlbFNjaGVtYShzY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICghc2NoZW1hKSB7XG4gICAgICAgIHNjaGVtYSA9IGdldERlZmF1bHRNb2RlbFNjaGVtYShpbnN0YW5jZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBzY2hlbWEgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgc2NoZW1hID0gZ2V0RGVmYXVsdE1vZGVsU2NoZW1hKHNjaGVtYSk7XG4gICAgfVxuICAgIHZhciBmb3VuZFNjaGVtYSA9IHNjaGVtYTtcbiAgICBpbnZhcmlhbnQoZm91bmRTY2hlbWEsIFwiRmFpbGVkIHRvIGZpbmQgZGVmYXVsdCBzY2hlbWEgZm9yIFwiICsgbW9kZWxTY2hlbWFPckluc3RhbmNlKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShpbnN0YW5jZSkpXG4gICAgICAgIHJldHVybiBpbnN0YW5jZS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIHNlcmlhbGl6ZVdpdGhTY2hlbWEoZm91bmRTY2hlbWEsIGl0ZW0pOyB9KTtcbiAgICByZXR1cm4gc2VyaWFsaXplV2l0aFNjaGVtYShmb3VuZFNjaGVtYSwgaW5zdGFuY2UpO1xufVxuZnVuY3Rpb24gc2VyaWFsaXplV2l0aFNjaGVtYShzY2hlbWEsIG9iaikge1xuICAgIGludmFyaWFudChzY2hlbWEgJiYgdHlwZW9mIHNjaGVtYSA9PT0gXCJvYmplY3RcIiAmJiBzY2hlbWEucHJvcHMsIFwiRXhwZWN0ZWQgc2NoZW1hXCIpO1xuICAgIGludmFyaWFudChvYmogJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiwgXCJFeHBlY3RlZCBvYmplY3RcIik7XG4gICAgdmFyIHJlcztcbiAgICBpZiAoc2NoZW1hLmV4dGVuZHMpXG4gICAgICAgIHJlcyA9IHNlcmlhbGl6ZVdpdGhTY2hlbWEoc2NoZW1hLmV4dGVuZHMsIG9iaik7XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRPRE86IG1ha2UgaW52YXJpYW50PzogIGludmFyaWFudCghb2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5zZXJpYWxpemVJbmZvLCBcIm9iamVjdCBoYXMgYSBzZXJpYWxpemFibGUgc3VwZXJ0eXBlLCBidXQgbW9kZWxzY2hlbWEgZGlkIG5vdCBwcm92aWRlIGV4dGVuZHMgY2xhdXNlXCIpXG4gICAgICAgIHJlcyA9IHt9O1xuICAgIH1cbiAgICBPYmplY3Qua2V5cyhzY2hlbWEucHJvcHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgcHJvcERlZiA9IHNjaGVtYS5wcm9wc1trZXldO1xuICAgICAgICBpZiAoIXByb3BEZWYpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChrZXkgPT09IFwiKlwiKSB7XG4gICAgICAgICAgICBzZXJpYWxpemVTdGFyUHJvcHMoc2NoZW1hLCBwcm9wRGVmLCBvYmosIHJlcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BEZWYgPT09IHRydWUpXG4gICAgICAgICAgICBwcm9wRGVmID0gX2RlZmF1bHRQcmltaXRpdmVQcm9wO1xuICAgICAgICB2YXIganNvblZhbHVlID0gcHJvcERlZi5zZXJpYWxpemVyKG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIGlmIChqc29uVmFsdWUgPT09IFNLSVApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXNbcHJvcERlZi5qc29ubmFtZSB8fCBrZXldID0ganNvblZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBzZXJpYWxpemVTdGFyUHJvcHMoc2NoZW1hLCBwcm9wRGVmLCBvYmosIHRhcmdldCkge1xuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhvYmopOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIga2V5ID0gX2FbX2ldO1xuICAgICAgICBpZiAoIShrZXkgaW4gc2NoZW1hLnByb3BzKSkge1xuICAgICAgICAgICAgaWYgKHByb3BEZWYgPT09IHRydWUgfHwgKHByb3BEZWYgJiYgKCFwcm9wRGVmLnBhdHRlcm4gfHwgcHJvcERlZi5wYXR0ZXJuLnRlc3Qoa2V5KSkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHByb3BEZWYgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpzb25WYWx1ZSA9IHByb3BEZWYuc2VyaWFsaXplcih2YWx1ZSwga2V5LCBvYmopO1xuICAgICAgICAgICAgICAgICAgICBpZiAoanNvblZhbHVlID09PSBTS0lQKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcHJvcERlZi5qc29ubmFtZSBjb3VsZCBiZSBhIHRyYW5zZm9ybSBmdW5jdGlvbiBvbiBrZXlcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBqc29uVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgcm9vdENvbnRleHRDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG52YXIgQ29udGV4dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb250ZXh0KHBhcmVudENvbnRleHQsIG1vZGVsU2NoZW1hLCBqc29uLCBvblJlYWR5Q2IsIGN1c3RvbUFyZ3MpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRDb250ZXh0ID0gcGFyZW50Q29udGV4dDtcbiAgICAgICAgdGhpcy5tb2RlbFNjaGVtYSA9IG1vZGVsU2NoZW1hO1xuICAgICAgICB0aGlzLmpzb24gPSBqc29uO1xuICAgICAgICB0aGlzLm9uUmVhZHlDYiA9IG9uUmVhZHlDYjtcbiAgICAgICAgdGhpcy5pc1Jvb3QgPSAhcGFyZW50Q29udGV4dDtcbiAgICAgICAgdGhpcy5wZW5kaW5nQ2FsbGJhY2tzID0gMDtcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVmc0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB1bmRlZmluZWQ7IC8vIGFsd2F5cyBzZXQgdGhpcyBwcm9wZXJ0eSB1c2luZyBzZXRUYXJnZXRcbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuICAgICAgICBpZiAoIXBhcmVudENvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdENvbnRleHQgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5hcmdzID0gY3VzdG9tQXJncztcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1JlZnMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWRSZWZzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJvb3RDb250ZXh0ID0gcGFyZW50Q29udGV4dC5yb290Q29udGV4dDtcbiAgICAgICAgICAgIHRoaXMuYXJncyA9IHBhcmVudENvbnRleHQuYXJncztcbiAgICAgICAgfVxuICAgIH1cbiAgICBDb250ZXh0LnByb3RvdHlwZS5jcmVhdGVDYWxsYmFjayA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnBlbmRpbmdDYWxsYmFja3MrKztcbiAgICAgICAgLy8gb25jZTogZGVmZW5kIGFnYWluc3QgdXNlci1sYW5kIGNhbGxpbmcgJ2RvbmUnIHR3aWNlXG4gICAgICAgIHJldHVybiBvbmNlKGZ1bmN0aW9uIChlcnIsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9uUmVhZHlDYihlcnIpO1xuICAgICAgICAgICAgICAgICAgICByb290Q29udGV4dENhY2hlLmRlbGV0ZShfdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV90aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgZm4odmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmICgtLV90aGlzLnBlbmRpbmdDYWxsYmFja3MgPT09IF90aGlzLnBlbmRpbmdSZWZzQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnBlbmRpbmdSZWZzQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGwgcGVuZGluZyBjYWxsYmFja3MgYXJlIHBlbmRpbmcgcmVmZXJlbmNlIHJlc29sdmVycy4gbm90IGdvb2QuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vblJlYWR5Q2IobmV3IEVycm9yKCdVbnJlc29sdmFibGUgcmVmZXJlbmNlcyBpbiBqc29uOiBcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKF90aGlzLnBlbmRpbmdSZWZzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh1dWlkKSB7IHJldHVybiBfdGhpcy5wZW5kaW5nUmVmc1t1dWlkXS5sZW5ndGggPiAwOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignXCIsIFwiJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIicpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RDb250ZXh0Q2FjaGUuZGVsZXRlKF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9uUmVhZHlDYihudWxsLCBfdGhpcy50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdENvbnRleHRDYWNoZS5kZWxldGUoX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vIGdpdmVuIGFuIG9iamVjdCB3aXRoIHV1aWQsIG1vZGVsU2NoZW1hLCBjYWxsYmFjaywgYXdhaXRzIHVudGlsIHRoZSBnaXZlbiB1dWlkIGlzIGF2YWlsYWJsZVxuICAgIC8vIHJlc29sdmUgaW1tZWRpYXRlbHkgaWYgcG9zc2libGVcbiAgICBDb250ZXh0LnByb3RvdHlwZS5hd2FpdCA9IGZ1bmN0aW9uIChtb2RlbFNjaGVtYSwgdXVpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgaW52YXJpYW50KHRoaXMuaXNSb290LCBcImF3YWl0IGNhbiBvbmx5IGJlIGNhbGxlZCBvbiB0aGUgcm9vdCBjb250ZXh0XCIpO1xuICAgICAgICBpZiAodXVpZCBpbiB0aGlzLnJlc29sdmVkUmVmcykge1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gdGhpcy5yZXNvbHZlZFJlZnNbdXVpZF0uZmlsdGVyKGZ1bmN0aW9uIChyZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0Fzc2lnbmFibGVUbyhyZXNvbHZlZC5tb2RlbFNjaGVtYSwgbW9kZWxTY2hlbWEpO1xuICAgICAgICAgICAgfSlbMF07XG4gICAgICAgICAgICBpZiAobWF0Y2gpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgY2FsbGJhY2sobnVsbCwgbWF0Y2gudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZ1JlZnNDb3VudCsrO1xuICAgICAgICBpZiAoIXRoaXMucGVuZGluZ1JlZnNbdXVpZF0pXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdSZWZzW3V1aWRdID0gW107XG4gICAgICAgIHRoaXMucGVuZGluZ1JlZnNbdXVpZF0ucHVzaCh7XG4gICAgICAgICAgICBtb2RlbFNjaGVtYTogbW9kZWxTY2hlbWEsXG4gICAgICAgICAgICB1dWlkOiB1dWlkLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy8gZ2l2ZW4gYSBtb2RlbCBzY2hlbWEsIHV1aWQgYW5kIHZhbHVlLCByZXNvbHZlIGFsbCByZWZlcmVuY2VzIHRoYXQgd2VyZSBsb29raW5nIGZvciB0aGlzIG9iamVjdFxuICAgIENvbnRleHQucHJvdG90eXBlLnJlc29sdmUgPSBmdW5jdGlvbiAobW9kZWxTY2hlbWEsIHV1aWQsIHZhbHVlKSB7XG4gICAgICAgIGludmFyaWFudCh0aGlzLmlzUm9vdCwgXCJyZXNvbHZlIGNhbiBvbmx5IGNhbGxlZCBvbiB0aGUgcm9vdCBjb250ZXh0XCIpO1xuICAgICAgICBpZiAoIXRoaXMucmVzb2x2ZWRSZWZzW3V1aWRdKVxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZFJlZnNbdXVpZF0gPSBbXTtcbiAgICAgICAgdGhpcy5yZXNvbHZlZFJlZnNbdXVpZF0ucHVzaCh7XG4gICAgICAgICAgICBtb2RlbFNjaGVtYTogbW9kZWxTY2hlbWEsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh1dWlkIGluIHRoaXMucGVuZGluZ1JlZnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLnBlbmRpbmdSZWZzW3V1aWRdLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdHMgPSB0aGlzLnBlbmRpbmdSZWZzW3V1aWRdW2ldO1xuICAgICAgICAgICAgICAgIGlmIChpc0Fzc2lnbmFibGVUbyhtb2RlbFNjaGVtYSwgb3B0cy5tb2RlbFNjaGVtYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nUmVmc1t1dWlkXS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1JlZnNDb3VudC0tO1xuICAgICAgICAgICAgICAgICAgICBvcHRzLmNhbGxiYWNrKG51bGwsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIHNldCB0YXJnZXQgYW5kIHVwZGF0ZSByb290IGNvbnRleHQgY2FjaGVcbiAgICBDb250ZXh0LnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIGlmICh0aGlzLmlzUm9vdCAmJiB0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgcm9vdENvbnRleHRDYWNoZS5kZWxldGUodGhpcy50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICByb290Q29udGV4dENhY2hlLnNldCh0aGlzLnRhcmdldCwgdGhpcyk7XG4gICAgfTtcbiAgICAvLyBjYWxsIGFsbCByZW1haW5pbmcgcmVmZXJlbmNlIGxvb2t1cCBjYWxsYmFja3MgaW5kaWNhdGluZyBhbiBlcnJvciBkdXJpbmcgcmVmIHJlc29sdXRpb25cbiAgICBDb250ZXh0LnByb3RvdHlwZS5jYW5jZWxBd2FpdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGludmFyaWFudCh0aGlzLmlzUm9vdCwgXCJjYW5jZWxBd2FpdHMgY2FuIG9ubHkgYmUgY2FsbGVkIG9uIHRoZSByb290IGNvbnRleHRcIik7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5wZW5kaW5nUmVmcykuZm9yRWFjaChmdW5jdGlvbiAodXVpZCkge1xuICAgICAgICAgICAgc2VsZi5wZW5kaW5nUmVmc1t1dWlkXS5mb3JFYWNoKGZ1bmN0aW9uIChyZWZPcHRzKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5wZW5kaW5nUmVmc0NvdW50LS07XG4gICAgICAgICAgICAgICAgcmVmT3B0cy5jYWxsYmFjayhuZXcgRXJyb3IoXCJSZWZlcmVuY2UgcmVzb2x1dGlvbiBjYW5jZWxlZCBmb3IgXCIgKyB1dWlkKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlZnMgPSB7fTtcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVmc0NvdW50ID0gMDtcbiAgICB9O1xuICAgIHJldHVybiBDb250ZXh0O1xufSgpKTtcbmZ1bmN0aW9uIGdldFRhcmdldENvbnRleHQodGFyZ2V0KSB7XG4gICAgcmV0dXJuIHJvb3RDb250ZXh0Q2FjaGUuZ2V0KHRhcmdldCk7XG59XG5cbi8qXG4gKiBEZXNlcmlhbGl6YXRpb25cbiAqL1xuZnVuY3Rpb24gc2NoZW1hSGFzQWxpYXMoc2NoZW1hLCBuYW1lKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHNjaGVtYS5wcm9wcykge1xuICAgICAgICB2YXIgcHJvcFNjaGVtYSA9IHNjaGVtYS5wcm9wc1trZXldO1xuICAgICAgICBpZiAodHlwZW9mIHByb3BTY2hlbWEgPT09IFwib2JqZWN0XCIgJiYgcHJvcFNjaGVtYS5qc29ubmFtZSA9PT0gbmFtZSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVN0YXJQcm9wcyhjb250ZXh0LCBzY2hlbWEsIHByb3BEZWYsIG9iaiwganNvbikge1xuICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoIShrZXkgaW4gc2NoZW1hLnByb3BzKSAmJiAhc2NoZW1hSGFzQWxpYXMoc2NoZW1hLCBrZXkpKSB7XG4gICAgICAgICAgICB2YXIganNvblZhbHVlID0ganNvbltrZXldO1xuICAgICAgICAgICAgaWYgKHByb3BEZWYgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIGRlc2VyaWFsaXppbmcgd2UgZG9uJ3Qgd2FudCB0byBzaWxlbnRseSBpZ25vcmUgJ3VucGFyc2VhYmxlIGRhdGEnIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gY29uZnVzaW5nIGJ1Z3NcbiAgICAgICAgICAgICAgICBpbnZhcmlhbnQoaXNQcmltaXRpdmUoanNvblZhbHVlKSwgXCJlbmNvdW50ZXJlZCBub24gcHJpbWl0aXZlIHZhbHVlIHdoaWxlIGRlc2VyaWFsaXppbmcgJyonIHByb3BlcnRpZXMgaW4gcHJvcGVydHkgJ1wiICtcbiAgICAgICAgICAgICAgICAgICAga2V5ICtcbiAgICAgICAgICAgICAgICAgICAgXCInOiBcIiArXG4gICAgICAgICAgICAgICAgICAgIGpzb25WYWx1ZSk7XG4gICAgICAgICAgICAgICAgb2JqW2tleV0gPSBqc29uVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwcm9wRGVmICYmICghcHJvcERlZi5wYXR0ZXJuIHx8IHByb3BEZWYucGF0dGVybi50ZXN0KGtleSkpKSB7XG4gICAgICAgICAgICAgICAgcHJvcERlZi5kZXNlcmlhbGl6ZXIoanNvblZhbHVlLCBcbiAgICAgICAgICAgICAgICAvLyBmb3IgaW5kaXZpZHVhbCBwcm9wcywgdXNlIHJvb3QgY29udGV4dCBiYXNlZCBjYWxsYmFja3NcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGFsbG93cyBwcm9wcyB0byBjb21wbGV0ZSBhZnRlciBjb21wbGV0aW5nIHRoZSBvYmplY3QgaXRzZWxmXG4gICAgICAgICAgICAgICAgLy8gZW5hYmxpbmcgcmVmZXJlbmNlIHJlc29sdmluZyBhbmQgc3VjaFxuICAgICAgICAgICAgICAgIGNvbnRleHQucm9vdENvbnRleHQuY3JlYXRlQ2FsbGJhY2soZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIgIT09IFNLSVAgJiYgKG9ialtrZXldID0gcik7IH0pLCBjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgZm9yICh2YXIga2V5IGluIGpzb24pIHtcbiAgICAgICAgX2xvb3BfMShrZXkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplKGNsYXp6T3JNb2RlbFNjaGVtYSwganNvbiwgY2FsbGJhY2ssIGN1c3RvbUFyZ3MpIHtcbiAgICBpZiAoY2FsbGJhY2sgPT09IHZvaWQgMCkgeyBjYWxsYmFjayA9IEdVQVJERURfTk9PUDsgfVxuICAgIGludmFyaWFudChhcmd1bWVudHMubGVuZ3RoID49IDIsIFwiZGVzZXJpYWxpemUgZXhwZWN0cyBhdCBsZWFzdCAyIGFyZ3VtZW50c1wiKTtcbiAgICB2YXIgc2NoZW1hID0gZ2V0RGVmYXVsdE1vZGVsU2NoZW1hKGNsYXp6T3JNb2RlbFNjaGVtYSk7XG4gICAgaW52YXJpYW50KGlzTW9kZWxTY2hlbWEoc2NoZW1hKSwgXCJmaXJzdCBhcmd1bWVudCBzaG91bGQgYmUgbW9kZWwgc2NoZW1hXCIpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGpzb24pKSB7XG4gICAgICAgIHZhciBpdGVtc18xID0gW107XG4gICAgICAgIHBhcmFsbGVsKGpzb24sIGZ1bmN0aW9uIChjaGlsZEpzb24sIGl0ZW1Eb25lKSB7XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBkZXNlcmlhbGl6ZU9iamVjdFdpdGhTY2hlbWEodW5kZWZpbmVkLCBzY2hlbWEsIGNoaWxkSnNvbiwgaXRlbURvbmUsIGN1c3RvbUFyZ3MpO1xuICAgICAgICAgICAgLy8gaW5zdGFuY2UgaXMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHNvIGNhbiBiZSBwdXNoZWRcbiAgICAgICAgICAgIGl0ZW1zXzEucHVzaChpbnN0YW5jZSk7XG4gICAgICAgIH0sIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIGl0ZW1zXzE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVzZXJpYWxpemVPYmplY3RXaXRoU2NoZW1hKHVuZGVmaW5lZCwgc2NoZW1hLCBqc29uLCBjYWxsYmFjaywgY3VzdG9tQXJncyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVPYmplY3RXaXRoU2NoZW1hKHBhcmVudENvbnRleHQsIG1vZGVsU2NoZW1hLCBqc29uLCBjYWxsYmFjaywgY3VzdG9tQXJncykge1xuICAgIGlmIChqc29uID09PSBudWxsIHx8IGpzb24gPT09IHVuZGVmaW5lZCB8fCB0eXBlb2YganNvbiAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgcmV0dXJuIHZvaWQgY2FsbGJhY2sobnVsbCwgbnVsbCk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dChwYXJlbnRDb250ZXh0LCBtb2RlbFNjaGVtYSwganNvbiwgY2FsbGJhY2ssIGN1c3RvbUFyZ3MpO1xuICAgIHZhciB0YXJnZXQgPSBtb2RlbFNjaGVtYS5mYWN0b3J5KGNvbnRleHQpO1xuICAgIC8vIHRvZG8gYXN5bmMgaW52YXJpYW50XG4gICAgaW52YXJpYW50KCEhdGFyZ2V0LCBcIk5vIG9iamVjdCByZXR1cm5lZCBmcm9tIGZhY3RvcnlcIik7XG4gICAgLy8gVE9ETzogbWFrZSBpbnZhcmlhbnQ/ICAgICAgICAgICAgaW52YXJpYW50KHNjaGVtYS5leHRlbmRzIHx8XG4gICAgLy8gIXRhcmdldC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3Iuc2VyaWFsaXplSW5mbywgXCJvYmplY3QgaGFzIGEgc2VyaWFsaXphYmxlXG4gICAgLy8gc3VwZXJ0eXBlLCBidXQgbW9kZWxzY2hlbWEgZGlkIG5vdCBwcm92aWRlIGV4dGVuZHMgY2xhdXNlXCIpXG4gICAgY29udGV4dC5zZXRUYXJnZXQodGFyZ2V0KTtcbiAgICB2YXIgbG9jayA9IGNvbnRleHQuY3JlYXRlQ2FsbGJhY2soR1VBUkRFRF9OT09QKTtcbiAgICBkZXNlcmlhbGl6ZVByb3BzV2l0aFNjaGVtYShjb250ZXh0LCBtb2RlbFNjaGVtYSwganNvbiwgdGFyZ2V0KTtcbiAgICBsb2NrKCk7XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplUHJvcHNXaXRoU2NoZW1hKGNvbnRleHQsIG1vZGVsU2NoZW1hLCBqc29uLCB0YXJnZXQpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKG1vZGVsU2NoZW1hLmV4dGVuZHMpXG4gICAgICAgIGRlc2VyaWFsaXplUHJvcHNXaXRoU2NoZW1hKGNvbnRleHQsIG1vZGVsU2NoZW1hLmV4dGVuZHMsIGpzb24sIHRhcmdldCk7XG4gICAgZnVuY3Rpb24gZGVzZXJpYWxpemVQcm9wKHByb3BEZWYsIGpzb25WYWx1ZSwgcHJvcE5hbWUpIHtcbiAgICAgICAgdmFyIHdoZW5Eb25lID0gY29udGV4dC5yb290Q29udGV4dC5jcmVhdGVDYWxsYmFjayhmdW5jdGlvbiAocikgeyByZXR1cm4gciAhPT0gU0tJUCAmJiAodGFyZ2V0W3Byb3BOYW1lXSA9IHIpOyB9KTtcbiAgICAgICAgcHJvcERlZi5kZXNlcmlhbGl6ZXIoanNvblZhbHVlLCBcbiAgICAgICAgLy8gZm9yIGluZGl2aWR1YWwgcHJvcHMsIHVzZSByb290IGNvbnRleHQgYmFzZWQgY2FsbGJhY2tzXG4gICAgICAgIC8vIHRoaXMgYWxsb3dzIHByb3BzIHRvIGNvbXBsZXRlIGFmdGVyIGNvbXBsZXRpbmcgdGhlIG9iamVjdCBpdHNlbGZcbiAgICAgICAgLy8gZW5hYmxpbmcgcmVmZXJlbmNlIHJlc29sdmluZyBhbmQgc3VjaFxuICAgICAgICBmdW5jdGlvbiAoZXJyLCBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9uQWZ0ZXJEZXNlcmlhbGl6ZSh3aGVuRG9uZSwgZXJyLCBuZXdWYWx1ZSwganNvblZhbHVlLCBqc29uLCBwcm9wTmFtZSwgY29udGV4dCwgcHJvcERlZik7XG4gICAgICAgIH0sIGNvbnRleHQsIHRhcmdldFtwcm9wTmFtZV0gLy8gaW5pdGlhbCB2YWx1ZVxuICAgICAgICApO1xuICAgIH1cbiAgICB2YXIgX2xvb3BfMiA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHByb3BEZWYgPSBtb2RlbFNjaGVtYS5wcm9wc1trZXldO1xuICAgICAgICBpZiAoIXByb3BEZWYpXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdm9pZCAwIH07XG4gICAgICAgIGlmIChrZXkgPT09IFwiKlwiKSB7XG4gICAgICAgICAgICBkZXNlcmlhbGl6ZVN0YXJQcm9wcyhjb250ZXh0LCBtb2RlbFNjaGVtYSwgcHJvcERlZiwgdGFyZ2V0LCBqc29uKTtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2b2lkIDAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcERlZiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHByb3BEZWYgPSBfZGVmYXVsdFByaW1pdGl2ZVByb3A7XG4gICAgICAgIHZhciBqc29uQXR0ciA9IChfYSA9IHByb3BEZWYuanNvbm5hbWUsIChfYSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBrZXkpKTtcbiAgICAgICAgaW52YXJpYW50KFwic3ltYm9sXCIgIT09IHR5cGVvZiBqc29uQXR0ciwgXCJZb3UgbXVzdCBhbGlhcyBzeW1ib2wgcHJvcGVydGllcy4gcHJvcCA9ICVsXCIsIGtleSk7XG4gICAgICAgIHZhciBqc29uVmFsdWUgPSBqc29uW2pzb25BdHRyXTtcbiAgICAgICAgdmFyIHByb3BTY2hlbWEgPSBwcm9wRGVmO1xuICAgICAgICB2YXIgY2FsbGJhY2tEZXNlcmlhbGl6ZSA9IGZ1bmN0aW9uIChlcnIsIGpzb25WYWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFlcnIgJiYganNvblZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZXNlcmlhbGl6ZVByb3AocHJvcFNjaGVtYSwganNvblZhbHVlLCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBvbkJlZm9yZURlc2VyaWFsaXplKGNhbGxiYWNrRGVzZXJpYWxpemUsIGpzb25WYWx1ZSwganNvbiwganNvbkF0dHIsIGNvbnRleHQsIHByb3BEZWYpO1xuICAgIH07XG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYiA9IE9iamVjdC5rZXlzKG1vZGVsU2NoZW1hLnByb3BzKTsgX2kgPCBfYi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGtleSA9IF9iW19pXTtcbiAgICAgICAgdmFyIHN0YXRlXzEgPSBfbG9vcF8yKGtleSk7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhdGVfMSA9PT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZV8xLnZhbHVlO1xuICAgIH1cbn1cbnZhciBvbkJlZm9yZURlc2VyaWFsaXplID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBqc29uVmFsdWUsIGpzb25QYXJlbnRWYWx1ZSwgcHJvcE5hbWVPckluZGV4LCBjb250ZXh0LCBwcm9wRGVmKSB7XG4gICAgaWYgKHByb3BEZWYgJiYgdHlwZW9mIHByb3BEZWYuYmVmb3JlRGVzZXJpYWxpemUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBwcm9wRGVmLmJlZm9yZURlc2VyaWFsaXplKGNhbGxiYWNrLCBqc29uVmFsdWUsIGpzb25QYXJlbnRWYWx1ZSwgcHJvcE5hbWVPckluZGV4LCBjb250ZXh0LCBwcm9wRGVmKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIGpzb25WYWx1ZSk7XG4gICAgfVxufTtcbnZhciBvbkFmdGVyRGVzZXJpYWxpemUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGVyciwgbmV3VmFsdWUsIGpzb25WYWx1ZSwganNvblBhcmVudFZhbHVlLCBwcm9wTmFtZU9ySW5kZXgsIGNvbnRleHQsIHByb3BEZWYpIHtcbiAgICBpZiAocHJvcERlZiAmJiB0eXBlb2YgcHJvcERlZi5hZnRlckRlc2VyaWFsaXplID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcHJvcERlZi5hZnRlckRlc2VyaWFsaXplKGNhbGxiYWNrLCBlcnIsIG5ld1ZhbHVlLCBqc29uVmFsdWUsIGpzb25QYXJlbnRWYWx1ZSwgcHJvcE5hbWVPckluZGV4LCBjb250ZXh0LCBwcm9wRGVmKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgbmV3VmFsdWUpO1xuICAgIH1cbn07XG5cbi8qKlxuICogYG9iamVjdGAgaW5kaWNhdGVzIHRoYXQgdGhpcyBwcm9wZXJ0eSBjb250YWlucyBhbiBvYmplY3QgdGhhdCBuZWVkcyB0byBiZSAoZGUpc2VyaWFsaXplZFxuICogdXNpbmcgaXRzIG93biBtb2RlbCBzY2hlbWEuXG4gKlxuICogTi5CLiBtaW5kIGlzc3VlcyB3aXRoIGNpcmN1bGFyIGRlcGVuZGVuY2llcyB3aGVuIGltcG9ydGluZyBtb2RlbCBzY2hlbWEncyBmcm9tIG90aGVyIGZpbGVzISBUaGUgbW9kdWxlIHJlc29sdmUgYWxnb3JpdGhtIG1pZ2h0IGV4cG9zZSBjbGFzc2VzIGJlZm9yZSBgY3JlYXRlTW9kZWxTY2hlbWFgIGlzIGV4ZWN1dGVkIGZvciB0aGUgdGFyZ2V0IGNsYXNzLlxuICpcbiAqIEBleGFtcGxlXG4gKiBjbGFzcyBTdWJUYXNrIHt9XG4gKiBjbGFzcyBUb2RvIHt9XG4gKlxuICogY3JlYXRlTW9kZWxTY2hlbWEoU3ViVGFzaywge1xuICogICAgIHRpdGxlOiB0cnVlLFxuICogfSlcbiAqIGNyZWF0ZU1vZGVsU2NoZW1hKFRvZG8sIHtcbiAqICAgICB0aXRsZTogdHJ1ZSxcbiAqICAgICBzdWJUYXNrOiBvYmplY3QoU3ViVGFzayksXG4gKiB9KVxuICpcbiAqIGNvbnN0IHRvZG8gPSBkZXNlcmlhbGl6ZShUb2RvLCB7XG4gKiAgICAgdGl0bGU6ICdUYXNrJyxcbiAqICAgICBzdWJUYXNrOiB7XG4gKiAgICAgICAgIHRpdGxlOiAnU3ViIHRhc2snLFxuICogICAgIH0sXG4gKiB9KVxuICpcbiAqIEBwYXJhbSBtb2RlbFNjaGVtYSB0byBiZSB1c2VkIHRvIChkZSlzZXJpYWxpemUgdGhlIG9iamVjdFxuICogQHBhcmFtIGFkZGl0aW9uYWxBcmdzIG9wdGlvbmFsIG9iamVjdCB0aGF0IGNvbnRhaW5zIGJlZm9yZURlc2VyaWFsaXplIGFuZC9vciBhZnRlckRlc2VyaWFsaXplIGhhbmRsZXJzXG4gKi9cbmZ1bmN0aW9uIG9iamVjdChtb2RlbFNjaGVtYSwgYWRkaXRpb25hbEFyZ3MpIHtcbiAgICBpbnZhcmlhbnQodHlwZW9mIG1vZGVsU2NoZW1hID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBtb2RlbFNjaGVtYSA9PT0gXCJmdW5jdGlvblwiLCBcIk5vIG1vZGVsc2NoZW1hIHByb3ZpZGVkLiBJZiB5b3UgYXJlIGltcG9ydGluZyBpdCBmcm9tIGFub3RoZXIgZmlsZSBiZSBhd2FyZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMuXCIpO1xuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgIHNlcmlhbGl6ZXI6IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBtb2RlbFNjaGVtYSA9IGdldERlZmF1bHRNb2RlbFNjaGVtYShtb2RlbFNjaGVtYSk7XG4gICAgICAgICAgICBpbnZhcmlhbnQoaXNNb2RlbFNjaGVtYShtb2RlbFNjaGVtYSksIFwiZXhwZWN0ZWQgbW9kZWxTY2hlbWEsIGdvdCBcIiArIG1vZGVsU2NoZW1hKTtcbiAgICAgICAgICAgIGlmIChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWxpemUobW9kZWxTY2hlbWEsIGl0ZW0pO1xuICAgICAgICB9LFxuICAgICAgICBkZXNlcmlhbGl6ZXI6IGZ1bmN0aW9uIChjaGlsZEpzb24sIGRvbmUsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIG1vZGVsU2NoZW1hID0gZ2V0RGVmYXVsdE1vZGVsU2NoZW1hKG1vZGVsU2NoZW1hKTtcbiAgICAgICAgICAgIGludmFyaWFudChpc01vZGVsU2NoZW1hKG1vZGVsU2NoZW1hKSwgXCJleHBlY3RlZCBtb2RlbFNjaGVtYSwgZ290IFwiICsgbW9kZWxTY2hlbWEpO1xuICAgICAgICAgICAgaWYgKGNoaWxkSnNvbiA9PT0gbnVsbCB8fCBjaGlsZEpzb24gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCBkb25lKG51bGwsIGNoaWxkSnNvbik7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCBkZXNlcmlhbGl6ZU9iamVjdFdpdGhTY2hlbWEoY29udGV4dCwgbW9kZWxTY2hlbWEsIGNoaWxkSnNvbiwgZG9uZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmVzdWx0ID0gcHJvY2Vzc0FkZGl0aW9uYWxQcm9wQXJncyhyZXN1bHQsIGFkZGl0aW9uYWxBcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBzZXJpYWxpemVBbGwodGFyZ2V0T3JQYXR0ZXJuLCBwcm9wZXJ0eVR5cGUpIHtcbiAgICB2YXIgcHJvcFNjaGVtYTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBwcm9wU2NoZW1hID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGRlY29yYXRvcih0YXJnZXRPclBhdHRlcm4pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaW52YXJpYW50KHR5cGVvZiB0YXJnZXRPclBhdHRlcm4gPT09IFwib2JqZWN0XCIgJiYgdGFyZ2V0T3JQYXR0ZXJuLnRlc3QsIFwiQHNlcmlhbGl6ZUFsbCBwYXR0ZXJuIGRvZXNuJ3QgaGF2ZSB0ZXN0XCIpO1xuICAgICAgICBpZiAodHlwZW9mIHByb3BlcnR5VHlwZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBwcm9wZXJ0eVR5cGUgPSBvYmplY3QocHJvcGVydHlUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJ1ZSA9PT0gcHJvcGVydHlUeXBlKSB7XG4gICAgICAgICAgICBwcm9wZXJ0eVR5cGUgPSBfZGVmYXVsdFByaW1pdGl2ZVByb3A7XG4gICAgICAgIH1cbiAgICAgICAgaW52YXJpYW50KGlzUHJvcFNjaGVtYShwcm9wZXJ0eVR5cGUpLCBcImNvdWxkbid0IHJlc29sdmUgc2NoZW1hXCIpO1xuICAgICAgICBwcm9wU2NoZW1hID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvcGVydHlUeXBlLCB7XG4gICAgICAgICAgICBwYXR0ZXJuOiB0YXJnZXRPclBhdHRlcm5cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlY29yYXRvcih0YXJnZXQpIHtcbiAgICAgICAgaW52YXJpYW50KHR5cGVvZiB0YXJnZXQgPT09IFwiZnVuY3Rpb25cIiwgXCJAc2VyaWFsaXplQWxsIGNhbiBvbmx5IGJlIHVzZWQgYXMgY2xhc3MgZGVjb3JhdG9yXCIpO1xuICAgICAgICB2YXIgaW5mbyA9IGdldERlZmF1bHRNb2RlbFNjaGVtYSh0YXJnZXQpO1xuICAgICAgICBpZiAoIWluZm8pIHtcbiAgICAgICAgICAgIGluZm8gPSBjcmVhdGVNb2RlbFNjaGVtYSh0YXJnZXQsIHt9KTtcbiAgICAgICAgICAgIHNldERlZmF1bHRNb2RlbFNjaGVtYSh0YXJnZXQsIGluZm8pO1xuICAgICAgICB9XG4gICAgICAgIGluZm8ucHJvcHNbXCIqXCJdID0gcHJvcFNjaGVtYTtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgcmV0dXJuIGRlY29yYXRvcjtcbn1cblxuLypcbiAqIERlc2VyaWFsaXphdGlvblxuICovXG4vKipcbiAqIENhbmNlbHMgYW4gYXN5bmNocm9ub3VzIGRlc2VyaWFsaXphdGlvbiBvciB1cGRhdGUgb3BlcmF0aW9uIGZvciB0aGUgc3BlY2lmaWVkIHRhcmdldCBvYmplY3QuXG4gKiBAcGFyYW0gaW5zdGFuY2Ugb2JqZWN0IHRoYXQgd2FzIHByZXZpb3VzbHkgcmV0dXJuZWQgZnJvbSBkZXNlcmlhbGl6ZSBvciB1cGRhdGUgbWV0aG9kXG4gKi9cbmZ1bmN0aW9uIGNhbmNlbERlc2VyaWFsaXplKGluc3RhbmNlKSB7XG4gICAgaW52YXJpYW50KHR5cGVvZiBpbnN0YW5jZSA9PT0gXCJvYmplY3RcIiAmJiBpbnN0YW5jZSAmJiAhQXJyYXkuaXNBcnJheShpbnN0YW5jZSksIFwiY2FuY2VsRGVzZXJpYWxpemUgbmVlZHMgYW4gb2JqZWN0XCIpO1xuICAgIHZhciBjb250ZXh0ID0gZ2V0VGFyZ2V0Q29udGV4dChpbnN0YW5jZSk7XG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5jYW5jZWxBd2FpdHMoKTtcbiAgICB9XG59XG5cbi8qXG4gKiBVcGRhdGVcbiAqL1xuZnVuY3Rpb24gdXBkYXRlKG1vZGVsU2NoZW1hLCB0YXJnZXQsIGpzb24sIGNhbGxiYWNrLCBjdXN0b21BcmdzKSB7XG4gICAgdmFyIGluZmVyTW9kZWxTY2hlbWEgPSBhcmd1bWVudHMubGVuZ3RoID09PSAyIHx8IHR5cGVvZiBhcmd1bWVudHNbMl0gPT09IFwiZnVuY3Rpb25cIjsgLy8gb25seSB0YXJnZXQgYW5kIGpzb24gLy8gY2FsbGJhY2sgYXMgdGhpcmQgYXJnXG4gICAgaWYgKGluZmVyTW9kZWxTY2hlbWEpIHtcbiAgICAgICAgdGFyZ2V0ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICBtb2RlbFNjaGVtYSA9IGdldERlZmF1bHRNb2RlbFNjaGVtYSh0YXJnZXQpO1xuICAgICAgICBqc29uID0gYXJndW1lbnRzWzFdO1xuICAgICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgY3VzdG9tQXJncyA9IGFyZ3VtZW50c1szXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1vZGVsU2NoZW1hID0gZ2V0RGVmYXVsdE1vZGVsU2NoZW1hKG1vZGVsU2NoZW1hKTtcbiAgICB9XG4gICAgaW52YXJpYW50KGlzTW9kZWxTY2hlbWEobW9kZWxTY2hlbWEpLCBcInVwZGF0ZSBmYWlsZWQgdG8gZGV0ZXJtaW5lIHNjaGVtYVwiKTtcbiAgICBpbnZhcmlhbnQodHlwZW9mIHRhcmdldCA9PT0gXCJvYmplY3RcIiAmJiB0YXJnZXQgJiYgIUFycmF5LmlzQXJyYXkodGFyZ2V0KSwgXCJ1cGRhdGUgbmVlZHMgYW4gb2JqZWN0XCIpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodW5kZWZpbmVkLCBtb2RlbFNjaGVtYSwganNvbiwgY2FsbGJhY2sgfHwgR1VBUkRFRF9OT09QLCBjdXN0b21BcmdzKTtcbiAgICBjb250ZXh0LnNldFRhcmdldCh0YXJnZXQpO1xuICAgIHZhciBsb2NrID0gY29udGV4dC5jcmVhdGVDYWxsYmFjayhHVUFSREVEX05PT1ApO1xuICAgIHZhciByZXN1bHQgPSBkZXNlcmlhbGl6ZVByb3BzV2l0aFNjaGVtYShjb250ZXh0LCBtb2RlbFNjaGVtYSwganNvbiwgdGFyZ2V0KTtcbiAgICBsb2NrKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIGRlZmF1bHRSZWdpc3RlckZ1bmN0aW9uID0gZnVuY3Rpb24gKGlkLCB2YWx1ZSwgY29udGV4dCkge1xuICAgIGNvbnRleHQucm9vdENvbnRleHQucmVzb2x2ZShjb250ZXh0Lm1vZGVsU2NoZW1hLCBpZCwgY29udGV4dC50YXJnZXQpO1xufTtcbmZ1bmN0aW9uIGlkZW50aWZpZXIoYXJnMSwgYXJnMikge1xuICAgIHZhciByZWdpc3RlckZuO1xuICAgIHZhciBhZGRpdGlvbmFsQXJncztcbiAgICBpZiAodHlwZW9mIGFyZzEgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZWdpc3RlckZuID0gYXJnMTtcbiAgICAgICAgYWRkaXRpb25hbEFyZ3MgPSBhcmcyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYWRkaXRpb25hbEFyZ3MgPSBhcmcxO1xuICAgIH1cbiAgICBpbnZhcmlhbnQoIWFkZGl0aW9uYWxBcmdzIHx8IHR5cGVvZiBhZGRpdGlvbmFsQXJncyA9PT0gXCJvYmplY3RcIiwgXCJBZGRpdGlvbmFsIHByb3BlcnR5IGFyZ3VtZW50cyBzaG91bGQgYmUgYW4gb2JqZWN0LCByZWdpc3RlciBmdW5jdGlvbiBzaG91bGQgYmUgb21pdHRlZCBvciBhIGZ1bnRpb25cIik7XG4gICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgaWRlbnRpZmllcjogdHJ1ZSxcbiAgICAgICAgc2VyaWFsaXplcjogX2RlZmF1bHRQcmltaXRpdmVQcm9wLnNlcmlhbGl6ZXIsXG4gICAgICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gKGpzb25WYWx1ZSwgZG9uZSwgY29udGV4dCkge1xuICAgICAgICAgICAgX2RlZmF1bHRQcmltaXRpdmVQcm9wLmRlc2VyaWFsaXplcihqc29uVmFsdWUsIGZ1bmN0aW9uIChlcnIsIGlkKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFJlZ2lzdGVyRnVuY3Rpb24oaWQsIGNvbnRleHQudGFyZ2V0LCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAocmVnaXN0ZXJGbilcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJGbihpZCwgY29udGV4dC50YXJnZXQsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIGRvbmUoZXJyLCBpZCk7XG4gICAgICAgICAgICB9LCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmVzdWx0ID0gcHJvY2Vzc0FkZGl0aW9uYWxQcm9wQXJncyhyZXN1bHQsIGFkZGl0aW9uYWxBcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFNpbWlsYXIgdG8gcHJpbWl0aXZlLCBzZXJpYWxpemVzIGluc3RhbmNlcyBvZiBEYXRlIG9iamVjdHNcbiAqXG4gKiBAcGFyYW0gYWRkaXRpb25hbEFyZ3Mgb3B0aW9uYWwgb2JqZWN0IHRoYXQgY29udGFpbnMgYmVmb3JlRGVzZXJpYWxpemUgYW5kL29yIGFmdGVyRGVzZXJpYWxpemUgaGFuZGxlcnNcbiAqL1xuZnVuY3Rpb24gZGF0ZShhZGRpdGlvbmFsQXJncykge1xuICAgIC8vIFRPRE86IGFkZCBmb3JtYXQgb3B0aW9uP1xuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgIHNlcmlhbGl6ZXI6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgaW52YXJpYW50KHZhbHVlIGluc3RhbmNlb2YgRGF0ZSwgXCJFeHBlY3RlZCBEYXRlIG9iamVjdFwiKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5nZXRUaW1lKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gKGpzb25WYWx1ZSwgZG9uZSkge1xuICAgICAgICAgICAgaWYgKGpzb25WYWx1ZSA9PT0gbnVsbCB8fCBqc29uVmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCBkb25lKG51bGwsIGpzb25WYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCBkb25lKG51bGwsIG5ldyBEYXRlKGpzb25WYWx1ZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXN1bHQgPSBwcm9jZXNzQWRkaXRpb25hbFByb3BBcmdzKHJlc3VsdCwgYWRkaXRpb25hbEFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQWxpYXMgaW5kaWNhdGVzIHRoYXQgdGhpcyBtb2RlbCBwcm9wZXJ0eSBzaG91bGQgYmUgbmFtZWQgZGlmZmVyZW50bHkgaW4gdGhlIGdlbmVyYXRlZCBqc29uLlxuICogQWxpYXMgc2hvdWxkIGJlIHRoZSBvdXRlcm1vc3QgcHJvcHNjaGVtYS5cbiAqXG4gKiBAZXhhbXBsZVxuICogY3JlYXRlTW9kZWxTY2hlbWEoVG9kbywge1xuICogICAgIHRpdGxlOiBhbGlhcygndGFzaycsIHByaW1pdGl2ZSgpKSxcbiAqIH0pXG4gKlxuICogc2VyaWFsaXplKG5ldyBUb2RvKCd0ZXN0JykpIC8vIHsgXCJ0YXNrXCI6IFwidGVzdFwiIH1cbiAqXG4gKiBAcGFyYW0gbmFtZSBuYW1lIG9mIHRoZSBqc29uIGZpZWxkIHRvIGJlIHVzZWQgZm9yIHRoaXMgcHJvcGVydHlcbiAqIEBwYXJhbSBwcm9wU2NoZW1hIHByb3BTY2hlbWEgdG8gKGRlKXNlcmlhbGl6ZSB0aGUgY29udGVudHMgb2YgdGhpcyBmaWVsZFxuICovXG5mdW5jdGlvbiBhbGlhcyhuYW1lLCBwcm9wU2NoZW1hKSB7XG4gICAgaW52YXJpYW50KG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIsIFwiZXhwZWN0ZWQgcHJvcCBuYW1lIGFzIGZpcnN0IGFyZ3VtZW50XCIpO1xuICAgIHByb3BTY2hlbWEgPSAhcHJvcFNjaGVtYSB8fCBwcm9wU2NoZW1hID09PSB0cnVlID8gX2RlZmF1bHRQcmltaXRpdmVQcm9wIDogcHJvcFNjaGVtYTtcbiAgICBpbnZhcmlhbnQoaXNQcm9wU2NoZW1hKHByb3BTY2hlbWEpLCBcImV4cGVjdGVkIHByb3Agc2NoZW1hIGFzIHNlY29uZCBhcmd1bWVudFwiKTtcbiAgICBpbnZhcmlhbnQoIWlzQWxpYXNlZFByb3BTY2hlbWEocHJvcFNjaGVtYSksIFwicHJvdmlkZWQgcHJvcCBpcyBhbHJlYWR5IGFsaWFzZWRcIik7XG4gICAgcmV0dXJuIHtcbiAgICAgICAganNvbm5hbWU6IG5hbWUsXG4gICAgICAgIHNlcmlhbGl6ZXI6IHByb3BTY2hlbWEuc2VyaWFsaXplcixcbiAgICAgICAgZGVzZXJpYWxpemVyOiBwcm9wU2NoZW1hLmRlc2VyaWFsaXplcixcbiAgICAgICAgaWRlbnRpZmllcjogaXNJZGVudGlmaWVyUHJvcFNjaGVtYShwcm9wU2NoZW1hKSB8fCB1bmRlZmluZWQsXG4gICAgICAgIGJlZm9yZURlc2VyaWFsaXplOiBwcm9wU2NoZW1hLmJlZm9yZURlc2VyaWFsaXplLFxuICAgICAgICBhZnRlckRlc2VyaWFsaXplOiBwcm9wU2NoZW1hLmFmdGVyRGVzZXJpYWxpemVcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjdXN0b20oc2VyaWFsaXplciwgZGVzZXJpYWxpemVyLCBhZGRpdGlvbmFsQXJncykge1xuICAgIGludmFyaWFudCh0eXBlb2Ygc2VyaWFsaXplciA9PT0gXCJmdW5jdGlvblwiLCBcImZpcnN0IGFyZ3VtZW50IHNob3VsZCBiZSBmdW5jdGlvblwiKTtcbiAgICBpbnZhcmlhbnQodHlwZW9mIGRlc2VyaWFsaXplciA9PT0gXCJmdW5jdGlvblwiLCBcInNlY29uZCBhcmd1bWVudCBzaG91bGQgYmUgYSBmdW5jdGlvbiBvciBwcm9taXNlXCIpO1xuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgIHNlcmlhbGl6ZXI6IHNlcmlhbGl6ZXIsXG4gICAgICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gKGpzb25WYWx1ZSwgZG9uZSwgY29udGV4dCwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBkZXNlcmlhbGl6ZXIoanNvblZhbHVlLCBjb250ZXh0LCBvbGRWYWx1ZSwgZG9uZSk7XG4gICAgICAgICAgICAvLyBGSVhNRTogY2hlY2tpbmcgZm9yIHJlc3VsdCA9PT0gdW5kZWZpbmVkIGluc3RlYWQgb2YgRnVuY3Rpb24ubGVuZ3RoXG4gICAgICAgICAgICAvLyB3b3VsZCBiZSBuaWNlciwgYnV0IHN0cmljdGx5IHNwZWFraW5nIGEgYnJlYWtpbmcgY2hhbmdlLlxuICAgICAgICAgICAgaWYgKGRlc2VyaWFsaXplci5sZW5ndGggIT09IDQpIHtcbiAgICAgICAgICAgICAgICBkb25lKG51bGwsIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJlc3VsdCA9IHByb2Nlc3NBZGRpdGlvbmFsUHJvcEFyZ3MocmVzdWx0LCBhZGRpdGlvbmFsQXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBPcHRpb25hbCBpbmRpY2F0ZXMgdGhhdCB0aGlzIG1vZGVsIHByb3BlcnR5IHNob3VsZG4ndCBiZSBzZXJpYWxpemVkIGlmIGl0IGlzbid0IHByZXNlbnQuXG4gKlxuICogTm90ZSB0aGF0IGlmIHdlIHVzZSBgb3B0aW9uYWxgIHRvZ2V0aGVyIHdpdGggYW5vdGhlciBwcm9wIHNjaGVtYSBzdWNoIGFzIGBjdXN0b21gLFxuICogdGhlIHByb3Agc2NoZW1hIGZvciBgY3VzdG9tYCB3aWxsIGJlIGFwcGxpZWQgZmlyc3QgYW5kIHRoZSByZXN1bHQgb2YgdGhhdCBzZXJpYWxpemF0aW9uXG4gKiB3aWxsIGJlIHVzZWQgdG8gZmVlZCBpbnRvIGBvcHRpb25hbGAuXG4gKlxuICogQGV4YW1wbGVcbiAqIGNyZWF0ZU1vZGVsU2NoZW1hKFRvZG8sIHtcbiAqICAgICB0aXRsZTogb3B0aW9uYWwocHJpbWl0aXZlKCkpLFxuICogICAgIHVzZXI6IG9wdGlvbmFsKGN1c3RvbSh2YWx1ZSA9PiB2YWx1ZS5uYW1lLCAoKSA9PiBTS0lQKSlcbiAqIH0pXG4gKlxuICogc2VyaWFsaXplKG5ldyBUb2RvKCkpIC8vIHt9XG4gKlxuICogQHBhcmFtIHByb3BTY2hlbWEgcHJvcFNjaGVtYSB0byAoZGUpc2VyaWFsaXplIHRoZSBjb250ZW50cyBvZiB0aGlzIGZpZWxkXG4gKi9cbmZ1bmN0aW9uIG9wdGlvbmFsKHByb3BTY2hlbWEpIHtcbiAgICBwcm9wU2NoZW1hID0gIXByb3BTY2hlbWEgfHwgcHJvcFNjaGVtYSA9PT0gdHJ1ZSA/IF9kZWZhdWx0UHJpbWl0aXZlUHJvcCA6IHByb3BTY2hlbWE7XG4gICAgaW52YXJpYW50KGlzUHJvcFNjaGVtYShwcm9wU2NoZW1hKSwgXCJleHBlY3RlZCBwcm9wIHNjaGVtYSBhcyBzZWNvbmQgYXJndW1lbnRcIik7XG4gICAgdmFyIHByb3BTZXJpYWxpemVyID0gcHJvcFNjaGVtYS5zZXJpYWxpemVyO1xuICAgIGludmFyaWFudCh0eXBlb2YgcHJvcFNlcmlhbGl6ZXIgPT09IFwiZnVuY3Rpb25cIiwgXCJleHBlY3RlZCBwcm9wIHNjaGVtYSB0byBoYXZlIGEgY2FsbGFibGUgc2VyaWFsaXplclwiKTtcbiAgICB2YXIgc2VyaWFsaXplciA9IGZ1bmN0aW9uIChzb3VyY2VQcm9wZXJ0eVZhbHVlLCBrZXksIHNvdXJjZU9iamVjdCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcHJvcFNlcmlhbGl6ZXIoc291cmNlUHJvcGVydHlWYWx1ZSwga2V5LCBzb3VyY2VPYmplY3QpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBTS0lQO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcHJvcFNjaGVtYSwgeyBzZXJpYWxpemVyOiBzZXJpYWxpemVyIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0UmVmTG9va3VwKG1vZGVsU2NoZW1hKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlc29sdmUodXVpZCwgY2IsIGNvbnRleHQpIHtcbiAgICAgICAgY29udGV4dC5yb290Q29udGV4dC5hd2FpdChtb2RlbFNjaGVtYSwgdXVpZCwgY2IpO1xuICAgIH07XG59XG5mdW5jdGlvbiByZWZlcmVuY2UodGFyZ2V0LCBsb29rdXBGbk9yQWRkaXRpb25hbFByb3BBcmdzLCBhZGRpdGlvbmFsQXJncykge1xuICAgIGludmFyaWFudCghIXRhcmdldCwgXCJObyBtb2RlbFNjaGVtYSBwcm92aWRlZC4gSWYgeW91IGFyZSBpbXBvcnRpbmcgaXQgZnJvbSBhbm90aGVyIGZpbGUgYmUgYXdhcmUgb2YgY2lyY3VsYXIgZGVwZW5kZW5jaWVzLlwiKTtcbiAgICB2YXIgbG9va3VwRm4gPSBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBsb29rdXBGbk9yQWRkaXRpb25hbFByb3BBcmdzXG4gICAgICAgID8gbG9va3VwRm5PckFkZGl0aW9uYWxQcm9wQXJnc1xuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBhZGRpdGlvbmFsQXJncyA9XG4gICAgICAgIGFkZGl0aW9uYWxBcmdzIHx8XG4gICAgICAgICAgICAobG9va3VwRm4gPyB1bmRlZmluZWQgOiBsb29rdXBGbk9yQWRkaXRpb25hbFByb3BBcmdzKTtcbiAgICB2YXIgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB2YXIgY2hpbGRJZGVudGlmaWVyQXR0cmlidXRlO1xuICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgaW52YXJpYW50KHR5cGVvZiB0YXJnZXQgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGxvb2t1cEZuID09PSBcImZ1bmN0aW9uXCIsIFwiaWYgdGhlIHJlZmVyZW5jZSB0YXJnZXQgaXMgc3BlY2lmaWVkIGJ5IGF0dHJpYnV0ZSBuYW1lLCBhIGxvb2t1cCBmdW5jdGlvbiBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgaW52YXJpYW50KCFsb29rdXBGbiB8fCB0eXBlb2YgbG9va3VwRm4gPT09IFwiZnVuY3Rpb25cIiwgXCJzZWNvbmQgYXJndW1lbnQgc2hvdWxkIGJlIGEgbG9va3VwIGZ1bmN0aW9uIG9yIGFkZGl0aW9uYWwgYXJndW1lbnRzIG9iamVjdFwiKTtcbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNoaWxkSWRlbnRpZmllckF0dHJpYnV0ZSA9IHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBtb2RlbFNjaGVtYSA9IGdldERlZmF1bHRNb2RlbFNjaGVtYSh0YXJnZXQpO1xuICAgICAgICAgICAgaW52YXJpYW50KGlzTW9kZWxTY2hlbWEobW9kZWxTY2hlbWEpLCBcImV4cGVjdGVkIG1vZGVsIHNjaGVtYSBvciBzdHJpbmcgYXMgZmlyc3QgYXJndW1lbnQgZm9yICdyZWYnLCBnb3QgXCIgKyBtb2RlbFNjaGVtYSk7XG4gICAgICAgICAgICBsb29rdXBGbiA9IGxvb2t1cEZuIHx8IGNyZWF0ZURlZmF1bHRSZWZMb29rdXAobW9kZWxTY2hlbWEpO1xuICAgICAgICAgICAgY2hpbGRJZGVudGlmaWVyQXR0cmlidXRlID0gZ2V0SWRlbnRpZmllclByb3AobW9kZWxTY2hlbWEpO1xuICAgICAgICAgICAgaW52YXJpYW50KCEhY2hpbGRJZGVudGlmaWVyQXR0cmlidXRlLCBcInByb3ZpZGVkIG1vZGVsIHNjaGVtYSBkb2Vzbid0IGRlZmluZSBhbiBpZGVudGlmaWVyKCkgcHJvcGVydHkgYW5kIGNhbm5vdCBiZSB1c2VkIGJ5ICdyZWYnLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICBzZXJpYWxpemVyOiBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKCFpbml0aWFsaXplZClcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplKCk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbSA/IGl0ZW1bY2hpbGRJZGVudGlmaWVyQXR0cmlidXRlXSA6IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gKGlkZW50aWZpZXJWYWx1ZSwgZG9uZSwgY29udGV4dCkge1xuICAgICAgICAgICAgaWYgKCFpbml0aWFsaXplZClcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplKCk7XG4gICAgICAgICAgICBpZiAoaWRlbnRpZmllclZhbHVlID09PSBudWxsIHx8IGlkZW50aWZpZXJWYWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGRvbmUobnVsbCwgaWRlbnRpZmllclZhbHVlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBsb29rdXBGbihpZGVudGlmaWVyVmFsdWUsIGRvbmUsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXN1bHQgPSBwcm9jZXNzQWRkaXRpb25hbFByb3BBcmdzKHJlc3VsdCwgYWRkaXRpb25hbEFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogTGlzdCBpbmRpY2F0ZXMgdGhhdCB0aGlzIHByb3BlcnR5IGNvbnRhaW5zIGEgbGlzdCBvZiB0aGluZ3MuXG4gKiBBY2NlcHRzIGEgc3ViIG1vZGVsIHNjaGVtYSB0byBzZXJpYWxpemUgdGhlIGNvbnRlbnRzXG4gKlxuICogQGV4YW1wbGVcbiAqIGNsYXNzIFN1YlRhc2sge31cbiAqIGNsYXNzIFRhc2sge31cbiAqIGNsYXNzIFRvZG8ge31cbiAqXG4gKiBjcmVhdGVNb2RlbFNjaGVtYShTdWJUYXNrLCB7XG4gKiAgICAgdGl0bGU6IHRydWUsXG4gKiB9KVxuICogY3JlYXRlTW9kZWxTY2hlbWEoVG9kbywge1xuICogICAgIHRpdGxlOiB0cnVlLFxuICogICAgIHN1YlRhc2s6IGxpc3Qob2JqZWN0KFN1YlRhc2spKSxcbiAqIH0pXG4gKlxuICogY29uc3QgdG9kbyA9IGRlc2VyaWFsaXplKFRvZG8sIHtcbiAqICAgICB0aXRsZTogJ1Rhc2snLFxuICogICAgIHN1YlRhc2s6IFtcbiAqICAgICAgICAge1xuICogICAgICAgICAgICAgdGl0bGU6ICdTdWIgdGFzayAxJyxcbiAqICAgICAgICAgfSxcbiAqICAgICBdLFxuICogfSlcbiAqXG4gKiBAcGFyYW0gcHJvcFNjaGVtYSB0byBiZSB1c2VkIHRvIChkZSlzZXJpYWxpemUgdGhlIGNvbnRlbnRzIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIGFkZGl0aW9uYWxBcmdzIG9wdGlvbmFsIG9iamVjdCB0aGF0IGNvbnRhaW5zIGJlZm9yZURlc2VyaWFsaXplIGFuZC9vciBhZnRlckRlc2VyaWFsaXplIGhhbmRsZXJzXG4gKi9cbmZ1bmN0aW9uIGxpc3QocHJvcFNjaGVtYSwgYWRkaXRpb25hbEFyZ3MpIHtcbiAgICBwcm9wU2NoZW1hID0gcHJvcFNjaGVtYSB8fCBfZGVmYXVsdFByaW1pdGl2ZVByb3A7XG4gICAgaW52YXJpYW50KGlzUHJvcFNjaGVtYShwcm9wU2NoZW1hKSwgXCJleHBlY3RlZCBwcm9wIHNjaGVtYSBhcyBmaXJzdCBhcmd1bWVudFwiKTtcbiAgICBpbnZhcmlhbnQoIWlzQWxpYXNlZFByb3BTY2hlbWEocHJvcFNjaGVtYSksIFwicHJvdmlkZWQgcHJvcCBpcyBhbGlhc2VkLCBwbGVhc2UgcHV0IGFsaWFzZXMgZmlyc3RcIik7XG4gICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgc2VyaWFsaXplcjogZnVuY3Rpb24gKGFyKSB7XG4gICAgICAgICAgICBpZiAoYXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBTS0lQO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW52YXJpYW50KGFyICYmIFwibGVuZ3RoXCIgaW4gYXIgJiYgXCJtYXBcIiBpbiBhciwgXCJleHBlY3RlZCBhcnJheSAobGlrZSkgb2JqZWN0XCIpO1xuICAgICAgICAgICAgcmV0dXJuIGFyLm1hcChwcm9wU2NoZW1hLnNlcmlhbGl6ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBkZXNlcmlhbGl6ZXI6IGZ1bmN0aW9uIChqc29uQXJyYXksIGRvbmUsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShqc29uQXJyYXkpKVxuICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIGRvbmUoXCJbc2VyaWFsaXpyXSBleHBlY3RlZCBKU09OIGFycmF5XCIpO1xuICAgICAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0l0ZW0oanNvblZhbHVlLCBvbkl0ZW1Eb25lLCBpdGVtSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjYWxsYmFja0JlZm9yZShlcnIsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wU2NoZW1hLmRlc2VyaWFsaXplcih2YWx1ZSwgZGVzZXJpYWxpemVEb25lLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uSXRlbURvbmUoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZXNlcmlhbGl6ZURvbmUoZXJyLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3BTY2hlbWEuYWZ0ZXJEZXNlcmlhbGl6ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFmdGVyRGVzZXJpYWxpemUob25JdGVtRG9uZSwgZXJyLCB2YWx1ZSwganNvblZhbHVlLCBqc29uQXJyYXksIGl0ZW1JbmRleCwgY29udGV4dCwgcHJvcFNjaGVtYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkl0ZW1Eb25lKGVyciwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uQmVmb3JlRGVzZXJpYWxpemUoY2FsbGJhY2tCZWZvcmUsIGpzb25WYWx1ZSwganNvbkFycmF5LCBpdGVtSW5kZXgsIGNvbnRleHQsIHByb3BTY2hlbWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYWxsZWwoanNvbkFycmF5LCBwcm9jZXNzSXRlbSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCBkb25lKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRvbmUodW5kZWZpbmVkLCByZXN1bHQuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiBTS0lQICE9PSB4OyB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmVzdWx0ID0gcHJvY2Vzc0FkZGl0aW9uYWxQcm9wQXJncyhyZXN1bHQsIGFkZGl0aW9uYWxBcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFNpbWlsYXIgdG8gbGlzdCwgYnV0IG1hcCByZXByZXNlbnRzIGEgc3RyaW5nIGtleWVkIGR5bmFtaWMgY29sbGVjdGlvbi5cbiAqIFRoaXMgY2FuIGJlIGJvdGggcGxhaW4gb2JqZWN0cyAoZGVmYXVsdCkgb3IgRVM2IE1hcCBsaWtlIHN0cnVjdHVyZXMuXG4gKiBUaGlzIHdpbGwgYmUgaW5mZXJyZWQgZnJvbSB0aGUgaW5pdGlhbCB2YWx1ZSBvZiB0aGUgdGFyZ2V0dGVkIGF0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0gYWRkaXRpb25hbEFyZ3Mgb3B0aW9uYWwgb2JqZWN0IHRoYXQgY29udGFpbnMgYmVmb3JlRGVzZXJpYWxpemUgYW5kL29yIGFmdGVyRGVzZXJpYWxpemUgaGFuZGxlcnNcbiAqL1xuZnVuY3Rpb24gbWFwKHByb3BTY2hlbWEsIGFkZGl0aW9uYWxBcmdzKSB7XG4gICAgcHJvcFNjaGVtYSA9IHByb3BTY2hlbWEgfHwgX2RlZmF1bHRQcmltaXRpdmVQcm9wO1xuICAgIGludmFyaWFudChpc1Byb3BTY2hlbWEocHJvcFNjaGVtYSksIFwiZXhwZWN0ZWQgcHJvcCBzY2hlbWEgYXMgZmlyc3QgYXJndW1lbnRcIik7XG4gICAgaW52YXJpYW50KCFpc0FsaWFzZWRQcm9wU2NoZW1hKHByb3BTY2hlbWEpLCBcInByb3ZpZGVkIHByb3AgaXMgYWxpYXNlZCwgcGxlYXNlIHB1dCBhbGlhc2VzIGZpcnN0XCIpO1xuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgIHNlcmlhbGl6ZXI6IGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICBpbnZhcmlhbnQobSAmJiB0eXBlb2YgbSA9PT0gXCJvYmplY3RcIiwgXCJleHBlY3RlZCBvYmplY3Qgb3IgTWFwXCIpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICAgICAgaWYgKGlzTWFwTGlrZShtKSkge1xuICAgICAgICAgICAgICAgIG0uZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGtleSkgeyByZXR1cm4gKHJlc3VsdFtrZXldID0gcHJvcFNjaGVtYS5zZXJpYWxpemVyKHZhbHVlLCBrZXksIG0pKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbSlcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBwcm9wU2NoZW1hLnNlcmlhbGl6ZXIobVtrZXldLCBrZXksIG0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSxcbiAgICAgICAgZGVzZXJpYWxpemVyOiBmdW5jdGlvbiAoanNvbk9iamVjdCwgZG9uZSwgY29udGV4dCwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghanNvbk9iamVjdCB8fCB0eXBlb2YganNvbk9iamVjdCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCBkb25lKFwiW3NlcmlhbGl6cl0gZXhwZWN0ZWQgSlNPTiBvYmplY3RcIik7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGpzb25PYmplY3QpO1xuICAgICAgICAgICAgbGlzdChwcm9wU2NoZW1hLCBhZGRpdGlvbmFsQXJncykuZGVzZXJpYWxpemVyKGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ganNvbk9iamVjdFtrZXldO1xuICAgICAgICAgICAgfSksIGZ1bmN0aW9uIChlcnIsIHZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIGRvbmUoZXJyKTtcbiAgICAgICAgICAgICAgICB2YXIgaXNNYXAgPSBpc01hcExpa2Uob2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoaXNNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIG9sZFZhbHVlIGlzIGEgbWFwLCB3ZSByZWN5Y2xlIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGFyZSBtYW55IHZhcmlhdGlvbnMgYW5kIHRoaXMgd2F5IHdlIGRvbid0IGhhdmUgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8ga25vdyBhYm91dCB0aGUgb3JpZ2luYWwgY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBvbGRWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01hcClcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLnNldChrZXlzW2ldLCB2YWx1ZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVtrZXlzW2ldXSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICBkb25lKG51bGwsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH0sIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXN1bHQgPSBwcm9jZXNzQWRkaXRpb25hbFByb3BBcmdzKHJlc3VsdCwgYWRkaXRpb25hbEFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogU2ltaWxhciB0byBtYXAsIG1hcEFzQXJyYXkgY2FuIGJlIHVzZWQgdG8gc2VyaWFsaXplIGEgbWFwLWxpa2UgY29sbGVjdGlvbiB3aGVyZSB0aGUga2V5IGlzXG4gKiBjb250YWluZWQgaW4gdGhlICd2YWx1ZSBvYmplY3QnLiBFeGFtcGxlOiBjb25zaWRlciBNYXA8aWQ6IG51bWJlciwgY3VzdG9tZXI6IEN1c3RvbWVyPiB3aGVyZSB0aGVcbiAqIEN1c3RvbWVyIG9iamVjdCBoYXMgdGhlIGlkIHN0b3JlZCBvbiBpdHNlbGYuIG1hcEFzQXJyYXkgc3RvcmVzIGFsbCB2YWx1ZXMgZnJvbSB0aGUgbWFwIGludG8gYW5cbiAqIGFycmF5IHdoaWNoIGlzIHNlcmlhbGl6ZWQuIERlc2VyaWFsaXphdGlvbiByZXR1cm5zIGEgRVM2IE1hcCBvciBwbGFpbiBvYmplY3Qgb2JqZWN0IHdoZXJlIHRoZVxuICogYGtleVByb3BlcnR5TmFtZWAgb2YgZWFjaCBvYmplY3QgaXMgdXNlZCBmb3Iga2V5cy4gRm9yIEVTNiBtYXBzIHRoaXMgaGFzIHRoZSBiZW5lZml0IG9mIGJlaW5nXG4gKiBhbGxvd2VkIHRvIGhhdmUgbm9uLXN0cmluZyBrZXlzIGluIHRoZSBtYXAuIFRoZSBzZXJpYWxpemVkIGpzb24gYWxzbyBtYXkgYmUgc2xpZ2h0bHkgbW9yZVxuICogY29tcGFjdC5cbiAqXG4gKiBAcGFyYW0ga2V5UHJvcGVydHlOYW1lIC0gdGhlIHByb3BlcnR5IG9mIHN0b3JlZCBvYmplY3RzIHVzZWQgYXMga2V5IGluIHRoZSBtYXBcbiAqIEBwYXJhbSBhZGRpdGlvbmFsQXJncyBvcHRpb25hbCBvYmplY3QgdGhhdCBjb250YWlucyBiZWZvcmVEZXNlcmlhbGl6ZSBhbmQvb3IgYWZ0ZXJEZXNlcmlhbGl6ZSBoYW5kbGVyc1xuICovXG5mdW5jdGlvbiBtYXBBc0FycmF5KHByb3BTY2hlbWEsIGtleVByb3BlcnR5TmFtZSwgYWRkaXRpb25hbEFyZ3MpIHtcbiAgICBwcm9wU2NoZW1hID0gcHJvcFNjaGVtYSB8fCBfZGVmYXVsdFByaW1pdGl2ZVByb3A7XG4gICAgaW52YXJpYW50KGlzUHJvcFNjaGVtYShwcm9wU2NoZW1hKSwgXCJleHBlY3RlZCBwcm9wIHNjaGVtYSBhcyBmaXJzdCBhcmd1bWVudFwiKTtcbiAgICBpbnZhcmlhbnQoISFrZXlQcm9wZXJ0eU5hbWUsIFwiZXhwZWN0ZWQga2V5IHByb3BlcnR5IG5hbWUgYXMgc2Vjb25kIGFyZ3VtZW50XCIpO1xuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgIHNlcmlhbGl6ZXI6IGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICBpbnZhcmlhbnQobSAmJiB0eXBlb2YgbSA9PT0gXCJvYmplY3RcIiwgXCJleHBlY3RlZCBvYmplY3Qgb3IgTWFwXCIpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICAgICAgICBpZiAoaXNNYXBMaWtlKG0pKSB7XG4gICAgICAgICAgICAgICAgbS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7IHJldHVybiByZXN1bHQucHVzaChwcm9wU2NoZW1hLnNlcmlhbGl6ZXIodmFsdWUsIGtleSwgbSkpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBtKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwcm9wU2NoZW1hLnNlcmlhbGl6ZXIobVtrZXldLCBrZXksIG0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGRlc2VyaWFsaXplcjogZnVuY3Rpb24gKGpzb25BcnJheSwgZG9uZSwgY29udGV4dCwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIGxpc3QocHJvcFNjaGVtYSwgYWRkaXRpb25hbEFyZ3MpLmRlc2VyaWFsaXplcihqc29uQXJyYXksIGZ1bmN0aW9uIChlcnIsIHZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIGRvbmUoZXJyKTtcbiAgICAgICAgICAgICAgICB2YXIgb2xkVmFsdWVJc01hcCA9IGlzTWFwTGlrZShvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZUlzTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gb2xkVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGpzb25BcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZUlzTWFwKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUuc2V0KHZhbHVlc1tpXVtrZXlQcm9wZXJ0eU5hbWVdLCB2YWx1ZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVt2YWx1ZXNbaV1ba2V5UHJvcGVydHlOYW1lXS50b1N0cmluZygpXSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgICAgICBkb25lKG51bGwsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgIH0sIGNvbnRleHQsIHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJlc3VsdCA9IHByb2Nlc3NBZGRpdGlvbmFsUHJvcEFyZ3MocmVzdWx0LCBhZGRpdGlvbmFsQXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBJbmRpY2F0ZXMgdGhhdCB0aGlzIGZpZWxkIGlzIG9ubHkgbmVlZCB0byBwdXR0ZWQgaW4gdGhlIHNlcmlhbGl6ZWQganNvbiBvclxuICogZGVzZXJpYWxpemVkIGluc3RhbmNlLCB3aXRob3V0IGFueSB0cmFuc2Zvcm1hdGlvbnMuIFN0YXkgd2l0aCBpdHMgb3JpZ2luYWwgdmFsdWVcbiAqXG4gKiBAZXhhbXBsZVxuICogY3JlYXRlTW9kZWxTY2hlbWEoTW9kZWwsIHtcbiAqICAgICByYXdEYXRhOiByYXcoKSxcbiAqIH0pXG4gKlxuICogc2VyaWFsaXplKG5ldyBNb2RlbCh7IHJhd0RhdGE6IHsgYTogMSwgYjogW10sIGM6IHt9IH0gfSB9KSlcbiAqIC8vIHsgXCJyYXdEYXRhXCI6IHsgYTogMSwgYjogW10sIGM6IHt9IH0gfSB9XG4gKlxuICogQHBhcmFtIGFkZGl0aW9uYWxBcmdzIG9wdGlvbmFsIG9iamVjdCB0aGF0IGNvbnRhaW5zIGJlZm9yZURlc2VyaWFsaXplIGFuZC9vciBhZnRlckRlc2VyaWFsaXplIGhhbmRsZXJzXG4gKi9cbmZ1bmN0aW9uIHJhdyhhZGRpdGlvbmFsQXJncykge1xuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgIHNlcmlhbGl6ZXI6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBkZXNlcmlhbGl6ZXI6IGZ1bmN0aW9uIChqc29uVmFsdWUsIGRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB2b2lkIGRvbmUobnVsbCwganNvblZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmVzdWx0ID0gcHJvY2Vzc0FkZGl0aW9uYWxQcm9wQXJncyhyZXN1bHQsIGFkZGl0aW9uYWxBcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgeyBTS0lQLCBhbGlhcywgY2FuY2VsRGVzZXJpYWxpemUsIGNyZWF0ZU1vZGVsU2NoZW1hLCBjcmVhdGVTaW1wbGVTY2hlbWEsIGN1c3RvbSwgZGF0ZSwgZGVzZXJpYWxpemUsIGdldERlZmF1bHRNb2RlbFNjaGVtYSwgaWRlbnRpZmllciwgbGlzdCwgbWFwLCBtYXBBc0FycmF5LCBvYmplY3QsIG9wdGlvbmFsLCBwcmltaXRpdmUsIHJhdywgcmVmZXJlbmNlLCBzZXJpYWxpemFibGUsIHNlcmlhbGl6ZSwgc2VyaWFsaXplQWxsLCBzZXREZWZhdWx0TW9kZWxTY2hlbWEsIHVwZGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VyaWFsaXpyLmpzLm1hcFxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n')},function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\nexports.nextQuestion = exports.state = void 0;\n__webpack_require__(4);\nvar bimboType_1 = __webpack_require__(8);\nvar question_1 = __webpack_require__(26);\nvar serializr_1 = __webpack_require__(0);\nvar jsonBimboTypes = __webpack_require__(27);\nvar jsonPersonalityQuestions = __webpack_require__(28);\nvar answer_1 = __webpack_require__(3);\nvar Util_1 = __webpack_require__(2);\nvar kd = __webpack_require__(29);\nvar maxPersonalities = 2; // Maximum number of personalities in result\nvar debug = false;\nvar appArea = document.getElementById("bimbo-personality-quiz");\nvar State = /** @class */ (function () {\n    function State(questions) {\n        this.currentQuestionIndex = 0;\n        this.answers = {};\n        this.questionsDict = {};\n        this.bimboTypes = [];\n        this.questions = questions;\n        for (var _i = 0, questions_1 = questions; _i < questions_1.length; _i++) {\n            var q = questions_1[_i];\n            this.questionsDict[q.id] = q;\n        }\n    }\n    State.prototype.reset = function () {\n        this.answers = {};\n        this.currentQuestionIndex = 0;\n    };\n    return State;\n}());\nvar tmpQ = new question_1.Question("tmp", "Question", [new answer_1.Answer("0", "Answer", "")]);\n//export const state = new State([tmpQ])\nexports.state = new State(serializr_1.deserialize(question_1.Question, jsonPersonalityQuestions));\nexports.state.bimboTypes = serializr_1.deserialize(bimboType_1.BimboType, jsonBimboTypes);\nfunction nextQuestion() {\n    if (exports.state.currentQuestionIndex < exports.state.questions.length) {\n        var q = exports.state.questions[exports.state.currentQuestionIndex];\n        appArea.innerHTML = q.toHtml();\n        q.register();\n        exports.state.currentQuestionIndex += 1;\n    }\n    else {\n        var posteriors = bimboType_1.BimboType.calcPosterior(exports.state.answers, exports.state.bimboTypes);\n        posteriors.sort(function (a, b) {\n            return b.conditional - a.conditional;\n        });\n        // Only the most likely types\n        var top_2 = [];\n        var sum = 0;\n        for (var _i = 0, posteriors_1 = posteriors; _i < posteriors_1.length; _i++) {\n            var p = posteriors_1[_i];\n            sum += p.conditional;\n            top_2.push(p);\n            if (!debug && (top_2.length >= maxPersonalities || sum > 0.9))\n                break;\n        }\n        var params_1 = new URLSearchParams(location.search);\n        //console.log(params.getAll("name"))\n        params_1.delete("type");\n        for (var _a = 0, top_1 = top_2; _a < top_1.length; _a++) {\n            var entry = top_1[_a];\n            params_1.append("type", Util_1.simpleEncode(entry.bimbo.id));\n            params_1.append("likely", entry.conditional.toFixed(3));\n        }\n        //console.log(params.getAll("type"))\n        window.history.replaceState({}, "", location.pathname + "?" + params_1);\n        appArea.innerHTML = "\\n        <h1 class=\\"results-title\\">Your Bimbo Personality is...</h1>\\n        <div class=\\"bimbo-cards\\">\\n            " + top_2.map(function (entry) {\n            return entry.bimbo.toHtml(entry.conditional);\n        }).join("") + "\\n        </div>\\n        <div style=\\"margin-top: 40px;text-align: center;\\">\\n           <h4 style=\\"display: inline;\\">Likelihood of something else: </h4>\\n           <p style=\\"display: inline; font-size: 1em;\\">\\n               " + ((1 - sum) * 100).toFixed(1) + " %\\n           </p>\\n        </div>\\n        <br><br>\\n        <div class=\\"window retake-dialogue\\">\\n            <h3>Retake quiz?</h3>\\n            <p> Not happy with the result? Want to change an answer? Or try filling out the quiz for your favourite character!</p>\\n            <div class=\\"answer\\" id=\\"retakeB\\"> <h3> Yes, retake quiz. </h3> </div>\\n        </div>\\n      ";\n        document.getElementById(\'retakeB\').addEventListener(\'click\', function () {\n            appArea.scrollIntoView();\n            reset();\n        });\n    }\n}\nexports.nextQuestion = nextQuestion;\nfunction reset() {\n    exports.state.reset();\n    nextQuestion();\n}\nfunction classStats(samples) {\n    var stats = bimboType_1.BimboType.calcVolumeSample(exports.state.questions, samples);\n    stats.sort(function (a, b) { return b.wins - a.wins; });\n    for (var bimbo in stats) {\n        var b = stats[bimbo];\n        console.log(b.bimbo.padEnd(11) + ": wins = " + b.wins + ", avg: " + (100 * b.likelihood / b.wins).toFixed(1) + "%");\n    }\n}\nfunction questionStats() {\n    for (var _i = 0, _a = exports.state.questions; _i < _a.length; _i++) {\n        var question = _a[_i];\n        var totalAnswerData = Array(question.answers.length).fill(0);\n        for (var _b = 0, _c = exports.state.bimboTypes; _b < _c.length; _b++) {\n            var bimbo = _c[_b];\n            for (var i = 0; i < question.answers.length; i++) {\n                totalAnswerData[i] += bimbo.answerData[question.id][i];\n            }\n        }\n        console.log(question.id.padEnd(16) + ": " + Util_1.scaleTo1(totalAnswerData).map(function (x) { return (x * 100).toFixed(0).padEnd(2); }));\n    }\n}\nfunction printStats() {\n    classStats(20000);\n    console.log("-------------------------------------");\n    questionStats();\n    console.log("-------------------------------------");\n}\nif (debug) {\n    printStats();\n}\n// Load from URL search string\nvar params = new URLSearchParams(location.search);\nvar paramTypes = params.getAll("type");\nvar paramLikelihoods = params.getAll("likely");\nvar loadedTypes = [];\nif (paramTypes.length > 0) {\n    var _loop_1 = function (i) {\n        var t = paramTypes[i];\n        var bimbo = exports.state.bimboTypes.find(function (b) {\n            return b.name == Util_1.simpleDecode(t);\n        });\n        var likely = undefined;\n        if (paramLikelihoods.length > i)\n            likely = parseFloat(paramLikelihoods[i]);\n        if (bimbo != undefined) {\n            loadedTypes.push({ bimbo: bimbo, likely: likely });\n        }\n    };\n    for (var i = 0; i < paramTypes.length; i++) {\n        _loop_1(i);\n    }\n}\nif (loadedTypes.length > 0) {\n    appArea.scrollIntoView();\n    appArea.innerHTML = "\\n        <h1 class=\\"results-title\\">Your Bimbo Personality is...</h1>\\n        <div class=\\"bimbo-cards\\">\\n            " + loadedTypes.map(function (entry) {\n        return entry.bimbo.toHtml(entry.likely);\n    }).join("") + "\\n        </div>\\n        <br><br>\\n        <div class=\\"window retake-dialogue\\">\\n            <h3>Retake quiz?</h3>\\n            <p> Not happy with the result? Want to change an answer? Or try filling out the quiz for your favourite character!</p>\\n            <div class=\\"answer\\" id=\\"retakeB\\"> <h3> Yes, retake quiz. </h3> </div>\\n        </div>\\n        ";\n    document.getElementById(\'retakeB\').addEventListener(\'click\', function () {\n        // Remove any search params\n        window.history.replaceState({}, "", "" + location.pathname);\n        appArea.scrollIntoView();\n        reset();\n    });\n}\nelse {\n    // Remove any search params\n    window.history.replaceState({}, "", "" + location.pathname);\n    // Go to first question\n    nextQuestion();\n}\n// Start main loop for key detection\nkd.run(function () {\n    kd.tick();\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cz83OTRmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQThDLGNBQWM7QUFDNUQ7QUFDQSxtQkFBTyxDQUFDLENBQWM7QUFDdEIsa0JBQWtCLG1CQUFPLENBQUMsQ0FBYTtBQUN2QyxpQkFBaUIsbUJBQU8sQ0FBQyxFQUFZO0FBQ3JDLGtCQUFrQixtQkFBTyxDQUFDLENBQVc7QUFDckMscUJBQXFCLG1CQUFPLENBQUMsRUFBeUI7QUFDdEQsK0JBQStCLG1CQUFPLENBQUMsRUFBbUM7QUFDMUUsZUFBZSxtQkFBTyxDQUFDLENBQVU7QUFDakMsYUFBYSxtQkFBTyxDQUFDLENBQWE7QUFDbEMsU0FBUyxtQkFBTyxDQUFDLEVBQVU7QUFDM0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCx5QkFBeUI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsMEJBQTBCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxtQkFBbUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsU0FBUyxzRUFBc0UsbUJBQW1CLDRDQUE0Qyw4RUFBOEUsZ0JBQWdCO0FBQzVPO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msd0JBQXdCLEVBQUU7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQjtBQUNsRTtBQUNBO0FBQ0EsdURBQXVELGdCQUFnQjtBQUN2RTtBQUNBLDJCQUEyQiw2QkFBNkI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsdUdBQXVHLHVDQUF1QyxFQUFFO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQkFBK0I7QUFDN0Q7QUFDQTtBQUNBLG1CQUFtQix1QkFBdUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubmV4dFF1ZXN0aW9uID0gZXhwb3J0cy5zdGF0ZSA9IHZvaWQgMDtcbnJlcXVpcmUoXCIuL2luZGV4LnNjc3NcIik7XG52YXIgYmltYm9UeXBlXzEgPSByZXF1aXJlKFwiLi9iaW1ib1R5cGVcIik7XG52YXIgcXVlc3Rpb25fMSA9IHJlcXVpcmUoXCIuL3F1ZXN0aW9uXCIpO1xudmFyIHNlcmlhbGl6cl8xID0gcmVxdWlyZShcInNlcmlhbGl6clwiKTtcbnZhciBqc29uQmltYm9UeXBlcyA9IHJlcXVpcmUoXCIuL2RhdGEvYmltYm8tdHlwZXMuanNvblwiKTtcbnZhciBqc29uUGVyc29uYWxpdHlRdWVzdGlvbnMgPSByZXF1aXJlKFwiLi9kYXRhL3BlcnNvbmFsaXR5LXF1ZXN0aW9ucy5qc29uXCIpO1xudmFyIGFuc3dlcl8xID0gcmVxdWlyZShcIi4vYW5zd2VyXCIpO1xudmFyIFV0aWxfMSA9IHJlcXVpcmUoXCIuL3V0aWwvVXRpbFwiKTtcbnZhciBrZCA9IHJlcXVpcmUoJ2tleWRyb3duJyk7XG52YXIgbWF4UGVyc29uYWxpdGllcyA9IDI7IC8vIE1heGltdW0gbnVtYmVyIG9mIHBlcnNvbmFsaXRpZXMgaW4gcmVzdWx0XG52YXIgZGVidWcgPSBmYWxzZTtcbnZhciBhcHBBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiaW1iby1wZXJzb25hbGl0eS1xdWl6XCIpO1xudmFyIFN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRlKHF1ZXN0aW9ucykge1xuICAgICAgICB0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5hbnN3ZXJzID0ge307XG4gICAgICAgIHRoaXMucXVlc3Rpb25zRGljdCA9IHt9O1xuICAgICAgICB0aGlzLmJpbWJvVHlwZXMgPSBbXTtcbiAgICAgICAgdGhpcy5xdWVzdGlvbnMgPSBxdWVzdGlvbnM7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcXVlc3Rpb25zXzEgPSBxdWVzdGlvbnM7IF9pIDwgcXVlc3Rpb25zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcSA9IHF1ZXN0aW9uc18xW19pXTtcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zRGljdFtxLmlkXSA9IHE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU3RhdGUucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFuc3dlcnMgPSB7fTtcbiAgICAgICAgdGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleCA9IDA7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGU7XG59KCkpO1xudmFyIHRtcFEgPSBuZXcgcXVlc3Rpb25fMS5RdWVzdGlvbihcInRtcFwiLCBcIlF1ZXN0aW9uXCIsIFtuZXcgYW5zd2VyXzEuQW5zd2VyKFwiMFwiLCBcIkFuc3dlclwiLCBcIlwiKV0pO1xuLy9leHBvcnQgY29uc3Qgc3RhdGUgPSBuZXcgU3RhdGUoW3RtcFFdKVxuZXhwb3J0cy5zdGF0ZSA9IG5ldyBTdGF0ZShzZXJpYWxpenJfMS5kZXNlcmlhbGl6ZShxdWVzdGlvbl8xLlF1ZXN0aW9uLCBqc29uUGVyc29uYWxpdHlRdWVzdGlvbnMpKTtcbmV4cG9ydHMuc3RhdGUuYmltYm9UeXBlcyA9IHNlcmlhbGl6cl8xLmRlc2VyaWFsaXplKGJpbWJvVHlwZV8xLkJpbWJvVHlwZSwganNvbkJpbWJvVHlwZXMpO1xuZnVuY3Rpb24gbmV4dFF1ZXN0aW9uKCkge1xuICAgIGlmIChleHBvcnRzLnN0YXRlLmN1cnJlbnRRdWVzdGlvbkluZGV4IDwgZXhwb3J0cy5zdGF0ZS5xdWVzdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBxID0gZXhwb3J0cy5zdGF0ZS5xdWVzdGlvbnNbZXhwb3J0cy5zdGF0ZS5jdXJyZW50UXVlc3Rpb25JbmRleF07XG4gICAgICAgIGFwcEFyZWEuaW5uZXJIVE1MID0gcS50b0h0bWwoKTtcbiAgICAgICAgcS5yZWdpc3RlcigpO1xuICAgICAgICBleHBvcnRzLnN0YXRlLmN1cnJlbnRRdWVzdGlvbkluZGV4ICs9IDE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgcG9zdGVyaW9ycyA9IGJpbWJvVHlwZV8xLkJpbWJvVHlwZS5jYWxjUG9zdGVyaW9yKGV4cG9ydHMuc3RhdGUuYW5zd2VycywgZXhwb3J0cy5zdGF0ZS5iaW1ib1R5cGVzKTtcbiAgICAgICAgcG9zdGVyaW9ycy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYi5jb25kaXRpb25hbCAtIGEuY29uZGl0aW9uYWw7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBPbmx5IHRoZSBtb3N0IGxpa2VseSB0eXBlc1xuICAgICAgICB2YXIgdG9wXzIgPSBbXTtcbiAgICAgICAgdmFyIHN1bSA9IDA7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcG9zdGVyaW9yc18xID0gcG9zdGVyaW9yczsgX2kgPCBwb3N0ZXJpb3JzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcCA9IHBvc3RlcmlvcnNfMVtfaV07XG4gICAgICAgICAgICBzdW0gKz0gcC5jb25kaXRpb25hbDtcbiAgICAgICAgICAgIHRvcF8yLnB1c2gocCk7XG4gICAgICAgICAgICBpZiAoIWRlYnVnICYmICh0b3BfMi5sZW5ndGggPj0gbWF4UGVyc29uYWxpdGllcyB8fCBzdW0gPiAwLjkpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXJhbXNfMSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhwYXJhbXMuZ2V0QWxsKFwibmFtZVwiKSlcbiAgICAgICAgcGFyYW1zXzEuZGVsZXRlKFwidHlwZVwiKTtcbiAgICAgICAgZm9yICh2YXIgX2EgPSAwLCB0b3BfMSA9IHRvcF8yOyBfYSA8IHRvcF8xLmxlbmd0aDsgX2ErKykge1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0gdG9wXzFbX2FdO1xuICAgICAgICAgICAgcGFyYW1zXzEuYXBwZW5kKFwidHlwZVwiLCBVdGlsXzEuc2ltcGxlRW5jb2RlKGVudHJ5LmJpbWJvLmlkKSk7XG4gICAgICAgICAgICBwYXJhbXNfMS5hcHBlbmQoXCJsaWtlbHlcIiwgZW50cnkuY29uZGl0aW9uYWwudG9GaXhlZCgzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9jb25zb2xlLmxvZyhwYXJhbXMuZ2V0QWxsKFwidHlwZVwiKSlcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBcIlwiLCBsb2NhdGlvbi5wYXRobmFtZSArIFwiP1wiICsgcGFyYW1zXzEpO1xuICAgICAgICBhcHBBcmVhLmlubmVySFRNTCA9IFwiXFxuICAgICAgICA8aDEgY2xhc3M9XFxcInJlc3VsdHMtdGl0bGVcXFwiPllvdXIgQmltYm8gUGVyc29uYWxpdHkgaXMuLi48L2gxPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYmltYm8tY2FyZHNcXFwiPlxcbiAgICAgICAgICAgIFwiICsgdG9wXzIubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5LmJpbWJvLnRvSHRtbChlbnRyeS5jb25kaXRpb25hbCk7XG4gICAgICAgIH0pLmpvaW4oXCJcIikgKyBcIlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IHN0eWxlPVxcXCJtYXJnaW4tdG9wOiA0MHB4O3RleHQtYWxpZ246IGNlbnRlcjtcXFwiPlxcbiAgICAgICAgICAgPGg0IHN0eWxlPVxcXCJkaXNwbGF5OiBpbmxpbmU7XFxcIj5MaWtlbGlob29kIG9mIHNvbWV0aGluZyBlbHNlOiA8L2g0PlxcbiAgICAgICAgICAgPHAgc3R5bGU9XFxcImRpc3BsYXk6IGlubGluZTsgZm9udC1zaXplOiAxZW07XFxcIj5cXG4gICAgICAgICAgICAgICBcIiArICgoMSAtIHN1bSkgKiAxMDApLnRvRml4ZWQoMSkgKyBcIiAlXFxuICAgICAgICAgICA8L3A+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxicj48YnI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ3aW5kb3cgcmV0YWtlLWRpYWxvZ3VlXFxcIj5cXG4gICAgICAgICAgICA8aDM+UmV0YWtlIHF1aXo/PC9oMz5cXG4gICAgICAgICAgICA8cD4gTm90IGhhcHB5IHdpdGggdGhlIHJlc3VsdD8gV2FudCB0byBjaGFuZ2UgYW4gYW5zd2VyPyBPciB0cnkgZmlsbGluZyBvdXQgdGhlIHF1aXogZm9yIHlvdXIgZmF2b3VyaXRlIGNoYXJhY3RlciE8L3A+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYW5zd2VyXFxcIiBpZD1cXFwicmV0YWtlQlxcXCI+IDxoMz4gWWVzLCByZXRha2UgcXVpei4gPC9oMz4gPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICBcIjtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldGFrZUInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFwcEFyZWEuc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMubmV4dFF1ZXN0aW9uID0gbmV4dFF1ZXN0aW9uO1xuZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgZXhwb3J0cy5zdGF0ZS5yZXNldCgpO1xuICAgIG5leHRRdWVzdGlvbigpO1xufVxuZnVuY3Rpb24gY2xhc3NTdGF0cyhzYW1wbGVzKSB7XG4gICAgdmFyIHN0YXRzID0gYmltYm9UeXBlXzEuQmltYm9UeXBlLmNhbGNWb2x1bWVTYW1wbGUoZXhwb3J0cy5zdGF0ZS5xdWVzdGlvbnMsIHNhbXBsZXMpO1xuICAgIHN0YXRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGIud2lucyAtIGEud2luczsgfSk7XG4gICAgZm9yICh2YXIgYmltYm8gaW4gc3RhdHMpIHtcbiAgICAgICAgdmFyIGIgPSBzdGF0c1tiaW1ib107XG4gICAgICAgIGNvbnNvbGUubG9nKGIuYmltYm8ucGFkRW5kKDExKSArIFwiOiB3aW5zID0gXCIgKyBiLndpbnMgKyBcIiwgYXZnOiBcIiArICgxMDAgKiBiLmxpa2VsaWhvb2QgLyBiLndpbnMpLnRvRml4ZWQoMSkgKyBcIiVcIik7XG4gICAgfVxufVxuZnVuY3Rpb24gcXVlc3Rpb25TdGF0cygpIHtcbiAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gZXhwb3J0cy5zdGF0ZS5xdWVzdGlvbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBxdWVzdGlvbiA9IF9hW19pXTtcbiAgICAgICAgdmFyIHRvdGFsQW5zd2VyRGF0YSA9IEFycmF5KHF1ZXN0aW9uLmFuc3dlcnMubGVuZ3RoKS5maWxsKDApO1xuICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gZXhwb3J0cy5zdGF0ZS5iaW1ib1R5cGVzOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgdmFyIGJpbWJvID0gX2NbX2JdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWVzdGlvbi5hbnN3ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdG90YWxBbnN3ZXJEYXRhW2ldICs9IGJpbWJvLmFuc3dlckRhdGFbcXVlc3Rpb24uaWRdW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKHF1ZXN0aW9uLmlkLnBhZEVuZCgxNikgKyBcIjogXCIgKyBVdGlsXzEuc2NhbGVUbzEodG90YWxBbnN3ZXJEYXRhKS5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICh4ICogMTAwKS50b0ZpeGVkKDApLnBhZEVuZCgyKTsgfSkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHByaW50U3RhdHMoKSB7XG4gICAgY2xhc3NTdGF0cygyMDAwMCk7XG4gICAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xuICAgIHF1ZXN0aW9uU3RhdHMoKTtcbiAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG59XG5pZiAoZGVidWcpIHtcbiAgICBwcmludFN0YXRzKCk7XG59XG4vLyBMb2FkIGZyb20gVVJMIHNlYXJjaCBzdHJpbmdcbnZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2F0aW9uLnNlYXJjaCk7XG52YXIgcGFyYW1UeXBlcyA9IHBhcmFtcy5nZXRBbGwoXCJ0eXBlXCIpO1xudmFyIHBhcmFtTGlrZWxpaG9vZHMgPSBwYXJhbXMuZ2V0QWxsKFwibGlrZWx5XCIpO1xudmFyIGxvYWRlZFR5cGVzID0gW107XG5pZiAocGFyYW1UeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICB2YXIgdCA9IHBhcmFtVHlwZXNbaV07XG4gICAgICAgIHZhciBiaW1ibyA9IGV4cG9ydHMuc3RhdGUuYmltYm9UeXBlcy5maW5kKGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICByZXR1cm4gYi5uYW1lID09IFV0aWxfMS5zaW1wbGVEZWNvZGUodCk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbGlrZWx5ID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAocGFyYW1MaWtlbGlob29kcy5sZW5ndGggPiBpKVxuICAgICAgICAgICAgbGlrZWx5ID0gcGFyc2VGbG9hdChwYXJhbUxpa2VsaWhvb2RzW2ldKTtcbiAgICAgICAgaWYgKGJpbWJvICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbG9hZGVkVHlwZXMucHVzaCh7IGJpbWJvOiBiaW1ibywgbGlrZWx5OiBsaWtlbHkgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1UeXBlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBfbG9vcF8xKGkpO1xuICAgIH1cbn1cbmlmIChsb2FkZWRUeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgYXBwQXJlYS5zY3JvbGxJbnRvVmlldygpO1xuICAgIGFwcEFyZWEuaW5uZXJIVE1MID0gXCJcXG4gICAgICAgIDxoMSBjbGFzcz1cXFwicmVzdWx0cy10aXRsZVxcXCI+WW91ciBCaW1ibyBQZXJzb25hbGl0eSBpcy4uLjwvaDE+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiaW1iby1jYXJkc1xcXCI+XFxuICAgICAgICAgICAgXCIgKyBsb2FkZWRUeXBlcy5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgIHJldHVybiBlbnRyeS5iaW1iby50b0h0bWwoZW50cnkubGlrZWx5KTtcbiAgICB9KS5qb2luKFwiXCIpICsgXCJcXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPGJyPjxicj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIndpbmRvdyByZXRha2UtZGlhbG9ndWVcXFwiPlxcbiAgICAgICAgICAgIDxoMz5SZXRha2UgcXVpej88L2gzPlxcbiAgICAgICAgICAgIDxwPiBOb3QgaGFwcHkgd2l0aCB0aGUgcmVzdWx0PyBXYW50IHRvIGNoYW5nZSBhbiBhbnN3ZXI/IE9yIHRyeSBmaWxsaW5nIG91dCB0aGUgcXVpeiBmb3IgeW91ciBmYXZvdXJpdGUgY2hhcmFjdGVyITwvcD5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhbnN3ZXJcXFwiIGlkPVxcXCJyZXRha2VCXFxcIj4gPGgzPiBZZXMsIHJldGFrZSBxdWl6LiA8L2gzPiA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldGFrZUInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBzZWFyY2ggcGFyYW1zXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgXCJcIiArIGxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICAgICAgYXBwQXJlYS5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICByZXNldCgpO1xuICAgIH0pO1xufVxuZWxzZSB7XG4gICAgLy8gUmVtb3ZlIGFueSBzZWFyY2ggcGFyYW1zXG4gICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBcIlwiLCBcIlwiICsgbG9jYXRpb24ucGF0aG5hbWUpO1xuICAgIC8vIEdvIHRvIGZpcnN0IHF1ZXN0aW9uXG4gICAgbmV4dFF1ZXN0aW9uKCk7XG59XG4vLyBTdGFydCBtYWluIGxvb3AgZm9yIGtleSBkZXRlY3Rpb25cbmtkLnJ1bihmdW5jdGlvbiAoKSB7XG4gICAga2QudGljaygpO1xufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n')},function(module,exports,__webpack_require__){"use strict";eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.scaleTo1 = exports.simpleDecode = exports.simpleEncode = exports.wait = exports.mergeAll = exports.shuffleArray = exports.uuidv4 = exports.download = exports.clamp = exports.capitalize = void 0;\nvar js_cipher_1 = __webpack_require__(9);\nfunction capitalize(s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n}\nexports.capitalize = capitalize;\nfunction clamp(min, value, max) {\n    return Math.min(max, Math.max(min, value));\n}\nexports.clamp = clamp;\nfunction download(filename, text) {\n    var element = document.createElement('a');\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    element.setAttribute('download', filename);\n    element.style.display = 'none';\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n}\nexports.download = download;\nfunction uuidv4() {\n    return (\"\" + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n        return (Number(c) ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> Number(c) / 4).toString(16);\n    });\n}\nexports.uuidv4 = uuidv4;\nfunction shuffleArray(array) {\n    var _a;\n    for (var i = array.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        _a = [array[j], array[i]], array[i] = _a[0], array[j] = _a[1];\n    }\n}\nexports.shuffleArray = shuffleArray;\n/**\n *\n * @param objects List of objects to be merged.\n * @param merge Function describing how two compatible objects should be merged\n * @param mergable Function returning True if two objects are compatible and can be merged\n * @param includeMerge Function returning True if the merged object should be accepted.\n *                      If False, the merged object will not be included in the result.\n *\n * @return List of merged objects.\n */\nfunction mergeAll(objects, merge, mergable, includeMerge) {\n    if (includeMerge === void 0) { includeMerge = function () { return true; }; }\n    var merged = [];\n    // Loop backwards so that we can remove from list\n    for (var i = objects.length - 1; i >= 0;) {\n        // Pick the last object A and remove it from list.\n        var a = objects.splice(i, 1)[0];\n        // Loop backwards over all remaining objects and find those that can be merged to A\n        for (var j = objects.length - 1; j >= 0; j--) {\n            // Merge A with all objects it can be merged with. Merged objects are removed after merge.\n            if (mergable(a, objects[j])) {\n                a = merge(a, objects.splice(j, 1)[0]);\n            }\n        }\n        // Evaluate merged object. If it is accepted, add it to the result.\n        if (includeMerge(a)) {\n            merged.push(a);\n        }\n        // Go to the last object remaining in list. This will be next A.\n        i = objects.length - 1;\n    }\n    return merged;\n}\nexports.mergeAll = mergeAll;\nfunction wait(ms) {\n    return new Promise(function (r, j) {\n        setTimeout(r, ms);\n    });\n}\nexports.wait = wait;\nvar cipher = new js_cipher_1.Cipher();\nfunction simpleEncode(s) {\n    return cipher.encrypt(s, 3);\n}\nexports.simpleEncode = simpleEncode;\nfunction simpleDecode(s) {\n    return cipher.decrypt(s, 3);\n}\nexports.simpleDecode = simpleDecode;\n/**\n * Scales a list of numbers so that their sum is 1.\n * @param xs\n */\nfunction scaleTo1(xs) {\n    var sum = xs.reduce(function (a, b) { return a + b; });\n    var newXs;\n    if (sum != 0) {\n        newXs = xs.map(function (x) { return x / sum; });\n    }\n    else {\n        newXs = xs.map(function (x) { return 1 / xs.length; });\n    }\n    return newXs;\n}\nexports.scaleTo1 = scaleTo1;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9VdGlsLnRzPzNiYjAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLENBQVc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsT0FBTztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2QkFBNkIsYUFBYSxHQUFHO0FBQy9FO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUTtBQUM1QztBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsY0FBYyxFQUFFO0FBQ3pEO0FBQ0E7QUFDQSxxQ0FBcUMsZ0JBQWdCLEVBQUU7QUFDdkQ7QUFDQTtBQUNBLHFDQUFxQyxzQkFBc0IsRUFBRTtBQUM3RDtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnNjYWxlVG8xID0gZXhwb3J0cy5zaW1wbGVEZWNvZGUgPSBleHBvcnRzLnNpbXBsZUVuY29kZSA9IGV4cG9ydHMud2FpdCA9IGV4cG9ydHMubWVyZ2VBbGwgPSBleHBvcnRzLnNodWZmbGVBcnJheSA9IGV4cG9ydHMudXVpZHY0ID0gZXhwb3J0cy5kb3dubG9hZCA9IGV4cG9ydHMuY2xhbXAgPSBleHBvcnRzLmNhcGl0YWxpemUgPSB2b2lkIDA7XG52YXIganNfY2lwaGVyXzEgPSByZXF1aXJlKFwianMtY2lwaGVyXCIpO1xuZnVuY3Rpb24gY2FwaXRhbGl6ZShzKSB7XG4gICAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuZXhwb3J0cy5jYXBpdGFsaXplID0gY2FwaXRhbGl6ZTtcbmZ1bmN0aW9uIGNsYW1wKG1pbiwgdmFsdWUsIG1heCkge1xuICAgIHJldHVybiBNYXRoLm1pbihtYXgsIE1hdGgubWF4KG1pbiwgdmFsdWUpKTtcbn1cbmV4cG9ydHMuY2xhbXAgPSBjbGFtcDtcbmZ1bmN0aW9uIGRvd25sb2FkKGZpbGVuYW1lLCB0ZXh0KSB7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudCh0ZXh0KSk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgZmlsZW5hbWUpO1xuICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIGVsZW1lbnQuY2xpY2soKTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xufVxuZXhwb3J0cy5kb3dubG9hZCA9IGRvd25sb2FkO1xuZnVuY3Rpb24gdXVpZHY0KCkge1xuICAgIHJldHVybiAoXCJcIiArIDFlNyArIC0xZTMgKyAtNGUzICsgLThlMyArIC0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLCBmdW5jdGlvbiAoYykge1xuICAgICAgICByZXR1cm4gKE51bWJlcihjKSBeIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMSkpWzBdICYgMTUgPj4gTnVtYmVyKGMpIC8gNCkudG9TdHJpbmcoMTYpO1xuICAgIH0pO1xufVxuZXhwb3J0cy51dWlkdjQgPSB1dWlkdjQ7XG5mdW5jdGlvbiBzaHVmZmxlQXJyYXkoYXJyYXkpIHtcbiAgICB2YXIgX2E7XG4gICAgZm9yICh2YXIgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdmFyIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICAgICAgX2EgPSBbYXJyYXlbal0sIGFycmF5W2ldXSwgYXJyYXlbaV0gPSBfYVswXSwgYXJyYXlbal0gPSBfYVsxXTtcbiAgICB9XG59XG5leHBvcnRzLnNodWZmbGVBcnJheSA9IHNodWZmbGVBcnJheTtcbi8qKlxuICpcbiAqIEBwYXJhbSBvYmplY3RzIExpc3Qgb2Ygb2JqZWN0cyB0byBiZSBtZXJnZWQuXG4gKiBAcGFyYW0gbWVyZ2UgRnVuY3Rpb24gZGVzY3JpYmluZyBob3cgdHdvIGNvbXBhdGlibGUgb2JqZWN0cyBzaG91bGQgYmUgbWVyZ2VkXG4gKiBAcGFyYW0gbWVyZ2FibGUgRnVuY3Rpb24gcmV0dXJuaW5nIFRydWUgaWYgdHdvIG9iamVjdHMgYXJlIGNvbXBhdGlibGUgYW5kIGNhbiBiZSBtZXJnZWRcbiAqIEBwYXJhbSBpbmNsdWRlTWVyZ2UgRnVuY3Rpb24gcmV0dXJuaW5nIFRydWUgaWYgdGhlIG1lcmdlZCBvYmplY3Qgc2hvdWxkIGJlIGFjY2VwdGVkLlxuICogICAgICAgICAgICAgICAgICAgICAgSWYgRmFsc2UsIHRoZSBtZXJnZWQgb2JqZWN0IHdpbGwgbm90IGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHQuXG4gKlxuICogQHJldHVybiBMaXN0IG9mIG1lcmdlZCBvYmplY3RzLlxuICovXG5mdW5jdGlvbiBtZXJnZUFsbChvYmplY3RzLCBtZXJnZSwgbWVyZ2FibGUsIGluY2x1ZGVNZXJnZSkge1xuICAgIGlmIChpbmNsdWRlTWVyZ2UgPT09IHZvaWQgMCkgeyBpbmNsdWRlTWVyZ2UgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9OyB9XG4gICAgdmFyIG1lcmdlZCA9IFtdO1xuICAgIC8vIExvb3AgYmFja3dhcmRzIHNvIHRoYXQgd2UgY2FuIHJlbW92ZSBmcm9tIGxpc3RcbiAgICBmb3IgKHZhciBpID0gb2JqZWN0cy5sZW5ndGggLSAxOyBpID49IDA7KSB7XG4gICAgICAgIC8vIFBpY2sgdGhlIGxhc3Qgb2JqZWN0IEEgYW5kIHJlbW92ZSBpdCBmcm9tIGxpc3QuXG4gICAgICAgIHZhciBhID0gb2JqZWN0cy5zcGxpY2UoaSwgMSlbMF07XG4gICAgICAgIC8vIExvb3AgYmFja3dhcmRzIG92ZXIgYWxsIHJlbWFpbmluZyBvYmplY3RzIGFuZCBmaW5kIHRob3NlIHRoYXQgY2FuIGJlIG1lcmdlZCB0byBBXG4gICAgICAgIGZvciAodmFyIGogPSBvYmplY3RzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICAvLyBNZXJnZSBBIHdpdGggYWxsIG9iamVjdHMgaXQgY2FuIGJlIG1lcmdlZCB3aXRoLiBNZXJnZWQgb2JqZWN0cyBhcmUgcmVtb3ZlZCBhZnRlciBtZXJnZS5cbiAgICAgICAgICAgIGlmIChtZXJnYWJsZShhLCBvYmplY3RzW2pdKSkge1xuICAgICAgICAgICAgICAgIGEgPSBtZXJnZShhLCBvYmplY3RzLnNwbGljZShqLCAxKVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRXZhbHVhdGUgbWVyZ2VkIG9iamVjdC4gSWYgaXQgaXMgYWNjZXB0ZWQsIGFkZCBpdCB0byB0aGUgcmVzdWx0LlxuICAgICAgICBpZiAoaW5jbHVkZU1lcmdlKGEpKSB7XG4gICAgICAgICAgICBtZXJnZWQucHVzaChhKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBHbyB0byB0aGUgbGFzdCBvYmplY3QgcmVtYWluaW5nIGluIGxpc3QuIFRoaXMgd2lsbCBiZSBuZXh0IEEuXG4gICAgICAgIGkgPSBvYmplY3RzLmxlbmd0aCAtIDE7XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWQ7XG59XG5leHBvcnRzLm1lcmdlQWxsID0gbWVyZ2VBbGw7XG5mdW5jdGlvbiB3YWl0KG1zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyLCBqKSB7XG4gICAgICAgIHNldFRpbWVvdXQociwgbXMpO1xuICAgIH0pO1xufVxuZXhwb3J0cy53YWl0ID0gd2FpdDtcbnZhciBjaXBoZXIgPSBuZXcganNfY2lwaGVyXzEuQ2lwaGVyKCk7XG5mdW5jdGlvbiBzaW1wbGVFbmNvZGUocykge1xuICAgIHJldHVybiBjaXBoZXIuZW5jcnlwdChzLCAzKTtcbn1cbmV4cG9ydHMuc2ltcGxlRW5jb2RlID0gc2ltcGxlRW5jb2RlO1xuZnVuY3Rpb24gc2ltcGxlRGVjb2RlKHMpIHtcbiAgICByZXR1cm4gY2lwaGVyLmRlY3J5cHQocywgMyk7XG59XG5leHBvcnRzLnNpbXBsZURlY29kZSA9IHNpbXBsZURlY29kZTtcbi8qKlxuICogU2NhbGVzIGEgbGlzdCBvZiBudW1iZXJzIHNvIHRoYXQgdGhlaXIgc3VtIGlzIDEuXG4gKiBAcGFyYW0geHNcbiAqL1xuZnVuY3Rpb24gc2NhbGVUbzEoeHMpIHtcbiAgICB2YXIgc3VtID0geHMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhICsgYjsgfSk7XG4gICAgdmFyIG5ld1hzO1xuICAgIGlmIChzdW0gIT0gMCkge1xuICAgICAgICBuZXdYcyA9IHhzLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAvIHN1bTsgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBuZXdYcyA9IHhzLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gMSAvIHhzLmxlbmd0aDsgfSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdYcztcbn1cbmV4cG9ydHMuc2NhbGVUbzEgPSBzY2FsZVRvMTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n")},function(module,exports,__webpack_require__){"use strict";eval('\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, "__esModule", { value: true });\nexports.Answer = void 0;\nvar main_1 = __webpack_require__(1);\nvar serializr_1 = __webpack_require__(0);\nvar Util_1 = __webpack_require__(2);\nvar Answer = /** @class */ (function () {\n    //image\n    function Answer(id, text, description) {\n        this.id = id;\n        this.text = text;\n        this.description = description;\n    }\n    Answer.prototype.toHtml = function () {\n        var s = "<div id=\\"" + this.id + "\\" class=\\"answer\\" onselectstart=\\"return false\\">\\n            <h3>" + Util_1.capitalize(this.text) + "</h3>";\n        if (this.description) {\n            s += "<p> " + this.description + "</p>";\n        }\n        s += "</div>";\n        return s;\n    };\n    Answer.prototype.register = function () {\n        var _this = this;\n        document.getElementById(this.id).addEventListener(\'click\', function (event) {\n            main_1.state.answers[main_1.state.questions[main_1.state.currentQuestionIndex - 1].id] = _this.id;\n            main_1.nextQuestion();\n        });\n    };\n    __decorate([\n        serializr_1.serializable(serializr_1.identifier())\n    ], Answer.prototype, "id", void 0);\n    __decorate([\n        serializr_1.serializable\n    ], Answer.prototype, "text", void 0);\n    __decorate([\n        serializr_1.serializable\n    ], Answer.prototype, "description", void 0);\n    return Answer;\n}());\nexports.Answer = Answer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYW5zd2VyLnRzPzlkYTkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQSxhQUFhLG1CQUFPLENBQUMsQ0FBUTtBQUM3QixrQkFBa0IsbUJBQU8sQ0FBQyxDQUFXO0FBQ3JDLGFBQWEsbUJBQU8sQ0FBQyxDQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFuc3dlciA9IHZvaWQgMDtcbnZhciBtYWluXzEgPSByZXF1aXJlKFwiLi9tYWluXCIpO1xudmFyIHNlcmlhbGl6cl8xID0gcmVxdWlyZShcInNlcmlhbGl6clwiKTtcbnZhciBVdGlsXzEgPSByZXF1aXJlKFwiLi91dGlsL1V0aWxcIik7XG52YXIgQW5zd2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8vaW1hZ2VcbiAgICBmdW5jdGlvbiBBbnN3ZXIoaWQsIHRleHQsIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBBbnN3ZXIucHJvdG90eXBlLnRvSHRtbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHMgPSBcIjxkaXYgaWQ9XFxcIlwiICsgdGhpcy5pZCArIFwiXFxcIiBjbGFzcz1cXFwiYW5zd2VyXFxcIiBvbnNlbGVjdHN0YXJ0PVxcXCJyZXR1cm4gZmFsc2VcXFwiPlxcbiAgICAgICAgICAgIDxoMz5cIiArIFV0aWxfMS5jYXBpdGFsaXplKHRoaXMudGV4dCkgKyBcIjwvaDM+XCI7XG4gICAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBzICs9IFwiPHA+IFwiICsgdGhpcy5kZXNjcmlwdGlvbiArIFwiPC9wPlwiO1xuICAgICAgICB9XG4gICAgICAgIHMgKz0gXCI8L2Rpdj5cIjtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfTtcbiAgICBBbnN3ZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlkKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgbWFpbl8xLnN0YXRlLmFuc3dlcnNbbWFpbl8xLnN0YXRlLnF1ZXN0aW9uc1ttYWluXzEuc3RhdGUuY3VycmVudFF1ZXN0aW9uSW5kZXggLSAxXS5pZF0gPSBfdGhpcy5pZDtcbiAgICAgICAgICAgIG1haW5fMS5uZXh0UXVlc3Rpb24oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgc2VyaWFsaXpyXzEuc2VyaWFsaXphYmxlKHNlcmlhbGl6cl8xLmlkZW50aWZpZXIoKSlcbiAgICBdLCBBbnN3ZXIucHJvdG90eXBlLCBcImlkXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHNlcmlhbGl6cl8xLnNlcmlhbGl6YWJsZVxuICAgIF0sIEFuc3dlci5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzZXJpYWxpenJfMS5zZXJpYWxpemFibGVcbiAgICBdLCBBbnN3ZXIucHJvdG90eXBlLCBcImRlc2NyaXB0aW9uXCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIEFuc3dlcjtcbn0oKSk7XG5leHBvcnRzLkFuc3dlciA9IEFuc3dlcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n')},function(module,exports,__webpack_require__){eval("var api = __webpack_require__(5);\n            var content = __webpack_require__(6);\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguc2Nzcz83MjIzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFVBQVUsbUJBQU8sQ0FBQyxDQUF3RTtBQUMxRiwwQkFBMEIsbUJBQU8sQ0FBQyxDQUErRjs7QUFFakk7O0FBRUE7QUFDQSwwQkFBMEIsUUFBUztBQUNuQzs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOzs7O0FBSUEiLCJmaWxlIjoiNC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcGkgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaW5kZXguc2Nzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n")},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : undefined;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanM/MmRiYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEOztBQUV2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQSxpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGlCQUFpQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCLEtBQXdDLEdBQUcsc0JBQWlCLEdBQUcsU0FBSTs7QUFFbkY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0EscUVBQXFFLHFCQUFxQixhQUFhOztBQUV2Rzs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EseURBQXlEO0FBQ3pELEdBQUc7O0FBRUg7OztBQUdBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEI7QUFDMUI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsNEJBQTRCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLG9CQUFvQiw2QkFBNkI7QUFDakQ7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIiwiZmlsZSI6IjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbnZhciBzdHlsZXNJbkRvbSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRG9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRG9tW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM11cbiAgICB9O1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMrKztcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS51cGRhdGVyKG9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc0luRG9tLnB1c2goe1xuICAgICAgICBpZGVudGlmaWVyOiBpZGVudGlmaWVyLFxuICAgICAgICB1cGRhdGVyOiBhZGRTdHlsZShvYmosIG9wdGlvbnMpLFxuICAgICAgICByZWZlcmVuY2VzOiAxXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG5cbiAgcmV0dXJuIGlkZW50aWZpZXJzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICB2YXIgYXR0cmlidXRlcyA9IG9wdGlvbnMuYXR0cmlidXRlcyB8fCB7fTtcblxuICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLm1lZGlhID8gXCJAbWVkaWEgXCIuY29uY2F0KG9iai5tZWRpYSwgXCIge1wiKS5jb25jYXQob2JqLmNzcywgXCJ9XCIpIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ21lZGlhJyk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChuZXdMaXN0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRvbVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5Eb21bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5Eb20uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n")},function(module,exports,__webpack_require__){eval('// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(7);\nexports = ___CSS_LOADER_API_IMPORT___(false);\nexports.push([module.i, "@import url(https://fonts.googleapis.com/css?family=Open+Sans:400,700);"]);\nexports.push([module.i, "@import url(https://fonts.googleapis.com/css?family=Croissant+One);"]);\nexports.push([module.i, "@import url(https://fonts.googleapis.com/css?family=Maven+Pro:500);"]);\n// Module\nexports.push([module.i, ".bimbo-personality-quiz{margin:auto;padding-top:40px;padding-bottom:40px}.bimbo-personality-quiz h1,.bimbo-personality-quiz h2,.bimbo-personality-quiz h3,.bimbo-personality-quiz h4,.bimbo-personality-quiz h5,.bimbo-personality-quiz h6{font-family:\\"Maven Pro\\",\\"Open Sans\\",\\"Helvetica Neue\\";color:#fff}.bimbo-personality-quiz h1{font-size:40px}.bimbo-personality-quiz h2{font-size:30px}.bimbo-personality-quiz h3{font-size:20px}.bimbo-personality-quiz h4{font-size:18px}.bimbo-personality-quiz *{font-family:\\"Open Sans\\",\\"Open Sans\\",\\"Helvetica Neue\\";color:#fff}.bimbo-personality-quiz .results-title{text-align:center;margin-bottom:40px}.window{background:#fff;color:#AD343E;border:1px solid #ffb600;border-radius:2px;padding:20px 20px 20px 20px;max-width:800px}.window h1,.window h2,.window h3,.window h4,.window h5,.window h6{font-family:\\"Maven Pro\\",\\"Open Sans\\",\\"Helvetica Neue\\";color:inherit;margin-top:0}.window p,.window a{font-size:14px;color:#495255}.window *{font-family:\\"Open Sans\\",\\"Open Sans\\",\\"Helvetica Neue\\"}.bimbo-cards{display:grid;grid-template-columns:repeat(auto-fit, minmax(550px, 1fr));grid-auto-rows:1fr;grid-gap:30px;max-width:1200px;margin-left:auto;margin-right:auto}.bimbo-card{display:grid;grid-template-columns:2fr 300px;grid-template-rows:1fr 50px;margin-left:auto;margin-right:auto;padding-right:0}.bimbo-card h1,.bimbo-card h2{color:#5f1c22}.bimbo-card h3{color:#252a2c}.bimbo-card p,.bimbo-card b,.bimbo-card i{font-size:14px;color:#3d4448}.bimbo-card .card-footer{grid-column:span 2;padding-right:20px}.bimbo-card .share-link{display:inline-block;margin-left:1ch;font-size:12px}.bimbo-view{width:100%;min-width:50px}.question{display:block;margin:auto}.question h3{color:#222}.answers{display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));grid-auto-rows:1fr;grid-gap:10px}.answer{background:#541A32;color:#fff;padding:20px;border-radius:4px;border:3px solid #260C1A;min-height:60px;cursor:pointer;backface-visibility:hidden;transition:background-color .2s,border .2s,color .2s,box-shadow .2s,transform .2s}.answer h1,.answer h2,.answer h3,.answer h4,.answer h5,.answer h6{text-align:center;color:inherit;margin:auto}.answer p{color:inherit}.answer:hover{background:#67203e;transform:scale(1) translateX(0px) translateY(-3px);color:#FFB600;border-color:#FFB600;box-shadow:0px 3px 2px 1px #260C1A}.retake-dialogue{margin:40px auto auto;max-width:300px;text-align:center}.retake-dialogue .answer{min-height:0}.retake-dialogue .answer h4{margin:40px 40px auto}input[type=\\"file\\"]{display:none}.loadFilesLabel{border:1px solid #ccc;display:inline-block;padding:6px 12px;cursor:pointer}.pink-button{background-color:#541A32;border-radius:2px;border:1px solid #fff;color:#fff;font-weight:bold;font-size:1.5em;padding:0.2em 1em;outline:none}.pink-button p{margin:0;display:inline;color:#a23260}.pink-button:hover{color:#FFB600;border-color:#FFB600}.pink-button:active{background-color:#411426;color:#db9d00;border-color:#b37f00}input[type=range]{-webkit-appearance:none;width:100%;margin:0.7px 0}input[type=range]:focus{outline:none}input[type=range]::-webkit-slider-runnable-track{width:100%;height:26px;cursor:pointer;box-shadow:1px 1px 1px #000000, 0 0 1px #0d0d0d;background:#541A32;border-radius:0.6px;border:0.2px solid #fff}input[type=range]::-webkit-slider-thumb{box-shadow:1px 1px 1px #000000, 0 0 1px #0d0d0d;border:1px solid #FFB600;height:30px;width:30px;border-radius:3px;background:#541A32;cursor:pointer;-webkit-appearance:none;margin-top:-3px}input[type=range]:focus::-webkit-slider-runnable-track{background:#541A32}input[type=range]::-moz-range-track{width:100%;height:26px;cursor:pointer;box-shadow:1px 1px 1px #000000, 0 0 1px #0d0d0d;background:#541A32;border-radius:0.6px;border:0.2px solid #fff}input[type=range]::-moz-range-thumb{box-shadow:1px 1px 1px #000000, 0 0 1px #0d0d0d;border:1px solid #FFB600;height:30px;width:30px;border-radius:3px;background:#541A32;cursor:pointer}input[type=range]::-ms-track{width:100%;height:26px;cursor:pointer;background:transparent;border-color:transparent;color:transparent}input[type=range]::-ms-fill-lower{background:#541A32;border:0.2px solid #fff;border-radius:1.2px;box-shadow:1px 1px 1px #000000, 0 0 1px #0d0d0d}input[type=range]::-ms-fill-upper{background:#541A32;border:0.2px solid #fff;border-radius:1.2px;box-shadow:1px 1px 1px #000000, 0 0 1px #0d0d0d}input[type=range]::-ms-thumb{box-shadow:1px 1px 1px #000000, 0 0 1px #0d0d0d;border:1px solid #FFB600;height:30px;width:30px;border-radius:3px;background:#541A32;cursor:pointer;height:26px}input[type=range]:focus::-ms-fill-lower{background:#541A32}input[type=range]:focus::-ms-fill-upper{background:#541A32}\\n", ""]);\n// Exports\nmodule.exports = exports;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguc2Nzcz81M2NlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0Esa0NBQWtDLG1CQUFPLENBQUMsQ0FBZ0Q7QUFDMUY7QUFDQSxjQUFjLFFBQVMsMEVBQTBFO0FBQ2pHLGNBQWMsUUFBUyxzRUFBc0U7QUFDN0YsY0FBYyxRQUFTLHNFQUFzRTtBQUM3RjtBQUNBLGNBQWMsUUFBUywyQkFBMkIsWUFBWSxpQkFBaUIsb0JBQW9CLGtLQUFrSywyREFBMkQsV0FBVywyQkFBMkIsZUFBZSwyQkFBMkIsZUFBZSwyQkFBMkIsZUFBZSwyQkFBMkIsZUFBZSwwQkFBMEIsMkRBQTJELFdBQVcsdUNBQXVDLGtCQUFrQixtQkFBbUIsUUFBUSxnQkFBZ0IsY0FBYyx5QkFBeUIsa0JBQWtCLDRCQUE0QixnQkFBZ0Isa0VBQWtFLDJEQUEyRCxjQUFjLGFBQWEsb0JBQW9CLGVBQWUsY0FBYyxVQUFVLDJEQUEyRCxhQUFhLGFBQWEsMkRBQTJELG1CQUFtQixjQUFjLGlCQUFpQixpQkFBaUIsa0JBQWtCLFlBQVksYUFBYSxnQ0FBZ0MsNEJBQTRCLGlCQUFpQixrQkFBa0IsZ0JBQWdCLDhCQUE4QixjQUFjLGVBQWUsY0FBYywwQ0FBMEMsZUFBZSxjQUFjLHlCQUF5QixtQkFBbUIsbUJBQW1CLHdCQUF3QixxQkFBcUIsZ0JBQWdCLGVBQWUsWUFBWSxXQUFXLGVBQWUsVUFBVSxjQUFjLFlBQVksYUFBYSxXQUFXLFNBQVMsYUFBYSwyREFBMkQsbUJBQW1CLGNBQWMsUUFBUSxtQkFBbUIsV0FBVyxhQUFhLGtCQUFrQix5QkFBeUIsZ0JBQWdCLGVBQWUsMkJBQTJCLGtGQUFrRixrRUFBa0Usa0JBQWtCLGNBQWMsWUFBWSxVQUFVLGNBQWMsY0FBYyxtQkFBbUIsb0RBQW9ELGNBQWMscUJBQXFCLG1DQUFtQyxpQkFBaUIsc0JBQXNCLGdCQUFnQixrQkFBa0IseUJBQXlCLGFBQWEsNEJBQTRCLHNCQUFzQixxQkFBcUIsYUFBYSxnQkFBZ0Isc0JBQXNCLHFCQUFxQixpQkFBaUIsZUFBZSxhQUFhLHlCQUF5QixrQkFBa0Isc0JBQXNCLFdBQVcsaUJBQWlCLGdCQUFnQixrQkFBa0IsYUFBYSxlQUFlLFNBQVMsZUFBZSxjQUFjLG1CQUFtQixjQUFjLHFCQUFxQixvQkFBb0IseUJBQXlCLGNBQWMscUJBQXFCLGtCQUFrQix3QkFBd0IsV0FBVyxlQUFlLHdCQUF3QixhQUFhLGlEQUFpRCxXQUFXLFlBQVksZUFBZSxnREFBZ0QsbUJBQW1CLG9CQUFvQix3QkFBd0Isd0NBQXdDLGdEQUFnRCx5QkFBeUIsWUFBWSxXQUFXLGtCQUFrQixtQkFBbUIsZUFBZSx3QkFBd0IsZ0JBQWdCLHVEQUF1RCxtQkFBbUIsb0NBQW9DLFdBQVcsWUFBWSxlQUFlLGdEQUFnRCxtQkFBbUIsb0JBQW9CLHdCQUF3QixvQ0FBb0MsZ0RBQWdELHlCQUF5QixZQUFZLFdBQVcsa0JBQWtCLG1CQUFtQixlQUFlLDZCQUE2QixXQUFXLFlBQVksZUFBZSx1QkFBdUIseUJBQXlCLGtCQUFrQixrQ0FBa0MsbUJBQW1CLHdCQUF3QixvQkFBb0IsZ0RBQWdELGtDQUFrQyxtQkFBbUIsd0JBQXdCLG9CQUFvQixnREFBZ0QsNkJBQTZCLGdEQUFnRCx5QkFBeUIsWUFBWSxXQUFXLGtCQUFrQixtQkFBbUIsZUFBZSxZQUFZLHdDQUF3QyxtQkFBbUIsd0NBQXdDLG1CQUFtQjtBQUNobko7QUFDQSIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCIpO1xuZXhwb3J0cyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhmYWxzZSk7XG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJAaW1wb3J0IHVybChodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zOjQwMCw3MDApO1wiXSk7XG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJAaW1wb3J0IHVybChodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9Q3JvaXNzYW50K09uZSk7XCJdKTtcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkBpbXBvcnQgdXJsKGh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1NYXZlbitQcm86NTAwKTtcIl0pO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYmltYm8tcGVyc29uYWxpdHktcXVpenttYXJnaW46YXV0bztwYWRkaW5nLXRvcDo0MHB4O3BhZGRpbmctYm90dG9tOjQwcHh9LmJpbWJvLXBlcnNvbmFsaXR5LXF1aXogaDEsLmJpbWJvLXBlcnNvbmFsaXR5LXF1aXogaDIsLmJpbWJvLXBlcnNvbmFsaXR5LXF1aXogaDMsLmJpbWJvLXBlcnNvbmFsaXR5LXF1aXogaDQsLmJpbWJvLXBlcnNvbmFsaXR5LXF1aXogaDUsLmJpbWJvLXBlcnNvbmFsaXR5LXF1aXogaDZ7Zm9udC1mYW1pbHk6XFxcIk1hdmVuIFByb1xcXCIsXFxcIk9wZW4gU2Fuc1xcXCIsXFxcIkhlbHZldGljYSBOZXVlXFxcIjtjb2xvcjojZmZmfS5iaW1iby1wZXJzb25hbGl0eS1xdWl6IGgxe2ZvbnQtc2l6ZTo0MHB4fS5iaW1iby1wZXJzb25hbGl0eS1xdWl6IGgye2ZvbnQtc2l6ZTozMHB4fS5iaW1iby1wZXJzb25hbGl0eS1xdWl6IGgze2ZvbnQtc2l6ZToyMHB4fS5iaW1iby1wZXJzb25hbGl0eS1xdWl6IGg0e2ZvbnQtc2l6ZToxOHB4fS5iaW1iby1wZXJzb25hbGl0eS1xdWl6ICp7Zm9udC1mYW1pbHk6XFxcIk9wZW4gU2Fuc1xcXCIsXFxcIk9wZW4gU2Fuc1xcXCIsXFxcIkhlbHZldGljYSBOZXVlXFxcIjtjb2xvcjojZmZmfS5iaW1iby1wZXJzb25hbGl0eS1xdWl6IC5yZXN1bHRzLXRpdGxle3RleHQtYWxpZ246Y2VudGVyO21hcmdpbi1ib3R0b206NDBweH0ud2luZG93e2JhY2tncm91bmQ6I2ZmZjtjb2xvcjojQUQzNDNFO2JvcmRlcjoxcHggc29saWQgI2ZmYjYwMDtib3JkZXItcmFkaXVzOjJweDtwYWRkaW5nOjIwcHggMjBweCAyMHB4IDIwcHg7bWF4LXdpZHRoOjgwMHB4fS53aW5kb3cgaDEsLndpbmRvdyBoMiwud2luZG93IGgzLC53aW5kb3cgaDQsLndpbmRvdyBoNSwud2luZG93IGg2e2ZvbnQtZmFtaWx5OlxcXCJNYXZlbiBQcm9cXFwiLFxcXCJPcGVuIFNhbnNcXFwiLFxcXCJIZWx2ZXRpY2EgTmV1ZVxcXCI7Y29sb3I6aW5oZXJpdDttYXJnaW4tdG9wOjB9LndpbmRvdyBwLC53aW5kb3cgYXtmb250LXNpemU6MTRweDtjb2xvcjojNDk1MjU1fS53aW5kb3cgKntmb250LWZhbWlseTpcXFwiT3BlbiBTYW5zXFxcIixcXFwiT3BlbiBTYW5zXFxcIixcXFwiSGVsdmV0aWNhIE5ldWVcXFwifS5iaW1iby1jYXJkc3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDU1MHB4LCAxZnIpKTtncmlkLWF1dG8tcm93czoxZnI7Z3JpZC1nYXA6MzBweDttYXgtd2lkdGg6MTIwMHB4O21hcmdpbi1sZWZ0OmF1dG87bWFyZ2luLXJpZ2h0OmF1dG99LmJpbWJvLWNhcmR7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoyZnIgMzAwcHg7Z3JpZC10ZW1wbGF0ZS1yb3dzOjFmciA1MHB4O21hcmdpbi1sZWZ0OmF1dG87bWFyZ2luLXJpZ2h0OmF1dG87cGFkZGluZy1yaWdodDowfS5iaW1iby1jYXJkIGgxLC5iaW1iby1jYXJkIGgye2NvbG9yOiM1ZjFjMjJ9LmJpbWJvLWNhcmQgaDN7Y29sb3I6IzI1MmEyY30uYmltYm8tY2FyZCBwLC5iaW1iby1jYXJkIGIsLmJpbWJvLWNhcmQgaXtmb250LXNpemU6MTRweDtjb2xvcjojM2Q0NDQ4fS5iaW1iby1jYXJkIC5jYXJkLWZvb3RlcntncmlkLWNvbHVtbjpzcGFuIDI7cGFkZGluZy1yaWdodDoyMHB4fS5iaW1iby1jYXJkIC5zaGFyZS1saW5re2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbi1sZWZ0OjFjaDtmb250LXNpemU6MTJweH0uYmltYm8tdmlld3t3aWR0aDoxMDAlO21pbi13aWR0aDo1MHB4fS5xdWVzdGlvbntkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvfS5xdWVzdGlvbiBoM3tjb2xvcjojMjIyfS5hbnN3ZXJze2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjgwcHgsIDFmcikpO2dyaWQtYXV0by1yb3dzOjFmcjtncmlkLWdhcDoxMHB4fS5hbnN3ZXJ7YmFja2dyb3VuZDojNTQxQTMyO2NvbG9yOiNmZmY7cGFkZGluZzoyMHB4O2JvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjozcHggc29saWQgIzI2MEMxQTttaW4taGVpZ2h0OjYwcHg7Y3Vyc29yOnBvaW50ZXI7YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIC4ycyxib3JkZXIgLjJzLGNvbG9yIC4ycyxib3gtc2hhZG93IC4ycyx0cmFuc2Zvcm0gLjJzfS5hbnN3ZXIgaDEsLmFuc3dlciBoMiwuYW5zd2VyIGgzLC5hbnN3ZXIgaDQsLmFuc3dlciBoNSwuYW5zd2VyIGg2e3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOmluaGVyaXQ7bWFyZ2luOmF1dG99LmFuc3dlciBwe2NvbG9yOmluaGVyaXR9LmFuc3dlcjpob3ZlcntiYWNrZ3JvdW5kOiM2NzIwM2U7dHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVgoMHB4KSB0cmFuc2xhdGVZKC0zcHgpO2NvbG9yOiNGRkI2MDA7Ym9yZGVyLWNvbG9yOiNGRkI2MDA7Ym94LXNoYWRvdzowcHggM3B4IDJweCAxcHggIzI2MEMxQX0ucmV0YWtlLWRpYWxvZ3Vle21hcmdpbjo0MHB4IGF1dG8gYXV0bzttYXgtd2lkdGg6MzAwcHg7dGV4dC1hbGlnbjpjZW50ZXJ9LnJldGFrZS1kaWFsb2d1ZSAuYW5zd2Vye21pbi1oZWlnaHQ6MH0ucmV0YWtlLWRpYWxvZ3VlIC5hbnN3ZXIgaDR7bWFyZ2luOjQwcHggNDBweCBhdXRvfWlucHV0W3R5cGU9XFxcImZpbGVcXFwiXXtkaXNwbGF5Om5vbmV9LmxvYWRGaWxlc0xhYmVse2JvcmRlcjoxcHggc29saWQgI2NjYztkaXNwbGF5OmlubGluZS1ibG9jaztwYWRkaW5nOjZweCAxMnB4O2N1cnNvcjpwb2ludGVyfS5waW5rLWJ1dHRvbntiYWNrZ3JvdW5kLWNvbG9yOiM1NDFBMzI7Ym9yZGVyLXJhZGl1czoycHg7Ym9yZGVyOjFweCBzb2xpZCAjZmZmO2NvbG9yOiNmZmY7Zm9udC13ZWlnaHQ6Ym9sZDtmb250LXNpemU6MS41ZW07cGFkZGluZzowLjJlbSAxZW07b3V0bGluZTpub25lfS5waW5rLWJ1dHRvbiBwe21hcmdpbjowO2Rpc3BsYXk6aW5saW5lO2NvbG9yOiNhMjMyNjB9LnBpbmstYnV0dG9uOmhvdmVye2NvbG9yOiNGRkI2MDA7Ym9yZGVyLWNvbG9yOiNGRkI2MDB9LnBpbmstYnV0dG9uOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiM0MTE0MjY7Y29sb3I6I2RiOWQwMDtib3JkZXItY29sb3I6I2IzN2YwMH1pbnB1dFt0eXBlPXJhbmdlXXstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTt3aWR0aDoxMDAlO21hcmdpbjowLjdweCAwfWlucHV0W3R5cGU9cmFuZ2VdOmZvY3Vze291dGxpbmU6bm9uZX1pbnB1dFt0eXBlPXJhbmdlXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2t7d2lkdGg6MTAwJTtoZWlnaHQ6MjZweDtjdXJzb3I6cG9pbnRlcjtib3gtc2hhZG93OjFweCAxcHggMXB4ICMwMDAwMDAsIDAgMCAxcHggIzBkMGQwZDtiYWNrZ3JvdW5kOiM1NDFBMzI7Ym9yZGVyLXJhZGl1czowLjZweDtib3JkZXI6MC4ycHggc29saWQgI2ZmZn1pbnB1dFt0eXBlPXJhbmdlXTo6LXdlYmtpdC1zbGlkZXItdGh1bWJ7Ym94LXNoYWRvdzoxcHggMXB4IDFweCAjMDAwMDAwLCAwIDAgMXB4ICMwZDBkMGQ7Ym9yZGVyOjFweCBzb2xpZCAjRkZCNjAwO2hlaWdodDozMHB4O3dpZHRoOjMwcHg7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZDojNTQxQTMyO2N1cnNvcjpwb2ludGVyOy13ZWJraXQtYXBwZWFyYW5jZTpub25lO21hcmdpbi10b3A6LTNweH1pbnB1dFt0eXBlPXJhbmdlXTpmb2N1czo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2t7YmFja2dyb3VuZDojNTQxQTMyfWlucHV0W3R5cGU9cmFuZ2VdOjotbW96LXJhbmdlLXRyYWNre3dpZHRoOjEwMCU7aGVpZ2h0OjI2cHg7Y3Vyc29yOnBvaW50ZXI7Ym94LXNoYWRvdzoxcHggMXB4IDFweCAjMDAwMDAwLCAwIDAgMXB4ICMwZDBkMGQ7YmFja2dyb3VuZDojNTQxQTMyO2JvcmRlci1yYWRpdXM6MC42cHg7Ym9yZGVyOjAuMnB4IHNvbGlkICNmZmZ9aW5wdXRbdHlwZT1yYW5nZV06Oi1tb3otcmFuZ2UtdGh1bWJ7Ym94LXNoYWRvdzoxcHggMXB4IDFweCAjMDAwMDAwLCAwIDAgMXB4ICMwZDBkMGQ7Ym9yZGVyOjFweCBzb2xpZCAjRkZCNjAwO2hlaWdodDozMHB4O3dpZHRoOjMwcHg7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZDojNTQxQTMyO2N1cnNvcjpwb2ludGVyfWlucHV0W3R5cGU9cmFuZ2VdOjotbXMtdHJhY2t7d2lkdGg6MTAwJTtoZWlnaHQ6MjZweDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlci1jb2xvcjp0cmFuc3BhcmVudDtjb2xvcjp0cmFuc3BhcmVudH1pbnB1dFt0eXBlPXJhbmdlXTo6LW1zLWZpbGwtbG93ZXJ7YmFja2dyb3VuZDojNTQxQTMyO2JvcmRlcjowLjJweCBzb2xpZCAjZmZmO2JvcmRlci1yYWRpdXM6MS4ycHg7Ym94LXNoYWRvdzoxcHggMXB4IDFweCAjMDAwMDAwLCAwIDAgMXB4ICMwZDBkMGR9aW5wdXRbdHlwZT1yYW5nZV06Oi1tcy1maWxsLXVwcGVye2JhY2tncm91bmQ6IzU0MUEzMjtib3JkZXI6MC4ycHggc29saWQgI2ZmZjtib3JkZXItcmFkaXVzOjEuMnB4O2JveC1zaGFkb3c6MXB4IDFweCAxcHggIzAwMDAwMCwgMCAwIDFweCAjMGQwZDBkfWlucHV0W3R5cGU9cmFuZ2VdOjotbXMtdGh1bWJ7Ym94LXNoYWRvdzoxcHggMXB4IDFweCAjMDAwMDAwLCAwIDAgMXB4ICMwZDBkMGQ7Ym9yZGVyOjFweCBzb2xpZCAjRkZCNjAwO2hlaWdodDozMHB4O3dpZHRoOjMwcHg7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZDojNTQxQTMyO2N1cnNvcjpwb2ludGVyO2hlaWdodDoyNnB4fWlucHV0W3R5cGU9cmFuZ2VdOmZvY3VzOjotbXMtZmlsbC1sb3dlcntiYWNrZ3JvdW5kOiM1NDFBMzJ9aW5wdXRbdHlwZT1yYW5nZV06Zm9jdXM6Oi1tcy1maWxsLXVwcGVye2JhY2tncm91bmQ6IzU0MUEzMn1cXG5cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return "@media ".concat(item[2], " {").concat(content, "}");\n      }\n\n      return content;\n    }).join(\'\');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \'string\') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \'\']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || \'\'; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === \'function\') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return "/*# sourceURL=".concat(cssMapping.sourceRoot || \'\').concat(source, " */");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\'\\n\');\n  }\n\n  return [content].join(\'\\n\');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);\n  return "/*# ".concat(data, " */");\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzPzI0ZmIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7O0FBRWhCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRDQUE0QyxxQkFBcUI7QUFDakU7O0FBRUE7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EscUJBQXFCLGlCQUFpQjtBQUN0QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLHFCQUFxQjtBQUN6Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCOztBQUU5Qjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxjQUFjO0FBQ25FO0FBQ0EiLCJmaWxlIjoiNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGxpc3QgPSBbXTsgLy8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXG4gIGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXG4gICAgICBpZiAoaXRlbVsyXSkge1xuICAgICAgICByZXR1cm4gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSwgZGVkdXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCAnJ11dO1xuICAgIH1cblxuICAgIHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2ldKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250aW51ZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1lZGlhUXVlcnkpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiXCIuY29uY2F0KG1lZGlhUXVlcnksIFwiIGFuZCBcIikuY29uY2F0KGl0ZW1bMl0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290IHx8ICcnKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7\n')},function(module,exports,__webpack_require__){"use strict";eval('\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, "__esModule", { value: true });\nexports.BimboType = void 0;\nvar main_1 = __webpack_require__(1);\nvar serializr_1 = __webpack_require__(0);\nvar Util_1 = __webpack_require__(2);\nvar BimboType = /** @class */ (function () {\n    function BimboType(id, description) {\n        this.id = id;\n        this.name = id;\n        this.description = description;\n        this.prior = 1;\n        this.answerData = {};\n    }\n    /**\n     * Scales answer data so that each question is equally important in the naive bayes model.\n     * Answer data can be given as probabilities or nr of occurrences, it doesn\'t matter.\n     * Zero data will be given a small non-zero value.\n     * If data for a question is missing, it will be assumed that all remaining alternatives\n     *  are equally likely. The percentage of values missing determines how likely that group is.\n     *  Ex: 6 answers, but 2 missing. It is 1/3 that it is one of the two. Each gets 1/6.\n     *\n     * @param answerData An object where each key corresponds to a question.\n     *                      The value is a list with the occurrence of each answer.\n     */\n    BimboType.prototype.preprocessData = function (answerData) {\n        var processedData = {};\n        // For each question that was asked\n        for (var _i = 0, _a = Object.keys(main_1.state.questionsDict); _i < _a.length; _i++) {\n            var question = _a[_i];\n            // Only process answers connected to questions we have data for\n            // This removes any answers to questions we do not have data for.\n            if (question in answerData) {\n                var answers = answerData[question];\n                answers = Util_1.scaleTo1(answers);\n                // Assume missing answers are equally likely.\n                var nrOfAnswers = main_1.state.questionsDict[question].answers.length;\n                var nrOfMissing = nrOfAnswers - answers.length;\n                while (answers.length < nrOfAnswers) {\n                    answers.push(1 / (nrOfAnswers - nrOfMissing));\n                }\n                answers = Util_1.scaleTo1(answers);\n                // Add small values\n                for (var i = 0; i < answers.length; i++) {\n                    var a = answers[i];\n                    if (a == 0)\n                        answers[i] = 0.03;\n                }\n                // Scale to 1 to account for our small values\n                answers = Util_1.scaleTo1(answers);\n                processedData[question] = answers;\n            }\n        }\n        return processedData;\n    };\n    /**\n     Returns the likelihood of a given set of answers belonging to this\n     bimbo type.\n     \n     @param answers an object with one key for each question\n     the value is the index of the selected answer\n     */\n    BimboType.prototype.calcConditionalLikelihood = function (answers) {\n        var result = this.prior;\n        var data = this.preprocessData(this.answerData);\n        for (var _i = 0, _a = Object.keys(answers); _i < _a.length; _i++) {\n            var question = _a[_i];\n            // Only check answered questions against likelihoods where we have data.\n            if (question in data) {\n                result *= data[question][answers[question]];\n            }\n            else {\n                // If we do not have data for the question, assume each answer is equally likely\n                result *= 1 / main_1.state.questionsDict[question].answers.length;\n            }\n        }\n        return result;\n    };\n    /**\n     *\n     * @param answers a map with one key for each question.\n     *        the value is the index of the selected answer.\n     * @param bimboTypes\n     */\n    BimboType.calcPosterior = function (answers, bimboTypes) {\n        var evidence = 0;\n        for (var _i = 0, bimboTypes_1 = bimboTypes; _i < bimboTypes_1.length; _i++) {\n            var bimbo = bimboTypes_1[_i];\n            evidence += bimbo.calcConditionalLikelihood(answers);\n        }\n        var results = [];\n        for (var _a = 0, bimboTypes_2 = bimboTypes; _a < bimboTypes_2.length; _a++) {\n            var bimbo = bimboTypes_2[_a];\n            results.push({ bimbo: bimbo, conditional: bimbo.calcConditionalLikelihood(answers) / evidence });\n        }\n        return results;\n    };\n    /**\n     * Randomly generates answers to all questions and counts how many times each\n     * personality is chosen.\n     *\n     * @param qs a list of questions to answer\n     * @param samples how many times to answer all questions\n     * @return a list of objects representing how many times, and at how high average likelihood\n     *         each personality was chosen\n     */\n    BimboType.calcVolumeSample = function (qs, samples) {\n        var stats = {};\n        for (var _i = 0, _a = main_1.state.bimboTypes; _i < _a.length; _i++) {\n            var bimbo = _a[_i];\n            stats[bimbo.id] = { wins: 0, likelihood: 0 };\n        }\n        for (var i = 0; i < samples; i++) {\n            var answers = {};\n            for (var _b = 0, qs_1 = qs; _b < qs_1.length; _b++) {\n                var q = qs_1[_b];\n                answers[q.id] = Math.floor(Math.random() * q.answers.length);\n            }\n            var posteriors = BimboType.calcPosterior(answers, main_1.state.bimboTypes);\n            posteriors.sort(function (a, b) {\n                return b.conditional - a.conditional;\n            });\n            stats[posteriors[0].bimbo.id].wins += 1;\n            stats[posteriors[0].bimbo.id].likelihood += posteriors[0].conditional;\n        }\n        stats = Object.keys(stats).map(function (key) {\n            return { bimbo: key, wins: stats[key].wins, likelihood: stats[key].likelihood };\n        });\n        return stats;\n    };\n    BimboType.prototype.toHtml = function (likelihood) {\n        if (this.name == undefined)\n            this.name = Util_1.capitalize(this.id);\n        if (typeof likelihood == \'number\') {\n            likelihood = (likelihood * 100).toFixed(1) + "%";\n        }\n        var params = new URLSearchParams();\n        params.set("type", Util_1.simpleEncode(this.id));\n        var url = window.location.protocol + "//" + window.location.host + window.location.pathname + "?" + params;\n        var likelihoodHtml = "";\n        if (likelihood != undefined) {\n            likelihoodHtml = "\\n                <h3 style=\\"display: inline;\\">Likelihood: </h3>\\n                <p style=\\"display: inline; font-size: 1em;\\">\\n                    " + likelihood + "\\n                </p>";\n        }\n        var s = "<div class=\\"window bimbo-card\\">\\n            <div>\\n                <div>\\n                    <h2 style=\\"display: inline-block\\">The " + this.name + "</h2>\\n                </div>\\n                " + likelihoodHtml + "\\n                <p>" + this.description + "</p>\\n            </div>\\n            <img class=\\"bimbo-view\\" src=\\"" + __webpack_require__(11)("./" + this.id + ".png").default + "\\" />\\n            <div class=\\"card-footer\\">\\n                <hr>\\n                <a class=\\"share-link\\" href=\\"" + url + "\\">Link to this result</a>\\n            </div>\\n        </div>";\n        return s;\n    };\n    __decorate([\n        serializr_1.serializable(serializr_1.identifier())\n    ], BimboType.prototype, "id", void 0);\n    __decorate([\n        serializr_1.serializable\n    ], BimboType.prototype, "name", void 0);\n    __decorate([\n        serializr_1.serializable\n    ], BimboType.prototype, "description", void 0);\n    __decorate([\n        serializr_1.serializable\n    ], BimboType.prototype, "prior", void 0);\n    __decorate([\n        serializr_1.serializable(serializr_1.map(serializr_1.list(serializr_1.primitive())))\n    ], BimboType.prototype, "answerData", void 0);\n    return BimboType;\n}());\nexports.BimboType = BimboType;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYmltYm9UeXBlLnRzPzNlYzgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQSxhQUFhLG1CQUFPLENBQUMsQ0FBUTtBQUM3QixrQkFBa0IsbUJBQU8sQ0FBQyxDQUFXO0FBQ3JDLGFBQWEsbUJBQU8sQ0FBQyxDQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLGdCQUFnQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9CQUFvQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxnQkFBZ0I7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwwQkFBMEI7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsMEJBQTBCO0FBQzdFO0FBQ0EsMEJBQTBCLGlGQUFpRjtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELGdCQUFnQjtBQUN0RTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBLHVCQUF1QixhQUFhO0FBQ3BDO0FBQ0EsdUNBQXVDLGtCQUFrQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLGlFQUFpRSxnQkFBZ0I7QUFDN0o7QUFDQSx1V0FBdVcsd0JBQVEsSUFBVyxhQUFhLE1BQU0sQ0FBQztBQUM5WTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJmaWxlIjoiOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5CaW1ib1R5cGUgPSB2b2lkIDA7XG52YXIgbWFpbl8xID0gcmVxdWlyZShcIi4vbWFpblwiKTtcbnZhciBzZXJpYWxpenJfMSA9IHJlcXVpcmUoXCJzZXJpYWxpenJcIik7XG52YXIgVXRpbF8xID0gcmVxdWlyZShcIi4vdXRpbC9VdGlsXCIpO1xudmFyIEJpbWJvVHlwZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCaW1ib1R5cGUoaWQsIGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5uYW1lID0gaWQ7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5wcmlvciA9IDE7XG4gICAgICAgIHRoaXMuYW5zd2VyRGF0YSA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2FsZXMgYW5zd2VyIGRhdGEgc28gdGhhdCBlYWNoIHF1ZXN0aW9uIGlzIGVxdWFsbHkgaW1wb3J0YW50IGluIHRoZSBuYWl2ZSBiYXllcyBtb2RlbC5cbiAgICAgKiBBbnN3ZXIgZGF0YSBjYW4gYmUgZ2l2ZW4gYXMgcHJvYmFiaWxpdGllcyBvciBuciBvZiBvY2N1cnJlbmNlcywgaXQgZG9lc24ndCBtYXR0ZXIuXG4gICAgICogWmVybyBkYXRhIHdpbGwgYmUgZ2l2ZW4gYSBzbWFsbCBub24temVybyB2YWx1ZS5cbiAgICAgKiBJZiBkYXRhIGZvciBhIHF1ZXN0aW9uIGlzIG1pc3NpbmcsIGl0IHdpbGwgYmUgYXNzdW1lZCB0aGF0IGFsbCByZW1haW5pbmcgYWx0ZXJuYXRpdmVzXG4gICAgICogIGFyZSBlcXVhbGx5IGxpa2VseS4gVGhlIHBlcmNlbnRhZ2Ugb2YgdmFsdWVzIG1pc3NpbmcgZGV0ZXJtaW5lcyBob3cgbGlrZWx5IHRoYXQgZ3JvdXAgaXMuXG4gICAgICogIEV4OiA2IGFuc3dlcnMsIGJ1dCAyIG1pc3NpbmcuIEl0IGlzIDEvMyB0aGF0IGl0IGlzIG9uZSBvZiB0aGUgdHdvLiBFYWNoIGdldHMgMS82LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFuc3dlckRhdGEgQW4gb2JqZWN0IHdoZXJlIGVhY2gga2V5IGNvcnJlc3BvbmRzIHRvIGEgcXVlc3Rpb24uXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgVGhlIHZhbHVlIGlzIGEgbGlzdCB3aXRoIHRoZSBvY2N1cnJlbmNlIG9mIGVhY2ggYW5zd2VyLlxuICAgICAqL1xuICAgIEJpbWJvVHlwZS5wcm90b3R5cGUucHJlcHJvY2Vzc0RhdGEgPSBmdW5jdGlvbiAoYW5zd2VyRGF0YSkge1xuICAgICAgICB2YXIgcHJvY2Vzc2VkRGF0YSA9IHt9O1xuICAgICAgICAvLyBGb3IgZWFjaCBxdWVzdGlvbiB0aGF0IHdhcyBhc2tlZFxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMobWFpbl8xLnN0YXRlLnF1ZXN0aW9uc0RpY3QpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIHF1ZXN0aW9uID0gX2FbX2ldO1xuICAgICAgICAgICAgLy8gT25seSBwcm9jZXNzIGFuc3dlcnMgY29ubmVjdGVkIHRvIHF1ZXN0aW9ucyB3ZSBoYXZlIGRhdGEgZm9yXG4gICAgICAgICAgICAvLyBUaGlzIHJlbW92ZXMgYW55IGFuc3dlcnMgdG8gcXVlc3Rpb25zIHdlIGRvIG5vdCBoYXZlIGRhdGEgZm9yLlxuICAgICAgICAgICAgaWYgKHF1ZXN0aW9uIGluIGFuc3dlckRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgYW5zd2VycyA9IGFuc3dlckRhdGFbcXVlc3Rpb25dO1xuICAgICAgICAgICAgICAgIGFuc3dlcnMgPSBVdGlsXzEuc2NhbGVUbzEoYW5zd2Vycyk7XG4gICAgICAgICAgICAgICAgLy8gQXNzdW1lIG1pc3NpbmcgYW5zd2VycyBhcmUgZXF1YWxseSBsaWtlbHkuXG4gICAgICAgICAgICAgICAgdmFyIG5yT2ZBbnN3ZXJzID0gbWFpbl8xLnN0YXRlLnF1ZXN0aW9uc0RpY3RbcXVlc3Rpb25dLmFuc3dlcnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBuck9mTWlzc2luZyA9IG5yT2ZBbnN3ZXJzIC0gYW5zd2Vycy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGFuc3dlcnMubGVuZ3RoIDwgbnJPZkFuc3dlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5zd2Vycy5wdXNoKDEgLyAobnJPZkFuc3dlcnMgLSBuck9mTWlzc2luZykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhbnN3ZXJzID0gVXRpbF8xLnNjYWxlVG8xKGFuc3dlcnMpO1xuICAgICAgICAgICAgICAgIC8vIEFkZCBzbWFsbCB2YWx1ZXNcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFuc3dlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBhbnN3ZXJzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgYW5zd2Vyc1tpXSA9IDAuMDM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNjYWxlIHRvIDEgdG8gYWNjb3VudCBmb3Igb3VyIHNtYWxsIHZhbHVlc1xuICAgICAgICAgICAgICAgIGFuc3dlcnMgPSBVdGlsXzEuc2NhbGVUbzEoYW5zd2Vycyk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YVtxdWVzdGlvbl0gPSBhbnN3ZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9jZXNzZWREYXRhO1xuICAgIH07XG4gICAgLyoqXG4gICAgIFJldHVybnMgdGhlIGxpa2VsaWhvb2Qgb2YgYSBnaXZlbiBzZXQgb2YgYW5zd2VycyBiZWxvbmdpbmcgdG8gdGhpc1xuICAgICBiaW1ibyB0eXBlLlxuICAgICBcbiAgICAgQHBhcmFtIGFuc3dlcnMgYW4gb2JqZWN0IHdpdGggb25lIGtleSBmb3IgZWFjaCBxdWVzdGlvblxuICAgICB0aGUgdmFsdWUgaXMgdGhlIGluZGV4IG9mIHRoZSBzZWxlY3RlZCBhbnN3ZXJcbiAgICAgKi9cbiAgICBCaW1ib1R5cGUucHJvdG90eXBlLmNhbGNDb25kaXRpb25hbExpa2VsaWhvb2QgPSBmdW5jdGlvbiAoYW5zd2Vycykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5wcmlvcjtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnByZXByb2Nlc3NEYXRhKHRoaXMuYW5zd2VyRGF0YSk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhhbnN3ZXJzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBxdWVzdGlvbiA9IF9hW19pXTtcbiAgICAgICAgICAgIC8vIE9ubHkgY2hlY2sgYW5zd2VyZWQgcXVlc3Rpb25zIGFnYWluc3QgbGlrZWxpaG9vZHMgd2hlcmUgd2UgaGF2ZSBkYXRhLlxuICAgICAgICAgICAgaWYgKHF1ZXN0aW9uIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKj0gZGF0YVtxdWVzdGlvbl1bYW5zd2Vyc1txdWVzdGlvbl1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgZG8gbm90IGhhdmUgZGF0YSBmb3IgdGhlIHF1ZXN0aW9uLCBhc3N1bWUgZWFjaCBhbnN3ZXIgaXMgZXF1YWxseSBsaWtlbHlcbiAgICAgICAgICAgICAgICByZXN1bHQgKj0gMSAvIG1haW5fMS5zdGF0ZS5xdWVzdGlvbnNEaWN0W3F1ZXN0aW9uXS5hbnN3ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5zd2VycyBhIG1hcCB3aXRoIG9uZSBrZXkgZm9yIGVhY2ggcXVlc3Rpb24uXG4gICAgICogICAgICAgIHRoZSB2YWx1ZSBpcyB0aGUgaW5kZXggb2YgdGhlIHNlbGVjdGVkIGFuc3dlci5cbiAgICAgKiBAcGFyYW0gYmltYm9UeXBlc1xuICAgICAqL1xuICAgIEJpbWJvVHlwZS5jYWxjUG9zdGVyaW9yID0gZnVuY3Rpb24gKGFuc3dlcnMsIGJpbWJvVHlwZXMpIHtcbiAgICAgICAgdmFyIGV2aWRlbmNlID0gMDtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBiaW1ib1R5cGVzXzEgPSBiaW1ib1R5cGVzOyBfaSA8IGJpbWJvVHlwZXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBiaW1ibyA9IGJpbWJvVHlwZXNfMVtfaV07XG4gICAgICAgICAgICBldmlkZW5jZSArPSBiaW1iby5jYWxjQ29uZGl0aW9uYWxMaWtlbGlob29kKGFuc3dlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHRzID0gW107XG4gICAgICAgIGZvciAodmFyIF9hID0gMCwgYmltYm9UeXBlc18yID0gYmltYm9UeXBlczsgX2EgPCBiaW1ib1R5cGVzXzIubGVuZ3RoOyBfYSsrKSB7XG4gICAgICAgICAgICB2YXIgYmltYm8gPSBiaW1ib1R5cGVzXzJbX2FdO1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsgYmltYm86IGJpbWJvLCBjb25kaXRpb25hbDogYmltYm8uY2FsY0NvbmRpdGlvbmFsTGlrZWxpaG9vZChhbnN3ZXJzKSAvIGV2aWRlbmNlIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmFuZG9tbHkgZ2VuZXJhdGVzIGFuc3dlcnMgdG8gYWxsIHF1ZXN0aW9ucyBhbmQgY291bnRzIGhvdyBtYW55IHRpbWVzIGVhY2hcbiAgICAgKiBwZXJzb25hbGl0eSBpcyBjaG9zZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXMgYSBsaXN0IG9mIHF1ZXN0aW9ucyB0byBhbnN3ZXJcbiAgICAgKiBAcGFyYW0gc2FtcGxlcyBob3cgbWFueSB0aW1lcyB0byBhbnN3ZXIgYWxsIHF1ZXN0aW9uc1xuICAgICAqIEByZXR1cm4gYSBsaXN0IG9mIG9iamVjdHMgcmVwcmVzZW50aW5nIGhvdyBtYW55IHRpbWVzLCBhbmQgYXQgaG93IGhpZ2ggYXZlcmFnZSBsaWtlbGlob29kXG4gICAgICogICAgICAgICBlYWNoIHBlcnNvbmFsaXR5IHdhcyBjaG9zZW5cbiAgICAgKi9cbiAgICBCaW1ib1R5cGUuY2FsY1ZvbHVtZVNhbXBsZSA9IGZ1bmN0aW9uIChxcywgc2FtcGxlcykge1xuICAgICAgICB2YXIgc3RhdHMgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IG1haW5fMS5zdGF0ZS5iaW1ib1R5cGVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGJpbWJvID0gX2FbX2ldO1xuICAgICAgICAgICAgc3RhdHNbYmltYm8uaWRdID0geyB3aW5zOiAwLCBsaWtlbGlob29kOiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1wbGVzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhbnN3ZXJzID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIHFzXzEgPSBxczsgX2IgPCBxc18xLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgIHZhciBxID0gcXNfMVtfYl07XG4gICAgICAgICAgICAgICAgYW5zd2Vyc1txLmlkXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHEuYW5zd2Vycy5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBvc3RlcmlvcnMgPSBCaW1ib1R5cGUuY2FsY1Bvc3RlcmlvcihhbnN3ZXJzLCBtYWluXzEuc3RhdGUuYmltYm9UeXBlcyk7XG4gICAgICAgICAgICBwb3N0ZXJpb3JzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYi5jb25kaXRpb25hbCAtIGEuY29uZGl0aW9uYWw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXRzW3Bvc3RlcmlvcnNbMF0uYmltYm8uaWRdLndpbnMgKz0gMTtcbiAgICAgICAgICAgIHN0YXRzW3Bvc3RlcmlvcnNbMF0uYmltYm8uaWRdLmxpa2VsaWhvb2QgKz0gcG9zdGVyaW9yc1swXS5jb25kaXRpb25hbDtcbiAgICAgICAgfVxuICAgICAgICBzdGF0cyA9IE9iamVjdC5rZXlzKHN0YXRzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgYmltYm86IGtleSwgd2luczogc3RhdHNba2V5XS53aW5zLCBsaWtlbGlob29kOiBzdGF0c1trZXldLmxpa2VsaWhvb2QgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdGF0cztcbiAgICB9O1xuICAgIEJpbWJvVHlwZS5wcm90b3R5cGUudG9IdG1sID0gZnVuY3Rpb24gKGxpa2VsaWhvb2QpIHtcbiAgICAgICAgaWYgKHRoaXMubmFtZSA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBVdGlsXzEuY2FwaXRhbGl6ZSh0aGlzLmlkKTtcbiAgICAgICAgaWYgKHR5cGVvZiBsaWtlbGlob29kID09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBsaWtlbGlob29kID0gKGxpa2VsaWhvb2QgKiAxMDApLnRvRml4ZWQoMSkgKyBcIiVcIjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgICBwYXJhbXMuc2V0KFwidHlwZVwiLCBVdGlsXzEuc2ltcGxlRW5jb2RlKHRoaXMuaWQpKTtcbiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgXCI/XCIgKyBwYXJhbXM7XG4gICAgICAgIHZhciBsaWtlbGlob29kSHRtbCA9IFwiXCI7XG4gICAgICAgIGlmIChsaWtlbGlob29kICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGlrZWxpaG9vZEh0bWwgPSBcIlxcbiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9XFxcImRpc3BsYXk6IGlubGluZTtcXFwiPkxpa2VsaWhvb2Q6IDwvaDM+XFxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVxcXCJkaXNwbGF5OiBpbmxpbmU7IGZvbnQtc2l6ZTogMWVtO1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICBcIiArIGxpa2VsaWhvb2QgKyBcIlxcbiAgICAgICAgICAgICAgICA8L3A+XCI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHMgPSBcIjxkaXYgY2xhc3M9XFxcIndpbmRvdyBiaW1iby1jYXJkXFxcIj5cXG4gICAgICAgICAgICA8ZGl2PlxcbiAgICAgICAgICAgICAgICA8ZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPGgyIHN0eWxlPVxcXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2tcXFwiPlRoZSBcIiArIHRoaXMubmFtZSArIFwiPC9oMj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIFwiICsgbGlrZWxpaG9vZEh0bWwgKyBcIlxcbiAgICAgICAgICAgICAgICA8cD5cIiArIHRoaXMuZGVzY3JpcHRpb24gKyBcIjwvcD5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJiaW1iby12aWV3XFxcIiBzcmM9XFxcIlwiICsgcmVxdWlyZShcIi4vaW1hZ2VzL1wiICsgdGhpcy5pZCArIFwiLnBuZ1wiKS5kZWZhdWx0ICsgXCJcXFwiIC8+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY2FyZC1mb290ZXJcXFwiPlxcbiAgICAgICAgICAgICAgICA8aHI+XFxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJzaGFyZS1saW5rXFxcIiBocmVmPVxcXCJcIiArIHVybCArIFwiXFxcIj5MaW5rIHRvIHRoaXMgcmVzdWx0PC9hPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XCI7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHNlcmlhbGl6cl8xLnNlcmlhbGl6YWJsZShzZXJpYWxpenJfMS5pZGVudGlmaWVyKCkpXG4gICAgXSwgQmltYm9UeXBlLnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzZXJpYWxpenJfMS5zZXJpYWxpemFibGVcbiAgICBdLCBCaW1ib1R5cGUucHJvdG90eXBlLCBcIm5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgc2VyaWFsaXpyXzEuc2VyaWFsaXphYmxlXG4gICAgXSwgQmltYm9UeXBlLnByb3RvdHlwZSwgXCJkZXNjcmlwdGlvblwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzZXJpYWxpenJfMS5zZXJpYWxpemFibGVcbiAgICBdLCBCaW1ib1R5cGUucHJvdG90eXBlLCBcInByaW9yXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHNlcmlhbGl6cl8xLnNlcmlhbGl6YWJsZShzZXJpYWxpenJfMS5tYXAoc2VyaWFsaXpyXzEubGlzdChzZXJpYWxpenJfMS5wcmltaXRpdmUoKSkpKVxuICAgIF0sIEJpbWJvVHlwZS5wcm90b3R5cGUsIFwiYW5zd2VyRGF0YVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBCaW1ib1R5cGU7XG59KCkpO1xuZXhwb3J0cy5CaW1ib1R5cGUgPSBCaW1ib1R5cGU7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8\n')},function(module,exports,__webpack_require__){"use strict";eval('\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, "__esModule", { value: true });\r\nvar alphabet_json_1 = __webpack_require__(10);\r\nvar Cipher = /** @class */ (function () {\r\n    function Cipher() {\r\n        this.alphabet = alphabet_json_1.en;\r\n        this.characters = [];\r\n        this.defaultRegex = /([a-z])|(\\+)|[^A-Za-z]/gi;\r\n        this.nonAlphabetChars = /[^A-Za-z|+]+/g;\r\n    }\r\n    Cipher.prototype.getCharacterPositions = function (text) {\r\n        var _this = this;\r\n        this.characters = this.destructureText(text);\r\n        var characterPositions = [];\r\n        this.characters.map(function (character) {\r\n            _this.alphabet.map(function (c, i) {\r\n                if (character === c[0]) {\r\n                    characterPositions = __spreadArrays(characterPositions, [{ position: i, index: 0 }]);\r\n                }\r\n                else if (character === c[1]) {\r\n                    characterPositions = __spreadArrays(characterPositions, [{ position: i, index: 1 }]);\r\n                }\r\n                else if (character === "+" && characterPositions[characterPositions.length - 1] !== "+") {\r\n                    characterPositions = __spreadArrays(characterPositions, [character]);\r\n                }\r\n                else if (_this.nonAlphabetChars.test(character)) {\r\n                    characterPositions = __spreadArrays(characterPositions, [character]);\r\n                    character = undefined;\r\n                }\r\n            });\r\n        });\r\n        return characterPositions;\r\n    };\r\n    Cipher.prototype.alteredString = function (charPositions, shiftLength, positiveShift) {\r\n        var _this = this;\r\n        var remainderLength;\r\n        var newString = "";\r\n        if (positiveShift) {\r\n            charPositions.map(function (char) {\r\n                if (char === "+") {\r\n                    newString = newString + " ";\r\n                }\r\n                else if (char.position + shiftLength > _this.alphabet.length - 1) {\r\n                    remainderLength = char.position + shiftLength - _this.alphabet.length;\r\n                    newString = newString + _this.alphabet[remainderLength][char.index];\r\n                }\r\n                else if (typeof char === "string" && char.match(_this.nonAlphabetChars)) {\r\n                    newString = newString + char;\r\n                }\r\n                else {\r\n                    newString = newString + _this.alphabet[char.position + shiftLength][char.index];\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            charPositions.map(function (char) {\r\n                if (char === "+") {\r\n                    newString = newString + " ";\r\n                }\r\n                else if (char.position - shiftLength < 0) {\r\n                    remainderLength = char.position - shiftLength + _this.alphabet.length;\r\n                    newString = newString + _this.alphabet[remainderLength][char.index];\r\n                }\r\n                else if (typeof char === "string" && char.match(_this.nonAlphabetChars)) {\r\n                    newString = newString + char;\r\n                }\r\n                else {\r\n                    newString = newString + _this.alphabet[char.position - shiftLength][char.index];\r\n                }\r\n            });\r\n        }\r\n        return newString;\r\n    };\r\n    Cipher.prototype.destructureText = function (text) {\r\n        var newText = text.replace(/\\s+/g, "+");\r\n        var destructuredText = newText.match(this.defaultRegex);\r\n        return destructuredText;\r\n    };\r\n    Cipher.prototype.validateParameters = function (text, shiftLength) {\r\n        if (!text) {\r\n            throw new Error("Text is required.");\r\n        }\r\n        if (typeof text !== "string") {\r\n            throw new Error("Text should be a string.");\r\n        }\r\n        if (typeof shiftLength !== "number") {\r\n            throw new Error("Shift length should be a number.");\r\n        }\r\n        if (!shiftLength && shiftLength !== 0) {\r\n            throw new Error("Shift length is required.");\r\n        }\r\n        if (shiftLength <= 0 || shiftLength > this.alphabet.length) {\r\n            throw new Error("Shift length should be between : 1-" + this.alphabet.length + ".");\r\n        }\r\n    };\r\n    Cipher.prototype.encrypt = function (text, shiftLength) {\r\n        try {\r\n            this.validateParameters(text, shiftLength);\r\n            var charPositions = this.getCharacterPositions(text);\r\n            return this.alteredString(charPositions, shiftLength, true);\r\n        }\r\n        catch (err) {\r\n            throw new Error("Unable to encrypt message. " + err.message);\r\n        }\r\n    };\r\n    Cipher.prototype.decrypt = function (text, shiftLength) {\r\n        try {\r\n            this.validateParameters(text, shiftLength);\r\n            var charPositions = this.getCharacterPositions(text);\r\n            return this.alteredString(charPositions, shiftLength, false);\r\n        }\r\n        catch (err) {\r\n            throw new Error("Unable to decrypt message. " + err.message);\r\n        }\r\n    };\r\n    return Cipher;\r\n}());\r\nexports.Cipher = Cipher;\r\n;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanMtY2lwaGVyL2Rpc3QvbWFpbi5qcz85MGJhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxpREFBaUQsUUFBUTtBQUN6RCx3Q0FBd0MsUUFBUTtBQUNoRCx3REFBd0QsUUFBUTtBQUNoRTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RCxzQkFBc0IsbUJBQU8sQ0FBQyxFQUFpQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLHdCQUF3QjtBQUN0RztBQUNBO0FBQ0EsOEVBQThFLHdCQUF3QjtBQUN0RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSIsImZpbGUiOiI5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX3NwcmVhZEFycmF5cyA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheXMpIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBhbHBoYWJldF9qc29uXzEgPSByZXF1aXJlKFwiLi9hbHBoYWJldC5qc29uXCIpO1xyXG52YXIgQ2lwaGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ2lwaGVyKCkge1xyXG4gICAgICAgIHRoaXMuYWxwaGFiZXQgPSBhbHBoYWJldF9qc29uXzEuZW47XHJcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0UmVnZXggPSAvKFthLXpdKXwoXFwrKXxbXkEtWmEtel0vZ2k7XHJcbiAgICAgICAgdGhpcy5ub25BbHBoYWJldENoYXJzID0gL1teQS1aYS16fCtdKy9nO1xyXG4gICAgfVxyXG4gICAgQ2lwaGVyLnByb3RvdHlwZS5nZXRDaGFyYWN0ZXJQb3NpdGlvbnMgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJzID0gdGhpcy5kZXN0cnVjdHVyZVRleHQodGV4dCk7XHJcbiAgICAgICAgdmFyIGNoYXJhY3RlclBvc2l0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2hhcmFjdGVycy5tYXAoZnVuY3Rpb24gKGNoYXJhY3Rlcikge1xyXG4gICAgICAgICAgICBfdGhpcy5hbHBoYWJldC5tYXAoZnVuY3Rpb24gKGMsIGkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFyYWN0ZXIgPT09IGNbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJQb3NpdGlvbnMgPSBfX3NwcmVhZEFycmF5cyhjaGFyYWN0ZXJQb3NpdGlvbnMsIFt7IHBvc2l0aW9uOiBpLCBpbmRleDogMCB9XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGFyYWN0ZXIgPT09IGNbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJQb3NpdGlvbnMgPSBfX3NwcmVhZEFycmF5cyhjaGFyYWN0ZXJQb3NpdGlvbnMsIFt7IHBvc2l0aW9uOiBpLCBpbmRleDogMSB9XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGFyYWN0ZXIgPT09IFwiK1wiICYmIGNoYXJhY3RlclBvc2l0aW9uc1tjaGFyYWN0ZXJQb3NpdGlvbnMubGVuZ3RoIC0gMV0gIT09IFwiK1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyUG9zaXRpb25zID0gX19zcHJlYWRBcnJheXMoY2hhcmFjdGVyUG9zaXRpb25zLCBbY2hhcmFjdGVyXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChfdGhpcy5ub25BbHBoYWJldENoYXJzLnRlc3QoY2hhcmFjdGVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlclBvc2l0aW9ucyA9IF9fc3ByZWFkQXJyYXlzKGNoYXJhY3RlclBvc2l0aW9ucywgW2NoYXJhY3Rlcl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNoYXJhY3RlclBvc2l0aW9ucztcclxuICAgIH07XHJcbiAgICBDaXBoZXIucHJvdG90eXBlLmFsdGVyZWRTdHJpbmcgPSBmdW5jdGlvbiAoY2hhclBvc2l0aW9ucywgc2hpZnRMZW5ndGgsIHBvc2l0aXZlU2hpZnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZW1haW5kZXJMZW5ndGg7XHJcbiAgICAgICAgdmFyIG5ld1N0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHBvc2l0aXZlU2hpZnQpIHtcclxuICAgICAgICAgICAgY2hhclBvc2l0aW9ucy5tYXAoZnVuY3Rpb24gKGNoYXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSBcIitcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0cmluZyA9IG5ld1N0cmluZyArIFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhci5wb3NpdGlvbiArIHNoaWZ0TGVuZ3RoID4gX3RoaXMuYWxwaGFiZXQubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbWFpbmRlckxlbmd0aCA9IGNoYXIucG9zaXRpb24gKyBzaGlmdExlbmd0aCAtIF90aGlzLmFscGhhYmV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBuZXdTdHJpbmcgPSBuZXdTdHJpbmcgKyBfdGhpcy5hbHBoYWJldFtyZW1haW5kZXJMZW5ndGhdW2NoYXIuaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNoYXIgPT09IFwic3RyaW5nXCIgJiYgY2hhci5tYXRjaChfdGhpcy5ub25BbHBoYWJldENoYXJzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0cmluZyA9IG5ld1N0cmluZyArIGNoYXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdTdHJpbmcgPSBuZXdTdHJpbmcgKyBfdGhpcy5hbHBoYWJldFtjaGFyLnBvc2l0aW9uICsgc2hpZnRMZW5ndGhdW2NoYXIuaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNoYXJQb3NpdGlvbnMubWFwKGZ1bmN0aW9uIChjaGFyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gXCIrXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdTdHJpbmcgPSBuZXdTdHJpbmcgKyBcIiBcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIucG9zaXRpb24gLSBzaGlmdExlbmd0aCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1haW5kZXJMZW5ndGggPSBjaGFyLnBvc2l0aW9uIC0gc2hpZnRMZW5ndGggKyBfdGhpcy5hbHBoYWJldC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RyaW5nID0gbmV3U3RyaW5nICsgX3RoaXMuYWxwaGFiZXRbcmVtYWluZGVyTGVuZ3RoXVtjaGFyLmluZGV4XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjaGFyID09PSBcInN0cmluZ1wiICYmIGNoYXIubWF0Y2goX3RoaXMubm9uQWxwaGFiZXRDaGFycykpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdTdHJpbmcgPSBuZXdTdHJpbmcgKyBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U3RyaW5nID0gbmV3U3RyaW5nICsgX3RoaXMuYWxwaGFiZXRbY2hhci5wb3NpdGlvbiAtIHNoaWZ0TGVuZ3RoXVtjaGFyLmluZGV4XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdTdHJpbmc7XHJcbiAgICB9O1xyXG4gICAgQ2lwaGVyLnByb3RvdHlwZS5kZXN0cnVjdHVyZVRleHQgPSBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICAgIHZhciBuZXdUZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHMrL2csIFwiK1wiKTtcclxuICAgICAgICB2YXIgZGVzdHJ1Y3R1cmVkVGV4dCA9IG5ld1RleHQubWF0Y2godGhpcy5kZWZhdWx0UmVnZXgpO1xyXG4gICAgICAgIHJldHVybiBkZXN0cnVjdHVyZWRUZXh0O1xyXG4gICAgfTtcclxuICAgIENpcGhlci5wcm90b3R5cGUudmFsaWRhdGVQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKHRleHQsIHNoaWZ0TGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKCF0ZXh0KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRleHQgaXMgcmVxdWlyZWQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHRleHQgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGV4dCBzaG91bGQgYmUgYSBzdHJpbmcuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNoaWZ0TGVuZ3RoICE9PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNoaWZ0IGxlbmd0aCBzaG91bGQgYmUgYSBudW1iZXIuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXNoaWZ0TGVuZ3RoICYmIHNoaWZ0TGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNoaWZ0IGxlbmd0aCBpcyByZXF1aXJlZC5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaGlmdExlbmd0aCA8PSAwIHx8IHNoaWZ0TGVuZ3RoID4gdGhpcy5hbHBoYWJldC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2hpZnQgbGVuZ3RoIHNob3VsZCBiZSBiZXR3ZWVuIDogMS1cIiArIHRoaXMuYWxwaGFiZXQubGVuZ3RoICsgXCIuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDaXBoZXIucHJvdG90eXBlLmVuY3J5cHQgPSBmdW5jdGlvbiAodGV4dCwgc2hpZnRMZW5ndGgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlUGFyYW1ldGVycyh0ZXh0LCBzaGlmdExlbmd0aCk7XHJcbiAgICAgICAgICAgIHZhciBjaGFyUG9zaXRpb25zID0gdGhpcy5nZXRDaGFyYWN0ZXJQb3NpdGlvbnModGV4dCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFsdGVyZWRTdHJpbmcoY2hhclBvc2l0aW9ucywgc2hpZnRMZW5ndGgsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBlbmNyeXB0IG1lc3NhZ2UuIFwiICsgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDaXBoZXIucHJvdG90eXBlLmRlY3J5cHQgPSBmdW5jdGlvbiAodGV4dCwgc2hpZnRMZW5ndGgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlUGFyYW1ldGVycyh0ZXh0LCBzaGlmdExlbmd0aCk7XHJcbiAgICAgICAgICAgIHZhciBjaGFyUG9zaXRpb25zID0gdGhpcy5nZXRDaGFyYWN0ZXJQb3NpdGlvbnModGV4dCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFsdGVyZWRTdHJpbmcoY2hhclBvc2l0aW9ucywgc2hpZnRMZW5ndGgsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZGVjcnlwdCBtZXNzYWdlLiBcIiArIGVyci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENpcGhlcjtcclxufSgpKTtcclxuZXhwb3J0cy5DaXBoZXIgPSBDaXBoZXI7XHJcbjtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n')},function(module){eval('module.exports = JSON.parse("{\\"en\\":[[\\"a\\",\\"A\\"],[\\"b\\",\\"B\\"],[\\"c\\",\\"C\\"],[\\"d\\",\\"D\\"],[\\"e\\",\\"E\\"],[\\"f\\",\\"F\\"],[\\"g\\",\\"G\\"],[\\"h\\",\\"H\\"],[\\"i\\",\\"I\\"],[\\"j\\",\\"J\\"],[\\"k\\",\\"K\\"],[\\"l\\",\\"L\\"],[\\"m\\",\\"M\\"],[\\"n\\",\\"N\\"],[\\"o\\",\\"O\\"],[\\"p\\",\\"P\\"],[\\"q\\",\\"Q\\"],[\\"r\\",\\"R\\"],[\\"s\\",\\"S\\"],[\\"t\\",\\"T\\"],[\\"u\\",\\"U\\"],[\\"v\\",\\"V\\"],[\\"w\\",\\"W\\"],[\\"x\\",\\"X\\"],[\\"y\\",\\"Y\\"],[\\"z\\",\\"Z\\"]]}");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIxMC5qcyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///10\n')},function(module,exports,__webpack_require__){eval('var map = {\n\t"./besserwisser.png": 12,\n\t"./cheerleader.png": 13,\n\t"./cow.png": 14,\n\t"./ditz.png": 15,\n\t"./diva.png": 16,\n\t"./gamer.png": 17,\n\t"./goth.png": 18,\n\t"./gym-bunny.png": 19,\n\t"./know-it-all.png": 20,\n\t"./librarian.png": 21,\n\t"./pet.png": 22,\n\t"./queen.png": 23,\n\t"./shopaholic.png": 24,\n\t"./slut.png": 25\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error("Cannot find module \'" + req + "\'");\n\t\te.code = \'MODULE_NOT_FOUND\';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 11;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzIHN5bmMgXlxcLlxcLy4qXFwucG5nJD83ZTg1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbWFwID0ge1xuXHRcIi4vYmVzc2Vyd2lzc2VyLnBuZ1wiOiAxMixcblx0XCIuL2NoZWVybGVhZGVyLnBuZ1wiOiAxMyxcblx0XCIuL2Nvdy5wbmdcIjogMTQsXG5cdFwiLi9kaXR6LnBuZ1wiOiAxNSxcblx0XCIuL2RpdmEucG5nXCI6IDE2LFxuXHRcIi4vZ2FtZXIucG5nXCI6IDE3LFxuXHRcIi4vZ290aC5wbmdcIjogMTgsXG5cdFwiLi9neW0tYnVubnkucG5nXCI6IDE5LFxuXHRcIi4va25vdy1pdC1hbGwucG5nXCI6IDIwLFxuXHRcIi4vbGlicmFyaWFuLnBuZ1wiOiAyMSxcblx0XCIuL3BldC5wbmdcIjogMjIsXG5cdFwiLi9xdWVlbi5wbmdcIjogMjMsXG5cdFwiLi9zaG9wYWhvbGljLnBuZ1wiOiAyNCxcblx0XCIuL3NsdXQucG5nXCI6IDI1XG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gMTE7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///11\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "besserwisser.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2Jlc3Nlcndpc3Nlci5wbmc/NWQ5NiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFlLG9GQUF1QixxQkFBcUIiLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYmVzc2Vyd2lzc2VyLnBuZ1wiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///12\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "cheerleader.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2NoZWVybGVhZGVyLnBuZz8xZDA3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQWUsb0ZBQXVCLG9CQUFvQiIsImZpbGUiOiIxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJjaGVlcmxlYWRlci5wbmdcIjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///13\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "cow.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2Nvdy5wbmc/MjMxNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFlLG9GQUF1QixZQUFZIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImNvdy5wbmdcIjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///14\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "ditz.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2RpdHoucG5nP2VlZDAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBZSxvRkFBdUIsYUFBYSIsImZpbGUiOiIxNS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJkaXR6LnBuZ1wiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///15\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "diva.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2RpdmEucG5nPzRlZDciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBZSxvRkFBdUIsYUFBYSIsImZpbGUiOiIxNi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJkaXZhLnBuZ1wiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///16\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "gamer.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2dhbWVyLnBuZz9hNjczIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQWUsb0ZBQXVCLGNBQWMiLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZ2FtZXIucG5nXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "goth.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2dvdGgucG5nP2RhYmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBZSxvRkFBdUIsYUFBYSIsImZpbGUiOiIxOC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJnb3RoLnBuZ1wiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///18\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "gym-bunny.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2d5bS1idW5ueS5wbmc/Yjg3MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFlLG9GQUF1QixrQkFBa0IiLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZ3ltLWJ1bm55LnBuZ1wiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///19\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "know-it-all.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2tub3ctaXQtYWxsLnBuZz81MThmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQWUsb0ZBQXVCLG9CQUFvQiIsImZpbGUiOiIyMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJrbm93LWl0LWFsbC5wbmdcIjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "librarian.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL2xpYnJhcmlhbi5wbmc/NzY5NCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFlLG9GQUF1QixrQkFBa0IiLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwibGlicmFyaWFuLnBuZ1wiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///21\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "pet.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL3BldC5wbmc/Y2U4NSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFlLG9GQUF1QixZQUFZIiwiZmlsZSI6IjIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcInBldC5wbmdcIjsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///22\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "queen.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL3F1ZWVuLnBuZz84MDg3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQWUsb0ZBQXVCLGNBQWMiLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwicXVlZW4ucG5nXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///23\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "shopaholic.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL3Nob3BhaG9saWMucG5nPzViNmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBZSxvRkFBdUIsbUJBQW1CIiwiZmlsZSI6IjI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcInNob3BhaG9saWMucG5nXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///24\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = (__webpack_require__.p + "slut.png");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW1hZ2VzL3NsdXQucG5nP2ZiYjEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBZSxvRkFBdUIsYUFBYSIsImZpbGUiOiIyNS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJzbHV0LnBuZ1wiOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///25\n')},function(module,exports,__webpack_require__){"use strict";eval('\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, "__esModule", { value: true });\nexports.Question = void 0;\nvar answer_1 = __webpack_require__(3);\nvar serializr_1 = __webpack_require__(0);\nvar Question = /** @class */ (function () {\n    function Question(id, text, answers) {\n        this.id = id;\n        this.text = text;\n        this.answers = answers; //answers.map((a, i) => new Answer(`${i}`, a))\n    }\n    Question.prototype.toHtml = function () {\n        var s = "\\n        <div class=\\"window question\\" id=\\"question\\">\\n            <h3>" + this.text + "</h3>\\n            <br>\\n            <div class=\\"answers\\">\\n                " + this.answers.map(function (a) { return a.toHtml(); }).join(\'\') + "\\n            </div>\\n        </div>\\n      ";\n        return s;\n    };\n    Question.prototype.register = function () {\n        for (var _i = 0, _a = this.answers; _i < _a.length; _i++) {\n            var answer = _a[_i];\n            answer.register();\n        }\n    };\n    __decorate([\n        serializr_1.serializable(serializr_1.identifier())\n    ], Question.prototype, "id", void 0);\n    __decorate([\n        serializr_1.serializable\n    ], Question.prototype, "text", void 0);\n    __decorate([\n        serializr_1.serializable(serializr_1.list(serializr_1.object(answer_1.Answer)))\n    ], Question.prototype, "answers", void 0);\n    return Question;\n}());\nexports.Question = Question;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcXVlc3Rpb24udHM/ZDg3OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxRQUFRO0FBQ3BEO0FBQ0E7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBLGVBQWUsbUJBQU8sQ0FBQyxDQUFVO0FBQ2pDLGtCQUFrQixtQkFBTyxDQUFDLENBQVc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdUNBQXVDLEVBQUU7QUFDeEU7QUFDQTtBQUNBLDhOQUE4TixtQkFBbUIsRUFBRTtBQUNuUDtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsZ0JBQWdCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUXVlc3Rpb24gPSB2b2lkIDA7XG52YXIgYW5zd2VyXzEgPSByZXF1aXJlKFwiLi9hbnN3ZXJcIik7XG52YXIgc2VyaWFsaXpyXzEgPSByZXF1aXJlKFwic2VyaWFsaXpyXCIpO1xudmFyIFF1ZXN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFF1ZXN0aW9uKGlkLCB0ZXh0LCBhbnN3ZXJzKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5hbnN3ZXJzID0gYW5zd2VyczsgLy9hbnN3ZXJzLm1hcCgoYSwgaSkgPT4gbmV3IEFuc3dlcihgJHtpfWAsIGEpKVxuICAgIH1cbiAgICBRdWVzdGlvbi5wcm90b3R5cGUudG9IdG1sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcyA9IFwiXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ3aW5kb3cgcXVlc3Rpb25cXFwiIGlkPVxcXCJxdWVzdGlvblxcXCI+XFxuICAgICAgICAgICAgPGgzPlwiICsgdGhpcy50ZXh0ICsgXCI8L2gzPlxcbiAgICAgICAgICAgIDxicj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhbnN3ZXJzXFxcIj5cXG4gICAgICAgICAgICAgICAgXCIgKyB0aGlzLmFuc3dlcnMubWFwKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvSHRtbCgpOyB9KS5qb2luKCcnKSArIFwiXFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICBcIjtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfTtcbiAgICBRdWVzdGlvbi5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmFuc3dlcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgYW5zd2VyID0gX2FbX2ldO1xuICAgICAgICAgICAgYW5zd2VyLnJlZ2lzdGVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzZXJpYWxpenJfMS5zZXJpYWxpemFibGUoc2VyaWFsaXpyXzEuaWRlbnRpZmllcigpKVxuICAgIF0sIFF1ZXN0aW9uLnByb3RvdHlwZSwgXCJpZFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzZXJpYWxpenJfMS5zZXJpYWxpemFibGVcbiAgICBdLCBRdWVzdGlvbi5wcm90b3R5cGUsIFwidGV4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzZXJpYWxpenJfMS5zZXJpYWxpemFibGUoc2VyaWFsaXpyXzEubGlzdChzZXJpYWxpenJfMS5vYmplY3QoYW5zd2VyXzEuQW5zd2VyKSkpXG4gICAgXSwgUXVlc3Rpb24ucHJvdG90eXBlLCBcImFuc3dlcnNcIiwgdm9pZCAwKTtcbiAgICByZXR1cm4gUXVlc3Rpb247XG59KCkpO1xuZXhwb3J0cy5RdWVzdGlvbiA9IFF1ZXN0aW9uO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///26\n')},function(module){eval('module.exports = JSON.parse("[{\\"id\\":\\"ditz\\",\\"description\\":\\"All bimbos have one thing in common: being dumb. But you have managed to make that your entire personality. Giggling, drooling and with an attention span that make would make a goldfish ashamed, you\'re in luck when you can figure out how a doorknob works. <br><br> You are playful and may need someone to keep you in line, yet submissiveness comes naturally to you. You\'ll do whatever you\'re told, because you can\'t really remember what you were planning to do anyway.\\",\\"prior\\":0.8,\\"answerData\\":{\\"color\\":[10,8,6,2,0,4,1,4],\\"drive\\":[10,6,2,1],\\"being-told\\":[3,10,1,0],\\"animal\\":[7,2,7,10],\\"partner\\":[10,1,6,8],\\"breast-expansion\\":[0,10,10,10],\\"shoes\\":[1,2,0,10,4],\\"describe\\":[5,0,1,10,10,3],\\"iq\\":[10,4,2,0,0,0,0],\\"hair-color\\":[10,6,2,0,6,0],\\"breast-size\\":[0,1,8,10,6],\\"lactation\\":[5,7,4,1],\\"relax\\":[5,5,5,0,5],\\"selfie\\":[2,1,0],\\"brain-drain\\":[0,3,0,6,0,0]}},{\\"id\\":\\"slut\\",\\"description\\":\\"It\'s not that you\'re trying to get in bed with half the people you meet, it\'s just that having sex is so freakin\' good! And where most people tire after going at it once or twice in a row, you just can\'t help yourself. Everyone you meet looks sooo hot, so how couldn\'t you be horny all the time? <br><br> Some think you could never be in a real relationship, but that\'s not true. Maybe your partner can only do you two times in a row, but then you can just find someone else in the meantime. You don\'t mind. Whenever your partner is up for a fuck you\'ll be there, so they surely won\'t mind if you suck some dick in the meantime?\\",\\"prior\\":0.5,\\"answerData\\":{\\"color\\":[9,9,10,0,0,3,1,6],\\"drive\\":[5,5,5,5],\\"being-told\\":[10,7,3,0],\\"animal\\":[0,5,10,1],\\"partner\\":[10,0,2,7],\\"breast-expansion\\":[1,10,5,2],\\"shoes\\":[1,1,2,10,10],\\"describe\\":[3,1,5,5,7,10],\\"iq\\":[1,4,10,6,4,5,5],\\"hair-color\\":[8,9,4,3,6,5],\\"breast-size\\":[6,3,10,5,1],\\"lactation\\":[5,4,1,0],\\"relax\\":[2,2,1,0,10],\\"selfie\\":[1,1,2],\\"brain-drain\\":[3,3,3,1,3,0]}},{\\"id\\":\\"diva\\",\\"description\\":\\"You\'re beautiful, sexy and stylish. And you know it. Staff may call you arrogant and egocentric, but they are just too close-minded to appreciate your elegance. You want nothing but the service and luxury you are entitled to. <br><br> As most bimbos you leave all the hard thinking and maths to others, yet you are a master of making people give you what you want. Be it with charm, sex or threats; the intelligent think you understand them, the rich are allured by you and the poor dread you. <br><br> At the end of the day, you\'re the one sitting naked in a big luxury bubble bath in the lap of some millionaire, drinking champagne and enjoying yourself.\\",\\"prior\\":1.2,\\"answerData\\":{\\"color\\":[5,7,5,2,2,7,5,2],\\"drive\\":[0,10,6,6],\\"being-told\\":[0,0,5,10],\\"animal\\":[0,10,1,5],\\"partner\\":[5,1,10,5],\\"breast-expansion\\":[6,10,4,4],\\"shoes\\":[0,1,7,3,10],\\"describe\\":[0,5,4,0,10,10],\\"iq\\":[0,1,2,3,10,6,4],\\"hair-color\\":[1,6,6,1,2,10],\\"breast-size\\":[1,8,8,6,2],\\"lactation\\":[10,3,1,0],\\"relax\\":[10,7,0,2,0],\\"selfie\\":[1,2,0],\\"brain-drain\\":[0,0,3,2,6,0]}},{\\"id\\":\\"pet\\",\\"description\\":\\"Shy and affectionate, you crave attention more than any other. Head pats, belly rubs and cuddle fucking means everything to you, and you will do anything to get it. <br><br> You may prefer to sit at home snuggled up in your owners lap, but if they want you to crawl naked and leashed through the streets, you\'ll do it, tongue out and head up. You don\'t want anyone to doubt what a good girl you are.\\",\\"prior\\":1,\\"answerData\\":{\\"color\\":[7,1,4,10,7,3,1,5],\\"drive\\":[5,10,2,0],\\"being-told\\":[10,3,0,2],\\"animal\\":[10,5,10,10],\\"partner\\":[4,10,0,6],\\"breast-expansion\\":[5,0,0,7],\\"shoes\\":[10,2,1,5,0],\\"describe\\":[10,3,10,7,1,3],\\"iq\\":[1,3,6,7,3,3,3],\\"hair-color\\":[1,2,5,5,7,4],\\"breast-size\\":[10,7,4,1,0],\\"lactation\\":[10,6,3,1],\\"relax\\":[2,5,0,10,2],\\"selfie\\":[0,0,2],\\"brain-drain\\":[1,0,3,3,6,1]}},{\\"id\\":\\"shopaholic\\",\\"description\\":\\"You love shopping. The big malls have everything, from cute cafs to all those little boutiques that sell cute dresses, earrings, shoes, sexy panties... you could go on, and you usually do, until you\'re all out of spending money. <br><br> At least you got the style sense to back it up. Always in a new meticulously planned outfit, just a tad too revealing to be appropriate, you rarely have trouble finding someone to pay for it all. And hey it\'s a fair trade, you get to do what you enjoy, and they get to have you model it for them in just as much privacy as they want.\\",\\"prior\\":1,\\"answerData\\":{\\"color\\":[6,4,4,5,5,4,4,3],\\"drive\\":[1,4,8,3],\\"being-told\\":[3,0,10,7],\\"animal\\":[1,5,5,3],\\"partner\\":[3,1,10,6],\\"breast-expansion\\":[1,5,5,1],\\"shoes\\":[0,3,2,4,5],\\"describe\\":[4,2,1,2,10,5],\\"iq\\":[0,1,3,9,7,3,3],\\"hair-color\\":[7,7,5,2,4,1],\\"breast-size\\":[1,8,10,5,0],\\"lactation\\":[10,2,0,0],\\"relax\\":[4,10,7,1,1],\\"selfie\\":[2,0,0],\\"brain-drain\\":[6,3,0,1,1,6]}},{\\"id\\":\\"librarian\\",\\"description\\":\\"As one of the smartest bimbo types, you very likely retain your ability to read and write. But with a positive view of bimbos, it would not be uncommon for you to want to become dumber. Several of the Librarian type have managed to dumb down to a primary-school level of reading and writing ability, but more common is to find a middle ground at a vocabulary limited to what one might find in erotic novels. <br><br> Your reserved nature often comes between you and acting out your fantasies. This tends to result in fairly discreet behavior such as bending over too far to \'pick up a book\', sucking on the edge of a pen, getting lewd tatoos or bringing \'toys\' to work for when you don\'t think anyone will notice. <br><br> But in the struggle to be more bimbo, always remember how cute it is to be both sexy, horny <i>AND</i> smart(-isch)!\\",\\"prior\\":1,\\"answerData\\":{\\"color\\":[5,1,3,5,1,1,3,5],\\"drive\\":[0,4,8,1],\\"being-told\\":[10,5,0,3],\\"animal\\":[2,2,5,5],\\"partner\\":[5,5,1,10],\\"breast-expansion\\":[10,6,2,4],\\"shoes\\":[2,0,10,5,1],\\"describe\\":[6,7,8,1,0,1],\\"iq\\":[0,0,2,4,8,10,5],\\"hair-color\\":[0,2,10,10,2,4],\\"breast-size\\":[8,10,5,1,0],\\"lactation\\":[10,5,1,1],\\"relax\\":[2,1,0,10,7],\\"selfie\\":[1,2,0],\\"brain-drain\\":[1,6,3,0,3,1]}},{\\"id\\":\\"cow\\",\\"description\\":\\"Closely related to the Pet bimbo type, you are both shy and affectionate. You love being petted and cared for, but also when big strong arms can wrap around your waist, or big heavy hips, and hold you steady. <br><br> As one of the dumbest bimbo types, many Cows are too stupid (but sometimes just too submissive) to even open doors or speak, but usually retain a high level of emotional intelligence. This means that you can easily sense, especially your handler\'s, mood and make them feel better in almost any situation. This often leads to a deep bond between you and your handler. <br><br> This bond is taken even further by your own favourite pastime: being milked. You absolutely love it! Whether you get to feel your handlers firm but gentle hands, stroking and squeezing your breasts and nipples, or strong arms around your waist as you are rammed from behind, while a machine does the milking... you cum every time, many times.\\",\\"prior\\":1,\\"answerData\\":{\\"color\\":[5,1,3,8,1,5,10,10],\\"drive\\":[10,3,1,1],\\"being-told\\":[10,7,0,0],\\"animal\\":[5,0,5,10],\\"partner\\":[4,10,0,10],\\"breast-expansion\\":[0,0,0,10],\\"shoes\\":[10,2,3,4,3],\\"describe\\":[10,1,8,2,1,0],\\"iq\\":[10,5,3,1,1,0,0],\\"hair-color\\":[1,7,7,10,2,10],\\"breast-size\\":[0,1,3,9,10],\\"lactation\\":[0,1,5,10],\\"relax\\":[3,10,0,7,5],\\"selfie\\":[0,0,1],\\"brain-drain\\":[0,0,0,0,6,3]}},{\\"id\\":\\"cheerleader\\",\\"description\\":\\"Cheery and energetic, you work hard to be the best! This trait means that while Cheerleader types are usually drawn to dancing, sports or similar activities where you can show off and be the center of attention, if you happen to be one of the less ditzy ones, you might do quite well in any field you choose. Dedication, good looks and a cutthroat attitude towards competition often goes a long way. <br><br> Of course, you may well be more of an airhead kind of gal. In which case you are more than likely to need all that energy of yours to memorize your next chant. Spelling to \'go team\' and counting to 10 can be tricky!\\",\\"prior\\":1,\\"answerData\\":{\\"color\\":[10,1,7,1,5,5,1,10],\\"drive\\":[2,7,10,6],\\"being-told\\":[4,1,10,7],\\"animal\\":[0,7,10,1],\\"partner\\":[4,1,4,10],\\"breast-expansion\\":[2,5,5,1],\\"shoes\\":[5,6,10,1,3],\\"describe\\":[1,5,0,5,10,7],\\"iq\\":[0,5,10,7,3,1,0],\\"hair-color\\":[7,10,1,5,1,0],\\"breast-size\\":[4,10,8,1,0],\\"lactation\\":[10,3,1,0],\\"relax\\":[6,1,10,0,2],\\"selfie\\":[1,2,0],\\"brain-drain\\":[0,0,3,6,3,3]}},{\\"id\\":\\"goth\\",\\"description\\":\\"Enigmatic, reserved and difficult to impress, on the surface you are the polar opposite of most other bimbo types. But the reason you look so bored is just that you\'ve already had all the normal sex! You may be a bimbo, but at least you can remember that... <br><br> What you want is something new and exciting! It doesn\'t matter if that is engaging in a deeply romantic relationship, reading poems and gazing into each others eyes throughout the night, or uncovering ancient occult rituals for summoning succubi and other hot looking demons. If you get to do something different, and end the night screaming in pleasure, you\'ll be perfectly happy.\\",\\"prior\\":1,\\"answerData\\":{\\"color\\":[0,3,5,1,4,0,10,0],\\"drive\\":[5,1,4,5],\\"being-told\\":[1,10,10,5],\\"animal\\":[5,7,0,10],\\"partner\\":[10,9,1,3],\\"breast-expansion\\":[3,5,5,5],\\"shoes\\":[0,0,7,4,10],\\"describe\\":[5,5,10,3,1,3],\\"iq\\":[0,3,7,10,7,1,0],\\"hair-color\\":[0,0,0,5,1,10],\\"breast-size\\":[4,10,7,1,0],\\"lactation\\":[10,3,1,0],\\"relax\\":[6,0,4,10,0],\\"selfie\\":[0,1,1],\\"brain-drain\\":[1,6,3,0,1,3]}},{\\"id\\":\\"gamer\\",\\"description\\":\\"People go online for many reasons, but you\'re here for two things: to have fun, and to win! Other bimbo types might obsess over shopping and shoes, but your passion is gaming, and you\'re damn good at it. No matter what game or platform, few can match you. <br><br> And there are so many games to choose from! So many characters to build or play as. The blushing healer, the horny tank, or just kicking some ass with a big fat gun. <br><br> Thanks to streaming, you can even make money while doing it. Show off your skills, meet cool people, flirt with chat and why not show off some of your other assets at the same time? It\'s all the fun you want in a single package. Well, almost all you want ;)\\",\\"prior\\":0.4,\\"answerData\\":{\\"color\\":[10,6,6,2,2,1,8,1],\\"drive\\":[0,1,10,8],\\"being-told\\":[4,6,10,8],\\"animal\\":[8,10,4,8],\\"partner\\":[2,6,4,10],\\"breast-expansion\\":[7,7,2,4],\\"shoes\\":[6,6,10,1,6],\\"describe\\":[4,6,1,10,2,8],\\"iq\\":[0,0,2,6,10,7,1],\\"hair-color\\":[0,0,4,4,10,2],\\"breast-size\\":[2,6,8,4,0],\\"lactation\\":[6,4,1,2],\\"relax\\":[6,3,0,10,3],\\"selfie\\":[10,5,0],\\"brain-drain\\":[0,3,0,6,0,3]}},{\\"id\\":\\"queen\\",\\"description\\":\\"Noble and beautiful, few would complain having you be their queen. You may be too dumb to really rule much more than your bedroom, yet your calm demeanour, soothing voice and royal posture make everything you say seem wise nonetheless. <br><br> With a penchant for silk and other luxury materials, you\'re always dressed to match your status. Fancy dresses, frills and glimmering jewelry are no news to you, all with a tasteful slutty touch. <br><br> Rulers can be cruel and dominating, or tender and encouraging, but whichever you are, you\'re certain to find those who will praise and love you. Or fight to defend your honor.\\",\\"prior\\":0.7,\\"answerData\\":{\\"color\\":[1,8,4,0,10,6,0,1],\\"drive\\":[10,4,1,0],\\"being-told\\":[4,2,0,10],\\"animal\\":[7,4,1,10],\\"partner\\":[4,10,1,5],\\"breast-expansion\\":[8,2,4,6],\\"shoes\\":[0,0,8,2,3],\\"describe\\":[10,2,4,1,8,2],\\"iq\\":[0,4,8,6,2,1,0],\\"hair-color\\":[6,3,1,4,0,10],\\"breast-size\\":[1,2,6,4,2],\\"lactation\\":[10,4,2,2],\\"relax\\":[10,8,2,5,0],\\"selfie\\":[2,10,4],\\"brain-drain\\":[0,0,6,0,2,1]}},{\\"id\\":\\"gym-bunny\\",\\"name\\":\\"Gym Bunny\\",\\"description\\":\\"<i>Gym bunny.</i> When it comes to staying fit, no one is more dedicated than you. Whether at the gym, rock climbing or running marathons, finding you not doing some physical activity is a rare sight. And why not? You stay healthy, horny and energized, not to mention, there are always plenty of hot guys around. <br><br> <i>Dim bunny.</i> When it comes to intelligence, you\'re certainly on the lower end, but that\'s exactly what you want! Your brain doesn\'t help you stay fit, and who would like a smartsy bimbo anyway? Staying fit and dumb really is the best. <br><br> <i>Cum bunny.</i> With your stamina, there are not many who can keep up. Yet with your looks, building a team to help send you on your way really isn\'t that difficult. \\",\\"prior\\":1.5,\\"answerData\\":{\\"color\\":[10,4,8,1,4,4,2,6],\\"drive\\":[4,0,6,10],\\"being-told\\":[7,10,3,0],\\"animal\\":[4,10,10,0],\\"partner\\":[6,0,0,10],\\"breast-expansion\\":[10,2,6,2],\\"shoes\\":[6,6,10,1,3],\\"describe\\":[4,0,4,2,10,10],\\"iq\\":[3,10,6,3,1,0,0],\\"hair-color\\":[1,10,3,6,1,2],\\"breast-size\\":[4,10,4,0,0],\\"lactation\\":[10,4,1,0],\\"relax\\":[0,0,10,0,4],\\"selfie\\":[10,2,0],\\"brain-drain\\":[0,0,0,6,1,3]}},{\\"id\\":\\"know-it-all\\",\\"name\\":\\"Know-It-All\\",\\"description\\":\\"A bimbo? You?! No way, you\'re like way too int... intli... uuh... smartsy, yeah. You know that you\'re always right, and you won\'t let anyone tell you otherwise. <br><br> You may have been pretty smart once, but whether you were hit by a too sudden and powerful brain drain, or you were always both this dumb and intolerable, you don\'t have many IQ points left, but you sure think you do. You\'ll often interrupt to correct someone, only to say something unfathomably stupid, or forget what you were saying mid-sentence. <br><br> But don\'t worry, while people can find you rude at first, it\'s quick to realize that you just don\'t know better. You\'ll get a little pat on the head, and while that might infuriate you, your memory is so shot you will soon have forgotten about it. And if not, a little quickie or helping you turn on your vibrator will have you happily drooling and squirming on the floor in no time.\\",\\"prior\\":1,\\"answerData\\":{\\"color\\":[6,3,6,8,6,3,4,4],\\"drive\\":[2,5,3,1],\\"being-told\\":[0,0,10,6],\\"animal\\":[10,7,2,2],\\"partner\\":[5,3,1,6],\\"breast-expansion\\":[10,2,2,5],\\"shoes\\":[1,4,10,2,1],\\"describe\\":[2,10,4,0,0,2],\\"iq\\":[0,0,0,1,3,6,10],\\"hair-color\\":[0,5,6,10,0,6],\\"breast-size\\":[4,8,2,0,0],\\"lactation\\":[10,2,0,0],\\"relax\\":[8,6,3,10,4],\\"selfie\\":[1,4,4],\\"brain-drain\\":[6,0,0,0,1,6]}}]");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIyNy5qcyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///27\n')},function(module){eval('module.exports = JSON.parse("[{\\"id\\":\\"color\\",\\"text\\":\\"What is your favorite color?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"pink\\"},{\\"id\\":\\"1\\",\\"text\\":\\"purple\\"},{\\"id\\":\\"2\\",\\"text\\":\\"red\\"},{\\"id\\":\\"3\\",\\"text\\":\\"green\\"},{\\"id\\":\\"4\\",\\"text\\":\\"blue\\"},{\\"id\\":\\"5\\",\\"text\\":\\"gold\\"},{\\"id\\":\\"6\\",\\"text\\":\\"black\\"},{\\"id\\":\\"7\\",\\"text\\":\\"white\\"}]},{\\"id\\":\\"drive\\",\\"text\\":\\"Do you have a drivers license?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"No, I can\'t drive.\\",\\"description\\":\\"There are so many things to push and rotate and stuff... Someone else can just drive me!\\"},{\\"id\\":\\"1\\",\\"text\\":\\"Yes, but I don\'t drive.\\",\\"description\\":\\"I prefer to be driven, and I can\'t really remember what all the road pictures are anyways.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"Yes, I drive my car.\\",\\"description\\":\\"I might have needed to sleep with my instructor, but he was pretty handsome.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"Yes. Motorcycles!\\",\\"description\\":\\"I look great in leather. And you should see how my hair flows when I take off my helmet!\\"}]},{\\"id\\":\\"being-told\\",\\"text\\":\\"When being told to do something, what do you do?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"Do it immediately\\",\\"description\\":\\"You love being told what to do. The less you need to think, the hornier you get.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"Say yes and forget\\",\\"description\\":\\"Maybe you just don\'t care, or maybe you can\'t focus on anything but sex for more than a few seconds.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"Complain\\",\\"description\\":\\"Why do you have to do it? Can\'t someone else? If you have to do it, at least you want a reward...\\"},{\\"id\\":\\"3\\",\\"text\\":\\"Refuse\\",\\"description\\":\\"No one gets to tell you what to do! Who do they think they are? Do they know who you\'re sleeping with?\\"}]},{\\"id\\":\\"animal\\",\\"text\\":\\"What is your spirit animal?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"bunny\\",\\"description\\":\\"Sweet and innocent. You feel anxious when away from home and like nothing better than cuddling up next to your partner.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"cat\\",\\"description\\":\\"You know you\'re gorgeous. You can be cute when you want, too, but playing hard to get can be so much fun.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"dog\\",\\"description\\":\\"Happy and always up for anything. Whenever someone you like is nearby, you are if anything too eager to please.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"cow\\",\\"description\\":\\"Calm and relaxing, you just want to lay back, eat, sleep and have a nice time. When you do get excited, it\'s all the more noticeable.\\"}]},{\\"id\\":\\"partner\\",\\"text\\":\\"What do you look for in a partner?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"a big cock\\",\\"description\\":\\"You can\'t keep your eyes off guys crotches. Sucking, licking, being bent over a counter and fucked \'til you are unconscious... You love it all, and the bigger the cock, the better it is!\\"},{\\"id\\":\\"1\\",\\"text\\":\\"a big heart\\",\\"description\\":\\"You like sex, sure, but you want the whole experience. Flowers, being held in strong arms, cuddles and sweet whispers in the night... You want him to lovingly gaze in your eyes as you cum your brains out.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"a big wallet\\",\\"description\\":\\"Money does buy happiness. You want expensive clothes and jewelry, live on a super yacht and go to parties day and night. If he lets you do that, you\'ll love him.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"big muscles\\",\\"description\\":\\"A tough strong guy with arms as wide as your waist, with pecs and abs to match. You get wet just thinking about it.\\"}]},{\\"id\\":\\"breast-expansion\\",\\"text\\":\\"Which would be your preferred way of increasing your breast size?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"I\'m fine.\\",\\"description\\":\\"I prefer small breasts or would be fine with them.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"Surgery and silicone.\\",\\"description\\":\\"Plastic and fake please!\\"},{\\"id\\":\\"2\\",\\"text\\":\\"Air inflation.\\",\\"description\\":\\"Round and light is my preference.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"Hormones.\\",\\"description\\":\\"I want to be soft and milky.\\"}]},{\\"id\\":\\"shoes\\",\\"text\\":\\"Which kind of footwear do you prefer?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"barefoot\\",\\"description\\":\\"More of a summer meadows kind of girl, or maybe you are mostly just on your back anyways.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"sandals\\",\\"description\\":\\"With or without heels, you are rarely far from a beach.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"low or medium heels\\",\\"description\\":\\"Appropriate and functional, but a bit boring. Unless you know how to pull it off.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"fuck me pumps\\",\\"description\\":\\"Pumps or other high heels, you know your best look is ass up, tits out.\\"},{\\"id\\":\\"4\\",\\"text\\":\\"heeled boots\\",\\"description\\":\\"Ankle, knee or thigh-high, boots bring just that little bit of extra oomph.\\"}]},{\\"id\\":\\"describe\\",\\"text\\":\\"Which word best describes you?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"Kind\\",\\"description\\":\\"You always try to help and be nice to everyone.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"Clever\\",\\"description\\":\\"Maybe you\'re the smartest in your friends group, or maybe you just always know how to get what you want.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"Quiet\\",\\"description\\":\\"You don\'t say much.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"Funny\\",\\"description\\":\\"A good sense of humour, or just silly, you usually make people laugh.\\"},{\\"id\\":\\"4\\",\\"text\\":\\"Popular\\",\\"description\\":\\"Always the center of attention, people always flock around you.\\"},{\\"id\\":\\"5\\",\\"text\\":\\"Cocky\\",\\"description\\":\\"You know you are up to any challenge. With skills and looks like yours, nothing can stop you!\\"}]},{\\"id\\":\\"iq\\",\\"text\\":\\"What do you believe your IQ to be?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"below 50 IQ\\",\\"description\\":\\"Drooling, staring blankly and rutting mindlessly are your top skills. You won\'t understand this quiz, but you\'ll probably have a good time anyways.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"50 - 70 IQ\\",\\"description\\":\\"Maybe someone is helping you take this quiz. It\'s doubtful you could read or concentrate long enough on your own. It\'s lucky you\'re so cute.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"70 - 80 IQ\\",\\"description\\":\\"Numbers makes your brain hurt, but you can read easy words and like brightly colored magazines. Fairly average for a bimbo, but less smarts means a happier you!\\"},{\\"id\\":\\"3\\",\\"text\\":\\"80 - 90 IQ\\",\\"description\\":\\"Not bad for a bimbo! You know how to read and count, as long as its about something interesting. Like sex, or how much those shoes cost.\\"},{\\"id\\":\\"4\\",\\"text\\":\\"90 - 100 IQ\\",\\"description\\":\\"Below average to average. You are pretty basic, but for a bimbo, you are almost a genius.\\"},{\\"id\\":\\"5\\",\\"text\\":\\"100 - 120 IQ\\",\\"description\\":\\"You think that you are above average intelligence? Okay then. If that\'s true, you must be pretty slutty or submissive to think you are a bimbo!\\"},{\\"id\\":\\"6\\",\\"text\\":\\"above 120 IQ\\",\\"description\\":\\"Wow, you gotta be pretty smart, huh? With a brain like that you could be a doctor or a scientist. But we know why you are here. Spending time on your knees really is more fun, right?\\"}]},{\\"id\\":\\"hair-color\\",\\"text\\":\\"Which is your preferred hair color?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"platinum blonde\\",\\"description\\":\\"The bimbo classic. You won\'t have to speak to let them know that you\'re dumb, even if you don\'t have massive tits.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"blonde\\",\\"description\\":\\"Happy and a lot of fun, blonde is a great color for the aspiring bimbo or girl next door alike.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"brunette\\",\\"description\\":\\"Calm and loyal, you can easily pass as someone much smarter, especially with some glasses on.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"redhead\\",\\"description\\":\\"Natural or not, red hair gives you an air of the wild. Even when it really is you who know nothing.\\"},{\\"id\\":\\"4\\",\\"text\\":\\"pink\\",\\"description\\":\\"Cute, rocky or total bimbo. Pink really is what you make of it!\\"},{\\"id\\":\\"5\\",\\"text\\":\\"black\\",\\"description\\":\\"Patient and mysterious, most people think there is a bit more to you. Looking as vapid as the blondes really takes some trying.\\"}]},{\\"id\\":\\"breast-size\\",\\"text\\":\\"What is your target breast size?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"Small, up to B-cup.\\",\\"description\\":\\"Cute and sporty, most bimbos like them bigger, but that just makes you stand out more.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"Large, C to DD-cup.\\",\\"description\\":\\"You like the natural look, even if you have to fill them up to get there. Cleavage, titfucks, but not too much in the way. An all-rounder.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"Huge, like volleyballs.\\",\\"description\\":\\"Spherical or a bit more natural, when people look at you they see the tits first, you later. And that is how you like it.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"Massive, like beachballs.\\",\\"description\\":\\"You are your boobs. No one is ever taking you seriously again. On the plus side you have some comfy pillows when being bent over, which is probably more useful to you anyway.\\"},{\\"id\\":\\"4\\",\\"text\\":\\"Immobilizingly large.\\",\\"description\\":\\"Without help, you won\'t be able to move. Not so bad if guys are lining up behind you...\\"}]},{\\"id\\":\\"lactation\\",\\"text\\":\\"Hormones can be used to induce lactation. What is your preference?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"No lactation\\",\\"description\\":\\"You don\'t care for it.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"A little bit can be fun\\",\\"description\\":\\"Not enough to be a hassle, but enough that your nipples get wet any time you feel horny.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"Pressure sensitive\\",\\"description\\":\\"Squeeze and you can produce enough to make it look like you are in a wet t-shirt competition. Being full means the lightest touch will do it, but you never get too full.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"Milk me\\",\\"description\\":\\"You produce so much milk that you need regular milking, anywhere from daily to being hooked up to a pump at all times.\\"}]},{\\"id\\":\\"relax\\",\\"text\\":\\"What is your preferred way to calm down and relax?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"Take a warm bath\\",\\"description\\":\\"Pour yourself a nice warm bubbly bath, strip naked, and relax.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"Eat a good meal\\",\\"description\\":\\"At a good restaurant, at home, or maybe it is the cooking itself that really makes you feel relaxed and homely.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"Get a good workout in\\",\\"description\\":\\"Nothing is as good as a hard session at the gym or going for a run along the beach. You don\'t mind a reason to show yourself off, either.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"Snuggle up under some blankets\\",\\"description\\":\\"Warm and cosy, you relax best with a good book, watching a movie or cuddling with your partner.\\"},{\\"id\\":\\"4\\",\\"text\\":\\"Sex!\\",\\"description\\":\\"The other options don\'t exclude sex, you just only care about getting fucked \'til kingdom come.\\"}]},{\\"id\\":\\"selfie\\",\\"text\\":\\"Do you take selfies?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"Of course!\\",\\"description\\":\\"You love taking selfies! On the beach, at the gym, at home in a snug pyjamas... you love it, and your followers love you.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"Only for private use\\",\\"description\\":\\"Sure you take selfies every now and again, but only to show your friend your new cute dress, or to send a flirty text to that handsome guy you met.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"Not really\\",\\"description\\":\\"One picture is a thousand words, but who\'d want to read that much anyways? When you share yourself, you want it to be up close and personal.\\"}]},{\\"id\\":\\"brain-drain\\",\\"text\\":\\"If you tried to resist a brain drain beam, which skill would you most want to save?\\",\\"answers\\":[{\\"id\\":\\"0\\",\\"text\\":\\"Math knowledge\\",\\"description\\":\\"If not saved, you could retain up to high school math anyways, but you could also lose all ability to ever comprehend numbers again.\\"},{\\"id\\":\\"1\\",\\"text\\":\\"Read and write skills\\",\\"description\\":\\"If not saved, you may still be able to read if you concentrate, or you may become completely illiterate.\\"},{\\"id\\":\\"2\\",\\"text\\":\\"Vocabulary\\",\\"description\\":\\"How dumb would you sound without your vocabulary? Anywhere from ditzy bimbo to only communicating with basic single words.\\"},{\\"id\\":\\"3\\",\\"text\\":\\"Fine motor skills\\",\\"description\\":\\"Do you care about using keyboards, your phone or anything really? Then choose this, or you\'ll be misclicking and dropping things in no time.\\"},{\\"id\\":\\"4\\",\\"text\\":\\"Memory\\",\\"description\\":\\"If not saved, you can probably retain some long-term memory, but you\'ll be lucky if you can finish a sentence before forgetting what you were saying.\\"},{\\"id\\":\\"5\\",\\"text\\":\\"General knowledge\\",\\"description\\":\\"You probably know a fair few things. The planets, geography, why cars run, how doors work? Save it, or wave most of it good bye.\\"}]}]");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIyOC5qcyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///28\n')},function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_RESULT__;/*! keydrown - v1.2.7 - 2018-12-19 - http://jeremyckahn.github.com/keydrown */\n;(function (window) {\n\nvar util = (function () {\n\n  var util = {};\n\n  /**\n   * @param {Object} obj The Object to iterate through.\n   * @param {function(*, string)} iterator The function to call for each property.\n   */\n  util.forEach = function (obj, iterator) {\n    var prop;\n    for (prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        iterator(obj[prop], prop);\n      }\n    }\n  };\n  var forEach = util.forEach;\n\n\n  /**\n   * Create a transposed copy of an Object.\n   *\n   * @param {Object} obj\n   * @return {Object}\n   */\n  util.getTranspose = function (obj) {\n    var transpose = {};\n\n    forEach(obj, function (val, key) {\n      transpose[val] = key;\n    });\n\n    return transpose;\n  };\n\n\n  /**\n   * Implementation of Array#indexOf because IE<9 doesn't support it.\n   *\n   * @param {Array} arr\n   * @param {*} val\n   * @return {number} Index of the found element or -1 if not found.\n   */\n  util.indexOf = function (arr, val) {\n    if (arr.indexOf) {\n      return arr.indexOf(val);\n    }\n\n    var i, len = arr.length;\n    for (i = 0; i < len; i++) {\n      if (arr[i] === val) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n  var indexOf = util.indexOf;\n\n\n  /**\n   * Push a value onto an array if it is not present in the array already.  Otherwise, this is a no-op.\n   *\n   * @param {Array} arr\n   * @param {*} val\n   * @return {boolean} Whether or not the value was added to the array.\n   */\n  util.pushUnique = function (arr, val) {\n    if (indexOf(arr, val) === -1) {\n      arr.push(val);\n      return true;\n    }\n\n    return false;\n  };\n\n\n  /**\n   * Remove a value from an array.  Assumes there is only one instance of the\n   * value present in the array.\n   *\n   * @param {Array} arr\n   * @param {*} val\n   * @return {*} The value that was removed from arr.  Returns undefined if\n   * nothing was removed.\n   */\n  util.removeValue = function (arr, val) {\n    var index = indexOf(arr, val);\n\n    if (index !== -1) {\n      return arr.splice(index, 1)[0];\n    }\n  };\n\n\n  /**\n   * Cross-browser function for listening for and handling an event on the\n   * document element.\n   *\n   * @param {string} eventName\n   * @param {function} handler\n   */\n  util.documentOn = function (eventName, handler) {\n    if (window.addEventListener) {\n      window.addEventListener(eventName, handler, false);\n    } else if (document.attachEvent) {\n      document.attachEvent('on' + eventName, handler);\n    }\n  };\n\n\n  /**\n   * Shim for requestAnimationFrame.  See:\n   * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   */\n  util.requestAnimationFrame = (function () {\n    return window.requestAnimationFrame  ||\n      window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame    ||\n      function( callback ){\n        window.setTimeout(callback, 1000 / 60);\n      };\n  })();\n\n\n  /**\n   * An empty function.  NOOP!\n   */\n  util.noop = function () {};\n\n  return util;\n\n}());\n\n/**\n * Lookup table of keys to keyCodes.\n *\n * @type {Object.<number>}\n */\nvar KEY_MAP = {\n  'ZERO': 48,\n  'ONE': 49,\n  'TWO': 50,\n  'THREE': 51,\n  'FOUR': 52,\n  'FIVE': 53,\n  'SIX': 54,\n  'SEVEN': 55,\n  'EIGHT': 56,\n  'NINE': 57,\n  'A': 65,\n  'B': 66,\n  'C': 67,\n  'D': 68,\n  'E': 69,\n  'F': 70,\n  'G': 71,\n  'H': 72,\n  'I': 73,\n  'J': 74,\n  'K': 75,\n  'L': 76,\n  'M': 77,\n  'N': 78,\n  'O': 79,\n  'P': 80,\n  'Q': 81,\n  'R': 82,\n  'S': 83,\n  'T': 84,\n  'U': 85,\n  'V': 86,\n  'W': 87,\n  'X': 88,\n  'Y': 89,\n  'Z': 90,\n  'ENTER': 13,\n  'SHIFT': 16,\n  'ESC': 27,\n  'SPACE': 32,\n  'LEFT': 37,\n  'UP': 38,\n  'RIGHT': 39,\n  'DOWN': 40,\n  'BACKSPACE': 8,\n  'DELETE': 46,\n  'TAB': 9,\n  'TILDE': 192\n};\n\n\n/**\n * The transposed version of KEY_MAP.\n *\n * @type {Object.<string>}\n */\nvar TRANSPOSED_KEY_MAP = util.getTranspose(KEY_MAP);\n\n/*!\n * @type Array.<string>\n */\nvar keysDown = [];\n\nvar Key = (function () {\n\n  'use strict';\n\n  /**\n   * Represents a key on the keyboard.  You'll never actually call this method\n   * directly; Key Objects for every key that Keydrown supports are created for\n   * you when the library is initialized (as in, when the file is loaded).  You\n   * will, however, use the `prototype` methods below to bind functions to key\n   * states.\n   *\n   * @param {number} keyCode The keyCode of the key.\n   * @constructor\n   * @class kd.Key\n   */\n  function Key (keyCode) {\n    this.keyCode = keyCode;\n    this.cachedKeypressEvent = null;\n  }\n\n\n  /*!\n   * The function to be invoked on every tick that the key is held down for.\n   *\n   * @type {function}\n   */\n  Key.prototype._downHandler = util.noop;\n\n\n  /*!\n   * The function to be invoked when the key is released.\n   *\n   * @type {function}\n   */\n  Key.prototype._upHandler = util.noop;\n\n\n  /*!\n   * The function to be invoked when the key is pressed.\n   *\n   * @type {function}\n   */\n  Key.prototype._pressHandler = util.noop;\n\n\n  /*!\n   * Private helper function that binds or invokes a hander for `down`, `up',\n   * or `press` for a `Key`.\n   *\n   * @param {Key} key\n   * @param {string} handlerName\n   * @param {function=} opt_handler If omitted, the handler is invoked.\n   * @param {KeyboardEvent=} opt_evt If this function is being called by a\n   * keyboard event handler, this is the raw KeyboardEvent Object provided from\n   * the browser.\n   */\n  function bindOrFire (key, handlerName, opt_handler, opt_evt) {\n    if (opt_handler) {\n      key[handlerName] = opt_handler;\n    } else {\n      key[handlerName](opt_evt);\n    }\n  }\n\n\n  /**\n   * Returns whether the key is currently pressed or not.\n   *\n   * @method isDown\n   * @return {boolean} True if the key is down, otherwise false.\n   */\n  Key.prototype.isDown = function () {\n    return util.indexOf(keysDown, this.keyCode) !== -1;\n  };\n\n\n  /**\n   * Bind a function to be called when the key is held down.\n   *\n   * @method down\n   * @param {function=} opt_handler The function to be called when the key is\n   * held down.  If omitted, this function invokes whatever handler was\n   * previously bound.\n   */\n  Key.prototype.down = function (opt_handler) {\n    bindOrFire(this, '_downHandler', opt_handler, this.cachedKeypressEvent);\n  };\n\n\n  /**\n   * Bind a function to be called when the key is released.\n   *\n   * @method up\n   * @param {function=} opt_handler The function to be called when the key is\n   * released.  If omitted, this function invokes whatever handler was\n   * previously bound.\n   * @param {KeyboardEvent=} opt_evt If this function is being called by the\n   * keyup event handler, this is the raw KeyboardEvent Object provided from\n   * the browser.  This should generally not be provided by client code.\n   */\n  Key.prototype.up = function (opt_handler, opt_evt) {\n    bindOrFire(this, '_upHandler', opt_handler, opt_evt);\n  };\n\n\n  /**\n   * Bind a function to be called when the key is pressed.  This handler will\n   * not fire again until the key is released  it does not repeat.\n   *\n   * @method press\n   * @param {function=} opt_handler The function to be called once when the key\n   * is pressed.  If omitted, this function invokes whatever handler was\n   * previously bound.\n   * @param {KeyboardEvent=} opt_evt If this function is being called by the\n   * keydown event handler, this is the raw KeyboardEvent Object provided from\n   * the browser.  This should generally not be provided by client code.\n   */\n  Key.prototype.press = function (opt_handler, opt_evt) {\n    this.cachedKeypressEvent = opt_evt;\n    bindOrFire(this, '_pressHandler', opt_handler, opt_evt);\n  };\n\n\n  /**\n   * Remove the handler that was bound with `{{#crossLink\n   * \"kd.Key/down:method\"}}{{/crossLink}}`.\n   * @method unbindDown\n   */\n  Key.prototype.unbindDown = function () {\n    this._downHandler = util.noop;\n  };\n\n\n  /**\n   * Remove the handler that was bound with `{{#crossLink\n   * \"kd.Key/up:method\"}}{{/crossLink}}`.\n   * @method unbindUp\n   */\n  Key.prototype.unbindUp = function () {\n    this._upHandler = util.noop;\n  };\n\n\n  /**\n   * Remove the handler that was bound with `{{#crossLink\n   * \"kd.Key/press:method\"}}{{/crossLink}}`.\n   * @method unbindPress\n   */\n  Key.prototype.unbindPress = function () {\n    this._pressHandler = util.noop;\n  };\n\n  return Key;\n\n}());\n\nvar kd = (function (keysDown) {\n\n  'use strict';\n\n  /**\n   * @class kd\n   */\n  var kd = {};\n  kd.Key = Key;\n\n  var isRunning = false;\n\n  var now = Date.now\n     ? Date.now\n     : function () {return +new Date();};\n\n  var previousUpdateTime = now();\n\n  /**\n   * Evaluate which keys are held down and invoke their handler functions.\n   * @method tick\n   */\n  kd.tick = function () {\n    var i, len = keysDown.length;\n    for (i = 0; i < len; i++) {\n      var keyCode = keysDown[i];\n\n      var keyName = TRANSPOSED_KEY_MAP[keyCode];\n      if (keyName) {\n        kd[keyName].down();\n      }\n    }\n  };\n\n\n  /**\n   * A basic run loop.  `handler` gets called approximately 60 times a second.\n   *\n   * @param {Function(number, number)} handler The callback function to call on\n   * every tick.  You likely want to call [kd.tick](#method_tick) in this\n   * function.  This callback receives the time elapsed since the previous\n   * execution of the callback as the first parameter, and the current time\n   * stamp as the second.\n   * @method run\n   */\n  kd.run = function (handler) {\n    isRunning = true;\n    var currentTime = now();\n    var timeSinceLastUpdate = currentTime - previousUpdateTime;\n\n    util.requestAnimationFrame.call(window, function () {\n      if (!isRunning) {\n        return;\n      }\n\n      kd.run(handler);\n      handler(timeSinceLastUpdate, currentTime);\n    });\n\n    previousUpdateTime = currentTime;\n  };\n\n\n  /**\n   * Cancels the loop created by [run](#method_run).\n   * @method stop\n   */\n  kd.stop = function () {\n    isRunning = false;\n  };\n\n\n  // SETUP\n  //\n\n\n  // Initialize the KEY Objects\n  util.forEach(KEY_MAP, function (keyCode, keyName) {\n    kd[keyName] = new Key(keyCode);\n  });\n\n  util.documentOn('keydown', function (evt) {\n    var keyCode = evt.keyCode;\n    var keyName = TRANSPOSED_KEY_MAP[keyCode];\n    var isNew = util.pushUnique(keysDown, keyCode);\n    var key = kd[keyName];\n\n    if (key) {\n      var cachedKeypressEvent = key.cachedKeypressEvent || {};\n\n      // If a modifier key was held down the last time that this button was\n      // pressed, and it is pressed again without the modifier key being\n      // released, it is considered a newly-pressed key.  This is to work\n      // around the fact that the \"keyup\" event does not fire for the modified\n      // key until the modifier button is also released, which poses a problem\n      // for repeated, modified key presses such as hitting ctrl/meta+Z for\n      // rapid \"undo\" actions.\n      if (cachedKeypressEvent.ctrlKey ||\n          cachedKeypressEvent.shiftKey ||\n          cachedKeypressEvent.metaKey) {\n        isNew = true;\n      }\n\n      if (isNew) {\n        key.press(null, evt);\n      }\n    }\n  });\n\n  util.documentOn('keyup', function (evt) {\n    var keyCode = util.removeValue(keysDown, evt.keyCode);\n\n    var keyName = TRANSPOSED_KEY_MAP[keyCode];\n    if (keyName) {\n      kd[keyName].up(null, evt);\n    }\n  });\n\n  // Stop firing the \"down\" handlers if the user loses focus of the browser\n  // window.\n  util.documentOn('blur', function (evt) {\n    // Fire the \"up\" handler for each key that is currently held down\n    util.forEach(keysDown, function (keyCode) {\n      var mappedKey = TRANSPOSED_KEY_MAP[keyCode];\n      if (mappedKey) {\n        kd[mappedKey].up();\n      }\n    });\n\n    keysDown.length = 0;\n  });\n\n\n  return kd;\n\n // The variables passed into the closure here are defined in kd.key.js.\n}(keysDown));\n\nif ( true && typeof module.exports === \"object\") {\n  // Keydrown was loaded as a CommonJS module (by Browserify, for example).\n  module.exports = kd;\n} else if (true) {\n  // Keydrown was loaded as an AMD module.\n  !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n    return kd;\n  }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n} else {}\n\n} (window));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMva2V5ZHJvd24vZGlzdC9rZXlkcm93bi5qcz84ZmYwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLG9CQUFvQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxNQUFNO0FBQ25CLGFBQWEsRUFBRTtBQUNmLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxNQUFNO0FBQ25CLGFBQWEsRUFBRTtBQUNmLGNBQWMsUUFBUTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE1BQU07QUFDbkIsYUFBYSxFQUFFO0FBQ2YsY0FBYyxFQUFFO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7O0FBR0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsSUFBSTtBQUNqQixhQUFhLE9BQU87QUFDcEIsYUFBYSxVQUFVO0FBQ3ZCLGFBQWEsZUFBZTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBLCtDQUErQztBQUMvQyw2QkFBNkIsWUFBWTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBLCtDQUErQztBQUMvQywyQkFBMkIsWUFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBLCtDQUErQztBQUMvQyw4QkFBOEIsWUFBWTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9COztBQUVwQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlCQUF5QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7O0FBR0g7O0FBRUE7QUFDQSxDQUFDOztBQUVELElBQUksS0FBMEI7QUFDOUI7QUFDQTtBQUNBLENBQUMsVUFBVSxJQUEwQztBQUNyRDtBQUNBLEVBQUUsbUNBQU87QUFDVDtBQUNBLEdBQUc7QUFBQSxvR0FBQztBQUNKLENBQUMsTUFBTSxFQUVOOztBQUVELENBQUMiLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEga2V5ZHJvd24gLSB2MS4yLjcgLSAyMDE4LTEyLTE5IC0gaHR0cDovL2plcmVteWNrYWhuLmdpdGh1Yi5jb20va2V5ZHJvd24gKi9cbjsoZnVuY3Rpb24gKHdpbmRvdykge1xuXG52YXIgdXRpbCA9IChmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIHV0aWwgPSB7fTtcblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgT2JqZWN0IHRvIGl0ZXJhdGUgdGhyb3VnaC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigqLCBzdHJpbmcpfSBpdGVyYXRvciBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAgICovXG4gIHV0aWwuZm9yRWFjaCA9IGZ1bmN0aW9uIChvYmosIGl0ZXJhdG9yKSB7XG4gICAgdmFyIHByb3A7XG4gICAgZm9yIChwcm9wIGluIG9iaikge1xuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICBpdGVyYXRvcihvYmpbcHJvcF0sIHByb3ApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgdmFyIGZvckVhY2ggPSB1dGlsLmZvckVhY2g7XG5cblxuICAvKipcbiAgICogQ3JlYXRlIGEgdHJhbnNwb3NlZCBjb3B5IG9mIGFuIE9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICB1dGlsLmdldFRyYW5zcG9zZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICB2YXIgdHJhbnNwb3NlID0ge307XG5cbiAgICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICB0cmFuc3Bvc2VbdmFsXSA9IGtleTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0cmFuc3Bvc2U7XG4gIH07XG5cblxuICAvKipcbiAgICogSW1wbGVtZW50YXRpb24gb2YgQXJyYXkjaW5kZXhPZiBiZWNhdXNlIElFPDkgZG9lc24ndCBzdXBwb3J0IGl0LlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAgICogQHBhcmFtIHsqfSB2YWxcbiAgICogQHJldHVybiB7bnVtYmVyfSBJbmRleCBvZiB0aGUgZm91bmQgZWxlbWVudCBvciAtMSBpZiBub3QgZm91bmQuXG4gICAqL1xuICB1dGlsLmluZGV4T2YgPSBmdW5jdGlvbiAoYXJyLCB2YWwpIHtcbiAgICBpZiAoYXJyLmluZGV4T2YpIHtcbiAgICAgIHJldHVybiBhcnIuaW5kZXhPZih2YWwpO1xuICAgIH1cblxuICAgIHZhciBpLCBsZW4gPSBhcnIubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGFycltpXSA9PT0gdmFsKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAtMTtcbiAgfTtcbiAgdmFyIGluZGV4T2YgPSB1dGlsLmluZGV4T2Y7XG5cblxuICAvKipcbiAgICogUHVzaCBhIHZhbHVlIG9udG8gYW4gYXJyYXkgaWYgaXQgaXMgbm90IHByZXNlbnQgaW4gdGhlIGFycmF5IGFscmVhZHkuICBPdGhlcndpc2UsIHRoaXMgaXMgYSBuby1vcC5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSB2YWx1ZSB3YXMgYWRkZWQgdG8gdGhlIGFycmF5LlxuICAgKi9cbiAgdXRpbC5wdXNoVW5pcXVlID0gZnVuY3Rpb24gKGFyciwgdmFsKSB7XG4gICAgaWYgKGluZGV4T2YoYXJyLCB2YWwpID09PSAtMSkge1xuICAgICAgYXJyLnB1c2godmFsKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSB2YWx1ZSBmcm9tIGFuIGFycmF5LiAgQXNzdW1lcyB0aGVyZSBpcyBvbmx5IG9uZSBpbnN0YW5jZSBvZiB0aGVcbiAgICogdmFsdWUgcHJlc2VudCBpbiB0aGUgYXJyYXkuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKiBAcmV0dXJuIHsqfSBUaGUgdmFsdWUgdGhhdCB3YXMgcmVtb3ZlZCBmcm9tIGFyci4gIFJldHVybnMgdW5kZWZpbmVkIGlmXG4gICAqIG5vdGhpbmcgd2FzIHJlbW92ZWQuXG4gICAqL1xuICB1dGlsLnJlbW92ZVZhbHVlID0gZnVuY3Rpb24gKGFyciwgdmFsKSB7XG4gICAgdmFyIGluZGV4ID0gaW5kZXhPZihhcnIsIHZhbCk7XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICByZXR1cm4gYXJyLnNwbGljZShpbmRleCwgMSlbMF07XG4gICAgfVxuICB9O1xuXG5cbiAgLyoqXG4gICAqIENyb3NzLWJyb3dzZXIgZnVuY3Rpb24gZm9yIGxpc3RlbmluZyBmb3IgYW5kIGhhbmRsaW5nIGFuIGV2ZW50IG9uIHRoZVxuICAgKiBkb2N1bWVudCBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXJcbiAgICovXG4gIHV0aWwuZG9jdW1lbnRPbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHtcbiAgICAgIGRvY3VtZW50LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgIH1cbiAgfTtcblxuXG4gIC8qKlxuICAgKiBTaGltIGZvciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUuICBTZWU6XG4gICAqIGh0dHA6Ly9wYXVsaXJpc2guY29tLzIwMTEvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1hbmltYXRpbmcvXG4gICAqL1xuICB1dGlsLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIHx8XG4gICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgIHx8XG4gICAgICBmdW5jdGlvbiggY2FsbGJhY2sgKXtcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7XG4gICAgICB9O1xuICB9KSgpO1xuXG5cbiAgLyoqXG4gICAqIEFuIGVtcHR5IGZ1bmN0aW9uLiAgTk9PUCFcbiAgICovXG4gIHV0aWwubm9vcCA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gIHJldHVybiB1dGlsO1xuXG59KCkpO1xuXG4vKipcbiAqIExvb2t1cCB0YWJsZSBvZiBrZXlzIHRvIGtleUNvZGVzLlxuICpcbiAqIEB0eXBlIHtPYmplY3QuPG51bWJlcj59XG4gKi9cbnZhciBLRVlfTUFQID0ge1xuICAnWkVSTyc6IDQ4LFxuICAnT05FJzogNDksXG4gICdUV08nOiA1MCxcbiAgJ1RIUkVFJzogNTEsXG4gICdGT1VSJzogNTIsXG4gICdGSVZFJzogNTMsXG4gICdTSVgnOiA1NCxcbiAgJ1NFVkVOJzogNTUsXG4gICdFSUdIVCc6IDU2LFxuICAnTklORSc6IDU3LFxuICAnQSc6IDY1LFxuICAnQic6IDY2LFxuICAnQyc6IDY3LFxuICAnRCc6IDY4LFxuICAnRSc6IDY5LFxuICAnRic6IDcwLFxuICAnRyc6IDcxLFxuICAnSCc6IDcyLFxuICAnSSc6IDczLFxuICAnSic6IDc0LFxuICAnSyc6IDc1LFxuICAnTCc6IDc2LFxuICAnTSc6IDc3LFxuICAnTic6IDc4LFxuICAnTyc6IDc5LFxuICAnUCc6IDgwLFxuICAnUSc6IDgxLFxuICAnUic6IDgyLFxuICAnUyc6IDgzLFxuICAnVCc6IDg0LFxuICAnVSc6IDg1LFxuICAnVic6IDg2LFxuICAnVyc6IDg3LFxuICAnWCc6IDg4LFxuICAnWSc6IDg5LFxuICAnWic6IDkwLFxuICAnRU5URVInOiAxMyxcbiAgJ1NISUZUJzogMTYsXG4gICdFU0MnOiAyNyxcbiAgJ1NQQUNFJzogMzIsXG4gICdMRUZUJzogMzcsXG4gICdVUCc6IDM4LFxuICAnUklHSFQnOiAzOSxcbiAgJ0RPV04nOiA0MCxcbiAgJ0JBQ0tTUEFDRSc6IDgsXG4gICdERUxFVEUnOiA0NixcbiAgJ1RBQic6IDksXG4gICdUSUxERSc6IDE5MlxufTtcblxuXG4vKipcbiAqIFRoZSB0cmFuc3Bvc2VkIHZlcnNpb24gb2YgS0VZX01BUC5cbiAqXG4gKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmc+fVxuICovXG52YXIgVFJBTlNQT1NFRF9LRVlfTUFQID0gdXRpbC5nZXRUcmFuc3Bvc2UoS0VZX01BUCk7XG5cbi8qIVxuICogQHR5cGUgQXJyYXkuPHN0cmluZz5cbiAqL1xudmFyIGtleXNEb3duID0gW107XG5cbnZhciBLZXkgPSAoZnVuY3Rpb24gKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhIGtleSBvbiB0aGUga2V5Ym9hcmQuICBZb3UnbGwgbmV2ZXIgYWN0dWFsbHkgY2FsbCB0aGlzIG1ldGhvZFxuICAgKiBkaXJlY3RseTsgS2V5IE9iamVjdHMgZm9yIGV2ZXJ5IGtleSB0aGF0IEtleWRyb3duIHN1cHBvcnRzIGFyZSBjcmVhdGVkIGZvclxuICAgKiB5b3Ugd2hlbiB0aGUgbGlicmFyeSBpcyBpbml0aWFsaXplZCAoYXMgaW4sIHdoZW4gdGhlIGZpbGUgaXMgbG9hZGVkKS4gIFlvdVxuICAgKiB3aWxsLCBob3dldmVyLCB1c2UgdGhlIGBwcm90b3R5cGVgIG1ldGhvZHMgYmVsb3cgdG8gYmluZCBmdW5jdGlvbnMgdG8ga2V5XG4gICAqIHN0YXRlcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGtleUNvZGUgVGhlIGtleUNvZGUgb2YgdGhlIGtleS5cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBjbGFzcyBrZC5LZXlcbiAgICovXG4gIGZ1bmN0aW9uIEtleSAoa2V5Q29kZSkge1xuICAgIHRoaXMua2V5Q29kZSA9IGtleUNvZGU7XG4gICAgdGhpcy5jYWNoZWRLZXlwcmVzc0V2ZW50ID0gbnVsbDtcbiAgfVxuXG5cbiAgLyohXG4gICAqIFRoZSBmdW5jdGlvbiB0byBiZSBpbnZva2VkIG9uIGV2ZXJ5IHRpY2sgdGhhdCB0aGUga2V5IGlzIGhlbGQgZG93biBmb3IuXG4gICAqXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIEtleS5wcm90b3R5cGUuX2Rvd25IYW5kbGVyID0gdXRpbC5ub29wO1xuXG5cbiAgLyohXG4gICAqIFRoZSBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gdGhlIGtleSBpcyByZWxlYXNlZC5cbiAgICpcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgS2V5LnByb3RvdHlwZS5fdXBIYW5kbGVyID0gdXRpbC5ub29wO1xuXG5cbiAgLyohXG4gICAqIFRoZSBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gdGhlIGtleSBpcyBwcmVzc2VkLlxuICAgKlxuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBLZXkucHJvdG90eXBlLl9wcmVzc0hhbmRsZXIgPSB1dGlsLm5vb3A7XG5cblxuICAvKiFcbiAgICogUHJpdmF0ZSBoZWxwZXIgZnVuY3Rpb24gdGhhdCBiaW5kcyBvciBpbnZva2VzIGEgaGFuZGVyIGZvciBgZG93bmAsIGB1cCcsXG4gICAqIG9yIGBwcmVzc2AgZm9yIGEgYEtleWAuXG4gICAqXG4gICAqIEBwYXJhbSB7S2V5fSBrZXlcbiAgICogQHBhcmFtIHtzdHJpbmd9IGhhbmRsZXJOYW1lXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBvcHRfaGFuZGxlciBJZiBvbWl0dGVkLCB0aGUgaGFuZGxlciBpcyBpbnZva2VkLlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnQ9fSBvcHRfZXZ0IElmIHRoaXMgZnVuY3Rpb24gaXMgYmVpbmcgY2FsbGVkIGJ5IGFcbiAgICoga2V5Ym9hcmQgZXZlbnQgaGFuZGxlciwgdGhpcyBpcyB0aGUgcmF3IEtleWJvYXJkRXZlbnQgT2JqZWN0IHByb3ZpZGVkIGZyb21cbiAgICogdGhlIGJyb3dzZXIuXG4gICAqL1xuICBmdW5jdGlvbiBiaW5kT3JGaXJlIChrZXksIGhhbmRsZXJOYW1lLCBvcHRfaGFuZGxlciwgb3B0X2V2dCkge1xuICAgIGlmIChvcHRfaGFuZGxlcikge1xuICAgICAga2V5W2hhbmRsZXJOYW1lXSA9IG9wdF9oYW5kbGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXlbaGFuZGxlck5hbWVdKG9wdF9ldnQpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUga2V5IGlzIGN1cnJlbnRseSBwcmVzc2VkIG9yIG5vdC5cbiAgICpcbiAgICogQG1ldGhvZCBpc0Rvd25cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUga2V5IGlzIGRvd24sIG90aGVyd2lzZSBmYWxzZS5cbiAgICovXG4gIEtleS5wcm90b3R5cGUuaXNEb3duID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB1dGlsLmluZGV4T2Yoa2V5c0Rvd24sIHRoaXMua2V5Q29kZSkgIT09IC0xO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEJpbmQgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUga2V5IGlzIGhlbGQgZG93bi5cbiAgICpcbiAgICogQG1ldGhvZCBkb3duXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBvcHRfaGFuZGxlciBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGtleSBpc1xuICAgKiBoZWxkIGRvd24uICBJZiBvbWl0dGVkLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgd2hhdGV2ZXIgaGFuZGxlciB3YXNcbiAgICogcHJldmlvdXNseSBib3VuZC5cbiAgICovXG4gIEtleS5wcm90b3R5cGUuZG93biA9IGZ1bmN0aW9uIChvcHRfaGFuZGxlcikge1xuICAgIGJpbmRPckZpcmUodGhpcywgJ19kb3duSGFuZGxlcicsIG9wdF9oYW5kbGVyLCB0aGlzLmNhY2hlZEtleXByZXNzRXZlbnQpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEJpbmQgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUga2V5IGlzIHJlbGVhc2VkLlxuICAgKlxuICAgKiBAbWV0aG9kIHVwXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBvcHRfaGFuZGxlciBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGtleSBpc1xuICAgKiByZWxlYXNlZC4gIElmIG9taXR0ZWQsIHRoaXMgZnVuY3Rpb24gaW52b2tlcyB3aGF0ZXZlciBoYW5kbGVyIHdhc1xuICAgKiBwcmV2aW91c2x5IGJvdW5kLlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnQ9fSBvcHRfZXZ0IElmIHRoaXMgZnVuY3Rpb24gaXMgYmVpbmcgY2FsbGVkIGJ5IHRoZVxuICAgKiBrZXl1cCBldmVudCBoYW5kbGVyLCB0aGlzIGlzIHRoZSByYXcgS2V5Ym9hcmRFdmVudCBPYmplY3QgcHJvdmlkZWQgZnJvbVxuICAgKiB0aGUgYnJvd3Nlci4gIFRoaXMgc2hvdWxkIGdlbmVyYWxseSBub3QgYmUgcHJvdmlkZWQgYnkgY2xpZW50IGNvZGUuXG4gICAqL1xuICBLZXkucHJvdG90eXBlLnVwID0gZnVuY3Rpb24gKG9wdF9oYW5kbGVyLCBvcHRfZXZ0KSB7XG4gICAgYmluZE9yRmlyZSh0aGlzLCAnX3VwSGFuZGxlcicsIG9wdF9oYW5kbGVyLCBvcHRfZXZ0KTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBCaW5kIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGtleSBpcyBwcmVzc2VkLiAgVGhpcyBoYW5kbGVyIHdpbGxcbiAgICogbm90IGZpcmUgYWdhaW4gdW50aWwgdGhlIGtleSBpcyByZWxlYXNlZCDigJQgaXQgZG9lcyBub3QgcmVwZWF0LlxuICAgKlxuICAgKiBAbWV0aG9kIHByZXNzXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb249fSBvcHRfaGFuZGxlciBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uY2Ugd2hlbiB0aGUga2V5XG4gICAqIGlzIHByZXNzZWQuICBJZiBvbWl0dGVkLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgd2hhdGV2ZXIgaGFuZGxlciB3YXNcbiAgICogcHJldmlvdXNseSBib3VuZC5cbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50PX0gb3B0X2V2dCBJZiB0aGlzIGZ1bmN0aW9uIGlzIGJlaW5nIGNhbGxlZCBieSB0aGVcbiAgICoga2V5ZG93biBldmVudCBoYW5kbGVyLCB0aGlzIGlzIHRoZSByYXcgS2V5Ym9hcmRFdmVudCBPYmplY3QgcHJvdmlkZWQgZnJvbVxuICAgKiB0aGUgYnJvd3Nlci4gIFRoaXMgc2hvdWxkIGdlbmVyYWxseSBub3QgYmUgcHJvdmlkZWQgYnkgY2xpZW50IGNvZGUuXG4gICAqL1xuICBLZXkucHJvdG90eXBlLnByZXNzID0gZnVuY3Rpb24gKG9wdF9oYW5kbGVyLCBvcHRfZXZ0KSB7XG4gICAgdGhpcy5jYWNoZWRLZXlwcmVzc0V2ZW50ID0gb3B0X2V2dDtcbiAgICBiaW5kT3JGaXJlKHRoaXMsICdfcHJlc3NIYW5kbGVyJywgb3B0X2hhbmRsZXIsIG9wdF9ldnQpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgaGFuZGxlciB0aGF0IHdhcyBib3VuZCB3aXRoIGB7eyNjcm9zc0xpbmtcbiAgICogXCJrZC5LZXkvZG93bjptZXRob2RcIn19e3svY3Jvc3NMaW5rfX1gLlxuICAgKiBAbWV0aG9kIHVuYmluZERvd25cbiAgICovXG4gIEtleS5wcm90b3R5cGUudW5iaW5kRG93biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9kb3duSGFuZGxlciA9IHV0aWwubm9vcDtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGhhbmRsZXIgdGhhdCB3YXMgYm91bmQgd2l0aCBge3sjY3Jvc3NMaW5rXG4gICAqIFwia2QuS2V5L3VwOm1ldGhvZFwifX17ey9jcm9zc0xpbmt9fWAuXG4gICAqIEBtZXRob2QgdW5iaW5kVXBcbiAgICovXG4gIEtleS5wcm90b3R5cGUudW5iaW5kVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fdXBIYW5kbGVyID0gdXRpbC5ub29wO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgaGFuZGxlciB0aGF0IHdhcyBib3VuZCB3aXRoIGB7eyNjcm9zc0xpbmtcbiAgICogXCJrZC5LZXkvcHJlc3M6bWV0aG9kXCJ9fXt7L2Nyb3NzTGlua319YC5cbiAgICogQG1ldGhvZCB1bmJpbmRQcmVzc1xuICAgKi9cbiAgS2V5LnByb3RvdHlwZS51bmJpbmRQcmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9wcmVzc0hhbmRsZXIgPSB1dGlsLm5vb3A7XG4gIH07XG5cbiAgcmV0dXJuIEtleTtcblxufSgpKTtcblxudmFyIGtkID0gKGZ1bmN0aW9uIChrZXlzRG93bikge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogQGNsYXNzIGtkXG4gICAqL1xuICB2YXIga2QgPSB7fTtcbiAga2QuS2V5ID0gS2V5O1xuXG4gIHZhciBpc1J1bm5pbmcgPSBmYWxzZTtcblxuICB2YXIgbm93ID0gRGF0ZS5ub3dcbiAgICAgPyBEYXRlLm5vd1xuICAgICA6IGZ1bmN0aW9uICgpIHtyZXR1cm4gK25ldyBEYXRlKCk7fTtcblxuICB2YXIgcHJldmlvdXNVcGRhdGVUaW1lID0gbm93KCk7XG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlIHdoaWNoIGtleXMgYXJlIGhlbGQgZG93biBhbmQgaW52b2tlIHRoZWlyIGhhbmRsZXIgZnVuY3Rpb25zLlxuICAgKiBAbWV0aG9kIHRpY2tcbiAgICovXG4gIGtkLnRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGksIGxlbiA9IGtleXNEb3duLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBrZXlDb2RlID0ga2V5c0Rvd25baV07XG5cbiAgICAgIHZhciBrZXlOYW1lID0gVFJBTlNQT1NFRF9LRVlfTUFQW2tleUNvZGVdO1xuICAgICAgaWYgKGtleU5hbWUpIHtcbiAgICAgICAga2Rba2V5TmFtZV0uZG93bigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuXG4gIC8qKlxuICAgKiBBIGJhc2ljIHJ1biBsb29wLiAgYGhhbmRsZXJgIGdldHMgY2FsbGVkIGFwcHJveGltYXRlbHkgNjAgdGltZXMgYSBzZWNvbmQuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb24obnVtYmVyLCBudW1iZXIpfSBoYW5kbGVyIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byBjYWxsIG9uXG4gICAqIGV2ZXJ5IHRpY2suICBZb3UgbGlrZWx5IHdhbnQgdG8gY2FsbCBba2QudGlja10oI21ldGhvZF90aWNrKSBpbiB0aGlzXG4gICAqIGZ1bmN0aW9uLiAgVGhpcyBjYWxsYmFjayByZWNlaXZlcyB0aGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZSBwcmV2aW91c1xuICAgKiBleGVjdXRpb24gb2YgdGhlIGNhbGxiYWNrIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIsIGFuZCB0aGUgY3VycmVudCB0aW1lXG4gICAqIHN0YW1wIGFzIHRoZSBzZWNvbmQuXG4gICAqIEBtZXRob2QgcnVuXG4gICAqL1xuICBrZC5ydW4gPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgIGlzUnVubmluZyA9IHRydWU7XG4gICAgdmFyIGN1cnJlbnRUaW1lID0gbm93KCk7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RVcGRhdGUgPSBjdXJyZW50VGltZSAtIHByZXZpb3VzVXBkYXRlVGltZTtcblxuICAgIHV0aWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmNhbGwod2luZG93LCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIWlzUnVubmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGtkLnJ1bihoYW5kbGVyKTtcbiAgICAgIGhhbmRsZXIodGltZVNpbmNlTGFzdFVwZGF0ZSwgY3VycmVudFRpbWUpO1xuICAgIH0pO1xuXG4gICAgcHJldmlvdXNVcGRhdGVUaW1lID0gY3VycmVudFRpbWU7XG4gIH07XG5cblxuICAvKipcbiAgICogQ2FuY2VscyB0aGUgbG9vcCBjcmVhdGVkIGJ5IFtydW5dKCNtZXRob2RfcnVuKS5cbiAgICogQG1ldGhvZCBzdG9wXG4gICAqL1xuICBrZC5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgIGlzUnVubmluZyA9IGZhbHNlO1xuICB9O1xuXG5cbiAgLy8gU0VUVVBcbiAgLy9cblxuXG4gIC8vIEluaXRpYWxpemUgdGhlIEtFWSBPYmplY3RzXG4gIHV0aWwuZm9yRWFjaChLRVlfTUFQLCBmdW5jdGlvbiAoa2V5Q29kZSwga2V5TmFtZSkge1xuICAgIGtkW2tleU5hbWVdID0gbmV3IEtleShrZXlDb2RlKTtcbiAgfSk7XG5cbiAgdXRpbC5kb2N1bWVudE9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIHZhciBrZXlDb2RlID0gZXZ0LmtleUNvZGU7XG4gICAgdmFyIGtleU5hbWUgPSBUUkFOU1BPU0VEX0tFWV9NQVBba2V5Q29kZV07XG4gICAgdmFyIGlzTmV3ID0gdXRpbC5wdXNoVW5pcXVlKGtleXNEb3duLCBrZXlDb2RlKTtcbiAgICB2YXIga2V5ID0ga2Rba2V5TmFtZV07XG5cbiAgICBpZiAoa2V5KSB7XG4gICAgICB2YXIgY2FjaGVkS2V5cHJlc3NFdmVudCA9IGtleS5jYWNoZWRLZXlwcmVzc0V2ZW50IHx8IHt9O1xuXG4gICAgICAvLyBJZiBhIG1vZGlmaWVyIGtleSB3YXMgaGVsZCBkb3duIHRoZSBsYXN0IHRpbWUgdGhhdCB0aGlzIGJ1dHRvbiB3YXNcbiAgICAgIC8vIHByZXNzZWQsIGFuZCBpdCBpcyBwcmVzc2VkIGFnYWluIHdpdGhvdXQgdGhlIG1vZGlmaWVyIGtleSBiZWluZ1xuICAgICAgLy8gcmVsZWFzZWQsIGl0IGlzIGNvbnNpZGVyZWQgYSBuZXdseS1wcmVzc2VkIGtleS4gIFRoaXMgaXMgdG8gd29ya1xuICAgICAgLy8gYXJvdW5kIHRoZSBmYWN0IHRoYXQgdGhlIFwia2V5dXBcIiBldmVudCBkb2VzIG5vdCBmaXJlIGZvciB0aGUgbW9kaWZpZWRcbiAgICAgIC8vIGtleSB1bnRpbCB0aGUgbW9kaWZpZXIgYnV0dG9uIGlzIGFsc28gcmVsZWFzZWQsIHdoaWNoIHBvc2VzIGEgcHJvYmxlbVxuICAgICAgLy8gZm9yIHJlcGVhdGVkLCBtb2RpZmllZCBrZXkgcHJlc3NlcyBzdWNoIGFzIGhpdHRpbmcgY3RybC9tZXRhK1ogZm9yXG4gICAgICAvLyByYXBpZCBcInVuZG9cIiBhY3Rpb25zLlxuICAgICAgaWYgKGNhY2hlZEtleXByZXNzRXZlbnQuY3RybEtleSB8fFxuICAgICAgICAgIGNhY2hlZEtleXByZXNzRXZlbnQuc2hpZnRLZXkgfHxcbiAgICAgICAgICBjYWNoZWRLZXlwcmVzc0V2ZW50Lm1ldGFLZXkpIHtcbiAgICAgICAgaXNOZXcgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAga2V5LnByZXNzKG51bGwsIGV2dCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB1dGlsLmRvY3VtZW50T24oJ2tleXVwJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIHZhciBrZXlDb2RlID0gdXRpbC5yZW1vdmVWYWx1ZShrZXlzRG93biwgZXZ0LmtleUNvZGUpO1xuXG4gICAgdmFyIGtleU5hbWUgPSBUUkFOU1BPU0VEX0tFWV9NQVBba2V5Q29kZV07XG4gICAgaWYgKGtleU5hbWUpIHtcbiAgICAgIGtkW2tleU5hbWVdLnVwKG51bGwsIGV2dCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBTdG9wIGZpcmluZyB0aGUgXCJkb3duXCIgaGFuZGxlcnMgaWYgdGhlIHVzZXIgbG9zZXMgZm9jdXMgb2YgdGhlIGJyb3dzZXJcbiAgLy8gd2luZG93LlxuICB1dGlsLmRvY3VtZW50T24oJ2JsdXInLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgLy8gRmlyZSB0aGUgXCJ1cFwiIGhhbmRsZXIgZm9yIGVhY2gga2V5IHRoYXQgaXMgY3VycmVudGx5IGhlbGQgZG93blxuICAgIHV0aWwuZm9yRWFjaChrZXlzRG93biwgZnVuY3Rpb24gKGtleUNvZGUpIHtcbiAgICAgIHZhciBtYXBwZWRLZXkgPSBUUkFOU1BPU0VEX0tFWV9NQVBba2V5Q29kZV07XG4gICAgICBpZiAobWFwcGVkS2V5KSB7XG4gICAgICAgIGtkW21hcHBlZEtleV0udXAoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGtleXNEb3duLmxlbmd0aCA9IDA7XG4gIH0pO1xuXG5cbiAgcmV0dXJuIGtkO1xuXG4gLy8gVGhlIHZhcmlhYmxlcyBwYXNzZWQgaW50byB0aGUgY2xvc3VyZSBoZXJlIGFyZSBkZWZpbmVkIGluIGtkLmtleS5qcy5cbn0oa2V5c0Rvd24pKTtcblxuaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gIC8vIEtleWRyb3duIHdhcyBsb2FkZWQgYXMgYSBDb21tb25KUyBtb2R1bGUgKGJ5IEJyb3dzZXJpZnksIGZvciBleGFtcGxlKS5cbiAgbW9kdWxlLmV4cG9ydHMgPSBrZDtcbn0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgLy8gS2V5ZHJvd24gd2FzIGxvYWRlZCBhcyBhbiBBTUQgbW9kdWxlLlxuICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBrZDtcbiAgfSk7XG59IGVsc2Uge1xuICB3aW5kb3cua2QgPSBrZDtcbn1cblxufSAod2luZG93KSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///29\n")}]);