{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/screens/StartMenu.vue?d5b2","webpack:///./src/components/screens/DialogueScreen.vue?9d0a","webpack:///./src/components/ChatView.vue?022c","webpack:///./src/components/screens/CollectionScreen.vue?81a4","webpack:///./src/assets/patreon-banner-no-text.webp","webpack:///./src/components/screens/HandView.vue?a14c","webpack:///./src/components/DialogueStatusCard.vue?0f5a","webpack:///./src/assets/background.webp","webpack:///./src/components/TextButton.vue?1ffe","webpack:///./src/components/screens/PatchNotesScreen.vue?5445","webpack:///./src/components/CardHandWindow.vue?49ab","webpack:///./src/components/DialogueCard.vue?678c","webpack:///./src/components/CollectionWindow.vue?1ce3","webpack:///./src/assets/randomPortrait.webp","webpack:///./src/components/ChatView.vue?166b","webpack:///./src/components/BlushList.vue?a85b","webpack:///./src/components/FilterWindow.vue?2ddb","webpack:///./src/components/TextButton.vue?74b8","webpack:///./src/components/BlushWindow.vue?7358","webpack:///./src/components/PatreonButton.vue?8e94","webpack:///./src/components/PlayingCard.vue?5538","webpack:///./src/components/Credit.vue?0b56","webpack:///./src/assets/black-felt.png","webpack:///./src/components/screens/CreditsScreen.vue?630c","webpack:///./src/components/PatreonButton2.vue?974d","webpack:///./src/assets/patreon-banner.webp","webpack:///./src/components/screens/SettingsScreen.vue?5d2b","webpack:///./src/App.vue","webpack:///./src/components/screens/GameScreen.vue","webpack:///./src/components/TextButton.vue","webpack:///./src/components/TextButton.vue?72a9","webpack:///./src/components/TextButton.vue?a9fe","webpack:///./src/components/PlayingCard.vue","webpack:///./src/components/ValueMeter.vue","webpack:///./src/util.ts","webpack:///./src/effects/ValueMod.ts","webpack:///./src/effects/ValueRange.ts","webpack:///./src/components/ValueMeter.vue?a5c4","webpack:///./src/components/ValueMeter.vue?d750","webpack:///./src/components/PlayingCard.vue?3f51","webpack:///./src/components/PlayingCard.vue?bf32","webpack:///./src/store/globalState.ts","webpack:///./src/cards/Family.ts","webpack:///./src/cards/DrawPreference.ts","webpack:///./src/cards/Deck.ts","webpack:///./src/cards/Card.ts","webpack:///./src/components/DiceView.vue","webpack:///./src/components/DiceView.vue?a465","webpack:///./src/components/DiceView.vue?79a7","webpack:///./src/components/DialogueStatusCard.vue","webpack:///./src/components/ChatView.vue","webpack:///./src/components/BlushList.vue","webpack:///./src/components/BlushList.vue?ffbc","webpack:///./src/components/BlushList.vue?7c7b","webpack:///./src/components/ChatView.vue?875b","webpack:///./src/components/ChatView.vue?3f73","webpack:///./src/components/DialogueStatusCard.vue?6cea","webpack:///./src/components/DialogueStatusCard.vue?1858","webpack:///./src/components/CardHandWindow.vue","webpack:///./src/components/CardHandWindow.vue?2020","webpack:///./src/components/CardHandWindow.vue?2eb2","webpack:///./src/components/DialogueCard.vue","webpack:///./src/components/DialogueCard.vue?731d","webpack:///./src/components/DialogueCard.vue?ab69","webpack:///./src/components/screens/GameScreen.vue?77c3","webpack:///./src/components/screens/GameScreen.vue?e8ae","webpack:///./src/Dice.ts","webpack:///./src/GameButton.ts","webpack:///./src/stages/GameStage.ts","webpack:///./src/stages/TextStage.ts","webpack:///./src/Player.ts","webpack:///./src/GameMode.ts","webpack:///./src/stages/IntensityStage.ts","webpack:///./src/stages/HighlightStage.ts","webpack:///./src/stages/EndStage.ts","webpack:///./src/ChatMessage.ts","webpack:///./src/DialogueNode.ts","webpack:///./src/DialogueTree.ts","webpack:///./src/stages/TransformStage.ts","webpack:///./src/stages/BonusStage.ts","webpack:///./src/stages/PickStage.ts","webpack:///./src/stages/DrawStage.ts","webpack:///./src/stages/DialogueStage.ts","webpack:///./src/StoryMode.ts","webpack:///./src/Game.ts","webpack:///./src/Cheat.ts","webpack:///./src/Requirement.ts","webpack:///./src/Ending.ts","webpack:///./src/Endings.ts","webpack:///./src/Cheatmode.ts","webpack:///./src/Save.ts","webpack:///./src/SaveSystem.ts","webpack:///./src/FilterSetting.ts","webpack:///./src/FilterSettings.ts","webpack:///./src/Menu.ts","webpack:///./src/components/screens/StartMenu.vue","webpack:///./src/components/PatreonButton.vue","webpack:///./src/components/PatreonButton.vue?a3ae","webpack:///./src/components/PatreonButton.vue?a993","webpack:///./src/components/RelatedThumb.vue","webpack:///./src/components/RelatedThumb.vue?b719","webpack:///./src/components/RelatedThumb.vue?4a01","webpack:///./src/components/PatreonButton2.vue","webpack:///./src/components/PatreonButton2.vue?9266","webpack:///./src/components/PatreonButton2.vue?3464","webpack:///./src/components/screens/PatchNotesScreen.vue","webpack:///./src/components/BlushWindow.vue","webpack:///./src/components/BlushWindow.vue?b73c","webpack:///./src/components/BlushWindow.vue?d4c1","webpack:///./src/components/screens/PatchNotesScreen.vue?1303","webpack:///./src/components/screens/PatchNotesScreen.vue?58c0","webpack:///./src/components/screens/StartMenu.vue?be96","webpack:///./src/components/screens/StartMenu.vue?6c00","webpack:///./src/components/screens/DialogueScreen.vue","webpack:///./src/components/screens/DialogueScreen.vue?8085","webpack:///./src/components/screens/DialogueScreen.vue?f6ae","webpack:///./src/components/screens/HandView.vue","webpack:///./src/components/CollectionWindow.vue","webpack:///./src/components/CollectionWindow.vue?a72c","webpack:///./src/components/CollectionWindow.vue?8fa9","webpack:///./src/components/screens/HandView.vue?8fbb","webpack:///./src/components/screens/HandView.vue?ee30","webpack:///./src/components/screens/CreditsScreen.vue","webpack:///./src/components/Credit.vue","webpack:///./src/components/Credit.vue?24c8","webpack:///./src/components/Credit.vue?f11c","webpack:///./src/components/screens/CreditsScreen.vue?be9f","webpack:///./src/components/screens/CreditsScreen.vue?2fe7","webpack:///./src/components/screens/CollectionScreen.vue","webpack:///./src/components/screens/CollectionScreen.vue?d3f5","webpack:///./src/components/screens/CollectionScreen.vue?d24e","webpack:///./src/components/screens/SettingsScreen.vue","webpack:///./src/components/FilterWindow.vue","webpack:///./src/components/FilterWindow.vue?e80e","webpack:///./src/components/FilterWindow.vue?740b","webpack:///./src/components/screens/SettingsScreen.vue?b77e","webpack:///./src/components/screens/SettingsScreen.vue?a9f6","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?eabf","webpack:///./src/router/index.ts","webpack:///./src/main.ts","webpack:///./src/assets/devil-512px.webp","webpack:///./src/App.vue?7fde","webpack:///./src/components/ValueMeter.vue?ea85","webpack:///./src/components/RelatedThumb.vue?53d3","webpack:///./src/components/screens/GameScreen.vue?8a82","webpack:///./src/components/screens/PatchNotesScreen.vue?ef89","webpack:///./src/components/DiceView.vue?4a6c","webpack:///./src/App.vue?62cd"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","id","style","cssVars","globalState","loading","menu","activeComponent","view","deck","game","drawnCards","roundString","handDeck","showActivatedCards","state","bonusRolls","max","cardsPickedThisRound","cardsToPick","dice","die","allowDiceBuy","buyDice","onselectstart","props","icon","String","render","__scopeId","title","card","type","hasParent","highlight","levelString","subtitle","description","artist","baseUrl","wait","ms","Promise","resolve","reject","setTimeout","fetchHjson","path","a","transformResponse","response","info","parse","getInfo","isVideo","url","test","sample","array","Math","floor","random","timeToDays","time","currentDate","day","this","timeofday","hour","minute","toFixed","padStart","displayTime","uuid","replace","Number","crypto","getRandomValues","Uint8Array","toString","capitalize","charAt","toUpperCase","substr","toKebabCase","string","toLowerCase","pickFrom","list","fraction","index","clamp","round","min","showNumber","relative","undefined","ensure","possibilities","find","v","shuffle","temporaryValue","randomIndex","currentIndex","screenshot","savename","background","element","document","getElementById","childCount","childNodes","childWidth","childHeight","width","height","minHeight","renderWidth","html2canvas","backgroundColor","then","canvas","image","createElement","toDataURL","download","href","click","console","error","mod","abs","mods","ValueMod","activate","reverse","reverseActivate","text","capBaseValue","_baseValue","_min","_max","valueMods","minMods","maxMods","texts","MAX_SAFE_INTEGER","mulMods","oldValue","baseValue","reverseActivateAll","oldBase","sum","activateAll","values","ValueRange","barColor","container","methods","log","msg","computed","components","ValueMeter","TextButton","hue","thumb","fetchList","pathList","promises","all","objects","cardFamilyString","dialogueString","dialogue2String","endingsString","artistsString","patreonCredits","patchNotesString","load","familyList","dialogue","dialogue2","endingsList","artists","credits","patchList","JSON","stringify","map","patchId","families","patches","endings","md","entries","patch","cards","familiesLoaded","_familyMap","family","Family","tags","guaranteed","probability","Deck","referenceDeck","copy","useFilters","hasTag","filterBy","filters","addCard","isParent","subcards","subcard","filter","tag","strictness","lookup","getCardById","parentId","parent","hasCard","addSubCard","getLevel","preferred","wantedCards","getWantedCards","wantedIndex","findIndex","removeCard","pop","hasAnyTag","concat","drawIndex","cardId","sort","b","level","allLevels","sub","cardStates","cardMap","warn","_referenceDeck","parseCards","pack","cardsLoaded","_cardMap","familyState","levels","leveledCard","transformation","parseCard","scale","_family","_parent","_subcards","_level","hasSubCard","Card","maxLevel","familyMap","locked","roll","currentDialogue","stageId","buttons","button","fun","label","lines","emits","util","BlushList","ChatView","toggleScale","clickCard","scaledCard","PlayingCard","isLoaded","created","DiceView","DialogueCard","DialogueStatusCard","CardHandWindow","player","hand","addDeck","pickedCards","_value","_locked","isRolling","valueUsed","rollingDice","rollsLeft","currentRolls","x","notifyDiceRoll","isUsed","_label","args","_allowDiceBuy","endpoints","nextButton","nextStage","stage","_nextStage","setStage","onResume","onEnd","gotoNext","print","sendMessage","onStart","myText","createMessage","preferences","firstStage","done","pickStage","parentCard","diceCount","sortByLevel","diceSize","size","lockDice","intensities","pick","highlightedCards","fullTitle","pickCard","resumeStage","end","sortByFamily","ending","chooseEnding","createDialogueTree","start","line","breaks","startsWith","ChatMessage","split","join","messages","parseLine","endpoint","_msg","_options","option","nodes","options","select","firstNode","goto","node","activeNode","getOptionButtons","currentMessage","endpointId","endpointLabel","linearDialogueToNodes","lastNode","tree","DialogueTree","parseLines","subnodes","optionId","addOption","nextTransformation","nextCard","activateCard","createNextLinearSegment","isBonusRound","createLinear","leftToPick","withoutFamily","draw","addValue","drawStage","allowNext","availableExtraDraws","drawCards","updateButtons","addDraws","stage1","stageD","leave","endGame","parseDialogue","gameMode","rewardRolls","createNew","gredraw","groll","onDiceRoll","gameComponent","amount","allDiceReady","diceValues","useValue","diceReadyCount","diceRollingCount","diceAreLocked","Game","maxDice","onCardClick","ready","rollCount","rolling","cheatFunction","operator","intensity","Requirement","intensitySum","intensityScore","onlyTag","Array","isArray","availableFunctions","idsOrTags","idOrTag","Error","likelihood","requirements","Ending","parseRequirements","ors","orGroupFulfilled","e","message","orGroup","and","req","isFulfilled","reqs","or","ands","exp","trim","getOperator","left","getLeft","right","getRight","stripFun","arg","replaceAll","parseInt","functions","groupRequirements","group","funMatch","match","expMatch","splitArgs","operatorMatch","iterations","endingsMap","chosen","score","drawn","picked","sortedEndings","padEnd","assert","cheats","collection","save","removeAllCards","correctnessSimulation","startGame","selectEnding","activated","_menu","cheatmode","password","activateCheats","registerCheats","cheat","version","_state","saves","loadAllFromStorage","writeToLocalStorage","readFromLocalStorage","localStorage","setItem","savesString","getItem","_strictness","myfilter","f","_activeComponent","saveSystem","settings","createFromCardStates","Set","Menu","GAME_VERSION","showCollection","showSettings","$emit","location","link","credit","src","PatreonButton","patchNotes","date","noCross","Boolean","BlushWindow","PatreonButton2","RelatedThumb","PatchNotesScreen","tabs","tab","activeTab","activateTab","internalDeck","groupByParent","activeCard","refDeck","isInspectingCard","unique","sortByName","unpack","CollectionWindow","target","linkText","artCredits","Credit","screenshotName","setStrictness","FilterWindow","GameScreen","StartMenu","DialogueScreen","HandView","CreditsScreen","CollectionScreen","SettingsScreen","routes","component","router","history","use","mount"],"mappings":"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","file":"js/app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/play/ditzy-dice/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./StartMenu.vue?vue&type=style&index=0&id=2cab1d82&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DialogueScreen.vue?vue&type=style&index=0&id=5f4c2c54&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChatView.vue?vue&type=style&index=1&id=2a2554f0&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CollectionScreen.vue?vue&type=style&index=0&id=13d20cf9&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/patreon-banner-no-text.webp\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./HandView.vue?vue&type=style&index=0&id=4333d81a&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DialogueStatusCard.vue?vue&type=style&index=0&id=6f0fcc3e&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/background.webp\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TextButton.vue?vue&type=style&index=0&id=3be6926f&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PatchNotesScreen.vue?vue&type=style&index=0&id=3f9735b8&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CardHandWindow.vue?vue&type=style&index=0&id=10326fb9&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DialogueCard.vue?vue&type=style&index=0&id=35f1dcd9&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CollectionWindow.vue?vue&type=style&index=0&id=2325dd69&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/randomPortrait.webp\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChatView.vue?vue&type=style&index=0&id=2a2554f0&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BlushList.vue?vue&type=style&index=0&id=4ad23e39&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FilterWindow.vue?vue&type=style&index=0&id=1ffd6688&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TextButton.vue?vue&type=style&index=1&id=3be6926f&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BlushWindow.vue?vue&type=style&index=0&id=640bcb6c&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PatreonButton.vue?vue&type=style&index=0&id=d5159fe2&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PlayingCard.vue?vue&type=style&index=0&id=f47723e6&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Credit.vue?vue&type=style&index=0&id=27444a3f&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/black-felt.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CreditsScreen.vue?vue&type=style&index=0&id=00b87b5c&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PatreonButton2.vue?vue&type=style&index=0&id=3333a497&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/patreon-banner.webp\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SettingsScreen.vue?vue&type=style&index=0&id=45dde64e&scoped=true&lang=scss\"","<template >\n  <div id=\"milkfarm-app\" :style=\"cssVars\">\n    <div v-if=\"globalState.loading.value\" class=\"loading\">\n      <h1>Loading...</h1>\n    </div>\n    <component v-else\n               :is=\"menu.activeComponent\"\n               v-bind=\"{ menu: menu }\"\n               v-on:goto-view=\"(view) => {menu.activeComponent = view}\"\n               v-on:close=\"menu.activeComponent = 'StartMenu'\">\n    </component>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport GameScreen from '@/components/screens/GameScreen.vue'\nimport Menu from \"@/Menu\"\nimport StartMenu from \"@/components/screens/StartMenu.vue\"\nimport DialogueScreen from \"@/components/screens/DialogueScreen.vue\"\nimport globalState from \"@/store/globalState\"\nimport HandView from \"@/components/screens/HandView.vue\"\nimport CreditsScreen from \"@/components/screens/CreditsScreen.vue\"\nimport CollectionScreen from \"@/components/screens/CollectionScreen.vue\"\nimport PatchNotesScreen from \"@/components/screens/PatchNotesScreen.vue\"\nimport BargainScreen from \"@/components/screens/BargainScreen.vue\"\nimport SettingsScreen from \"@/components/screens/SettingsScreen.vue\"\n\n@Options({\n  components: {\n    GameScreen, StartMenu, DialogueScreen, HandView, CreditsScreen, CollectionScreen, PatchNotesScreen, SettingsScreen\n  },\n  methods: {\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--background-image': 'url(' + require('@/assets/background.webp') + ')'\n      }\n    },\n    globalState() {\n      return globalState()\n    }\n  }\n})\nexport default class App extends Vue {\n  menu: Menu = new Menu()\n}\n</script>\n\n<style lang=\"scss\">\n@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700');\n@import url('https://fonts.googleapis.com/css?family=Maven+Pro:500');\n@import url('https://fonts.googleapis.com/css?family=Croissant+One'); // The Blushing Defeat title font\n\n@import url('https://fonts.googleapis.com/css2?family=Lusitana:wght@400;700&display=swap');\n\nhtml {\n  height: 100%;\n}\nbody {\n  background-color: #353540;\n  margin: 0;\n  min-height: 100%;\n\n  display: flex;\n  flex-direction: column;\n  & > * {\n    flex-shrink: 0;\n  }\n}\n#app {\n  flex-grow: 1;\n\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n  & > * {\n    flex-shrink: 0;\n  }\n}\n#milkfarm-app {\n  flex-grow: 1;\n\n  //font-family: Avenir, Helvetica, Arial, sans-serif;\n  font-family: \"Open Sans\", \"Helvetica Neue\", Avenir, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.5;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  color: #fefefe;\n  position: relative;\n  background: linear-gradient(180deg, rgba(#501979, 0.4), rgba(#1e0426, 0.1)), var(--background-image);//, linear-gradient(180deg, rgba(#7f2c53, 1), rgba(#520000, 1));\n  //background-image: url(\"https://www.transparenttextures.com/patterns/black-thread-light.png\");\n  background-repeat: repeat;\n  background-attachment: scroll;\n  //overflow-x: auto;\n\n  h1, h2, h3, h4, h5 {\n    font-family: \"Maven Pro\", \"Open Sans\", \"Helvetica Neue\", Avenir, Helvetica, Arial, sans-serif;\n  }\n\n  * {\n    //scrollbar-width: thin;\n    scrollbar-color: lighten($window-background-color, 10%) #260C1A;\n\n    &::-webkit-scrollbar {\n      width: 8px;\n    }\n\n    &::-webkit-scrollbar-track {\n      background: #260C1A;\n    }\n\n    &::-webkit-scrollbar-thumb {\n      background: lighten($window-background-color, 10%);\n      border-radius: $border-radius;\n    }\n  }\n}\na {\n  color: white;\n}\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n.window {\n  background: $window-background-color;\n  padding: 10px 20px 20px 20px;\n  border: 3px solid black;\n  border-radius: $border-radius;\n\n  h1, h2 {\n    margin-top: 0;\n  }\n}\n</style>\n\n<style scoped lang=\"scss\">\n.loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n\n  h1 {\n    text-align: center;\n  }\n}\n</style>\n","<template>\n  <div class=\"milkfarm\">\n    <CardHandWindow :menu=\"menu\" :deck=\"game.drawnCards\" class=\"drawn-cards\">\n      <div class=\"hand-labels\">\n        <div class=\"hand-label\">{{ game.roundString }}</div>\n      </div>\n    </CardHandWindow>\n    <CardHandWindow :menu=\"menu\" :deck=\"handDeck\"\n                    class=\"picked-cards\">\n      <div class=\"hand-labels\">\n        <TextButton class=\"hand-button\" @click=\"showActivatedCards = !showActivatedCards\">\n          <template v-if=\"showActivatedCards\">Show All: On</template>\n          <template v-else>Show All: Off</template>\n        </TextButton>\n        <div class=\"hand-label\">\n          Bonus rolls: {{ game.state.bonusRolls.value }} / {{ game.state.bonusRolls.max }}\n        </div>\n        <div class=\"hand-label\">\n          Picked {{ game.state.cardsPickedThisRound }} of {{ game.state.cardsToPick }} cards\n        </div>\n      </div>\n    </CardHandWindow>\n\n    <DialogueCard :menu=\"menu\"></DialogueCard>\n\n    <div class=\"dices\">\n      <template v-for=\"die in game.state.dice\" v-bind:key=\"die\">\n        <DiceView :dice=\"die\"></DiceView>\n      </template>\n      <div class=\"dice-view add-dice\" v-if=\"game.allowDiceBuy()\" @click=\"game.buyDice()\">\n        <p>+</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport CardHandWindow from \"@/components/CardHandWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, DiceView, DialogueCard, DialogueStatusCard, CardHandWindow\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    },\n    handDeck: function (): Deck {\n      if (this.showActivatedCards) return this.game.player.hand.copy().addDeck(this.game.pickedCards)\n      return this.game.pickedCards\n    }\n  }\n})\nexport default class GameScreen extends Vue {\n  menu!: Menu\n  scaledCard: Card = new Card({})\n  showActivatedCards: boolean = false\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .milkfarm {\n    display: grid;\n    grid-template-columns: 1fr $dice-size max-content;\n    grid-template-rows: 410px 200px 200px;\n    grid-template-areas:\n      \"c c c\"\n      \"p d s\"\n      \"p d s\";\n    grid-gap: 10px;\n\n    background-size: cover;\n    background-attachment: fixed;\n    position: relative;\n\n    min-width: 360px;\n    min-height: 100vh;\n    box-sizing: border-box; // Include padding in height so that we don't get scrollbars.\n\n    @media only screen and (min-width: 1700px){\n      padding-left: 100px;\n      padding-right: 100px;\n    }\n\n    @media only screen and (max-width: $mobile-width){\n      grid-template-columns: 1fr;\n      grid-template-rows: 400px minmax($dice-size, auto) 410px 410px;\n      grid-template-areas:\n      \"s\"\n      \"d\"\n      \"c\"\n      \"p\";\n    }\n  }\n\n  .drawn-cards {\n    grid-area: c;\n  }\n\n  .picked-cards {\n    grid-area: p;\n  }\n\n  .dialogue-card {\n    grid-area: s;\n\n    box-sizing: border-box;\n    height: 100%;\n    width: 40vw;\n    max-width: 700px;\n    margin: auto;\n\n    @media only screen and (max-width: $mobile-width){\n      max-width: none;\n      width: 100%;\n    }\n  }\n\n  .dices {\n    grid-area: d;\n\n    display: grid;\n    grid-template-columns: repeat(auto-fill, $dice-size);\n    grid-auto-rows: $dice-size;\n    grid-gap: 3px;\n\n    box-sizing: border-box;\n\n    //background-color: #1E6BB8;\n  }\n\n  .add-dice {\n    background-color: rgba(#fff0e8, 0.75);\n    border-color: rgba(black, 0.9);\n    color: rgba(black, 0.9);\n  }\n\n  .credits {\n    display: none;\n  }\n\n  .hand-button {\n    border: 2px solid black;\n    border-radius: $border-radius / 2;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border-bottom: 0;\n    padding: 2px 4px;\n    font-weight: bold;\n    font-size: 13px;\n    margin-right: 5px;\n  }\n\n  .hand-labels {\n    display: flex;\n    width: 100%;\n    justify-content: right;\n  }\n\n  .hand-label {\n    padding: 2px 5px;\n    border-top-left-radius: $border-radius;\n    border-top-right-radius: $border-radius;\n    border: 2px solid black;\n    border-bottom: 0;\n    background-color: $window-background-color;\n\n    display: grid;\n    grid-auto-flow: column;\n    grid-gap: 5px;\n    margin-right: 5px;\n\n    font-weight: bold;\n    font-size: 13px;\n\n    &:first-child {\n      //border-top-right-radius: $border-radius !important;\n      //border-right: 2px solid black !important;\n    }\n\n    &:last-child {\n      margin-right: 0;\n      border-right: 0;\n      border-top-right-radius: 0;\n    }\n\n  }\n\n</style>\n","<template>\n  <div class=\"text-button\" onselectstart=\"return false\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\n\n@Options({\n  props: {\n    icon: String\n  }\n})\nexport default class TextButton extends Vue {\n  icon!: string\n}\n</script>\n\n<style lang=\"scss\">\n.text-button {\n  p {\n    margin: 0;\n  }\n}\n\n</style>\n\n<style scoped lang=\"scss\">\n.text-button {\n  color: $text-light;\n  padding: 0.5em;\n  cursor: pointer;\n  background-color: $component-button;\n\n  transition: background-color $selection-time;\n\n  &:hover {\n    background-color: scale-color(lighten($component-button, 10%), $saturation: 30%);\n  }\n  &:active {\n    background-color: scale-color(darken($component-button, 5%), $saturation: -5%);\n  }\n\n  display: grid;\n  align-items: center;\n  justify-content: center;\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\n\n@Options({\n  props: {\n    icon: String\n  }\n})\nexport default class TextButton extends Vue {\n  icon!: string\n}\n","import { render } from \"./TextButton.vue?vue&type=template&id=3be6926f&scoped=true\"\nimport script from \"./TextButton.vue?vue&type=script&lang=ts\"\nexport * from \"./TextButton.vue?vue&type=script&lang=ts\"\n\nimport \"./TextButton.vue?vue&type=style&index=0&id=3be6926f&lang=scss\"\nimport \"./TextButton.vue?vue&type=style&index=1&id=3be6926f&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-3be6926f\"\n\nexport default script","<template>\n  <div class=\"playing-card\" :class=\"{'single-card': card.type === 'single', 'child-card': card.hasParent, 'highlight': card.highlight}\" :style=\"cssVars\">\n    <div class=\"title-field\" title=\"Name of this card\">\n      <h3>{{ card.title }}</h3>\n    </div>\n    <div class=\"levels-field\" title=\"Level of this card / Max level of this card\">\n      <h3>{{ card.levelString }}</h3>\n    </div>\n    <div class=\"thumb-container\">\n      <!--<img class=\"thumb\" :src=\"card.thumb\"/>-->\n    </div>\n    <div v-if=\"card.subtitle !== ''\" class=\"subtitle-field\" title=\"Name of this level of this card\">\n      <h3>{{ card.subtitle }}</h3>\n    </div>\n    <div class=\"description-field\">\n      <p>{{ card.description }}</p>\n    </div>\n    <div class=\"artist-field\">\n      <p>Art by {{ card.artist }}</p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Card from \"../cards/Card\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton\n  },\n  props: {\n    card: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--border-color': 'black',\n        '--background-hue': this.card.hue,\n        '--background-image': 'url(' + require('@/assets/black-felt.png') + ')',\n        '--thumb': 'url(' + util.baseUrl() + '/' + this.card.thumb + ')'\n      }\n    }\n  }\n})\nexport default class PlayingCard extends Vue {\n  card!: Card\n}\n</script>\n\n<style scoped lang=\"scss\">\nh1, h2, h3, h4, h5, p {\n  margin: 0;\n  line-height: 1;\n}\n\np {\n  font-size: 11px;\n  line-height: 1.2;\n}\n\n$text-field-color: var(--background-color);//var(--background-color);\n$text-color: #111;\n\n.playing-card {\n  background: var(--background-image), linear-gradient(180deg,\n              hsl(calc(var(--background-hue) + 15), 70%, 50%) 0%,\n              hsl(calc(var(--background-hue) - 5), 70%, 30%) 40%,\n              hsl(calc(var(--background-hue) - 15), 70%, 20%) 95%,\n              hsl(calc(var(--background-hue) - 15), 70%, 5%) 100%);\n  border: 2px solid var(--border-color);\n  border-radius: 4px;\n  padding: 3px 3px 10px;\n  cursor: pointer;\n  user-select: none;\n  color: $text-color;\n  width: $playing-card-width;\n  height: $playing-card-height;\n  box-sizing: border-box;\n\n  position: relative;\n  display: grid;\n  grid-template-columns: 6fr 2fr;\n  grid-template-rows: 25px 3fr 25px 2fr;\n  grid-template-areas:\n    \"t l\"\n    \"i i\"\n    \"i i\"\n    \"d d\";\n  grid-gap: 2px;\n\n  backface-visibility: hidden;\n  transition: transform 0.2s, border-color 0.1s;\n  transform-origin: top left;\n  transform: scale(1);\n\n  &:hover {\n    transform: scale(1.05);\n    z-index: 2;\n  }\n}\n\n.single-card {\n  //grid-template-columns: 6fr 2fr;\n  //grid-template-rows: 30px 1fr 30px 1fr;\n  grid-template-areas:\n    \"t t\"\n    \"i i\"\n    \"i i\"\n    \"d d\";\n\n  .levels-field {\n    display: none;\n  }\n}\n\n.child-card {\n  grid-template-columns: 12fr 3fr;\n  //grid-template-rows: 30px 3fr 30px 2fr;\n  grid-template-areas:\n    \"t t\"\n    \"i i\"\n    \"s l\"\n    \"d d\";\n}\n\n.highlight {\n  border-color: $highlight-color;\n  transform: scale(1.03);\n  z-index: 1;\n}\n\n.bold-field {\n  h1, h2, h3, h4 {\n    font-family: 'Lusitana', serif !important;\n  }\n  color: hsl(var(--background-hue), 80%, 90%);\n  background: linear-gradient(hsl(var(--background-hue), 60%, 30%), hsl(var(--background-hue), 80%, 21%));\n  //background-blend-mode: overlay;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 2px 4px;\n}\n\n.title-field {\n  @extend .bold-field;\n  grid-area: t;\n\n  h3 {\n    font-size: 15px;\n    line-height: 1.1;\n  }\n}\n\n.subtitle-field {\n  @extend .bold-field;\n  grid-area: s;\n\n  h3 {\n    font-size: 14px;\n    line-height: 1.1;\n  }\n}\n\n.levels-field {\n  @extend .bold-field;\n  grid-area: l;\n  text-align: center;\n  h3 {\n    font-size: 14px;\n    line-height: 1.1;\n  }\n}\n\n.description-field {\n  grid-area: d;\n\n  //font-family: 'Lusitana', serif;\n  color: hsl(var(--background-hue), 80%, 5%);\n  background: linear-gradient(180deg,\n    hsla(var(--background-hue), 20%, 80%, 80%),\n    hsla(var(--background-hue), 20%, 70%, 60%));\n  //background-blend-mode: multiply;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 4px 8px;\n\n  white-space: pre-wrap;\n}\n\n.thumb-container {\n  grid-area: i;\n\n  background-image: var(--thumb);\n  background-color: #222;\n  //background: var(--thumb), #222;\n  background-size: cover;\n  background-position: center;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n\n  overflow: hidden;\n}\n\n.thumb {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  object-position: 50% 50%;\n  pointer-events: none;\n  user-select: none;\n}\n\n.artist-field {\n  position: absolute;\n  bottom: 2px;\n  left: 0;\n  padding-top: 1px;\n  padding-left: 8px;\n  padding-right: 5px;\n  //background: hsl(var(--background-hue), 100%, 30%) var(--background-image);\n  //border-top-left-radius: 100px;\n  //border-left: 1px solid var(--border-color);\n  //border-top: 1px solid var(--border-color);\n\n  text-align: left;\n  color: hsl(var(--background-hue), 70%, 65%);\n\n  p {\n    font-size: 8px;\n    line-height: 1;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"value-meter\" :style=\"cssVars\">\n    <div class=\"filled-bar\"></div>\n    <div class=\"label\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport ValueRange from '@/effects/ValueRange'\n\n@Options({\n  props: {\n    container: ValueRange,\n    barColor: String,\n    backgroundColor: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--percent-filled': this.container.fraction * 100 + '%',\n        '--background-color': this.backgroundColor,\n        '--bar-color': this.barColor\n      }\n    }\n  }\n})\nexport default class ValueMeter extends Vue {\n  container!: ValueRange | undefined\n  backgroundColor: string = '#282c3b'\n  barColor: string = '#741A32'\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .value-meter {\n    border: 1px solid black;\n    border-radius: 0;\n    background-color: var(--background-color);\n    position: relative;\n    height: 1em;\n  }\n\n  .filled-bar {\n    height: 100%;\n    transition: width 0.1s linear;\n\n    border-radius: 0;\n    background-color: var(--bar-color);\n    width: var(--percent-filled);\n  }\n\n  .label {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    display: grid;\n    place-items: center;\n  }\n\n</style>\n","import axios from \"axios\"\nimport Hjson from \"hjson\"\nimport * as html2canvas from \"html2canvas\"\n\nexport default {\n  baseUrl(): string {\n    return process.env.VUE_APP_BASE_URL\n  },\n  wait(ms: number) {\n    return new Promise((resolve, reject) => {\n      setTimeout(resolve, ms)\n    })\n  },\n  /**\n   * Fetches a HJSON or JSON file from the public folder.\n   * @param path relative to the public folder with no leading slash. Ex: 'research/research-tree.hjson'\n   */\n  async fetchHjson(path: string) {\n    let response = await axios.get(\n      this.baseUrl() + '/' + path,\n      { transformResponse: [(data) => { return data }] }) // Return pure data, do not auto-convert to json\n\n    let data = response.data\n    let info = Hjson.parse(data)\n    return info\n  },\n  async getInfo(id: string) {\n    return await this.fetchHjson(id + '/info.hjson')\n  },\n  isVideo(url: string) {\n    return /\\.webm$/i.test(url)\n  },\n  sample(array: any[]): any {\n    return array[Math.floor(Math.random() * array.length)]\n  },\n  timeToDays(time: number): number {\n    return time / 60\n  },\n  currentDate(time: number): string {\n    let day = Math.floor(this.timeToDays(time))\n    let timeofday = ((time % 60) / 60 * 24)\n    let hour = Math.floor(timeofday)\n    let minute = ((timeofday - hour) * 60)\n    return `Day ${day}, ${hour.toFixed(0).padStart(2, '0')}:${minute.toFixed(0).padStart(2, '0')}`\n  },\n  displayTime(time: number): string {\n    let day = Math.floor(this.timeToDays(time))\n    let timeofday = ((time % 60) / 60 * 24)\n    let hour = Math.floor(timeofday)\n    let minute = ((timeofday - hour) * 60)\n\n    let s = \"\"\n    if (day == 1) s += `${day} day`\n    if (day > 1) s += `${day} days`\n    if (day >= 1 && hour > 0) s += \", \"\n    if (hour == 1) s += `${hour} hour`\n    if (hour > 1) s += `${hour} hours`\n    if (day == 0 && hour == 0) s = `${minute} minutes`\n    return s\n  },\n  uuid(): string {\n    return (\"\" + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n      (Number(c) ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> Number(c) / 4).toString(16)\n    )\n  },\n  capitalize(s: string): string {\n    return s.charAt(0).toUpperCase() + s.substr(1)\n  },\n  toKebabCase(string: string): string {\n    return string.replace(/\\s+/g, '-').toLowerCase()\n  },\n  pickFrom<E>(list: E[], fraction: number): E {\n    let index = this.clamp(Math.round(fraction * (list.length - 1)), 0, list.length - 1)\n    return list[index]\n  },\n  clamp(value: number, min: number, max: number) {\n    return Math.max(Math.min(value, max), min)\n  },\n  /**\n   *\n   * @param value the number that should be formatted\n   * @param relative this number determines how the value should be formatted. If not given, value is used for this.\n   */\n  showNumber(value: number, relative: number | undefined = undefined): string {\n    if (relative == undefined) relative = value\n\n    if (relative < 1) return value.toFixed(2)\n    else if (relative < 10) return value.toFixed(1)\n    return value.toFixed(0)\n  },\n  /** Ensure that a value is one of the possible values, if not, will return the first possible value as default. */\n  ensure(value: any, possibilities: any[]): any {\n    if (possibilities.find(v => v == value)) {\n      return value\n    }\n    return possibilities[0]\n  },\n  shuffle(array: any[]) {\n    let currentIndex = array.length; let temporaryValue; let randomIndex\n\n    // While there remain elements to shuffle...\n    while (currentIndex !== 0) {\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex)\n      currentIndex -= 1\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex]\n      array[currentIndex] = array[randomIndex]\n      array[randomIndex] = temporaryValue\n    }\n    return array\n  },\n  screenshot(id: string, savename: string = 'collection', background: string | null = null) {\n    let element = document.getElementById(id)\n    if (element == null) {\n      console.error(`Could not take a screenshot of element with id \"${id}\".`)\n      return\n    }\n\n    let childCount = Math.max(element.childNodes.length - 2, 1)\n    let childWidth = 270\n    let childHeight = 380\n    let width = element.style.width\n    let height = element.style.height\n    let minHeight = element.style.minHeight\n\n    let renderWidth = Math.min(childWidth * childCount, 2560)\n    element.style.width = `${renderWidth}px`\n\n    if (childCount * childWidth < 2560) {\n      element.style.height = `${childHeight}px`\n      element.style.minHeight = `${childHeight}px`\n    }\n\n    // @ts-ignore\n    html2canvas(element, {\n      backgroundColor: background\n    }).then((canvas: any) => {\n      let a = document.createElement('a')\n      let image\n\n      if (background == null) {\n        image = canvas.toDataURL(\"image/png\")\n        a.download = `${savename}.png`\n      } else {\n        image = canvas.toDataURL(\"image/jpeg\")\n        a.download = `${savename}.jpg`\n      }\n      a.href = image\n      //document.body.appendChild(a)\n      a.click()\n    })\n\n    element.style.width = width\n    element.style.minHeight = minHeight\n    element.style.height = height\n  }\n}\n","import CollectionPlayer from \"@/employee/CollectionPlayer\"\nimport util from \"@/util\"\nimport { identifier, list, map, primitive, serializable } from \"serializr\"\n\nexport default class ValueMod {\n  @serializable(identifier())\n  public readonly uuid: string = util.uuid()\n  @serializable\n  public readonly type: string = 'add' // add, mul\n  @serializable\n  public readonly value: number = 0\n\n  constructor(value: number, type: string) {\n    this.type = type\n    this.value = value\n  }\n\n  static activate(value: number, mod: ValueMod): number {\n    if (mod.type === 'add') return value + mod.value\n    else if (mod.type === 'mul') return value * mod.value\n\n    return value\n  }\n\n  /**\n   * Returns the value that could be activated to become X, where X is the input value\n   * @param value X\n   * @param mod\n   */\n  static reverseActivate(value: number, mod: ValueMod): number {\n    if (mod.type === 'add') return value - mod.value\n    else if (mod.type === 'mul') return value * (1 / mod.value)\n    return value\n  }\n\n  /**\n   * Activate all mods on a value. This uses a predefined order of activation.\n   * @param value the value to modify\n   * @param mods\n   */\n  static activateAll(value: number, mods: ValueMod[]): number {\n    for (let mod of mods) {\n      if (mod.type === 'add') value = ValueMod.activate(value, mod)\n    }\n\n    for (let mod of mods) {\n      if (mod.type === 'mul') value = ValueMod.activate(value, mod)\n    }\n\n    return value\n  }\n\n  /**\n   * Reverse-activates all mods on a value. This uses a predefined order of activation.\n   * @param value the value to modify\n   * @param mods\n   */\n  static reverseActivateAll(value: number, mods: ValueMod[]): number {\n    for (let mod of mods.reverse()) {\n      if (mod.type === 'mul') value = ValueMod.reverseActivate(value, mod)\n    }\n\n    for (let mod of mods.reverse()) {\n      if (mod.type === 'add') value = ValueMod.reverseActivate(value, mod)\n    }\n\n    return value\n  }\n\n  equals(mod: ValueMod) {\n    return this.value == mod.value && this.type == mod.type\n  }\n\n  toString(): string {\n    let s = \"\"\n    let value = util.showNumber(Math.abs(this.value))\n    let type = \"\"\n    if (this.type === 'add') {\n      if (this.value > 0) s = `+${value}`\n      else s = `-${value}`\n    } else if (this.type === 'mul') {\n      s = `x${value}`\n    }\n    return s\n  }\n}\n","import CollectionPlayer from \"@/employee/CollectionPlayer\"\nimport util from \"@/util\"\nimport { list, map, object, primitive, serializable } from \"serializr\"\nimport ValueMod from \"@/effects/ValueMod\"\n\nexport type MapStringAny = { [index: string]: any }\n\nexport default class ValueRange {\n  @serializable\n  private _baseValue: number = 0\n  @serializable\n  private readonly _min: number = 0\n  @serializable\n  private readonly _max: number = 0\n\n  @serializable(map(object(ValueMod)))\n  public valueMods: MapStringAny = {}\n\n  @serializable(map(object(ValueMod)))\n  public minMods: MapStringAny = {}\n\n  @serializable(map(object(ValueMod)))\n  public maxMods: MapStringAny = {}\n\n  @serializable(list(primitive()))\n  private readonly texts: string[] = []\n\n  @serializable\n  public readonly capBaseValue: boolean = false // If true, setting baseValue outside min/max range will not work\n\n  constructor(value: number, min: number, max: number | undefined = undefined, text: string[] = [], capBaseValue = false) {\n    this._baseValue = value\n    this._min = min\n    this._max = (max == undefined) ? Number.MAX_SAFE_INTEGER : max\n    this.texts = text\n    this.capBaseValue = capBaseValue\n  }\n\n  /**\n   * Adds the given amount to the current final value.\n   * @param value\n   * @return how much the value was changed\n   */\n  addValue(value: number): number {\n    let mulMods = []\n    for (let key in this.valueMods) {\n      let mod = this.valueMods[key]\n      if (mod.type == 'mul') mulMods.push(mod)\n    }\n    let oldValue = this.value\n    let oldBase = this.baseValue\n    this.baseValue += ValueMod.reverseActivateAll(value, mulMods)\n    return this.value - oldValue\n  }\n\n  /**\n   * Adds the given amount to the current base value.\n   * @param value\n   * @return how much the base value was actually changed\n   */\n  addBaseValue(value: number): number {\n    let oldBase = this.baseValue\n    this.baseValue += value\n\n    return this.baseValue - oldBase\n  }\n\n  set fraction(fraction: number) {\n    this.baseValue = this.min + this.max * fraction\n  }\n\n  get fraction(): number {\n    return (this.value - this.min) / (this.max - this.min)\n  }\n\n  get value(): number {\n    let sum = ValueMod.activateAll(this._baseValue, Object.values(this.valueMods))\n\n    if (sum > this.max) {\n      return this.max\n    } else if (sum < this.min) {\n      return this.min\n    } else {\n      return sum\n    }\n  }\n\n  set baseValue(value: number) {\n    if (this.capBaseValue) {\n      value = Math.max(Math.min(value, this.max), this.min)\n    }\n    this._baseValue = value\n  }\n\n  get baseValue(): number {\n    return this._baseValue\n  }\n\n  get min(): number {\n    return ValueMod.activateAll(this._min, Object.values(this.minMods))\n  }\n\n  //set min(value: number) {\n  //  this._min = value;\n  //}\n\n  get max(): number {\n    return ValueMod.activateAll(this._max, Object.values(this.maxMods))\n  }\n\n  //set max(value: number) {\n  //  this._max = value;\n  //}\n\n  get text(): string {\n    if (this.texts.length == 0) return this.value.toFixed(1)\n    return util.pickFrom(this.texts, this.fraction)\n  }\n\n  load(state: ValueRange) {\n    //this._min = state._min\n    //this._max = state._max\n    this._baseValue = state._baseValue\n  }\n\n  get copy(): ValueRange {\n    let v = new ValueRange(this._baseValue, this._min, this._max, this.texts)\n    v.valueMods = this.valueMods\n    return v\n  }\n}\n","\nimport { Options, Vue } from 'vue-class-component'\nimport ValueRange from '@/effects/ValueRange'\n\n@Options({\n  props: {\n    container: ValueRange,\n    barColor: String,\n    backgroundColor: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--percent-filled': this.container.fraction * 100 + '%',\n        '--background-color': this.backgroundColor,\n        '--bar-color': this.barColor\n      }\n    }\n  }\n})\nexport default class ValueMeter extends Vue {\n  container!: ValueRange | undefined\n  backgroundColor: string = '#282c3b'\n  barColor: string = '#741A32'\n}\n","import { render } from \"./ValueMeter.vue?vue&type=template&id=ef28c724&scoped=true\"\nimport script from \"./ValueMeter.vue?vue&type=script&lang=ts\"\nexport * from \"./ValueMeter.vue?vue&type=script&lang=ts\"\n\nimport \"./ValueMeter.vue?vue&type=style&index=0&id=ef28c724&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-ef28c724\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Card from \"../cards/Card\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton\n  },\n  props: {\n    card: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--border-color': 'black',\n        '--background-hue': this.card.hue,\n        '--background-image': 'url(' + require('@/assets/black-felt.png') + ')',\n        '--thumb': 'url(' + util.baseUrl() + '/' + this.card.thumb + ')'\n      }\n    }\n  }\n})\nexport default class PlayingCard extends Vue {\n  card!: Card\n}\n","import { render } from \"./PlayingCard.vue?vue&type=template&id=f47723e6&scoped=true\"\nimport script from \"./PlayingCard.vue?vue&type=script&lang=ts\"\nexport * from \"./PlayingCard.vue?vue&type=script&lang=ts\"\n\nimport \"./PlayingCard.vue?vue&type=style&index=0&id=f47723e6&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-f47723e6\"\n\nexport default script","import { reactive, toRefs } from 'vue'\nimport util from \"@/util\"\nimport axios from \"axios\"\nimport MarkdownIt from 'markdown-it'\n\nasync function fetchList<E>(pathList: string[]): Promise<E[]> {\n  let promises: any[] = []\n  for (let path of pathList) {\n    promises.push(util.fetchHjson(path))\n  }\n  let objects: E[] = await Promise.all(promises)\n  return objects\n}\n\nconst state = reactive({\n  loading: true,\n  cardFamilyString: \"\" as string,\n  dialogueString: \"\" as string,\n  dialogue2String: \"\" as string,\n  endingsString: \"\" as string,\n  artistsString: \"\" as string,\n  patreonCredits: \"\",\n  patchNotesString: \"\"\n})\n\nexport default function globalState() {\n  const load = async () => {\n    state.loading = true\n\n    // Await all resources in parallel\n    let [familyList, dialogue, dialogue2, endingsList, artists, credits, patchList] = await Promise.all([\n      util.fetchHjson('cards/series.hjson'),\n      util.fetchHjson('dialogue.hjson'),\n      util.fetchHjson('dialogue-2.hjson'),\n      util.fetchHjson('endings/content.hjson'),\n      util.fetchHjson('cards/artists.hjson'),\n      axios.get('https://www.blushingdefeat.com/assets/blushing-defeat-credits.json'),\n      util.fetchHjson('patch-notes/content.hjson')\n    ])\n\n    state.dialogueString = JSON.stringify(dialogue)\n    state.dialogue2String = JSON.stringify(dialogue2)\n    state.artistsString = JSON.stringify(artists)\n    state.patreonCredits = credits.data\n\n    // Second round of await for resources specified in the first await\n    let [families, patches, endings] = await Promise.all([\n      fetchList(familyList.map((path: string) => `cards/${path}`)),\n      fetchList(patchList.map((patchId: string) => `patch-notes/${patchId}.hjson`)),\n      fetchList(endingsList.map((id: string) => `endings/${id}.hjson`))\n    ])\n\n    // Load card families\n    state.cardFamilyString = JSON.stringify(families)\n\n    // Load patch notes\n    let md = new MarkdownIt()\n    for (let [i, patchId] of patchList.entries()) {\n      let patch: any = patches[i]\n      patch.id = patchId\n      patch.text = md.render(patch.text)\n    }\n    state.patchNotesString = JSON.stringify(patches)\n\n    // Load endings\n    state.endingsString = JSON.stringify(endings)\n\n    state.loading = false\n  }\n\n  return { ...toRefs(state), load }\n}\n","import { list, primitive, serializable } from \"serializr\"\nimport Card from \"@/cards/Card\"\nimport globalState from \"@/store/globalState\"\n\nexport default class Family {\n  @serializable\n  public readonly id: string\n  @serializable\n  public readonly name: string\n  @serializable\n  public readonly thumb: string\n  @serializable\n  public readonly artist: string\n  @serializable\n  public readonly hue: string\n  @serializable(list(primitive()))\n  public readonly cards: string[]\n\n  constructor(state: any) {\n    this.id = state.id\n    this.name = state.name\n    this.thumb = state.thumb\n    this.artist = state.artist ? state.artist : \"Gardamuse\"\n    this.hue = state.hue\n    this.cards = state.cards.map((card: { id: string }) => card.id)\n  }\n\n  private static familiesLoaded = false\n  private static _familyMap: {[key: string]: Family} = {}\n  public static familyMap(): {[key: string]: Family} {\n    if (this.familiesLoaded) return this._familyMap\n\n    let families: any = JSON.parse(globalState().cardFamilyString.value)\n    for (let state of families) {\n      let family = new Family(state)\n      this._familyMap[family.id] = family\n    }\n    this.familiesLoaded = true\n    return this._familyMap\n  }\n}\n","export default class DrawPreference {\n  public readonly tags: string[]\n  public readonly guaranteed: number\n  public readonly probability: number\n\n  constructor(tags: string[] = [], guaranteed: number = 0, probability: number = 0) {\n    this.tags = tags\n    this.guaranteed = guaranteed\n    this.probability = probability\n  }\n}\n","import util from \"@/util\"\nimport Card from \"@/cards/Card\"\nimport { custom, deserialize, getDefaultModelSchema, list, object, serializable } from \"serializr\"\nimport globalState from \"@/store/globalState\"\nimport Family from \"@/cards/Family\"\nimport { toRaw } from \"vue\"\nimport DrawPreference from \"@/cards/DrawPreference\"\nimport FilterSetting from \"@/FilterSetting\"\n\nexport default class Deck {\n  public cards: Card[]\n\n  public static filters: FilterSetting[] = []\n  private static cardsLoaded = false\n  private static _cardMap: {[key: string]: Card} = {}\n  private static _referenceDeck: Deck\n\n  constructor(cards: Card[] | undefined = undefined) {\n    if (cards != undefined) {\n      this.cards = cards\n    } else {\n      this.cards = []\n    }\n  }\n\n  createNew(): Deck {\n    return Deck.referenceDeck().copy().useFilters()\n  }\n\n  /** Returns a new deck with this one's cards, but with all cards of a given family removed. */\n  withoutFamily(family: string): Deck {\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      if (card.family.id != family) cards.push(card)\n    }\n    return new Deck(cards)\n  }\n\n  /** Returns a new deck with this one's cards, but only with cards of a given family or tag.\n   *\n   * Using 'all' will return a copy of this entire deck.\n   * */\n  onlyTag(family: string): Deck {\n    if (family == 'all') return new Deck(this.cards)\n\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      if (card.family.id == family) {\n        cards.push(card)\n      } else if (card.hasTag(family)) {\n        cards.push(card)\n      }\n    }\n    return new Deck(cards)\n  }\n\n  useFilters(): Deck {\n    return this.filterBy(Deck.filters)\n  }\n\n  filterBy(filters: FilterSetting[]): Deck {\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      let addCard: boolean = true\n\n      // Filter subcards\n      if (card.isParent) {\n        for (let subcard of card.subcards) {\n          for (let filter of filters) {\n            if (subcard.hasTag(filter.tag) && filter.strictness == 2) {\n              card.subcards = card.subcards.filter(c => c.id != subcard.id)\n            }\n            if (subcard.hasTag(filter.tag) && subcard.hasTag('extreme') && filter.strictness == 1) {\n              card.subcards = card.subcards.filter(c => c.id != subcard.id)\n            }\n          }\n        }\n      }\n\n      // Filter this card\n      for (let filter of filters) {\n        if (card.hasTag(filter.tag)) {\n          if (filter.strictness == 2) {\n            addCard = false\n            break\n          }\n          if (filter.strictness == 1 && card.hasTag(\"extreme\")) {\n            addCard = false\n            break\n          }\n        }\n      }\n\n      if (addCard) cards.push(card)\n    }\n    return new Deck(cards)\n  }\n\n  /** Makes all cards in this deck references to cards in a single common reference deck. */\n  rebase(): Deck {\n    let deck: Deck = new Deck()\n    for (let card of this.cards) {\n      deck.addCard(Deck.lookup(card.id)!)\n    }\n    return deck\n  }\n\n  /** Returns this deck but with each card only appearing once. */\n  unique(): Deck {\n    let deck: Deck = new Deck()\n    for (let card of this.cards) {\n      if (deck.getCardById(card.id) == undefined) {\n        deck.addCard(card)\n      }\n    }\n\n    return deck\n  }\n\n  /** Returns this deck but packs child cards into their parents as sub-cards.*/\n  pack(): Deck {\n    let deck: Deck = new Deck()\n    for (let card of this.cards) {\n      if (card.hasParent) {\n        let parentId = card.parent!.id\n        let parent: Card\n\n        if (deck.hasCard(parentId)) {\n          // If the parent already exists in the new deck\n          parent = deck.getCardById(parentId)!\n\n        } else if (this.hasCard(parentId)) {\n          // If the parent exists in the old deck\n          parent = this.getCardById(parentId)!\n          deck.addCard(parent)\n\n        } else {\n          // If the parent doesn't exist in either deck, create it from static\n          parent = Deck.lookup(parentId)!\n          parent.subcards = []\n          deck.addCard(parent)\n        }\n        parent.addSubCard(card)\n\n      } else {\n        deck.addCard(card)\n      }\n    }\n    return deck\n  }\n\n  /** Returns this deck but with all child cards directly in the deck. All parent cards are removed. */\n  unpack(): Deck {\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      if (card.isParent) {\n        for (let i = 0; i < card.subcards.length; i++) {\n          cards.push(card.getLevel(i))\n        }\n      } else {\n        cards.push(card)\n      }\n    }\n    return new Deck(cards)\n  }\n\n  /**\n   * Returns the cards on 1-based indices specified by values.\n   * @param values\n   */\n  pick(values: number[]): Deck {\n    let cards: Card[] = []\n    for (let i = 0; i < this.cards.length; i++) {\n      for (let value of values) {\n        if (i == value - 1) cards.push(this.cards[i])\n      }\n    }\n    return new Deck(cards)\n  }\n\n  /** Draws a number of cards from the top of the deck. */\n  /*draw(value: number): Deck {\n    return this.draw2(value, { tags: [\"mind\", \"pet\"], prob: 0.5 })\n    let cards: Card[] = []\n    for (let i = 0; i < value; i++) {\n      if (!this.drawOneCardTo(cards)) break\n    }\n    return new Deck(cards)\n  }*/\n\n  // {tags: [\"mind\", \"pet\"], prob: 0.5}\n  draw(value: number, preferred: DrawPreference = new DrawPreference([], 0, 0)): Deck {\n    // Assume that index 0 is bottom of deck, highest index is top\n    let wantedCards: Card[] = this.getWantedCards(preferred.tags)\n    let cards: Card[] = []\n\n    while (cards.length < value && cards.length < preferred.guaranteed && wantedCards.length > 0) {\n      let card = util.pickFrom(wantedCards, Math.random())\n\n      // Remove that card from both wanted list and this deck\n      let wantedIndex = wantedCards.findIndex((c: Card) => c.id == card.id)\n      if (wantedIndex != -1) wantedCards.splice(wantedIndex, 1)\n      this.removeCard(card)\n\n      cards.push(card)\n      console.log(\"Guaranteed\", card.name)\n    }\n\n    while (cards.length < value) {\n      // Draw a wanted card with certain chance, otherwise just draw top card\n      if (wantedCards.length > 0 && Math.random() < preferred.probability) {\n        // Remove the topmost wanted card\n        let card = wantedCards.pop()!\n        // Remove that card from deck as well\n        this.cards.splice(this.cards.findIndex((c: Card) => c.id == card.id), 1)\n        cards.push(card)\n      } else if (this.cards.length > 0) {\n        // Remove the topmost card in the deck\n        let card = this.cards.pop()!\n        // If that card is wanted, remove it from the wanted list\n        let wantedIndex = wantedCards.findIndex((c: Card) => c.id == card.id)\n        if (wantedIndex != -1) wantedCards.splice(wantedIndex, 1)\n\n        cards.push(card)\n      } else {\n        break\n      }\n    }\n    return new Deck(cards).shuffle()\n  }\n\n  private getWantedCards(tags: string[]): Card[] {\n    // Assume that index 0 is bottom of deck, highest index is top\n    let wantedCards: Card[] = []\n    for (let card of this.cards) {\n      if (card.hasAnyTag(tags)) wantedCards.push(card)\n    }\n    return wantedCards\n  }\n\n  /** Draws a card and adds it to the list. Returns false if no card could be drawn. */\n  private drawOneCardTo(cards: Card[]): boolean {\n    let card: Card | undefined = this.cards.pop()\n    if (card != undefined) {\n      cards.push(card)\n      return true\n    }\n    return false\n  }\n\n  /** Draws the card with given index. */\n  private drawIndex(index: number) {\n    return this.cards.splice(index, 1)[0]\n  }\n\n  addCard(card: Card): Deck {\n    this.cards.push(card)\n    return this\n  }\n\n  addDeck(deck: Deck): Deck {\n    this.cards = this.cards.concat(deck.cards)\n    return this\n  }\n\n  removeCard(card: Card): Deck {\n    let i = this.cards.findIndex(c => c.id == card.id)\n    if (i != -1) this.drawIndex(i)\n    return this\n  }\n\n  hasCard(cardId: string): boolean {\n    return this.cards.find(card => card.id == cardId) != undefined\n  }\n\n  size(): number {\n    return this.cards.length\n  }\n\n  shuffle(): Deck {\n    this.cards = util.shuffle(this.cards)\n    return this\n  }\n\n  sortByFamily() {\n    this.cards = this.cards.sort((a, b) => (a.family.id < b.family.id) ? -1 : 1)\n    return this\n  }\n\n  sortByLevel(): Deck {\n    this.cards = this.cards.sort((a, b) => a.level - b.level)\n    return this\n  }\n\n  sortByName(): Deck {\n    this.cards = this.cards.sort((a, b) => (a.name < b.name) ? 1 : -1)\n    return this\n  }\n\n  removeAllCards(): Deck {\n    this.cards = []\n    return this\n  }\n\n  get pickableCards(): Card[] {\n    let cards: Card[] = []\n    for (let card of this.cards) {\n      if (!card.isParent) cards.push(card)\n      for (let i = 0; i < card.subcards.length; i++) {\n        cards.push(card.getLevel(i))\n      }\n    }\n    return cards\n  }\n\n  /** Returns all cards, not just top level ones. */\n  get allLevels(): Card[] {\n    let cards = []\n    for (let card of this.cards) {\n      cards.push(card)\n      if (card.isParent) {\n        for (let sub of card.subcards) {\n          cards.push(sub)\n        }\n      }\n    }\n    return cards\n  }\n\n  getCardById(id: string): Card | undefined {\n    let card = this.allLevels.find(card => card.id == id)\n    return card\n  }\n\n  copy(): Deck {\n    return new Deck(this.cards.map((c: Card) => c.copy()))\n  }\n\n  public static createFromCardStates(cardStates: any[]): Deck {\n    let cards: Card[] = []\n    for (let state of cardStates) {\n      let card: Card | undefined = Deck.lookup(state.id)\n      if (card != undefined) {\n        cards.push(card)\n      } else {\n      }\n    }\n    return new Deck(cards)\n  }\n\n  public static lookup(id: string): Card | undefined {\n    let card = this.cardMap()[id]\n    if (card == undefined) {\n      console.warn(`Static lookup of card \"${id}\" failed.`)\n      return undefined\n    }\n    return card.copy()\n  }\n\n  public static referenceDeck(): Deck {\n    if (this._referenceDeck != undefined) {\n      return this._referenceDeck.copy()\n    }\n\n    let cards = this.parseCards()\n\n    let deck: Deck = new Deck()\n    for (let card of cards) {\n      if (!card.isParent) deck.addCard(card)\n    }\n\n    this._referenceDeck = deck.pack()\n    return this._referenceDeck.copy()\n  }\n\n  private static cardMap(): {[key: string]: Card} {\n    if (this.cardsLoaded) return this._cardMap\n\n    for (let card of this.parseCards()) {\n      this._cardMap[card.id] = card\n    }\n\n    this.cardsLoaded = true\n    return this._cardMap\n  }\n\n  private static parseCards(): Card[] {\n    let families: any = JSON.parse(globalState().cardFamilyString.value)\n    let cards = []\n    for (let familyState of families) {\n      let family = new Family(familyState)\n      for (let card of familyState.cards) {\n        let levels: Card[] = []\n\n        // If this card is a parent\n        if (card.levels != undefined) {\n          // Create all level cards for it\n          for (let [i, subcard] of card.levels.entries()) {\n            let tags = (card.tags) ? card.tags : []\n            if (subcard.tags) tags = tags.concat(subcard.tags)\n\n            let leveledCard: Card = new Card({\n              family: family.id,\n              thumb: (subcard.thumb) ? `cards/${subcard.thumb}` : (card.thumb) ? `cards/${card.thumb}` : `cards/${family.thumb}`,\n              id: `${card.id}.${subcard.id}`,\n              name: subcard.name,\n              description: subcard.description,\n              transformation: (subcard.transformation) ? subcard.transformation : (card.transformation) ? card.transformation : \"\",\n              type: card.type,\n              subcards: [],\n              levels: 1,\n              level: i + 1,\n              parent: card.id,\n              hue: family.hue,\n              artist: (subcard.artist) ? subcard.artist : (card.artist) ? card.artist : (family.artist) ? family.artist : \"Gardamuse\",\n              tags: tags\n            })\n            levels.push(leveledCard)\n            cards.push(leveledCard)\n          }\n        }\n        cards.push(this.parseCard(card, family, levels))\n      }\n    }\n\n    return cards\n  }\n\n  /** Parses a single card. */\n  private static parseCard(card: any, family: any, subcards: Card[] = []) {\n    return new Card({\n      family: family.id,\n      thumb: (card.thumb) ? `cards/${card.thumb}` : `cards/${family.thumb}`,\n      id: card.id,\n      name: card.name,\n      description: card.description,\n      transformation: card.transformation,\n      type: card.type,\n      subcards: subcards.map(c => c.id),\n      levels: subcards.length,\n      hue: family.hue,\n      artist: (card.artist) ? card.artist : (family.artist) ? family.artist : \"Gardamuse\",\n      tags: (card.tags) ? card.tags : []\n    })\n  }\n}\n","import { identifier, list, object, primitive, serializable, serialize } from \"serializr\"\nimport Family from \"@/cards/Family\"\nimport Deck from \"@/cards/Deck\"\nimport { toRaw } from \"vue\"\n\nexport default class Card {\n\n  // Note: All properties must be added both here, in constructor, in copy() and in Deck's parser\n\n  @serializable\n  private readonly _family: string\n  @serializable\n  private readonly _parent: string\n\n  @serializable\n  public readonly thumb: string\n  @serializable(identifier())\n  public readonly id: string\n  @serializable\n  public readonly name: string\n  @serializable\n  public readonly description: string\n  @serializable\n  public readonly transformation: string\n  @serializable(list(primitive()))\n  private _subcards: string[]\n  @serializable\n  public readonly type: string // numeric, selection, single\n  @serializable\n  public readonly _level: number\n  @serializable\n  public readonly levels: number\n  @serializable\n  public readonly hue: number\n  @serializable\n  public readonly artist: string\n  @serializable(list(primitive()))\n  public readonly tags: string[]\n\n  public scale: boolean = false\n  public highlight: boolean = false\n\n  constructor(state: any) {\n    if (state == undefined) state = {}\n\n    this._family = state.family ? state.family : \"none\"\n    this._parent = state.parent\n\n    this.thumb = state.thumb\n    this.id = state.id\n    this.name = state.name\n    this.description = state.description\n    this.transformation = state.transformation ? state.transformation : \"\"\n    this._subcards = state.subcards ? state.subcards : []\n    this._level = state.level ? state.level : 0\n    this.levels = state.levels ? state.levels : 0\n    this.type = state.type ? state.type : \"single\"\n    this.hue = state.hue ? state.hue : 0\n    this.artist = state.artist ? state.artist : \"Gardamuse\"\n    this.tags = state.tags ? state.tags : []\n  }\n\n  get fullTitle(): string {\n    if (this.hasParent) return `${this.parent!.name}: ${this.name}`\n    return this.name\n  }\n\n  get title(): string {\n    if (this.hasParent) return `${this.parent!.name}`\n    return this.name\n  }\n\n  get subtitle(): string {\n    if (this.hasParent) return `${this.name}`\n    return \"\"\n  }\n\n  set subcards(cards: Card[]) {\n    this._subcards = cards.map(c => c.id)\n  }\n\n  get subcards(): Card[] {\n    return this._subcards.map((id: string) => Deck.lookup(id)!)\n  }\n\n  addSubCard(card: Card) {\n    if (!this.hasSubCard(card)) {\n      this._subcards.push(card.id)\n      this._subcards.sort()\n    }\n  }\n\n  hasSubCard(card: Card): boolean {\n    return this._subcards.find(id => id == card.id) != undefined\n  }\n\n  get level(): number {\n    return this._level\n  }\n\n  get maxLevel(): number {\n    if (this.hasParent) {\n      return this.parent!.levels\n    }\n    return this.levels\n  }\n\n  get levelString(): string {\n    if (this.type == 'single') return '1'\n    if (this.isParent && this.levels == this.subcards.length) {\n      return this.levels.toFixed(0)\n    } else if (this.isParent) {\n      return `${this.subcards.length} / ${this.levels}`\n    } /*else if (this.type == 'selection') {\n      return ''\n      //return String.fromCharCode(96 + this.level).toUpperCase()\n    }*/\n    return `${this.level} / ${this.maxLevel}`\n  }\n\n  getLevel(level: number): Card {\n    if (this.type != \"single\" && level < this.subcards.length) {\n      return this.subcards[level]\n    }\n    return this\n  }\n\n  get parent(): Card | undefined {\n    return Deck.lookup(this._parent)\n  }\n\n  get hasParent(): boolean {\n    return this._parent != undefined\n  }\n\n  get isParent(): boolean {\n    return this.type != \"single\" && this.levels > 1\n  }\n\n  get family(): Family {\n    return Family.familyMap()[this._family]\n  }\n\n  hasTag(tag: string): boolean {\n    return this.family.id == tag || this.tags.find(t => t == tag) != undefined\n  }\n\n  hasAnyTag(tags: string[]): boolean {\n    for (let tag of tags) {\n      if (this.hasTag(tag)) return true\n    }\n    return false\n  }\n\n  equals(c: Card) {\n    return this.id == c.id\n  }\n\n  copy(): Card {\n    let card = new Card({\n      id: this.id,\n      name: this.name,\n      thumb: this.thumb,\n      description: this.description,\n      transformation: this.transformation,\n      subcards: this._subcards,\n      levels: this.levels,\n      level: this._level,\n      type: this.type,\n      hue: this.hue,\n      artist: this.artist,\n      family: this._family,\n      parent: this._parent,\n      tags: this.tags\n    })\n    return card\n  }\n\n  toJSON() {\n    return serialize(this)\n  }\n}\n","<template>\n  <div class=\"dice-view\" :class=\"{'locked-dice': dice.locked}\" :style=\"cssVars\" @click=\"dice.roll()\">\n    <p>{{ dice.value }} / {{ dice.max }}</p>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Card from \"../cards/Card\"\nimport Dice from \"@/Dice\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton\n  },\n  props: {\n    dice: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--border-color': 'black',\n      }\n    }\n  }\n})\nexport default class DiceView extends Vue {\n  dice!: Dice\n}\n</script>\n\n<style lang=\"scss\">\n.dice-view {\n  background: #fff0e8;\n  color: #111;\n  font-size: 22px;\n  font-weight: bold;\n  text-align: center;\n  border: 3px solid black;\n  border-radius: $border-radius;\n  box-sizing: border-box;\n  padding: 0 0;\n  cursor: pointer;\n  user-select: none;\n  height: 100%;\n\n  // Align content vertically\n  display: table;\n  p {\n    display: table-cell;\n    vertical-align: middle;\n  }\n\n  backface-visibility: hidden;\n  transition: transform 0.2s, border-color 0s;\n  transform-origin: top;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n  &:active {\n    border-color: #efa200;\n    color: #efa200;\n  }\n}\n\n.locked-dice {\n  color: #222;\n  background: #777068;\n  cursor: default;\n\n  &:hover {\n    transform: scale(1);\n  }\n\n  &:active {\n    border-color: var(--border-color);\n    color: #222;\n  }\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Card from \"../cards/Card\"\nimport Dice from \"@/Dice\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton\n  },\n  props: {\n    dice: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--border-color': 'black',\n      }\n    }\n  }\n})\nexport default class DiceView extends Vue {\n  dice!: Dice\n}\n","import { render } from \"./DiceView.vue?vue&type=template&id=5aa351e4\"\nimport script from \"./DiceView.vue?vue&type=script&lang=ts\"\nexport * from \"./DiceView.vue?vue&type=script&lang=ts\"\n\nimport \"./DiceView.vue?vue&type=style&index=0&id=5aa351e4&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"dialogue-status-card window\" :class=\"{'simple': title !== undefined}\">\n    <!--<div class=\"text\" v-html=\"game.currentDialogue\">\n    </div>-->\n    <ChatView class=\"text\" :text=\"game.currentDialogue\"></ChatView>\n    <div v-if=\"title !== undefined\" style=\"grid-area: r;\">\n      <h1>{{ title }}</h1>\n    </div>\n    <template v-else>\n      <div class=\"round-counter\">\n        <h3 v-if=\"game.round.value > 0\">{{ game.roundString }}</h3>\n        <h1 v-else style=\"margin: 0; padding: 0;\">Ditzy Dice</h1>\n      </div>\n      <div v-if=\"game.round.value > 0 && game.stageId !== 'bonus'\" class=\"bonus-rolls\">\n        <h3>Bonus rolls: {{ game.state.bonusRolls.value }} / {{ game.state.bonusRolls.max }}</h3>\n      </div>\n      <div v-if=\"game.state.cardsToPick > 0\" class=\"cards-to-pick\">\n        <h3>Picked {{ game.state.cardsPickedThisRound }} of {{ game.state.cardsToPick }} cards</h3>\n      </div>\n    </template>\n    <div class=\"buttons\">\n      <template v-for=\"button in game.buttons\" v-bind:key=\"button\">\n        <TextButton @click=\"button.fun()\">\n          <p style=\"margin: 0;\">{{ button.label }}</p>\n        </TextButton>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Menu from \"@/Menu\"\nimport ChatView from \"@/components/ChatView.vue\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton, ChatView\n  },\n  props: {\n    menu: Object,\n    title: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  }\n})\nexport default class DialogueStatusCard extends Vue {\n  menu!: Menu\n  title!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .dialogue-status-card {\n    display: grid;\n    grid-gap: 5px;\n    grid-template-rows: 30px 30px 1fr 60px;\n    grid-template-columns: 2fr 2fr 1fr minmax(150px, 2fr);\n    grid-template-areas:\n      \"r r . b\"\n      \"p p . b\"\n      \"t t t t\"\n      \"n n n n\";\n\n    //white-space: pre-wrap;\n\n    @media only screen and (max-width: 1000px){\n      grid-template-rows: 25px 25px 1fr 60px;\n      grid-template-columns: 1fr 1fr minmax(100px, 1fr);\n      grid-template-areas:\n      \"r r b\"\n      \"p p b\"\n      \"t t t\"\n      \"n n n\";\n    }\n\n    .text {\n      grid-area: t;\n      padding-top: 10px;\n    }\n\n    .buttons {\n      grid-area: n;\n    }\n\n    .round-counter {\n      grid-area: r;\n    }\n\n    .cards-to-pick {\n      grid-area: p;\n    }\n\n    .bonus-rolls {\n      grid-area: b;\n    }\n  }\n\n  .simple {\n    grid-template-rows: 50px 1fr auto;\n    grid-template-columns: 2fr 2fr 1fr;\n    grid-template-areas:\n      \"r r r\"\n      \"t t t\"\n      \"n n n\";\n\n    @media only screen and (max-width: 1140px){\n      grid-template-rows: 50px 1fr 50px;\n      grid-template-columns: 2fr 2fr 1fr;\n      grid-template-areas:\n      \"r r r\"\n      \"t t t\"\n      \"n n n\";\n    }\n  }\n\n  .buttons {\n    display: flex;\n    flex-wrap: wrap;\n    background-color: $component-background-color;\n    border-radius: $border-radius;\n    border: 1px solid black;\n\n    .text-button {\n      flex: 1;\n      min-width: 100px;\n      margin: 5px 0 5px 5px;\n      border: $component-border-style;\n      border-radius: $border-radius;\n\n      &:first-child {\n        //margin-left: 0;\n      }\n\n      &:last-child {\n        margin-right: 5px;\n      }\n    }\n  }\n\n  h1, h2, h3 {\n    margin: 0;\n  }\n</style>\n","<template>\n  <BlushList class=\"chat-view\" :style=\"cssVars\">\n    <div class=\"chat-box\">\n      <div v-for=\"t in lines\" class=\"chat-item\" :class=\"t.name\">\n        <div class=\"chat-bubble\" v-html=\"t.text\"></div>\n        <div class=\"profile-image\"></div>\n      </div>\n    </div>\n  </BlushList>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport ChatMessage from \"@/ChatMessage\"\n\n@Options({\n  components: {\n    BlushList\n  },\n  props: {\n    lines: Object\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    },\n    cssVars() {\n      return {\n        '--devil-image': 'url(' + require('@/assets/devil-512px.webp') + ')',\n        '--player-image': 'url(' + require('@/assets/randomPortrait.webp') + ')'\n      }\n    }\n  }\n})\nexport default class ChatView extends Vue {\n  lines!: ChatMessage[]\n}\n</script>\n\n<style lang=\"scss\">\n.chat-box {\n  strong {\n  }\n\n  & div p {\n    &:first-child {\n      margin-top: 0;\n    }\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n}\n\n</style>\n\n<style scoped lang=\"scss\">\n\n.chat-view {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.chat-item {\n  display: grid;\n  grid-template-columns: 1fr auto;\n  grid-gap: 10px;\n}\n\n.chat-bubble {\n  position: relative;\n  padding: 10px 10px;\n  border-radius: $border-radius * 2;\n}\n\n.profile-image {\n  width: 50px;\n  height: 50px;\n  border-radius: $border-radius;\n  border: 1px solid white;\n  background-size: cover;\n  background-color: white;\n  box-sizing: border-box;\n}\n\n.demon {\n  margin: 10px 10px 10px 20%;\n\n  .profile-image {\n    background-image: var(--devil-image);\n  }\n\n  .chat-bubble {\n    background-color: #660010;\n    border-top-right-radius: 0;\n  }\n}\n\n.narrator {\n  grid-template-columns: 1fr;\n  margin: 10px 7% 10px 7%;\n  text-align: center;\n\n  .profile-image {\n    display: none;\n  }\n\n  .chat-bubble {\n    background-color: rgba(#ffffff, 0.75);\n    color: black;\n  }\n}\n\n.player {\n  grid-template-columns: auto 1fr;\n  margin: 10px 20% 10px 10px;\n\n  .profile-image {\n    grid-column: 1;\n    grid-row: 1;\n    background-image: var(--player-image);\n  }\n\n  .chat-bubble {\n    background-color: #0a3d63;\n    border-bottom-left-radius: 0;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"blush-list\">\n    <div class=\"content\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n  },\n  props: {\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BlushList extends Vue {\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.blush-list {\n  box-sizing: border-box;\n  height: 100%;\n  overflow-y: auto;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  background-color: $component-background-color;\n\n  p {\n    margin: 0;\n  }\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n  },\n  props: {\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BlushList extends Vue {\n}\n","import { render } from \"./BlushList.vue?vue&type=template&id=4ad23e39&scoped=true\"\nimport script from \"./BlushList.vue?vue&type=script&lang=ts\"\nexport * from \"./BlushList.vue?vue&type=script&lang=ts\"\n\nimport \"./BlushList.vue?vue&type=style&index=0&id=4ad23e39&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-4ad23e39\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport ChatMessage from \"@/ChatMessage\"\n\n@Options({\n  components: {\n    BlushList\n  },\n  props: {\n    lines: Object\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    },\n    cssVars() {\n      return {\n        '--devil-image': 'url(' + require('@/assets/devil-512px.webp') + ')',\n        '--player-image': 'url(' + require('@/assets/randomPortrait.webp') + ')'\n      }\n    }\n  }\n})\nexport default class ChatView extends Vue {\n  lines!: ChatMessage[]\n}\n","import { render } from \"./ChatView.vue?vue&type=template&id=2a2554f0&scoped=true\"\nimport script from \"./ChatView.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatView.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatView.vue?vue&type=style&index=0&id=2a2554f0&lang=scss\"\nimport \"./ChatView.vue?vue&type=style&index=1&id=2a2554f0&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-2a2554f0\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport Menu from \"@/Menu\"\nimport ChatView from \"@/components/ChatView.vue\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton, ChatView\n  },\n  props: {\n    menu: Object,\n    title: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  }\n})\nexport default class DialogueStatusCard extends Vue {\n  menu!: Menu\n  title!: string\n}\n","import { render } from \"./DialogueStatusCard.vue?vue&type=template&id=6f0fcc3e&scoped=true\"\nimport script from \"./DialogueStatusCard.vue?vue&type=script&lang=ts\"\nexport * from \"./DialogueStatusCard.vue?vue&type=script&lang=ts\"\n\nimport \"./DialogueStatusCard.vue?vue&type=style&index=0&id=6f0fcc3e&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-6f0fcc3e\"\n\nexport default script","<template>\n  <div class=\"card-hand-window cards-wrapper drawn-cards\">\n    <div class=\"label-wrapper\">\n      <span class=\"label-row\"><slot></slot></span>\n    </div>\n    <div class=\"cards\">\n      <template v-for=\"card in deck.cards\" v-bind:key=\"card\">\n        <PlayingCard :card=\"card\" :class=\"{'scaled': card.scale}\" @click=\"toggleScale(card); game.clickCard(card);\"></PlayingCard>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport Deck from \"@/cards/Deck\"\n\n@Options({\n  components: {\n    PlayingCard\n  },\n  props: {\n    menu: Object,\n    deck: Object,\n    label: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  }\n})\nexport default class CardHandWindow extends Vue {\n  deck!: Deck\n  menu!: Menu\n  label: string = \"\"\n  scaledCard: Card = new Card({})\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .card-hand-window {\n    //z-index: 10;\n    background-color: rgba($component-background-color, 0.5);\n    position: relative;\n  }\n\n  .cards-wrapper {\n    overflow-x: auto;\n    overflow-y: visible;\n\n    border: 3px solid black;\n    border-radius: $border-radius;\n  }\n\n  .cards {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(30px, max-content));\n    grid-auto-columns: 30px;\n    grid-template-rows: 200px;\n    grid-auto-flow: column;\n    grid-gap: 10px;\n    transform: scale(1);\n    transform-origin: top left;\n\n    // The last card sticks out with a width that depends on card count and screen width.\n    // This is difficult to calculate, so we just make sure there is always space for one entire card extra.\n    width: calc(100% - #{$playing-card-width});\n  }\n\n  .scaled {\n    transform: scale(1.06);\n    z-index: 2;\n    border-color: #939393;\n  }\n\n  .label-wrapper {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    h1, h2, h3, h4, p {\n      margin: 0;\n    }\n  }\n\n  .label-row {\n    display: flex;\n  }\n\n  .label {\n    padding: 2px 5px;\n    border-top-right-radius: $border-radius;\n    border-top: 2px solid black;\n    border-right: 2px solid black;\n    background-color: $window-background-color;\n\n    display: grid;\n    grid-auto-flow: column;\n    grid-gap: 5px;\n    margin-right: 5px;\n  }\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport Deck from \"@/cards/Deck\"\n\n@Options({\n  components: {\n    PlayingCard\n  },\n  props: {\n    menu: Object,\n    deck: Object,\n    label: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  }\n})\nexport default class CardHandWindow extends Vue {\n  deck!: Deck\n  menu!: Menu\n  label: string = \"\"\n  scaledCard: Card = new Card({})\n}\n","import { render } from \"./CardHandWindow.vue?vue&type=template&id=10326fb9&scoped=true\"\nimport script from \"./CardHandWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./CardHandWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./CardHandWindow.vue?vue&type=style&index=0&id=10326fb9&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-10326fb9\"\n\nexport default script","<template>\n  <div class=\"dialogue-card window\" :class=\"{'no-title': title === undefined}\">\n    <ChatView class=\"text\" :lines=\"game.currentDialogue\">\n    </ChatView>\n    <div v-if=\"title !== undefined\" style=\"grid-area: r;\">\n      <h1>{{ title }}</h1>\n    </div>\n    <!--<img :src=\"require('@/assets/devil-512px.webp')\" class=\"speaker-profile\"/>-->\n    <div class=\"buttons\">\n      <template v-for=\"button in game.buttons\" v-bind:key=\"button\">\n        <TextButton class=\"next-button\" @click=\"button.fun()\" v-html=\"button.label\">\n        </TextButton>\n      </template>\n      <!--<TextButton v-if=\"game.allowNextStage()\" class=\"next-button\" @click=\"game.nextStage()\">\n        <p style=\"margin: 0;\">{{ game.buttonLabel }}</p>\n      </TextButton>-->\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport globalState from '@/store/globalState'\nimport SaveSystem from '@/SaveSystem'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport Menu from \"@/Menu\"\nimport ChatView from \"@/components/ChatView.vue\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton, ChatView\n  },\n  props: {\n    menu: Object,\n    title: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class DialogueCard extends Vue {\n  isLoaded = false\n  menu!: Menu\n  title!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .dialogue-card {\n    display: grid;\n    grid-gap: 10px;\n    grid-template-rows: auto 1fr 60px;\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      \"r\"\n      \"t\"\n      \"n\";\n    padding: 10px;\n\n    .text {\n      grid-area: t;\n    }\n\n    .buttons {\n      grid-area: n;\n    }\n\n    .round-counter {\n      grid-area: r;\n    }\n\n    .cards-to-pick {\n      grid-area: p;\n    }\n\n    .bonus-rolls {\n      grid-area: b;\n    }\n  }\n\n  .no-title {\n    grid-template-areas:\n      \"t\"\n      \"t\"\n      \"n\";\n  }\n\n  .speaker-profile {\n    grid-area: b;\n\n    box-sizing: border-box;\n    width: 100%;\n    border: 1px solid white;\n    border-radius: 8px;\n  }\n\n  .buttons {\n    display: flex;\n    background-color: $component-background-color;\n    border-radius: $border-radius;\n    border: 1px solid black;\n\n    .next-button {\n      flex: 1;\n      margin: 5px 0 5px 5px;\n      border: $component-border-style;\n      border-radius: $border-radius;\n\n      &:first-child {\n        //margin-left: 0;\n      }\n\n      &:last-child {\n        margin-right: 5px;\n      }\n    }\n  }\n\n  h1, h2, h3 {\n    margin: 0;\n  }\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport globalState from '@/store/globalState'\nimport SaveSystem from '@/SaveSystem'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport Menu from \"@/Menu\"\nimport ChatView from \"@/components/ChatView.vue\"\n\n@Options({\n  components: {\n    ValueMeter, TextButton, ChatView\n  },\n  props: {\n    menu: Object,\n    title: String\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class DialogueCard extends Vue {\n  isLoaded = false\n  menu!: Menu\n  title!: string\n}\n","import { render } from \"./DialogueCard.vue?vue&type=template&id=35f1dcd9&scoped=true\"\nimport script from \"./DialogueCard.vue?vue&type=script&lang=ts\"\nexport * from \"./DialogueCard.vue?vue&type=script&lang=ts\"\n\nimport \"./DialogueCard.vue?vue&type=style&index=0&id=35f1dcd9&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-35f1dcd9\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport CardHandWindow from \"@/components/CardHandWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, DiceView, DialogueCard, DialogueStatusCard, CardHandWindow\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    },\n    handDeck: function (): Deck {\n      if (this.showActivatedCards) return this.game.player.hand.copy().addDeck(this.game.pickedCards)\n      return this.game.pickedCards\n    }\n  }\n})\nexport default class GameScreen extends Vue {\n  menu!: Menu\n  scaledCard: Card = new Card({})\n  showActivatedCards: boolean = false\n}\n","import { render } from \"./GameScreen.vue?vue&type=template&id=be81ac38&scoped=true\"\nimport script from \"./GameScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./GameScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./GameScreen.vue?vue&type=style&index=0&id=be81ac38&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-be81ac38\"\n\nexport default script","import Game from \"@/Game\"\n\nexport default class Dice {\n  private _value: number = 1\n  public max: number\n  private _locked: boolean = false\n  private isRolling: boolean = false\n  private valueUsed: boolean = true // True when dice has been rolled but its value has not yet been used\n\n  private game: Game\n\n  // @ts-ignore\n  constructor(max: number, game: Game = undefined) {\n    this.max = max\n    this.game = game\n  }\n\n  load(game: Game) {\n    this.game = game\n  }\n\n  roll() {\n    if (this.isRolling || this.locked) return\n    this.isRolling = true\n    this.rollingDice(9)\n  }\n\n  /** Returns the dice value and marks this dice as used until it is rolled again. */\n  useValue(): number {\n    this.valueUsed = true\n    return this.value\n  }\n\n  get isUsed(): boolean {\n    return this.valueUsed\n  }\n\n  private rollingDice(rollsLeft: number) {\n    if (rollsLeft > 0) {\n      this._value = rollsLeft\n      setTimeout(() => {\n        this.rollingDice(rollsLeft - 1)\n      }, 50)\n    } else {\n      this._value = Math.floor(Math.random() * this.max) + 1\n      if (this.game.currentRolls.findIndex(x => x == this._value) != -1) {\n        //console.log(`Rolled ${this._value}, rerolling.`)\n        this._value = Math.floor(Math.random() * this.max) + 1\n      }\n\n      this.valueUsed = false\n      this.game.notifyDiceRoll(this.value)\n      this.isRolling = false\n    }\n  }\n\n  set locked(value: boolean) {\n    this._locked = value\n  }\n\n  get locked(): boolean {\n    return this._locked || !this.isUsed\n  }\n\n  get value(): number {\n    return this._value\n  }\n\n  get rolling(): boolean {\n    return this.isRolling\n  }\n}\n","import MarkdownIt from \"markdown-it\"\n\nexport default class GameButton {\n  private _label!: string\n  public fun: () => any\n\n  constructor(label: string, fun: () => any) {\n    this.label = label\n    this.fun = fun\n  }\n\n  setLabel(label: string): GameButton {\n    this.label = label\n    return this\n  }\n\n  set label(value: string) {\n    let md = new MarkdownIt()\n    this._label = md.render(value)\n  }\n\n  get label(): string {\n    return this._label\n  }\n}\n","import Game from \"@/Game\"\nimport Card from \"@/cards/Card\"\nimport GameButton from \"@/GameButton\"\nimport { reactive } from \"vue\"\nimport ChatMessage from \"@/ChatMessage\"\n\nexport default abstract class GameStage {\n  public id: string = \"stage\"\n  protected game: Game\n  protected args: any = {}\n  protected _nextStage: GameStage | undefined\n  protected _allowDiceBuy: boolean = false\n  public activeComponent: string = \"GameScreen\"\n\n  public endpoints: { [key: string]: () => any } = {}\n\n  private state: any = reactive({\n    buttons: []\n  })\n\n  protected nextButton: GameButton = new GameButton(\"Next\", () => this.nextStage())\n\n  protected constructor(game: Game, id: string) {\n    this.game = game\n    this.id = id\n  }\n\n  onStart() {}\n\n  onResume() {}\n\n  onEnd() {}\n\n  onDiceRoll(values: number[]) {}\n\n  onCardClick(card: Card) {}\n\n  link(stage: GameStage): GameStage {\n    this._nextStage = stage\n    return stage\n  }\n\n  resumeStage(stage: GameStage) {\n    this.game.setStage(stage)\n    stage.onResume()\n  }\n\n  nextStage(stage: GameStage | undefined = undefined, args: any = undefined) {\n    this.onEnd()\n    if (stage != undefined) {\n      this.gotoNext(stage, args)\n    } else if (this._nextStage != undefined) {\n      this.gotoNext(this._nextStage, args)\n    } else {\n      this.game.setStage(this)\n    }\n  }\n\n  allowDiceBuy(): boolean {\n    return this._allowDiceBuy\n  }\n\n  createMessage(text: string) {\n    this.game.print(text)\n  }\n\n  sendMessage(msg: ChatMessage) {\n    this.game.sendMessage(msg)\n  }\n\n  private gotoNext(stage: GameStage, args: any = undefined) {\n    this.game.setStage(stage)\n    stage.args = args\n    stage.onStart()\n  }\n\n  get buttons(): GameButton[] {\n    return this.state.buttons\n  }\n\n  set buttons(value: GameButton[]) {\n    this.state.buttons = value\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport GameButton from \"@/GameButton\"\n\nexport default class TextStage extends GameStage {\n  private myText: string\n\n  constructor(game: Game, text: string = \"\") {\n    super(game, \"text\")\n    this.myText = text\n    this.buttons = [this.nextButton]\n  }\n\n  onStart() {\n    this.createMessage(this.myText)\n  }\n}\n","import DrawPreference from \"@/cards/DrawPreference\"\nimport Deck from \"@/cards/Deck\"\n\nexport default class Player {\n  public preferences: DrawPreference[]\n  public hand: Deck = new Deck()\n\n  constructor() {\n    this.preferences = []\n  }\n}\n","import Game from \"@/Game\"\nimport GameStage from \"@/stages/GameStage\"\n\nexport default abstract class GameMode {\n  public readonly game: Game\n\n  constructor(game: Game) {\n    this.game = game\n  }\n\n  abstract get firstStage(): GameStage\n\n  start() {\n    this.firstStage.onStart()\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Dice from \"@/Dice\"\nimport Card from \"@/cards/Card\"\nimport Deck from \"@/cards/Deck\"\nimport PickStage from \"@/stages/PickStage\"\nimport HighlightStage from \"@/stages/HighlightStage\"\n\nexport default class IntensityStage extends GameStage {\n  private pickStage!: PickStage\n  private parentCard!: Card\n  private deck: Deck = new Deck([])\n  private done: boolean = false\n\n  constructor(game: Game) {\n    super(game, \"intensity\")\n  }\n\n  onStart() {\n    this.pickStage = this.args.pickStage\n    this.parentCard = this.args.parentCard\n    this._allowDiceBuy = (this.args.allowDiceBuy != undefined) ? this.args.allowDiceBuy : true\n    //this.text = `demon: Ah, you got ${this.parentCard.name}.`\n    this.game.diceCount = 1\n    if (this.parentCard.type == 'numeric') {\n      this.createMessage(this.game.dialogue['intensityStage'])\n    } else {\n      this.createMessage(this.game.dialogue['intensityStageSelection'])\n      if (this.parentCard.levels >= 4) {\n        this.game.diceCount = 2\n        this.createMessage(`demon: Since this card is mostly just personal preference anyways, I'll let you have an extra dice for free.`)\n      }\n    }\n    this.done = false\n\n    this.deck = new Deck(this.parentCard.subcards).sortByLevel()\n    this.game.drawnCards = this.deck\n    this.game.diceSize = this.deck.size()\n  }\n\n  onDiceRoll(values: number[]) {\n    if (this.done) return\n    this.done = true\n    this.game.lockDice(true)\n\n    let intensities: Deck = this.deck.pick(values)\n    this.nextStage(new HighlightStage(this.game), { pickStage: this.pickStage, highlightedCards: intensities })\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Dice from \"@/Dice\"\nimport Card from \"@/cards/Card\"\nimport Deck from \"@/cards/Deck\"\nimport PickStage from \"@/stages/PickStage\"\nimport IntensityStage from \"@/stages/IntensityStage\"\n\nexport default class HighlightStage extends GameStage {\n  private pickStage!: PickStage\n  private highlightedCards: Deck = new Deck([])\n  private done: boolean = false\n\n  constructor(game: Game) {\n    super(game, \"highlight\")\n  }\n\n  onStart() {\n    this.pickStage = this.args.pickStage\n    this.highlightedCards = this.args.highlightedCards\n    this._allowDiceBuy = (this.args.allowDiceBuy != undefined) ? this.args.allowDiceBuy : true\n    if (this.highlightedCards.size() == 1) {\n      this.createMessage(`You got **${this.highlightedCards.cards[0].fullTitle}**. Click on it to add it to your hand.`)\n    } else {\n      this.createMessage(`Since you rolled multiple dice you may choose any of the highlighted cards.`)\n    }\n\n    for (let c of this.highlightedCards.cards) {\n      c.highlight = true\n    }\n\n    this.done = false\n  }\n\n  onCardClick(card: Card) {\n    if (card.highlight) {\n      for (let c of this.highlightedCards.cards) {\n        c.highlight = false\n        c.scale = false\n      }\n      if (card.isParent) {\n        this.pickStage.deck.removeCard(card)\n        this.nextStage(new IntensityStage(this.game), { pickStage: this.pickStage, parentCard: card, allowDiceBuy: this._allowDiceBuy })\n      } else {\n        this.pickStage.deck.removeCard(card)\n        this.game.pickCard(card)\n        this.resumeStage(this.pickStage)\n      }\n    }\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Card from \"@/cards/Card\"\nimport Dice from \"@/Dice\"\nimport ValueMod from \"@/effects/ValueMod\"\nimport HighlightStage from \"@/stages/HighlightStage\"\nimport Deck from \"@/cards/Deck\"\nimport GameButton from \"@/GameButton\"\nimport util from \"@/util\"\nimport Ending from \"@/Ending\"\n\nexport default class EndStage extends GameStage {\n  constructor(game: Game) {\n    super(game, \"end\")\n    this.activeComponent = \"HandView\"\n\n    this.endpoints.end = () => {\n      this.end()\n    }\n  }\n\n  onStart() {\n    this.game.pickedCards.sortByFamily()\n    let ending: Ending = this.game.menu.endings!.chooseEnding(this.game.player.hand)\n    ending.createDialogueTree(this).start()\n  }\n\n  end() {\n    this.createMessage(this.game.dialogue['endStage'])\n    this.buttons = [\n      new GameButton(\"Save Screenshot\", () => { util.screenshot('cards', `hand-${this.game.pickedCards.size()}`) }),\n      new GameButton(\"Back to Menu\", () => { this.game.end() })\n    ]\n  }\n\n  /*nextStage(stage: GameStage | undefined = undefined, args: any = undefined) {\n    //this.game.restart()\n    //super.nextStage(stage, args)\n    this.activeComponent = \"StartMenu\"\n  }*/\n}\n","import MarkdownIt from \"markdown-it\"\n\nexport default class ChatMessage {\n  name: string\n  text: string\n\n  constructor(name: string = \"\", text: string = \"\") {\n    this.name = name\n    this.text = text\n  }\n\n  static parseLine(line: string): ChatMessage {\n    let md = new MarkdownIt({ breaks: true })\n    let name = \"narrator\"\n    let text = line\n      .replace(/[\\u2018\\u2019]/g, \"'\") // Replace curly singly quotes\n      .replace(/[\\u201C\\u201D]/g, '\"') // Replace curly double quotes\n\n    if (line.startsWith(\"demon: \")) {\n      name = \"demon\"\n      text = line.replace(\"demon: \", \"\")\n    }\n    if (line.startsWith(\"player: \")) {\n      name = \"player\"\n      text = line.replace(\"player: \", \"\")\n    }\n\n    return new ChatMessage(name, text.split(\"\\n\").map(t => md.render(t)).join(\"\\n\"))\n  }\n\n  static parseLines(text: string): ChatMessage[] {\n    let messages = text.split(/\\n\\n/)\n      .filter((line: string) => { return line.length > 0 })\n      .map((line: string) => ChatMessage.parseLine(line))\n\n    return messages\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport ChatMessage from \"@/ChatMessage\"\n\nexport default class DialogueNode {\n  private stage: GameStage\n\n  public readonly id: { id: string; index: number }\n\n  /** If this node is selectable, title may be used to represent it on a button. */\n  public readonly title: string\n\n  /** The message content of this node. */\n  private _msg: ChatMessage\n\n  private _options: DialogueNode[]\n\n  public endpoint: string = \"\"\n\n  constructor(id: { id: string; index: number }, stage: GameStage, msg: ChatMessage, title: string = \"\") {\n    this.stage = stage\n    this.id = id\n    this.title = title\n    this._msg = msg\n    this._options = []\n  }\n\n  get msg(): ChatMessage {\n    return this._msg\n  }\n\n  addOption(option: DialogueNode): DialogueNode {\n    this._options.push(option)\n    return this\n  }\n\n  get options(): DialogueNode[] {\n    return this._options\n  }\n\n}\n","import GameStage from \"@/stages/GameStage\"\nimport ChatMessage from \"@/ChatMessage\"\nimport DialogueNode from \"@/DialogueNode\"\nimport GameButton from \"@/GameButton\"\nimport util from \"@/util\"\n\nexport default class DialogueTree {\n\n  private stage: GameStage\n  private nodes: { [id: string]: DialogueNode[]} = {}\n  private activeNode: DialogueNode | undefined\n  private firstNode: DialogueNode | undefined\n\n  constructor(stage: GameStage, nodes: { [id: string]: DialogueNode[]}) {\n    this.stage = stage\n    this.nodes = nodes\n  }\n\n  get currentMessage(): ChatMessage {\n    return (this.activeNode) ? this.activeNode.msg : new ChatMessage(\"\", \"Error: Dialogue tree not initialized.\")\n  }\n\n  get options(): DialogueNode[] {\n    return (this.activeNode) ? this.activeNode.options : []\n  }\n\n  getOptionButtons(options: DialogueNode[]): GameButton[] {\n    let buttons: GameButton[] = []\n\n    for (let option of options) {\n      buttons.push(new GameButton(option.title, () => {\n        this.select(option)\n      }))\n    }\n\n    this.stage.buttons = buttons\n    return buttons\n  }\n\n  start() {\n    if (this.firstNode != undefined) this.select(this.firstNode)\n    else console.error(`Could not start dialogue tree as there was no first node.`)\n  }\n\n  select(option: DialogueNode) {\n    if (option.endpoint == \"\") {\n      this.goto(option.id.id, option.id.index)\n    } else {\n      let endpoint = this.stage.endpoints[option.endpoint]\n      if (endpoint != undefined) endpoint()\n      else console.error(`Could not select option \"${option.id}.${option.id.index}\" because endpoint ${option.endpoint} is undefined.`)\n    }\n  }\n\n  private goto(id: string, index: number) {\n    let node = this.nodes[id][index]\n    if (node == undefined) {\n      console.error(`Could not find dialogue node with id ${id}.${index}`)\n      return\n    }\n\n    this.activeNode = node\n    this.getOptionButtons(node.options)\n    this.stage.sendMessage(this.currentMessage)\n  }\n\n  /**\n   * Creates a linear dialogue tree from a series of messages.\n   * @param stage the stage to attach to\n   * @param messages to use as nodes\n   * @param endpointId name of the endpoint to call when done\n   * @param endpointLabel label of the button that will call the endpoint\n   */\n  static createLinear(stage: GameStage, messages: ChatMessage[], endpointId: string, endpointLabel: string): DialogueTree {\n    let nodes: { [id: string]: DialogueNode[]} = {}\n    let id = util.uuid()\n    nodes = this.linearDialogueToNodes(stage, nodes, messages, id, \"Next\")\n\n    let lastNode = nodes[id][messages.length - 1]\n\n    let endpoint = new DialogueNode({ id: id, index: messages.length }, stage, new ChatMessage(), endpointLabel)\n    endpoint.endpoint = endpointId\n    lastNode.options.push(endpoint)\n\n    let tree = new DialogueTree(stage, nodes)\n    tree.firstNode = nodes[id][0]\n\n    return tree\n  }\n\n  static parseDialogue(state: any, stage: GameStage): DialogueTree {\n    // Create a map of all nodes in this tree\n    let nodes: { [id: string]: DialogueNode[]} = {}\n    for (let node of state.nodes) {\n      let id = node.id\n      let title = (node.title) ? node.title : \"Next\"\n\n      // One node may have many lines of text.\n      let messages = (node.text) ? ChatMessage.parseLines(node.text) : []\n\n      // Each line should be used to create a separate node\n      this.linearDialogueToNodes(stage, nodes, messages, id, title)\n\n      // Some nodes don't have any text, so create at least one node for each node\n      if (nodes[id].length == 0) nodes[id][0] = new DialogueNode({ id: id, index: 0 }, stage, new ChatMessage(), title)\n    }\n\n    // Create links between nodes with completely different ids\n    for (let node of state.nodes) {\n      let options = (node.options) ? node.options : []\n      let endpoint = (node.endpoint) ? node.endpoint : \"\"\n\n      let subnodes = nodes[node.id]\n      let lastNode = subnodes[subnodes.length - 1]\n\n      for (let optionId of options) {\n        // The option entry point is always the first subnode\n        if (nodes[optionId] == undefined) {\n          console.error(`The \"${node.id}\" node has an unknown option \"${optionId}\". It has been skipped.`)\n          continue\n        }\n        lastNode.addOption(nodes[optionId][0])\n      }\n      lastNode.endpoint = endpoint\n    }\n\n    let tree = new DialogueTree(stage, nodes)\n    // Set our active node as the first node in the parsed state\n    //tree.goto(state.nodes[0].id, 0)\n    tree.firstNode = nodes[state.nodes[0].id][0]\n\n    return tree\n  }\n\n  private static linearDialogueToNodes(stage: GameStage, nodes: { [id: string]: DialogueNode[]}, messages: ChatMessage[], id: string, title = \"Next\") {\n    // Each line should be used to create a separate node\n    nodes[id] = []\n    for (let [i, msg] of messages.entries()) {\n      let node = new DialogueNode({ id: id, index: i }, stage, msg, (i == 0) ? title : \"Next\")\n      nodes[id][i] = node\n\n      // Link the last node to this one. The very last node will not be linked here, but have options set later.\n      if (i >= 1) nodes[id][i - 1].addOption(node)\n    }\n\n    return nodes\n  }\n\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Card from \"@/cards/Card\"\nimport Dice from \"@/Dice\"\nimport ValueMod from \"@/effects/ValueMod\"\nimport Deck from \"@/cards/Deck\"\nimport PickStage from \"@/stages/PickStage\"\nimport GameButton from \"@/GameButton\"\nimport util from \"@/util\"\nimport BonusStage from \"@/stages/BonusStage\"\nimport EndStage from \"@/stages/EndStage\"\nimport ChatMessage from \"@/ChatMessage\"\nimport DialogueTree from \"@/DialogueTree\"\n\nexport default class TransformStage extends GameStage {\n  constructor(game: Game) {\n    super(game, \"transform\")\n\n    this.endpoints.nextStage = () => {\n      this.nextStage()\n    }\n\n    this.endpoints.nextTransformation = () => {\n      if (this.nextCard != undefined) {\n        this.activateCard(this.nextCard)\n      }\n    }\n  }\n\n  onStart() {\n    this._nextStage = this.args.nextStage\n\n    if (this.game.pickedCards.size() > 0) {\n      this.buttons = [new GameButton(`Activate **${this.nextCard.fullTitle}**`, () => this.activateCard(this.nextCard))]\n    } else {\n      this.buttons = [this.nextButton]\n    }\n\n    this.game.diceCount = 0\n    this.game.drawnCards = new Deck([])\n  }\n\n  onEnd() {\n    this.game.pickedCards = new Deck()\n  }\n\n  private get nextCard(): Card {\n    return this.game.pickedCards.cards[0]\n  }\n\n  activateCard(card: Card) {\n    this.game.pickedCards.removeCard(card)\n    this.game.drawnCards.addCard(card)\n    this.game.player.hand.addCard(card)\n    this.createNextLinearSegment(card)\n  }\n\n  createNextLinearSegment(card: Card) {\n    let messages\n    if (card.transformation != \"\") {\n      messages = ChatMessage.parseLines(card.transformation)\n    } else {\n      messages = ChatMessage.parseLines(`You don't feel any different.`)\n    }\n\n    if (this.nextCard == undefined) {\n      let label = \"Next Round\"\n      if (this.game.round.fraction == 1) {\n        if (this.game.state.bonusRolls.value > 0 && !this.game.state.isBonusRound) {\n          label = \"To Bonus Round\"\n        } else {\n          label = \"To Epilogue\"\n        }\n      }\n\n      DialogueTree.createLinear(this, messages, \"nextStage\", label).start()\n    } else {\n      DialogueTree.createLinear(this, messages,\n        \"nextTransformation\", `Activate **${this.nextCard.fullTitle}**`).start()\n    }\n  }\n\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Card from \"@/cards/Card\"\nimport Dice from \"@/Dice\"\nimport ValueMod from \"@/effects/ValueMod\"\nimport HighlightStage from \"@/stages/HighlightStage\"\nimport Deck from \"@/cards/Deck\"\nimport EndStage from \"@/stages/EndStage\"\nimport GameButton from \"@/GameButton\"\nimport TransformStage from \"@/stages/TransformStage\"\n\nexport default class BonusStage extends GameStage {\n  private pickedCards: Deck = new Deck([])\n  private leftToPick: number = 0\n  public deck: Deck = new Deck([])\n\n  constructor(game: Game) {\n    super(game, \"bonus\")\n  }\n\n  onStart() {\n    this.createMessage(this.game.dialogue['bonusStage'])\n    this.deck = this.game.deck.withoutFamily('reward').draw(12) // TODO Consider Game card preferences\n    this.game.state.drawnCards = this.deck\n\n    this.game.round.addValue(1)\n    this.game.state.cardsPickedThisRound = 0\n    this.leftToPick = this.game.state.bonusRolls.value\n    this.game.state.cardsToPick = this.leftToPick\n    this.game.diceCount = 2\n    this.game.diceSize = this.deck.size()\n    this.game.state.isBonusRound = true\n    this._allowDiceBuy = false\n\n    if (this.leftToPick == 0) {\n      this.onResume()\n      this.nextStage(new EndStage(this.game))\n    }\n  }\n\n  onResume() {\n    this.game.state.drawnCards = this.deck\n    this.game.diceCount = 2\n    this.game.diceSize = this.deck.size()\n\n    if (this.leftToPick == 0) {\n      this.game.diceCount = 0\n      this.createMessage(`demon: Great, you've completed the bonus round.`)\n      this._nextStage = new EndStage(this.game)\n      this.nextStage(new TransformStage(this.game), { nextStage: this._nextStage })\n      this.game.lockDice(true)\n    }\n  }\n\n  onDiceRoll(values: number[]) {\n    if (this.leftToPick > 0) {\n      this.leftToPick -= 1\n      this.pickedCards = this.deck.pick(values)\n      this.game.lockDice(true)\n\n      this.nextStage(new HighlightStage(this.game), { pickStage: this, highlightedCards: this.pickedCards, allowDiceBuy: false })\n    }\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport TextStage from \"@/stages/TextStage\"\nimport Dice from \"@/Dice\"\nimport Card from \"@/cards/Card\"\nimport Deck from \"@/cards/Deck\"\nimport IntensityStage from \"@/stages/IntensityStage\"\nimport HighlightStage from \"@/stages/HighlightStage\"\nimport BonusStage from \"@/stages/BonusStage\"\nimport GameButton from \"@/GameButton\"\nimport BargainStage from \"@/stages/BargainStage\"\nimport TransformStage from \"@/stages/TransformStage\"\nimport EndStage from \"@/stages/EndStage\"\n\nexport default class PickStage extends GameStage {\n  private leftToPick: number = 0 // How many cards should be picked in this stage\n  private diceCount: number = 1\n  public deck: Deck = new Deck([])\n\n  constructor(game: Game) {\n    super(game, \"pick\")\n  }\n\n  onStart() {\n    this.leftToPick = this.args.cardsToPick\n    this._nextStage = this.args.drawStage\n\n    this.createMessage(this.game.dialogue['pickStage'])\n    this.deck = this.game.drawnCards\n\n    this.diceCount = 1\n    this.game.diceCount = this.diceCount\n    this.game.diceSize = this.deck.size()\n    this.buttons = []\n    this._allowDiceBuy = true\n  }\n\n  onResume() {\n    this.game.drawnCards = this.deck\n    this.diceCount = Math.max(1, this.diceCount - 1)\n    this.game.diceCount = this.diceCount\n    this.game.diceSize = this.deck.size()\n    this._allowDiceBuy = true\n    if (this.leftToPick == 0) {\n      this.createMessage(\n        `demon: Good job! You completed round ${this.game.round.value}.\\n` +\n        `Time to see what those cards will do to you!`)\n      this.game.lockDice(true)\n      //this.buttons = [this.nextButton.setLabel(\"Next Round\")]\n\n      if (this.game.round.fraction == 1) {\n        if (this.game.state.bonusRolls.value > 0 && !this.game.state.isBonusRound) {\n          this._nextStage = new BonusStage(this.game)\n        } else {\n          this._nextStage = new EndStage(this.game)\n        }\n      }\n\n      this.nextStage(new TransformStage(this.game), { nextStage: this._nextStage })\n      /*this.buttons = [\n        new GameButton(`Activate **${this.game.pickedCards.cards[0].fullTitle}**`,\n          () => this.nextStage(new TransformStage(this.game),\n            { nextStage: this._nextStage })\n        )]*/\n\n      /*this.buttons.push(new GameButton(\"Devil's Bargain\", () => this.nextStage(new BargainStage(this.game), { nextStage: this._nextStage })))*/\n    }\n  }\n\n  onDiceRoll(values: number[]) {\n    if (this.leftToPick > 0) {\n      this.leftToPick -= 1\n      let highlightedCards = this.deck.pick(values)\n      this.game.lockDice(true)\n      this.diceCount = values.length\n\n      this.nextStage(new HighlightStage(this.game), { pickStage: this, highlightedCards: highlightedCards })\n    }\n  }\n\n  /*nextStage(stage: GameStage | undefined = undefined, args: any = undefined) {\n    super.nextStage(new TransformStage(this.game), { nextStage: this._nextStage })\n  }*/\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport PickStage from \"@/stages/PickStage\"\nimport GameButton from \"@/GameButton\"\nimport util from \"@/util\"\n\nexport default class DrawStage extends GameStage {\n  private allowNext: boolean = true\n  private availableExtraDraws: number = 1\n\n  constructor(game: Game) {\n    super(game, \"draw\")\n  }\n\n  onStart() {\n    this.createMessage(this.game.dialogue['drawStage'])\n    this.game.state.drawnCards = this.game.drawCards(8)\n    this.game.diceSize = Math.min(6, this.game.state.drawnCards.size())\n    this.allowNext = false\n    this.availableExtraDraws = 1\n    this.buttons = []\n    this.game.round.addValue(1)\n    this.game.state.cardsPickedThisRound = 0\n    this.game.state.cardsToPick = 0\n    this.game.diceCount = 1\n    this._allowDiceBuy = false\n  }\n\n  onResume() {\n    this.createMessage(this.game.dialogue['drawStagePostBan'])\n    this.game.diceSize = Math.min(6, this.game.state.drawnCards.size())\n    this.allowNext = false\n    this.availableExtraDraws = 1\n    this.buttons = []\n    this.game.state.cardsPickedThisRound = 0\n    this.game.state.cardsToPick = 0\n    this.game.diceCount = 1\n    this._allowDiceBuy = false\n  }\n\n  onDiceRoll(values: number[]) {\n    if (this.allowNext) return\n    let value = Math.min(...values)\n    this.game.state.cardsToPick = value\n    this.createMessage(`demon: You will have to pick ${this.game.state.cardsToPick} cards this round.\\nIf you want to pick either more or fewer cards, you can do so, but you also get an extra bonus roll.`)\n    this.allowNext = true\n    this.updateButtons()\n    this.game.lockDice(true)\n  }\n\n  nextStage() {\n    if (this.allowNext) super.nextStage(new PickStage(this.game), { cardsToPick: this.game.state.cardsToPick, drawStage: this })\n  }\n\n  addDraws(value: number) {\n    this.game.state.bonusRolls.addValue(1)\n    this.game.state.cardsToPick = util.clamp(this.game.state.cardsToPick + value, 1, 6)\n    if (value >= 0) {\n      this.createMessage(`demon: An extra pick? Guess you're seeing something good, huh? You'll pick ${this.game.state.cardsToPick} cards this round.`)\n    } else {\n      this.createMessage(`demon: Alright, you only have to pick ${this.game.state.cardsToPick} cards this round. But you do get an extra roll in the bonus round.`)\n    }\n    this.updateButtons()\n  }\n\n  updateButtons() {\n    let buttons = []\n    if (this.availableExtraDraws > 0) {\n      this.availableExtraDraws -= 1\n      if (this.game.state.cardsToPick > 1 && this.game.state.bonusRolls.value < this.game.state.bonusRolls.max) {\n        buttons.push(new GameButton(\"Pick 1 less\", () => { this.addDraws(-1) }))\n      }\n      if (this.game.state.cardsToPick < 6 && this.game.state.bonusRolls.value < this.game.state.bonusRolls.max) {\n        buttons.push(new GameButton(\"Pick 1 more\", () => { this.addDraws(1) }))\n      }\n    }\n    buttons.push(this.nextButton)\n    this.buttons = buttons\n  }\n}\n","import GameStage from \"@/stages/GameStage\"\nimport Game from \"@/Game\"\nimport GameButton from \"@/GameButton\"\nimport DialogueTree from \"@/DialogueTree\"\n\nexport default class DialogueStage extends GameStage {\n\n  constructor(game: Game) {\n    super(game, \"dialogue\")\n    this.activeComponent = \"DialogueScreen\"\n  }\n\n  onStart() {\n    //this.text = this.tree.text.text\n    //this.buttons = this.tree.getOptionButtons()\n    //console.log(\"Started\", this.tree.getOptionButtons())\n    //this.tree.getOptionButtons()\n  }\n}\n","import Game from \"@/Game\"\nimport GameMode from \"@/GameMode\"\nimport TextStage from \"@/stages/TextStage\"\nimport GameButton from \"@/GameButton\"\nimport DrawStage from \"@/stages/DrawStage\"\nimport GameStage from './stages/GameStage'\nimport DialogueTree from \"@/DialogueTree\"\nimport DialogueStage from \"@/stages/DialogueStage\"\n\nexport default class StoryMode extends GameMode {\n  private stage1: GameStage\n\n  constructor(game: Game) {\n    super(game)\n\n    this.stage1 = new DialogueStage(this.game)\n    let stageD = new DrawStage(this.game)\n\n    this.stage1.endpoints.drawStage = () => this.stage1.nextStage(stageD)\n    this.stage1.endpoints.leave = () => this.game.menu.endGame()\n    DialogueTree.parseDialogue(this.game.dialogue2, this.stage1).start()\n  }\n\n  get firstStage(): GameStage {\n    return this.stage1\n  }\n}\n","import { reactive, toRaw } from 'vue'\nimport Deck from \"@/cards/Deck\"\nimport globalState from \"@/store/globalState\"\nimport Dice from \"@/Dice\"\nimport Card from \"@/cards/Card\"\nimport GameStage from \"@/stages/GameStage\"\nimport TextStage from \"@/stages/TextStage\"\nimport PickStage from \"@/stages/PickStage\"\nimport ValueRange from \"@/effects/ValueRange\"\nimport GameButton from \"@/GameButton\"\nimport Menu from \"@/Menu\"\nimport MarkdownIt from \"markdown-it\"\nimport Player from \"@/Player\"\nimport GameMode from \"@/GameMode\"\nimport StoryMode from \"@/StoryMode\"\nimport ChatMessage from \"@/ChatMessage\"\nimport Ending from \"@/Ending\"\nimport Endings from \"@/Endings\"\n\nexport default class Game {\n  // State variables are all given default values in restart function\n  state = reactive({\n    deck: new Deck(),\n    dice: [] as Dice[],\n    drawnCards: new Deck([]) as Deck,\n    pickedCards: new Deck([]) as Deck,\n    stage: new TextStage(this) as GameStage,\n    round: new ValueRange(0, 0, 3),\n    isBonusRound: false,\n    cardsToPick: 0,\n    cardsPickedThisRound: 0,\n    rewardRolls: new ValueRange(0, 0, 8),\n    bonusRolls: new ValueRange(0, 0, 8),\n    player: new Player(),\n    lines: [] as ChatMessage[]\n  })\n\n  public dialogue: any\n  public dialogue2: any\n  public menu: Menu\n\n  private gameMode: GameMode\n\n  public static maxDice: number = 5\n\n  constructor(menu: Menu, gameMode = undefined) {\n    this.menu = menu\n    this.dialogue = JSON.parse(globalState().dialogueString.value)\n    this.dialogue2 = JSON.parse(globalState().dialogue2String.value)\n\n    // Reset state variables\n    this.state.deck = new Deck().createNew().pack()\n    this.state.dice = []\n    this.state.drawnCards = new Deck([])\n    this.state.pickedCards = new Deck([])\n    this.state.round = new ValueRange(0, 0, 3)\n    this.state.isBonusRound = false\n    this.state.cardsToPick = 0\n    this.state.cardsPickedThisRound = 0\n    this.state.rewardRolls = new ValueRange(0, 0, 8)\n    this.state.bonusRolls = new ValueRange(0, 0, 8)\n    this.state.lines = []\n\n    this.gameMode = (gameMode != undefined) ? gameMode! : new StoryMode(this)\n    this.state.stage = this.gameMode.firstStage\n\n    this.state.deck.shuffle()\n    this.lockDice(true)\n    this.gameMode.start()\n    console.log(\"Deck size:\", this.state.deck.size(), this.state.deck.allLevels.length)\n\n    /** Replaces currently drawn cards. */\n    // @ts-ignore\n    window.gredraw = (value: number) => {\n      if (!(this.state.stage.id == 'draw' || this.state.stage.id == 'pick' || this.state.stage.id == 'bonus')) {\n        return `Can not redraw cards in this stage.`\n      }\n      let cards = this.drawCards(value)\n      this.state.drawnCards = cards\n      if (this.state.stage.id == 'pick') (this.state.stage as PickStage).deck = cards\n      return `Drew ${value} cards, ${this.deck.size()} cards remain in the current deck.`\n    }\n\n    // @ts-ignore\n    window.groll = (value: number) => {\n      this.state.stage.onDiceRoll([value])\n    }\n\n    // @ts-ignore\n    window.gameComponent = () => {\n      return this.activeComponent\n    }\n  }\n\n  end() {\n    this.menu.endGame()\n  }\n\n  /** Draws cards from this games current deck using correct preferences. */\n  drawCards(amount: number): Deck {\n    return this.state.deck.draw(amount)\n  }\n\n  /** Adds a card to the players hand */\n  pickCard(card: Card) {\n    this.state.pickedCards.addCard(card)\n    this.state.cardsPickedThisRound += 1\n  }\n\n  nextStage() {\n    this.state.stage.nextStage()\n  }\n\n  get buttons(): GameButton[] {\n    return this.state.stage.buttons as GameButton[]\n  }\n\n  setStage(stage: GameStage) {\n    this.state.stage = stage\n  }\n\n  currentRolls: number[] = []\n  notifyDiceRoll(value: number) {\n    this.currentRolls.push(value)\n\n    if (this.allDiceReady) {\n      this.state.stage.onDiceRoll(this.diceValues)\n      this.currentRolls = []\n\n      for (let die of this.state.dice) {\n        die.useValue()\n      }\n    }\n  }\n\n  get diceValues(): number[] {\n    let values = []\n    for (let die of this.state.dice) {\n      values.push(die.value)\n    }\n    return values\n  }\n\n  get allDiceReady(): boolean {\n    return this.diceReadyCount == this.state.dice.length\n  }\n\n  get diceReadyCount(): number {\n    let ready = 0\n    for (let die of this.state.dice) {\n      if (!die.isUsed) ready += 1\n    }\n    return ready\n  }\n\n  get diceRollingCount(): number {\n    let rollCount = 0\n    for (let die of this.state.dice) {\n      if (die.rolling) rollCount += 1\n    }\n    return rollCount\n  }\n\n  lockDice(value: boolean) {\n    for (let die of this.state.dice) {\n      die.locked = value\n    }\n  }\n\n  diceAreLocked(): boolean {\n    let locked = 0\n    for (let die of this.state.dice) {\n      if (die.locked) locked += 1\n    }\n    return locked == this.state.dice.length\n  }\n\n  buyDice() {\n    if (!this.allowDiceBuy()) return\n    this.bonusRolls.addValue(1)\n\n    if (this.state.dice.length == 0) this.state.dice.push(new Dice(6, this))\n    else this.state.dice.push(new Dice(this.state.dice[0].max, this))\n  }\n\n  allowDiceBuy(): boolean {\n    return this.state.stage.allowDiceBuy() &&\n      this.diceReadyCount + this.diceRollingCount == 0 &&\n      !this.diceAreLocked() &&\n      this.state.dice.length < Game.maxDice &&\n      this.state.bonusRolls.value < this.state.bonusRolls.max\n  }\n\n  get activeComponent(): string {\n    return this.state.stage.activeComponent\n  }\n\n  set diceCount(value: number) {\n    let dice: Dice[] = []\n    for (let i = 0; i < value; i++) {\n      if (this.state.dice.length == 0) dice.push(new Dice(6, this))\n      else dice.push(new Dice(this.state.dice[0].max, this))\n    }\n    this.state.dice = dice\n  }\n\n  set diceSize(value: number) {\n    for (let i = 0; i < this.state.dice.length; i++) {\n      this.state.dice[i] = new Dice(value, this)\n    }\n  }\n\n  clickCard(card: Card) {\n    this.state.stage.onCardClick(card)\n  }\n\n  get player(): Player {\n    return this.state.player as Player\n  }\n\n  sendMessage(msg: ChatMessage) {\n    this.state.lines.push(msg)\n  }\n\n  print(text: string) {\n    for (let msg of ChatMessage.parseLines(text)) {\n      this.state.lines.push(msg)\n    }\n  }\n\n  get currentDialogue(): ChatMessage[] {\n    return this.state.lines\n  }\n\n  get deck(): Deck {\n    return this.state.deck as Deck\n  }\n\n  get drawnCards(): Deck {\n    return this.state.drawnCards as Deck\n  }\n\n  set drawnCards(value: Deck) {\n    this.state.drawnCards = value\n  }\n\n  get pickedCards(): Deck {\n    return this.state.pickedCards as Deck\n  }\n\n  set pickedCards(value: Deck) {\n    this.state.pickedCards = value\n  }\n\n  get round(): ValueRange {\n    return this.state.round as ValueRange\n  }\n\n  get roundString(): string {\n    if (this.state.isBonusRound) return \"Bonus Round\"\n    return `Round ${this.round.value} of ${this.round.max}`\n  }\n\n  get stageId(): string {\n    return this.state.stage.id\n  }\n\n  get rewardRolls(): ValueRange {\n    return this.state.rewardRolls as ValueRange\n  }\n\n  get bonusRolls(): ValueRange {\n    return this.state.bonusRolls as ValueRange\n  }\n\n  get cardsPickedThisRound(): number {\n    return this.state.cardsPickedThisRound\n  }\n\n  get showDialogueOnly(): boolean {\n    return this.round.value == 0\n  }\n}\n","import Menu from \"@/Menu\"\n\nexport default class Cheat {\n  name: string\n  description: string\n  fun: (menu: Menu, args: any) => any\n\n  constructor(name: string, description: string, cheatFunction: (menu: Menu, args: any) => any) {\n    this.name = name\n    this.description = description\n    this.fun = cheatFunction\n  }\n\n  activate(menu: Menu) {\n    // @ts-ignore\n    window[this.name] = (args: any) => { return this.fun(menu, args) }\n  }\n}\n","import Deck from \"@/cards/Deck\"\nimport FilterSettings from \"@/FilterSettings\"\nimport FilterSetting from \"@/FilterSetting\"\n\nexport default class Requirement {\n  mode: string = \"or\" // or, and\n  private args: string[] = []\n  private operator: string = \">\"\n  private intensity: number = 0\n  private fun: (deck: Deck, args: string[]) => number = Requirement.intensitySum\n\n  constructor(mode: string, args: string[], operator: string, intensity: number, fun: (deck: Deck, args: string[]) => number = Requirement.intensitySum) {\n    this.mode = mode\n    this.args = args\n    this.operator = operator\n    this.intensity = intensity\n    this.fun = fun\n  }\n\n  static functions(name: string): (deck: Deck, args: string[]) => number {\n    let availableFunctions: { [key: string]: (deck: Deck, args: string[]) => number } = {\n      sum: Requirement.intensitySum\n    }\n    return availableFunctions[name]\n  }\n\n  isFulfilled(deck: Deck): boolean {\n    if (this.operator == \"<\") {\n      return this.intensityScore(deck) < this.intensity\n    } else if (this.operator == \"<=\") {\n      return this.intensityScore(deck) <= this.intensity\n    } else if (this.operator == \"==\") {\n      return this.intensityScore(deck) == this.intensity\n    } else if (this.operator == \">=\") {\n      return this.intensityScore(deck) >= this.intensity\n    } else if (this.operator == \">\") {\n      return this.intensityScore(deck) > this.intensity\n    }\n    console.error(`Requirement operator \"${this.operator}\" was not recognized.`)\n    return false\n  }\n\n  intensityScore(deck: Deck): number {\n    return this.fun(deck, this.args)\n  }\n\n  /*load(state: any): Requirement {\n    this.cards = (state.cards) ? state.cards : []\n    this.tags = (state.tags) ? state.tags : []\n    this.intensity = (state.intensity) ? state.intensity : 0\n    this.negated = (state.negated) ? state.negated : false\n\n    return this\n  }*/\n\n  /** Checks if a deck has the cards specified by this requirement. */\n  /*hasRequiredCards(deck: Deck): boolean {\n    let passed = 0\n    for (let card of this.cards) {\n      if (this.intensityOfCard(deck, card) == 0) passed += 1\n    }\n    // In normal mode we pass if all cards passed. In inverted mode, we pass if not all cards passed.\n    if (!this.negated) return passed == this.cards.length\n    else return passed != this.cards.length\n  }*/\n\n  private static intensitySum(deck: Deck, idsOrTags: string[]): number {\n    let sum = 0\n    for (let idOrTag of idsOrTags) {\n      if (Deck.referenceDeck().hasCard(idOrTag)) { // Id may be for card\n        let card = deck.getCardById(idOrTag)\n\n        if (card == undefined) {\n          // Id may be for a parent card, in that case, count the highest available subcard\n          card = deck.pack().getCardById(idOrTag)\n          if (card != undefined) sum += card.subcards[card.subcards.length - 1].level\n\n        } else {\n          sum += Math.max(card.level, 1)\n        }\n      } else if (Deck.referenceDeck().onlyTag(idOrTag).size() > 0) { // Id may be a tag or family name\n        for (let card of deck.onlyTag(idOrTag).cards) {\n          sum += Math.max(card.level, 1)\n          //console.log(`Adding Card ${card.fullTitle} level ${Math.max(card.level, 1)}`)\n        }\n      } else {\n        throw new Error(`Bad requirement \"${this.toString()}\", \"${idOrTag}\" is neither an id, tag or family.`)\n      }\n    }\n    return sum\n  }\n\n  private intensityOfTag(deck: Deck, tag: string): number {\n    return deck.onlyTag(tag).size()\n  }\n\n  /** Checks by how much intensity a deck fulfills a single card or card list. */\n  private intensityOfCard(deck: Deck, card: string | string[]): number {\n    let intensity = 0\n    if (Array.isArray(card)) {\n      for (let c of card) {\n        if (deck.hasCard(c)) intensity += 1\n      }\n    } else {\n      if (deck.hasCard(card)) intensity += 1\n    }\n    return intensity\n  }\n\n  toString(): string {\n    return `${this.mode.toUpperCase()} [${this.args}] [${this.operator}] [${this.intensity}]`\n  }\n\n}\n","import Requirement from \"@/Requirement\"\nimport Deck from \"@/cards/Deck\"\nimport DialogueTree from \"@/DialogueTree\"\nimport GameStage from \"@/stages/GameStage\"\n\nexport default class Ending {\n  public id: string = \"\"\n  public title: string = \"\"\n  public likelihood: number = 0\n  private requirements: Requirement[][] = []\n  private nodes: any[] = [] // Dialogue nodes\n\n  load(state: any) {\n    this.id = state.id\n    this.title = state.title\n    this.likelihood = (state.likelihood) ? state.likelihood : 1000\n    this.requirements = Ending.parseRequirements(state.requirements)\n    this.nodes = (state.nodes) ? state.nodes : []\n  }\n\n  createDialogueTree(stage: GameStage): DialogueTree {\n    return DialogueTree.parseDialogue({ id: this.id, nodes: this.nodes }, stage)\n  }\n\n  isFulfilled(deck: Deck) {\n    try {\n      for (let ors of this.requirements) {\n        let fulfilled = Ending.orGroupFulfilled(deck, ors)\n        if (fulfilled) return true\n      }\n    } catch (e) {\n      console.error(`Could calculate fulfilment for ending \"${this.id}\".\\n${e.message}`)\n    }\n    return false\n  }\n\n  intensityScore(deck: Deck) {\n    let sum = 0\n    try {\n      for (let orGroup of this.requirements) {\n        //console.log(req.toString(), req.intensityScore(deck))\n        if (Ending.orGroupFulfilled(deck, orGroup)) {\n          for (let and of orGroup) {\n            sum += and.intensityScore(deck)\n          }\n        }\n      }\n    } catch (e) {\n      console.error(`Could not calculate intensity score for ending \"${this.id}\".\\n${e.message}`)\n    }\n\n    return sum\n  }\n\n  private static orGroupFulfilled(deck: Deck, orGroup: Requirement[]): boolean {\n    let fulfilled = true\n    for (let req of orGroup) {\n      if (!req.isFulfilled(deck)) {\n        fulfilled = false\n        break\n      }\n    }\n    return fulfilled\n  }\n\n  private static parseRequirements(reqs: string) {\n    let requirements = []\n\n    // Normalize: remove lowercase any newlines\n    reqs = reqs.toLowerCase().replace(/(\\r\\n|\\n|\\r)/gm, \" \")\n    // Create list where each entry is an OR term. Each OR term is a list of AND terms. Each AND term is a string.\n    let ors = reqs.split(/\\bor\\b/).map(or => or.split(/\\band\\b/))\n    for (let ands of ors) {\n      let mode = \"or\"\n      for (let [i, exp] of ands.entries()) {\n        if (i > 0) mode = \"and\"\n\n        exp = exp.trim()\n        let operator = this.getOperator(exp)\n        let left = this.getLeft(exp, operator)\n        let right = this.getRight(exp, operator)\n\n        let [fun, args] = this.stripFun(left)\n        args = args.map((arg: string) => arg.replaceAll(\"\\\"\", \"\"))\n        //console.log(`\\t[${fun}]: [${args}] [${operator}] [${right}]`)\n        requirements.push(new Requirement(mode, args, operator, Number.parseInt(right), Requirement.functions(fun)))\n      }\n    }\n\n    return this.groupRequirements(requirements)\n  }\n\n  private static groupRequirements(reqs: Requirement[]) {\n    let requirements: Requirement[][] = []\n    let group = []\n    for (let req of reqs) {\n      if (req.mode == \"or\" && group.length > 0) {\n        requirements.push(group)\n        group = []\n      }\n      group.push(req)\n    }\n    requirements.push(group)\n\n    return requirements\n  }\n\n  private static stripFun(exp: string): any[] {\n    let funMatch = exp.match(/.*(?=\\()/)\n    let fun\n    if (funMatch != null) fun = funMatch[0]\n    else fun = \"\"\n\n    let args: string[] = [exp]\n    if (fun != \"\") {\n      let expMatch = exp.match(/(?<=\\().*(?=\\))/)\n      if (expMatch != null) args = this.splitArgs(expMatch[0])\n      else console.error(`Bad expression: ${exp}`)\n    }\n\n    return [fun, args]\n  }\n\n  private static splitArgs(args: string): string[] {\n    return args.split(\",\").map(arg => arg.trim())\n  }\n\n  private static getLeft(exp: string, operator: string): string {\n    return exp.split(operator)[0]?.trim()\n  }\n\n  private static getRight(exp: string, operator: string): string {\n    let e = exp.split(operator)[1]?.trim()\n    return e || \"0\"\n  }\n\n  private static getOperator(exp: string): string {\n    let operatorMatch = exp.match(/ > | >= | == | <= | < /)\n    let operator\n    if (operatorMatch == null) operator = \">\"\n    else operator = operatorMatch[0].trim()\n    return operator\n\n  }\n\n}\n","import Requirement from \"@/Requirement\"\nimport Deck from \"@/cards/Deck\"\nimport Ending from \"@/Ending\"\nimport globalState from \"@/store/globalState\"\nimport util from \"@/util\"\n\nexport default class Endings {\n\n  endings: Ending[] = []\n\n  constructor() {\n    for (let state of JSON.parse(globalState().endingsString.value)) {\n      let ending = new Ending()\n      ending.load(state)\n      this.endings.push(ending)\n    }\n  }\n\n  chooseEnding(deck: Deck): Ending {\n    let fulfilled = []\n    for (let ending of this.endings) {\n      if (ending.isFulfilled(deck)) fulfilled.push(ending)\n    }\n    fulfilled.sort((a, b) => a.likelihood - b.likelihood)\n    return fulfilled[0]\n  }\n\n  selectEnding(id: string): Ending {\n    for (let ending of this.endings) {\n      if (ending.id == id) return ending\n    }\n    console.warn(`Could not select ending with id \"${id}\".`)\n    return this.endings[0]\n  }\n\n  correctnessSimulation(iterations: number = 1000) {\n    console.log(`After simulating ${iterations} random hands, endings had the following stats:`)\n\n    let endingsMap: { [id: string]: { fulfilled: number; chosen: number; score: number } } = {}\n    for (let ending of this.endings) {\n      endingsMap[ending.id] = { fulfilled: 0, chosen: 0, score: 0 }\n    }\n\n    // Simulate a bunch of hands\n    for (let i = 0; i < iterations; i++) {\n      let deck = Deck.referenceDeck().shuffle()\n      let drawn = deck.draw(Math.round(3 + Math.random() * (5 * 3 + 8)))\n      let picked = new Deck()\n\n      // Add cards to the hand, if the drawn card is a parent, take a random subcard\n      for (let card of drawn.cards) {\n        if (card.isParent) {\n          picked.addCard(util.pickFrom(card.subcards, Math.random()))\n        } else {\n          picked.addCard(card)\n        }\n      }\n\n      // Keep stats on each ending\n      for (let ending of this.endings) {\n        if (ending.isFulfilled(picked)) {\n          endingsMap[ending.id].fulfilled += 1\n          endingsMap[ending.id].score += ending.intensityScore(picked)\n        }\n      }\n      endingsMap[this.chooseEnding(picked).id].chosen += 1\n    }\n\n    let sortedEndings = [...this.endings].sort((a, b) => endingsMap[b.id].fulfilled - endingsMap[a.id].fulfilled)\n    for (let ending of sortedEndings) {\n      let fulfilled = endingsMap[ending.id].fulfilled\n      let chosen = endingsMap[ending.id].chosen\n      console.log(`${ending.title.padEnd(12)} | Fulfilled ${fulfilled.toString().padStart(4)} times, chosen ${chosen.toString().padStart(4)} times.`)\n    }\n  }\n\n  testBimboEnding() {\n    let ending = this.endings.filter(ending => ending.id == \"bimbo\")[0]\n    let deck = new Deck()\n    deck.addCard(Deck.referenceDeck().getCardById(\"intelligence.intelligence 3\")!)\n    deck.addCard(Deck.referenceDeck().getCardById(\"breast-size.breast size 3\")!)\n    //deck.addCard(Deck.referenceDeck().getCardById(\"intelligence.breast size intelligence 1\")!)\n\n    this.assert(ending.isFulfilled(deck))\n  }\n\n  private assert(value: boolean) {\n    if (!value) console.error(\"Assertion failed\")\n  }\n\n}\n","import Cheat from \"@/Cheat\"\nimport Game from \"@/Game\"\nimport Card from \"@/cards/Card\"\nimport PickStage from \"@/stages/PickStage\"\nimport Deck from \"@/cards/Deck\"\nimport Menu from \"@/Menu\"\nimport EndStage from \"@/stages/EndStage\"\nimport DialogueTree from \"@/DialogueTree\"\nimport Ending from \"@/Ending\"\nimport globalState from \"@/store/globalState\"\nimport Endings from \"@/Endings\"\n\nexport default class Cheatmode {\n  private _menu: Menu\n  private cheats: Cheat[] = [\n    new Cheat(\"roll\",\n      `(value): Rolls all dice to this value.`,\n      (menu, value: number) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        game.state.stage.onDiceRoll([value])\n      }),\n    new Cheat(\"pickCard\",\n      `(name): Picks an unseen card from the current deck and adds it to your hand.`,\n      (menu, name: string) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        let card = game.deck.allLevels.find((c: Card) => c.name.toLowerCase() == name.toLowerCase())\n        if (card != undefined) {\n          game.state.pickedCards.addCard(card)\n          return `Added ${card.name} to hand.`\n        }\n        return `Could not find the ${name} card in the current deck.`\n      }),\n    new Cheat(\"drawCard\",\n      `(name): Picks an unseen card from the current deck and adds it to the list of cards drawn from the deck.`,\n      (menu, name: string) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        let card = game.deck.allLevels.find((c: Card) => c.name.toLowerCase() == name.toLowerCase())\n        if (card != undefined) {\n          game.state.drawnCards.addCard(card)\n          return `Added ${card.name} to hand.`\n        }\n        return `Could not find the ${name} card in the current deck.`\n      }),\n    new Cheat(\"redraw\",\n      `(value): Discard currently drawn cards and replace them with this many.`,\n      (menu, value: number) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        if (!(game.state.stage.id == 'draw' || game.state.stage.id == 'pick' || game.state.stage.id == 'bonus')) {\n          return `Can not redraw cards in this stage.`\n        }\n        let cards = game.drawCards(value)\n        game.state.drawnCards = cards\n        if (game.state.stage.id == 'pick') (game.state.stage as PickStage).deck = cards\n        return `Drew ${value} cards, ${game.deck.size()} cards remain in the current deck.`\n      }),\n    new Cheat(\"deck\",\n      `(): Shows info about the current deck.`,\n      (menu, value: number) => {\n        let game = menu.game\n        if (game == undefined) return \"That command cannot be used from this screen.\"\n\n        return `Deck size: ${game.state.deck.size()}, ${game.state.deck.allLevels.length}`\n      }),\n    new Cheat(\"unlockAllCards\",\n      `(): Permanently unlocks all cards in your collection.`,\n      (menu) => {\n        menu.collection.addDeck(Deck.referenceDeck())\n        menu.save()\n        return `Done`\n      }),\n    new Cheat(\"clearSave\",\n      `(): Clears your save. Warning! your card collection will be lost.`,\n      (menu) => {\n        menu.collection.removeAllCards()\n        menu.save()\n        return `Save cleared`\n      }),\n    new Cheat(\"diagnostics\",\n      `(): Runs debug diagnostics.`,\n      (menu) => {\n        console.log(\"Running diagnostics...\")\n        menu.endings!.correctnessSimulation()\n        return \"Diagnostics completed.\"\n      }),\n    new Cheat(\"toEnd\",\n      `(id): Goes to the end with the specified ID.`,\n      (menu, id: string) => {\n        menu.startGame()\n        let stage = new EndStage(menu.game!) // Use a Dialoguestage instead?\n        menu.game!.state.stage = stage\n\n        let endings: Endings = new Endings()\n        let ending: Ending = endings.selectEnding(id)\n        ending.createDialogueTree(stage).start()\n        return \"End reached.\"\n      })\n  ]\n  private activated: boolean = false\n\n  constructor(menu: Menu) {\n    this._menu = menu\n    // @ts-ignore\n    window.cheatmode = (password: string) => { return this.activateCheats(password) }\n  }\n\n  set menu(menu: Menu) {\n    this._menu = menu\n    this.registerCheats()\n  }\n\n  activateCheats(password: string): string {\n    if (password != \"rose\") return \"Wrong password. Find out the current password by becoming a Patreon supporter!\"\n    this.activated = true\n    this.registerCheats()\n\n    let s = \"Cheatmode activated. Available commands: \\n\\n\"\n    for (let cheat of this.cheats) {\n      s += `${cheat.name}${cheat.description}\\n`\n    }\n    return s\n  }\n\n  private registerCheats() {\n    if (!this.activated) return false\n\n    for (let cheat of this.cheats) {\n      cheat.activate(this._menu)\n    }\n  }\n}\n","import { serializable } from \"serializr\"\n\nexport default class Save {\n  @serializable\n  public readonly name: string\n\n  @serializable\n  public readonly version: string\n\n  @serializable\n  private readonly _state: string\n\n  constructor(name: string, version: string, state: any) {\n    this.name = name\n    this.version = version\n    this._state = JSON.stringify(state)\n  }\n\n  get state(): any {\n    return JSON.parse(this._state)\n  }\n}\n","import Save from \"@/Save\"\nimport { deserialize } from \"serializr\"\n\nexport default class SaveSystem {\n  private saves: {[key: string]: any} // Working copy of all saves. This is a map from save name to save object.\n\n  constructor() {\n    this.saves = this.loadAllFromStorage()\n  }\n\n  public save(name: string, version: string, state: any) {\n    let save: Save = new Save(name, version, state)\n    this.writeToLocalStorage(save)\n  }\n\n  /**\n   * Returns the save, or undefined if no save with that name was found.\n   * @param name\n   */\n  public load(name: string): any {\n    if (name in this.saves) return this.readFromLocalStorage(name)\n    return undefined\n  }\n\n  private deleteFromLocalStorage(name: string) {\n    delete this.saves[name]\n    localStorage.setItem(\"blushingdefeat-saves\", JSON.stringify(this.saves))\n  }\n\n  private writeToLocalStorage(save: Save) {\n    this.saves[save.name] = save\n    localStorage.setItem(\"blushingdefeat-saves\", JSON.stringify(this.saves))\n  }\n\n  private readFromLocalStorage(name: string): Save {\n    return deserialize(Save, this.saves[name]) as unknown as Save\n  }\n\n  private loadAllFromStorage(): {[key: string]: any} {\n    let savesString = localStorage.getItem(\"blushingdefeat-saves\")\n    let saves: {[key: string]: any} = {}\n    if (savesString != null) {\n      saves = JSON.parse(savesString)\n    }\n    return saves\n  }\n}\n","import { serializable } from \"serializr\"\n\nexport default class FilterSetting {\n  @serializable\n  public readonly name: string\n  @serializable\n  public readonly description: string\n  @serializable\n  public readonly tag: string\n  @serializable\n  private _strictness: number = 0\n\n  constructor(tag: string, name: string = \"\", description: string = \"\") {\n    this.tag = tag\n    this.name = name\n    this.description = description\n  }\n\n  load(state: any) {\n    if (state == undefined) return\n\n    this._strictness = state._strictness\n  }\n\n  get strictness(): number {\n    return this._strictness\n  }\n\n  set strictness(value: number) {\n    this._strictness = value\n  }\n}\n","import { list, object, serializable } from \"serializr\"\nimport FilterSetting from \"@/FilterSetting\"\n\nexport default class FilterSettings {\n  @serializable(list(object(FilterSetting)))\n  public filters: FilterSetting[]\n\n  constructor() {\n    this.filters = [\n      new FilterSetting(\"expansion\", \"Expansion\", \"Changes in size to breasts, butt, lips and similar.\"),\n      new FilterSetting(\"iq\", \"Intelligence\", \"Changes that primarily reduce intelligence.\"),\n      new FilterSetting(\"doll\", \"Doll\", \"Transformations focused on making you seem plastic, fake or doll-like.\"),\n      new FilterSetting(\"pet\", \"Pet\", \"Changes that cause pet-like behavior, inability to walk, having to wear a leash etc.\"),\n      new FilterSetting(\"animal\", \"Animal-like\", \"Changes that give horns, ears, a tail etc. Note that you always remain primarily human.\"),\n      new FilterSetting(\"lactation\", \"Lactation\", \"Changes that cause lactation.\"),\n      //new FilterSetting(\"reward\", \"Reward\", \"Don't care for rewards? Turn them off here.\"),\n    ]\n\n    this.filters.sort((a, b) => (a.name < b.name) ? -1 : 1)\n  }\n\n  load(state: any) {\n    if (state == undefined) return\n\n    for (let filter of state.filters) {\n      let myfilter = this.filters.find(f => f.tag == filter.tag)\n      if (myfilter == undefined) continue\n      myfilter.load(filter)\n    }\n  }\n}\n","import Game from \"@/Game\"\nimport globalState from \"@/store/globalState\"\nimport { reactive, toRaw } from \"vue\"\nimport Deck from \"@/cards/Deck\"\nimport axios from \"axios\"\nimport Cheatmode from \"@/Cheatmode\"\nimport SaveSystem from \"@/SaveSystem\"\nimport { deserialize, serialize } from \"serializr\"\nimport * as html2canvas from \"html2canvas\"\nimport util from \"@/util\"\nimport FilterSettings from \"@/FilterSettings\"\nimport Endings from \"@/Endings\"\n\nexport default class Menu {\n  public static readonly GAME_VERSION = '1.3.0-beta.2'\n\n  private state: any = reactive({\n    game: undefined\n  })\n  private _activeComponent: string = \"StartMenu\"\n  private cheatmode: Cheatmode | undefined\n  private saveSystem: SaveSystem = new SaveSystem()\n  public collection: any = reactive(new Deck([]))\n  public settings: any = reactive(new FilterSettings())\n  public endings: Endings | undefined\n\n  constructor() {\n    globalState().load().then(() => {\n      let save = this.saveSystem.load(\"save-1\")\n      if (save != undefined) {\n        this.collection = reactive(Deck.createFromCardStates(save.state.collection))\n        this.collection.sortByFamily()\n        if (this.collection.size() != save.state.collection.length) {\n          console.warn(`Not all saved cards were loaded. Expected size ${save.state.collection.length}, actual size ${this.collection.size()}.`)\n          console.warn(save.state.collection)\n        }\n        this.settings.load(save.state.settings)\n        //this.save() // Save to remove any non-legal ids\n      }\n      Deck.filters = this.settings.filters\n      this.endings = new Endings()\n    })\n\n    this.cheatmode = new Cheatmode(this)\n  }\n\n  get game(): Game | undefined {\n    return this.state.game\n  }\n\n  startGame() {\n    this.state.game = new Game(this)\n    this.activeComponent = this.game!.activeComponent\n  }\n\n  endGame() {\n    this.collection.addDeck(this.state.game.player.hand)\n    this.save()\n\n    this.state.game = undefined\n    this.activeComponent = \"StartMenu\"\n  }\n\n  save() {\n    this.collection.sortByFamily()\n    this.saveSystem.save(\"save-1\", this.version, { collection: toRaw(this.collection).cards, settings: toRaw(this.settings) })\n  }\n\n  showCollection() {\n    this.activeComponent = \"CollectionScreen\"\n  }\n\n  showSettings() {\n    this.activeComponent = \"SettingsScreen\"\n  }\n\n  get activeComponent(): string {\n    if (this.game != undefined) return this.game.activeComponent\n    return this._activeComponent\n  }\n\n  set activeComponent(value: string) {\n    this._activeComponent = value\n  }\n\n  artCredits(): any[] {\n    let artists: any = JSON.parse(globalState().artistsString.value)\n    for (let artist of artists) {\n      artist.cards = []\n    }\n    let deck = Deck.referenceDeck()\n    for (let card of deck.allLevels) {\n      // Find the artist of this card\n      let artist = artists.find((a: any) => a.artist == card.artist)\n      if (artist == undefined) continue\n\n      if (card.isParent) {\n        artist.cards.push(`${card.name}`)\n      } else if (card.hasParent) {\n        //artist.cards.push(`${card.parent.name}: ${card.name}`)\n        artist.cards.push(`${card.parent!.name}`)\n      } else {\n        artist.cards.push(`${card.name}`)\n      }\n    }\n    for (let artist of artists) {\n      artist.cards = [...new Set(artist.cards)] // Remove duplicates\n      artist.cards.sort()\n    }\n    return artists\n  }\n\n  patreonCredits() {\n    let credits = globalState().patreonCredits.value\n    return credits\n  }\n\n  get patchNotes() {\n    return JSON.parse(globalState().patchNotesString.value)\n  }\n\n  get version(): string {\n    return Menu.GAME_VERSION\n  }\n}\n","<template>\n  <template v-if=\"isLoaded\">\n    <div class=\"menu-view\">\n      <div class=\"window text-window\">\n        <div class=\"title-row\">\n          <p></p>\n          <h1>Ditzy Dice</h1>\n          <p>v{{menu.version}}</p>\n        </div>\n        <div class=\"window start-menu-text\">\n          <p>Greetings!</p>\n          <p>This is an <b>erotic transformation</b> game. That means <b>sexual content</b>, focusing on bodily and mental transformations related to bimbofication. If you are not comfortable with, or legally allowed to view such content, turn around now. </p>\n          <p>Otherwise, if you have feedback or questions, let me know in the comments!</p>\n        </div>\n\n        <div class=\"start-menu-buttons\">\n          <TextButton class=\"farm-button start-button\" @click=\"menu.startGame()\">\n            <h2>Start</h2>\n          </TextButton>\n          <TextButton class=\"farm-button collection-button\" @click=\"menu.showCollection()\">\n            <h3>My Collection</h3>\n          </TextButton>\n          <TextButton class=\"farm-button settings-button\" @click=\"menu.showSettings()\">\n            <h3>Settings</h3>\n          </TextButton>\n          <TextButton class=\"farm-button patch-button\" @click=\"$emit('goto-view', 'PatchNotesScreen')\">\n            <h3>Patch Notes</h3>\n          </TextButton>\n          <TextButton class=\"farm-button credits-button\" @click=\"$emit('goto-view', 'CreditsScreen')\">\n            <h3>Credits</h3>\n          </TextButton>\n          <TextButton class=\"farm-button exit-button\" @click=\"window().location.href = 'https://www.blushingdefeat.com/play/'\">\n            <h3>Exit to Blushing Defeat</h3>\n          </TextButton>\n        </div>\n      </div>\n      <div class=\"window extras\">\n        <PatreonButton2 :image=\"require('@/assets/patreon-banner-no-text.webp')\"\n                      link=\"https://www.patreon.com/gardamuse\"\n                      class=\"patreon\"\n                      >\n          Thank you for your support on <span style=\"color: #f96854;\">Patreon</span>!\n        </PatreonButton2>\n        <h3>An extra thank you to</h3>\n        <div class=\"extra-thanks\">\n          <p v-for=\"credit in menu.patreonCredits()\" class=\"credit\">{{ credit.name }}</p>\n        </div>\n      </div>\n      <div class=\"window more\">\n        <h2>More on Blushing Defeat</h2>\n        <RelatedThumb image=\"https://www.blushingdefeat.com/projects/cowgirl-dairy-farm/thumb-2.webp\"\n                      link=\"https://www.blushingdefeat.com/play/cowgirl-dairy-farm/\">\n          Cowgirl Dairy Farm\n        </RelatedThumb>\n        <RelatedThumb image=\"https://www.blushingdefeat.com/play/bimbo-personality-quiz/thumb.jpg\"\n                      link=\"https://www.blushingdefeat.com/play/bimbo-personality-quiz/\">\n          Bimbo Personality Quiz\n        </RelatedThumb>\n        <RelatedThumb image=\"https://www.blushingdefeat.com/projects/bimbo-booth/thumb.jpg\"\n                      link=\"https://www.blushingdefeat.com/bimbo-booth/\">\n          Bimbofication Booth\n        </RelatedThumb>\n        <RelatedThumb image=\"https://www.blushingdefeat.com/projects/mispell/misspell-thumb.png\"\n                      link=\"https://www.blushingdefeat.com/mispell/\">\n          Mispell\n        </RelatedThumb>\n      </div>\n\n      <!--<PatreonButton></PatreonButton>-->\n\n    </div>\n  </template>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport RelatedThumb from \"@/components/RelatedThumb.vue\"\nimport PatreonButton2 from \"@/components/PatreonButton2.vue\"\nimport PatchNotesScreen from \"@/components/screens/PatchNotesScreen.vue\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton, PatreonButton2, RelatedThumb, PatchNotesScreen\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    //let farm = new Farm()\n    //await farm.load()\n    //this.farm = farm\n    this.isLoaded = true\n  }\n})\nexport default class StartMenu extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.menu-view {\n  display: grid;\n  grid-template-rows: auto 3fr 2fr;\n  grid-template-columns: minmax(0, 1fr) minmax(600px, 2fr) minmax(300px, 1fr) minmax(0, 1fr);\n  grid-template-areas:\n    \". p . .\"\n    \". t e .\"\n    \". t m .\";\n  grid-gap: 10px;\n  margin: 20px;\n\n  @media screen and (max-width: 1000px){\n    grid-template-rows: repeat(4, auto);\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      \"t\"\n      \"p\"\n      \"e\"\n      \"m\";\n    margin: 0;\n  }\n}\n\n.text-window {\n  grid-area: t;\n\n  display: flex;\n  flex-direction: column;\n  min-height: 80vh;\n  height: 100%;\n  max-width: 600px;\n  margin: auto;\n\n  box-sizing: border-box;\n\n  p {\n    margin-top: 1em;\n    margin-bottom: 1em;\n  }\n\n  @media screen and (max-width: $mobile-width){\n    padding: 10px\n  }\n}\n\n.extras {\n  grid-area: e;\n\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  max-width: 600px;\n  padding: 0;\n  margin: auto;\n\n  .patreon {\n    //height: 150px;\n  }\n\n  h3 {\n    padding: 0 20px;\n    margin: 5px;\n  }\n\n  .extra-thanks {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 40px repeat(auto-fit, auto);\n    grid-column-gap: 5px;\n    padding: 0 20px;\n\n    background: rgba($component-background-color, 0.75);\n  }\n}\n\n.more {\n  grid-area: m;\n\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  max-width: 600px;\n  margin: auto;\n\n  display: grid;\n  grid-template-rows: 40px 1fr 1fr;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 10px;\n  grid-template-areas:\n    \"t t\"\n    \". .\"\n    \". .\";\n\n  h2 {\n    grid-area: t;\n  }\n}\n\n.start-menu-text {\n  background: rgba($component-background-color, 0.75);\n  margin: 10px auto 50px auto;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.start-menu-buttons {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: repeat(5, minmax(70px, 1fr));\n  grid-gap: 10px;\n\n  height: 100%;\n  //background-color: white;\n\n  .start-button {\n    grid-column: span 2;\n  }\n\n  .collection-button {\n\n  }\n\n  .settings-button {\n\n  }\n\n  .patch-button {\n\n  }\n\n  .credits-button {\n\n  }\n\n  .exit-button {\n    grid-column: span 2;\n    grid-row: -2;\n  }\n\n  .text-button {\n    width: 100%;\n    box-sizing: border-box;\n    padding: 15px;\n    border-radius: $border-radius;\n  }\n}\n\n.title-row {\n  display: grid;\n  grid-template-columns: minmax(50px, 1fr) 3fr minmax(50px, 1fr);\n  grid-auto-rows: minmax(40px, 1fr);\n  align-items: center;\n\n  h1, h2, p {\n    margin: 0;\n  }\n\n  h1 {\n    text-align: center;\n    //line-height: 50px;\n  }\n\n  p {\n    text-align: right;\n    //line-height: 50px;\n  }\n}\n\n.text-button {\n  border: $component-border-style;\n\n  display: table;\n  div {\n    display: table-cell;\n    vertical-align: middle;\n  }\n\n  & > h1, & > h2, & > h3, & > h4, & > p {\n    display: table-cell;\n    vertical-align: middle;\n    text-align: center;\n  }\n}\n</style>\n","<template>\n  <a href=\"https://www.patreon.com/gardamuse\" :style=\"cssVars\" class=\"patreon-button\" />\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\n\n@Options({\n  props: {\n    label: String\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--background-image': 'url(' + require('@/assets/patreon-banner.webp') + ')'\n      }\n    }\n  }\n})\nexport default class PatreonButton extends Vue {\n  label!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n.patreon-button {\n  background: var(--background-image);\n  background-position: center top;\n  background-repeat: no-repeat;\n  background-size: cover;\n  display: block;\n  width: 1fr;\n  //max-width: 300px;\n  height: 200px;\n  margin: 10px auto;\n  border: $component-border-style;\n  backface-visibility: hidden;\n  transition: transform 0.3s;\n\n  &:hover {\n    transform: scale(1.024) translateY(0px) translateX(0px);\n  }\n}\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\n\n@Options({\n  props: {\n    label: String\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--background-image': 'url(' + require('@/assets/patreon-banner.webp') + ')'\n      }\n    }\n  }\n})\nexport default class PatreonButton extends Vue {\n  label!: string\n}\n","import { render } from \"./PatreonButton.vue?vue&type=template&id=d5159fe2&scoped=true\"\nimport script from \"./PatreonButton.vue?vue&type=script&lang=ts\"\nexport * from \"./PatreonButton.vue?vue&type=script&lang=ts\"\n\nimport \"./PatreonButton.vue?vue&type=style&index=0&id=d5159fe2&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-d5159fe2\"\n\nexport default script","<template>\n  <a class=\"related-thumb\" :href=\"link\">\n    <h3><slot></slot></h3>\n    <img :src=\"image\">\n  </a>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    image: String,\n    link: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class RelatedThumb extends Vue {\n  image!: string\n  link!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.related-thumb {\n  position: relative;\n  display: block;\n  min-height: 100px;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  transition: transform $selection-time;\n\n  h3 {\n    position: absolute;\n    bottom: 0;\n    z-index: 2;\n    margin: 10px;\n\n    transition: bottom $selection-time, top $selection-time;\n  }\n  img {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    object-position: top;\n    border-radius: $border-radius;\n  }\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    z-index: 1;\n\n    opacity: 0.7;\n    background-image: linear-gradient(0deg, #180202 10%, rgba(#180202, 0.6) 40%, rgba(#180202, 0) 70%);\n    border-bottom-left-radius: $border-radius - 1;\n    border-bottom-right-radius: $border-radius - 1;\n\n    transition: opacity $selection-time;\n  }\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    z-index: 1;\n\n    opacity: 0;\n    background-image: linear-gradient(180deg, #180202 5%, rgba(#180202, 0.3) 100%);\n    border-bottom-left-radius: $border-radius - 1;\n    border-bottom-right-radius: $border-radius - 1;\n\n    transition: opacity $selection-time;\n  }\n\n  &:hover {\n    transform: scale(1.03);\n\n    &::before {\n      //opacity: 0;\n    }\n\n    &::after {\n      //opacity: 1;\n    }\n\n    h3 {\n      //top: 0;\n    }\n  }\n}\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    image: String,\n    link: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class RelatedThumb extends Vue {\n  image!: string\n  link!: string\n}\n","import { render } from \"./RelatedThumb.vue?vue&type=template&id=072ed195&scoped=true\"\nimport script from \"./RelatedThumb.vue?vue&type=script&lang=ts\"\nexport * from \"./RelatedThumb.vue?vue&type=script&lang=ts\"\n\nimport \"./RelatedThumb.vue?vue&type=style&index=0&id=072ed195&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-072ed195\"\n\nexport default script","<template>\n  <a class=\"patreon-button-2\" :href=\"link\">\n    <h2><slot></slot></h2>\n    <img :src=\"image\">\n  </a>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    image: String,\n    link: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class PatreonButton2 extends Vue {\n  image!: string\n  link!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.patreon-button-2 {\n  position: relative;\n  display: block;\n  min-height: 200px;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  transition: transform $selection-time;\n\n  h2, h3 {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 2;\n    margin: 10px;\n    text-align: center;\n    //font-family: \"Croissant One\", \"Open Sans\", \"Helvetica Neue\", Avenir, Helvetica, Arial, sans-serif !important;\n\n    transition: bottom $selection-time, top $selection-time;\n  }\n  img {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    object-position: top;\n    border-radius: $border-radius;\n  }\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    z-index: 1;\n\n    opacity: 0.7;\n    background-image: linear-gradient(180deg, #180202 10%, rgba(#180202, 0.8) 40%, rgba(#180202, 0) 60%);\n    border-bottom-left-radius: $border-radius - 1;\n    border-bottom-right-radius: $border-radius - 1;\n\n    transition: opacity $selection-time;\n  }\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    z-index: 1;\n\n    opacity: 0;\n    background-image: linear-gradient(180deg, #180202 5%, rgba(#180202, 0.3) 100%);\n    border-bottom-left-radius: $border-radius - 1;\n    border-bottom-right-radius: $border-radius - 1;\n\n    transition: opacity $selection-time;\n  }\n\n  &:hover {\n    transform: scale(1.03);\n\n    &::before {\n      //opacity: 0;\n    }\n\n    &::after {\n      //opacity: 1;\n    }\n\n    h3 {\n      //top: 0;\n    }\n  }\n}\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    image: String,\n    link: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class PatreonButton2 extends Vue {\n  image!: string\n  link!: string\n}\n","import { render } from \"./PatreonButton2.vue?vue&type=template&id=3333a497&scoped=true\"\nimport script from \"./PatreonButton2.vue?vue&type=script&lang=ts\"\nexport * from \"./PatreonButton2.vue?vue&type=script&lang=ts\"\n\nimport \"./PatreonButton2.vue?vue&type=style&index=0&id=3333a497&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-3333a497\"\n\nexport default script","<template>\n  <div class=\"menu-view\">\n    <BlushWindow v-on:close=\"$emit('close')\">\n      <template v-slot:title>\n        <h2 style=\"margin: 0;\">Patch Notes</h2>\n      </template>\n      <div class=\"blush-list\">\n        <div v-for=\"patch in menu.patchNotes\" class=\"patch-window\">\n          <h2 v-if=\"patch.name.length > 0\">{{patch.id}} - {{patch.name}}</h2>\n          <h2 v-else>{{patch.id}}</h2>\n          <h4 style=\"font-weight: normal; text-align: right;\">{{patch.date}}</h4>\n          <div class=\"md-patchnotes\" style=\"grid-column: span 2;\" v-html=\"patch.text\"></div>\n        </div>\n      </div>\n    </BlushWindow>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    this.isLoaded = true\n  }\n})\nexport default class PatchNotesScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n</script>\n\n<style lang=\"scss\">\n.md-patchnotes {\n  h1 {\n    font-size: large;\n  }\n\n  ul {\n    list-style-type: none;\n    padding-left: 15px;\n    margin: 10px 0;\n\n    li {\n      border-left: 3px solid #ddd;\n      padding: 0 10px;\n      margin-bottom: 7px;\n      background: rgba($component-background-color, 0);\n\n      ul {\n        padding-left: 1ch;\n        margin: 5px 0 0 0;\n\n        li {\n          list-style-type: disc;\n          list-style-position: inside;\n          color: #ccc;\n          border-left: 0 solid;\n          background: rgba($component-background-color, 0);\n          font-style: italic;\n        }\n      }\n    }\n  }\n}\n</style>\n\n<style scoped lang=\"scss\">\n.menu-view {\n  height: 100vh;\n\n  display: grid;\n  grid-template-rows: auto auto;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    \"t\"\n    \"t\";\n  grid-gap: 20px;\n\n  @media screen and (max-width: $mobile-width){\n    grid-template-areas:\n      \"t\"\n      \"t\";\n    margin: 0;\n  }\n}\n\n.blush-window {\n  grid-area: t;\n\n  box-sizing: border-box;\n  flex-direction: column;\n  min-height: 200px;\n  max-height: 100%;\n  width: 100%;\n  max-width: 700px;\n  margin: 20px auto;\n\n  @media screen and (max-width: $mobile-width){\n    padding: 10px;\n    margin: 0 auto;\n  }\n}\n\n.list-wrapper {\n  display: grid;\n  grid-template-areas: \"c\";\n\n  height: 100%;\n}\n\n.blush-list {\n  grid-area: c;\n\n  box-sizing: border-box;\n  min-height: 100%;\n  border: 1px solid black;\n  border-radius: $border-radius;\n\n  p {\n    margin: 0;\n  }\n}\n\n.patch-window {\n  display: grid;\n  grid-template-rows: auto 1fr;\n  grid-template-columns: 1fr 1fr;\n\n  margin-bottom: 10px;\n  padding: 10px;\n\n  background-color: rgba($component-background-color, 0.75);\n\n  h2, h3, h4, p {\n    margin: 0;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"blush-window\">\n    <slot name=\"title\"></slot>\n    <template v-if=\"!noCross\">\n      <TextButton class=\"farm-button close-button\" @click=\"$emit('close')\">\n        <h3>X</h3>\n      </TextButton>\n    </template>\n    <div class=\"content\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard\n  },\n  props: {\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BlushWindow extends Vue {\n  noCross: boolean = false\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .blush-window {\n    background: $window-background-color;\n    padding: 10px;\n    border: 3px solid black;\n    border-radius: $border-radius;\n\n    box-sizing: border-box;\n    min-height: 100px;\n    width: 100%;\n\n    display: grid;\n    grid-template-rows: 40px auto;\n    grid-template-columns: auto 50px;\n    grid-template-areas:\n    \"t x\"\n    \"c c\";\n    grid-gap: 10px;\n  }\n\n  .close-button {\n    border: 1px solid black;\n    margin: 0;\n    padding: 0;\n\n    h3 {\n      margin: 0;\n    }\n  }\n\n  .content {\n    grid-area: c;\n    overflow-y: auto;\n    height: 100%;\n  }\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport util from \"@/util\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard\n  },\n  props: {\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class BlushWindow extends Vue {\n  noCross: boolean = false\n}\n","import { render } from \"./BlushWindow.vue?vue&type=template&id=640bcb6c&scoped=true\"\nimport script from \"./BlushWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./BlushWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./BlushWindow.vue?vue&type=style&index=0&id=640bcb6c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-640bcb6c\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    this.isLoaded = true\n  }\n})\nexport default class PatchNotesScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n","import { render } from \"./PatchNotesScreen.vue?vue&type=template&id=3f9735b8&scoped=true\"\nimport script from \"./PatchNotesScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./PatchNotesScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./PatchNotesScreen.vue?vue&type=style&index=0&id=3f9735b8&lang=scss\"\nimport \"./PatchNotesScreen.vue?vue&type=style&index=1&id=3f9735b8&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-3f9735b8\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\nimport RelatedThumb from \"@/components/RelatedThumb.vue\"\nimport PatreonButton2 from \"@/components/PatreonButton2.vue\"\nimport PatchNotesScreen from \"@/components/screens/PatchNotesScreen.vue\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton, PatreonButton2, RelatedThumb, PatchNotesScreen\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    //let farm = new Farm()\n    //await farm.load()\n    //this.farm = farm\n    this.isLoaded = true\n  }\n})\nexport default class StartMenu extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n","import { render } from \"./StartMenu.vue?vue&type=template&id=2cab1d82&scoped=true\"\nimport script from \"./StartMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./StartMenu.vue?vue&type=script&lang=ts\"\n\nimport \"./StartMenu.vue?vue&type=style&index=0&id=2cab1d82&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-2cab1d82\"\n\nexport default script","<template>\n  <div class=\"milkfarm dialogue-view\" v-if=\"isLoaded\">\n    <DialogueCard :menu=\"menu\" title=\"Ditzy Dice\"></DialogueCard>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport globalState from '@/store/globalState'\nimport SaveSystem from '@/SaveSystem'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, DialogueCard\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class DialogueScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .milkfarm {\n    background-size: cover;\n    background-attachment: fixed;\n    position: relative;\n\n    min-width: 360px;\n    min-height: 100vh;\n    height: 100vh;\n    box-sizing: border-box; // Include padding in height so that we don't get scrollbars.\n\n    @media only screen and (min-width: 1000px){\n      padding: 10px;\n    }\n\n    @media only screen and (min-width: 1700px){\n      padding-left: 100px;\n      padding-right: 100px;\n    }\n  }\n\n  .dialogue-view {\n    display: grid;\n    grid-template-columns: 1fr minmax(800px, 2fr) 1fr;\n    grid-template-rows: 1fr minmax(600px, 2fr) 1fr;\n    grid-template-areas:\n      \". . .\"\n      \". s .\"\n      \". . .\";\n\n    .cards-wrapper, .picked-cards, .dices {\n      display: none;\n    }\n\n    .dialogue {\n      height: 500px;\n    }\n\n    @media only screen and (max-width: $mobile-width){\n      grid-template-columns: 1fr;\n      grid-template-rows: 1fr;\n      grid-template-areas:\n      \"s\";\n      grid-gap: 0;\n\n      .dialogue {\n        width: 100vw;\n        max-width: 90vw;\n        justify-self: center;\n      }\n    }\n  }\n\n  .dialogue-card {\n    grid-area: s;\n\n    box-sizing: border-box;\n    height: 100%;\n    width: 100%;\n    max-width: 800px;\n    margin: auto;\n  }\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport ValueMeter from '@/components/ValueMeter.vue'\nimport TextButton from '@/components/TextButton.vue'\nimport globalState from '@/store/globalState'\nimport SaveSystem from '@/SaveSystem'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport DiceView from \"@/components/DiceView.vue\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport Menu from \"@/Menu\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, DialogueCard\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class DialogueScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n","import { render } from \"./DialogueScreen.vue?vue&type=template&id=5f4c2c54&scoped=true\"\nimport script from \"./DialogueScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./DialogueScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./DialogueScreen.vue?vue&type=style&index=0&id=5f4c2c54&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-5f4c2c54\"\n\nexport default script","<template>\n  <div class=\"milkfarm\" v-if=\"isLoaded\">\n    <CollectionWindow :deck=\"game.player.hand\"></CollectionWindow>\n    <!--<div class=\"cards-wrapper drawn-cards\">\n      <div class=\"cards\">\n        <template v-for=\"card in game.pickedCards.cards\" v-bind:key=\"card\">\n          <PlayingCard :card=\"card\" :class=\"{'scaled': card.scale}\" @click=\"toggleScale(card);\"></PlayingCard>\n        </template>\n      </div>\n    </div>-->\n    <DialogueCard :menu=\"menu\" title=\"The End\"></DialogueCard>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport CollectionWindow from \"@/components/CollectionWindow.vue\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, DialogueCard, DialogueStatusCard, CollectionWindow\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class HandView extends Vue {\n  isLoaded = false\n  //saveSystem!: SaveSystem\n  //farm!: Farm\n  _game!: Game\n  menu!: Menu\n  scaledCard: Card = new Card({})\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .milkfarm {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: minmax(230px, auto) 1fr;\n    grid-template-areas:\n      \"s\"\n      \"c\";\n    grid-gap: 10px;\n\n    background-size: cover;\n    background-attachment: fixed;\n    position: relative;\n\n    min-width: 360px;\n    min-height: 100vh;\n    box-sizing: border-box; // Include padding in height so that we don't get scrollbars.\n\n    @media only screen and (min-width: 1140px){\n      padding: 10px;\n      grid-template-columns: 1fr 400px;\n      grid-template-rows: 1fr 200px 200px;\n      grid-template-areas:\n      \"c s\"\n      \"c s\"\n      \"c s\";\n\n      height: 100vh;\n    }\n  }\n\n  .dialogue-card {\n    grid-area: s;\n  }\n\n  .collection-window {\n    grid-area: c;\n  }\n\n</style>\n","<template>\n  <div class=\"collection-window\">\n    <div class=\"collection-tabs\">\n      <template v-for=\"tab in tabs\" v-bind:key=\"tab\">\n        <TextButton :class=\"{'active-tab': activeTab === tab}\" @click=\"activateTab(tab)\">\n          <h3>{{ util.capitalize(tab) }}</h3>\n        </TextButton>\n      </template>\n    </div>\n    <div class=\"cards-border\">\n      <div class=\"cards-wrapper\">\n        <div class=\"cards\" id=\"cards\">\n          <template v-for=\"card in internalDeck.cards\" v-bind:key=\"card\">\n            <PlayingCard :card=\"card\" :class=\"{'scaled': card.scale}\" @click=\"activateCard(card);\"></PlayingCard>\n          </template>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, BlushWindow\n  },\n  props: {\n    menu: Object,\n    deck: Object,\n    groupByParent: Boolean\n  },\n  emits: ['close', 'activate-tab', 'activate-card'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    },\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.activeCard = new Card({})\n      this.$emit('activate-tab', tab)\n    },\n    activateCard(card: Card) {\n      this.activeCard = card\n      this.$emit('activate-card', card)\n    },\n    lookup(id: string): Card {\n      return Deck.lookup(id)!\n    }\n  },\n  computed: {\n    tabs(): string[] {\n      return [\n        'all',\n        'behavior',\n        'body',\n        'clothing',\n        'event',\n        'mind',\n        'reward'\n      ]\n    },\n    util() {\n      return util\n    },\n    refDeck(): Deck {\n      return Deck.referenceDeck().useFilters()\n    },\n    internalDeck(): Deck {\n      if (this.isInspectingCard) {\n        return new Deck(this.activeCard.subcards).sortByLevel().useFilters()\n      }\n      if (this.groupByParent) {\n        return this.deck.copy().onlyTag(this.activeTab).pack().unique().sortByName().sortByFamily().useFilters()\n      }\n      return this.deck.copy().onlyTag(this.activeTab).unpack().unique().sortByName().sortByFamily().useFilters()\n    },\n    isInspectingCard(): boolean {\n      return this.activeCard.id != undefined && this.activeCard.isParent\n    }\n  }\n})\nexport default class CollectionWindow extends Vue {\n  menu!: Menu\n  deck!: Deck\n  groupByParent: boolean = false\n  scaledCard: Card = new Card({})\n  activeTab: string = 'all'\n  activeCard: Card = new Card({})\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .collection-window {\n    display: grid;\n    grid-template-rows: 60px 1fr;\n    grid-template-areas:\n      \"t\"\n      \"c\";\n    //height: 500px;\n  }\n\n  $card-background-color: $window-background-color;\n  .cards-border {\n    grid-area: c;\n    z-index: 10;\n\n    background-color: $card-background-color;\n    border: 3px solid black;\n    border-radius: $border-radius;\n    padding: 10px;\n    overflow: hidden;\n  }\n\n  .cards-wrapper {\n    overflow-x: auto;\n    overflow-y: auto;\n\n    padding: 10px;\n    padding-right: 20px;\n    background-color: $component-background-color;\n    border-radius: $border-radius;\n    border: 1px solid black;\n    box-sizing: border-box;\n    height: 100%;\n  }\n\n  .cards {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    grid-template-rows: repeat(auto-fit, $playing-card-height);\n    grid-gap: 10px;\n    justify-items: center;\n    transform: scale(1);\n    transform-origin: top left;\n    //min-height: 100%;\n    padding-bottom: 20px;\n  }\n\n  .scaled {\n    transform: scale(1.06);\n    z-index: 2;\n    border-color: #939393;\n  }\n\n  .collection-tabs {\n    grid-area: t;\n\n    display: flex;\n    height: 63px;\n    margin: 0 5px;\n    overflow-x: auto;\n\n    .text-button {\n      flex-grow: 1;\n      border-top-left-radius: $border-radius;\n      border-top-right-radius: $border-radius;\n      border-top: 3px solid black;\n      border-left: 3px solid black;\n      border-right: 3px solid black;\n      border-bottom: 3px solid black;\n      margin-right: 5px;\n      z-index: 11;\n\n      background-color: darken($card-background-color, 12%);\n\n      &:hover {\n        background-color: darken($card-background-color, 5%);\n      }\n    }\n\n    .active-tab {\n      background-color: $card-background-color;\n      border-bottom-color: $card-background-color;\n      cursor: default;\n\n      &:hover {\n        background-color: darken($card-background-color, 0%);\n      }\n    }\n\n    h1, h2, h3 {\n      margin: 0;\n    }\n  }\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, BlushWindow\n  },\n  props: {\n    menu: Object,\n    deck: Object,\n    groupByParent: Boolean\n  },\n  emits: ['close', 'activate-tab', 'activate-card'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    },\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.activeCard = new Card({})\n      this.$emit('activate-tab', tab)\n    },\n    activateCard(card: Card) {\n      this.activeCard = card\n      this.$emit('activate-card', card)\n    },\n    lookup(id: string): Card {\n      return Deck.lookup(id)!\n    }\n  },\n  computed: {\n    tabs(): string[] {\n      return [\n        'all',\n        'behavior',\n        'body',\n        'clothing',\n        'event',\n        'mind',\n        'reward'\n      ]\n    },\n    util() {\n      return util\n    },\n    refDeck(): Deck {\n      return Deck.referenceDeck().useFilters()\n    },\n    internalDeck(): Deck {\n      if (this.isInspectingCard) {\n        return new Deck(this.activeCard.subcards).sortByLevel().useFilters()\n      }\n      if (this.groupByParent) {\n        return this.deck.copy().onlyTag(this.activeTab).pack().unique().sortByName().sortByFamily().useFilters()\n      }\n      return this.deck.copy().onlyTag(this.activeTab).unpack().unique().sortByName().sortByFamily().useFilters()\n    },\n    isInspectingCard(): boolean {\n      return this.activeCard.id != undefined && this.activeCard.isParent\n    }\n  }\n})\nexport default class CollectionWindow extends Vue {\n  menu!: Menu\n  deck!: Deck\n  groupByParent: boolean = false\n  scaledCard: Card = new Card({})\n  activeTab: string = 'all'\n  activeCard: Card = new Card({})\n}\n","import { render } from \"./CollectionWindow.vue?vue&type=template&id=2325dd69&scoped=true\"\nimport script from \"./CollectionWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./CollectionWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./CollectionWindow.vue?vue&type=style&index=0&id=2325dd69&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-2325dd69\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport Game from '@/Game'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport Menu from \"@/Menu\"\nimport DialogueStatusCard from \"@/components/DialogueStatusCard.vue\"\nimport CollectionWindow from \"@/components/CollectionWindow.vue\"\nimport DialogueCard from \"@/components/DialogueCard.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, DialogueCard, DialogueStatusCard, CollectionWindow\n  },\n  props: {\n    menu: Object\n  },\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    }\n  },\n  computed: {\n    game: function (): Game {\n      return this.menu.game\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class HandView extends Vue {\n  isLoaded = false\n  //saveSystem!: SaveSystem\n  //farm!: Farm\n  _game!: Game\n  menu!: Menu\n  scaledCard: Card = new Card({})\n}\n","import { render } from \"./HandView.vue?vue&type=template&id=4333d81a&scoped=true\"\nimport script from \"./HandView.vue?vue&type=script&lang=ts\"\nexport * from \"./HandView.vue?vue&type=script&lang=ts\"\n\nimport \"./HandView.vue?vue&type=style&index=0&id=4333d81a&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-4333d81a\"\n\nexport default script","<template>\n  <template v-if=\"isLoaded\">\n    <div class=\"menu-view\">\n      <div class=\"window text-window\" id=\"help-window\">\n        <div>\n          <h1 style=\"margin: 0;\">Credits</h1>\n        </div>\n        <TextButton class=\"farm-button\" @click=\"$emit('close')\">\n          <h3>X</h3>\n        </TextButton>\n        <div class=\"farm-list help-list\">\n          <div class=\"farm-window credits-block\">\n            <h2>Development and Design</h2>\n            <h3 class=\"credit\">Gardamuse</h3>\n          </div>\n          <div class=\"farm-window credits-block\">\n            <h2>Writing</h2>\n            <Credit name=\"Duhad\" link=\"https://www.deviantart.com/motherduhad\" linkText=\"DeviantArt\">\n              Transformation reactions and effects.\n            </Credit>\n          </div>\n          <div class=\"farm-window credits-block\">\n            <h2>Artwork</h2>\n            <template v-for=\"credit in menu.artCredits()\" v-bind:key=\"credit\">\n              <Credit :name=\"credit.artist\" :link=\"credit.link\" :linkText=\"credit.linkText\">\n                For illustrations on:\n                <span v-for=\"(card,index) in credit.cards\">\n                  {{ card }}<span v-if=\"index !== credit.cards.length - 1\">, </span>\n                </span>.\n              </Credit>\n            </template>\n          </div>\n          <div class=\"farm-window credits-block\">\n            <h2>Graphics</h2>\n            <Credit name=\"Transparent Textures\" link=\"https://www.transparenttextures.com/\" linkText=\"Website\">\n              Card textures.\n            </Credit>\n            <Credit name=\"Artbreeder\" link=\"https://www.artbreeder.com\" linkText=\"Website\">\n              Tool for generating images.\n            </Credit>\n          </div>\n          <div class=\"farm-window credits-block\">\n            <h2>Special Thanks to</h2>\n            <h3 v-for=\"credit in menu.patreonCredits()\" class=\"credit\">{{ credit.name }}</h3>\n            <p class=\"credit\">And everyone else who supports Blushing Defeat on Patreon!</p>\n          </div>\n          <div class=\"farm-window credits-block double-columns\">\n            <h2>Game Inspired by</h2>\n            <Credit name=\"Xsentisus\" link=\"https://www.deviantart.com/xsentisus\" linkText=\"DeviantArt\">\n              For their\n              <a href=\"https://www.deviantart.com/xsentisus/art/Bimbo-Dice-700-Watcher-25k-Page-Views-SPECIAL-865174538\"  target=\"_blank\">\n                Bimbo Dice</a>\n              caption series.\n            </Credit>\n            <Credit name=\"MythicalCreatureBone\" link=\"https://www.deviantart.com/mythicalcreaturebone\" linkText=\"DeviantArt\">\n              For their\n              <a href=\"https://imgur.com/a/bXlN6Fe\" target=\"_blank\">Eliminated</a>\n              choose-your-own-adventure.\n            </Credit>\n            <Credit name=\"GrapplerOfBooty\" link=\"https://www.deviantart.com/grapplerofbooty\" linkText=\"DeviantArt\">\n              For their\n              <a href=\"https://www.deviantart.com/grapplerofbooty/art/Transmoria-The-Realm-of-Chang-Faerie-Mind-Shaper-859293252\" target=\"_blank\">\n                Transoria</a>\n              statblocks and\n              <a href=\"https://www.deviantart.com/grapplerofbooty/art/MTG-TG-Self-Inflicted-Stupidity-790655990\" target=\"_blank\">MTG</a>\n              card series.\n            </Credit>\n            <Credit name=\"TF Me Please!\" link=\"https://www.tumblr.com/blog/view/transformmeplease\" linkText=\"Tumblr\">\n              For their transformation spins caption series.\n            </Credit>\n            <Credit name=\"Unknown\" link=\"https://imgur.com/W0YNL6l\" linkText=\"Imgur\">\n              For the\n              <a href=\"https://imgur.com/W0YNL6l\" target=\"_blank\">\n                Bimbofication Curse</a>\n              spreadsheet.\n            </Credit>\n          </div>\n        </div>\n      </div>\n    </div>\n  </template>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton, Credit\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    //let farm = new Farm()\n    //await farm.load()\n    //this.farm = farm\n    this.isLoaded = true\n  }\n})\nexport default class CreditsScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.menu-view {\n  //max-width: $full-page-width;\n  height: 100vh;\n\n  display: grid;\n  grid-template-rows: auto auto;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    \"t\"\n    \"t\";\n  grid-gap: 20px;\n\n  @media screen and (max-width: $mobile-width){\n    grid-template-areas:\n      \"t\"\n      \"t\";\n    margin: 0;\n  }\n}\n\n.text-window {\n  grid-area: t;\n\n  box-sizing: border-box;\n  flex-direction: column;\n  min-height: 200px;\n  max-height: 100%;\n  width: 100%;\n  max-width: 700px;\n  margin: 20px auto;\n\n  display: grid;\n  grid-template-rows: 30px auto;\n  grid-template-columns: auto 50px;\n  grid-template-areas:\n    \"t x\"\n    \"c c\";\n  grid-gap: 10px;\n\n  p {\n    margin-top: 1em;\n    margin-bottom: 1em;\n  }\n\n  @media screen and (max-width: $mobile-width){\n    padding: 10px;\n    margin: 0 auto;\n  }\n}\n\n.text-button {\n  border: $component-border-style;\n\n  display: table;\n  div {\n    display: table-cell;\n    vertical-align: middle;\n  }\n\n  & > h3 {\n    display: table-cell;\n    vertical-align: middle;\n    text-align: center;\n  }\n}\n\n.help-list {\n  grid-area: c;\n\n  overflow-y: auto;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  margin-top: 10px;\n\n  .farm-window {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n  }\n\n  p {\n    margin: 0;\n  }\n}\n\n.credits-block {\n  h2 {\n    margin: 0;\n    margin-left: 5px;\n    color: $tertiary-color;\n  }\n\n  h3 {\n    margin: 0;\n  }\n\n  .credit {\n    background-color: rgba($component-background-color, 0.7);\n    padding: 10px 5px;\n    margin-bottom: 5px;\n  }\n\n  a {\n    transition: color $selection-time;\n\n    &:hover {\n      color: $highlight-color;\n    }\n  }\n}\n\n.double-columns {\n  display: grid !important;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 40px repeat(auto-fit, auto);\n  grid-column-gap: 5px;\n\n  h2 {\n    grid-column: span 2;\n  }\n}\n\n</style>\n","<template>\n  <div class=\"credit\">\n    <h3>\n      {{ name }}\n      | <span style=\"font-size: 0.8em;\" ><a :href=\"link\" target=\"_blank\" >{{ linkText }}</a></span>\n    </h3>\n    <p style=\"font-size: 0.8em; color: #ccc;\">\n      <slot></slot>\n    </p>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    name: String,\n    link: String,\n    linkText: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class Credit extends Vue {\n  name!: string\n  link!: string\n  linkText!: string\n}\n</script>\n\n<style scoped lang=\"scss\">\n.credit {\n  background-color: $component-background-color;\n  padding: 10px 5px;\n  margin-bottom: 5px;\n}\n\nh2, h3, p {\n  margin: 0;\n}\n\na:hover {\n  color: $highlight-color;\n}\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport util from \"@/util\"\nimport Menu from \"@/Menu\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton\n  },\n  props: {\n    name: String,\n    link: String,\n    linkText: String\n  },\n  emits: ['goto-view', 'close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n  }\n})\nexport default class Credit extends Vue {\n  name!: string\n  link!: string\n  linkText!: string\n}\n","import { render } from \"./Credit.vue?vue&type=template&id=27444a3f&scoped=true\"\nimport script from \"./Credit.vue?vue&type=script&lang=ts\"\nexport * from \"./Credit.vue?vue&type=script&lang=ts\"\n\nimport \"./Credit.vue?vue&type=style&index=0&id=27444a3f&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-27444a3f\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\n\n@Options({\n  components: {\n    TextButton, PatreonButton, Credit\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  },\n  async created() {\n    //let farm = new Farm()\n    //await farm.load()\n    //this.farm = farm\n    this.isLoaded = true\n  }\n})\nexport default class CreditsScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n}\n","import { render } from \"./CreditsScreen.vue?vue&type=template&id=00b87b5c&scoped=true\"\nimport script from \"./CreditsScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./CreditsScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./CreditsScreen.vue?vue&type=style&index=0&id=00b87b5c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-00b87b5c\"\n\nexport default script","<template>\n  <div class=\"milkfarm\" v-if=\"isLoaded\">\n    <CollectionWindow :deck=\"menu.collection\"\n                      :menu=\"menu\"\n                      groupByParent\n                      v-on:activate-tab=\"activateTab\"\n                      v-on:activate-card=\"activateCard\">\n    </CollectionWindow>\n    <BlushWindow style=\"grid-area: s;\" v-on:close=\"$emit('close')\">\n      <template v-slot:title>\n        <h2>My Collection</h2>\n      </template>\n      <div class=\"status-content\">\n        <div class=\"status-text\">\n          <template v-if=\"isInspectingCard\">\n            <p>These are all levels of the \"{{ activeCard.name }}\" card you've collected.</p>\n            <p>To go back, click any card.</p>\n            <p>Levels owned: {{ activeCard.subcards.length }} / {{ activeCard.levels }}</p>\n          </template>\n          <template v-else>\n            <p>These are all the cards you've collected.</p>\n            <p>To inspect a card with multiple levels, click it.</p>\n            <p>Cards owned: {{ deck.size() }} / {{ refDeck.onlyTag(activeTab).size() }}</p>\n            <p>Card levels owned: {{ deck.unpack().size() }} / {{ refDeck.onlyTag(activeTab).unpack().size() }}</p>\n          </template>\n        </div>\n        <div class=\"buttons\">\n          <TextButton @click=\"util.screenshot('cards', screenshotName())\">Save Screenshot</TextButton>\n        </div>\n      </div>\n    </BlushWindow>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport Menu from \"@/Menu\"\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport CollectionWindow from \"@/components/CollectionWindow.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, BlushWindow, CollectionWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    },\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.activeCard = new Card({})\n    },\n    activateCard(card: Card) {\n      this.activeCard = card\n    },\n    lookup(id: string): Card {\n      return Deck.lookup(id)!\n    },\n    screenshotName(): string {\n      if (this.isInspectingCard) {\n        return `${util.toKebabCase(this.activeCard.name)}-${this.activeCard.subcards.length}-of-${this.activeCard.levels}`\n      }\n      return `${this.activeTab}-${this.deck.unpack().size()}-of-${this.refDeck.onlyTag(this.activeTab).unpack().size()}`\n    }\n  },\n  computed: {\n    tabs(): string[] {\n      return [\n        'all',\n        'behavior',\n        'body',\n        'clothing',\n        'event',\n        'mind',\n        'reward'\n      ]\n    },\n    util() {\n      return util\n    },\n    refDeck(): Deck {\n      return Deck.referenceDeck().useFilters()\n    },\n    deck(): Deck {\n      if (this.isInspectingCard) {\n        return new Deck(this.activeCard.subcards).sortByLevel().useFilters()\n      }\n      return this.menu.collection.copy().onlyTag(this.activeTab).pack().unique().useFilters()\n    },\n    isInspectingCard(): boolean {\n      return this.activeCard.id != undefined && this.activeCard.isParent\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class CollectionScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n  scaledCard: Card = new Card({})\n  activeTab: string = 'all'\n  activeCard: Card = new Card({})\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .milkfarm {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: minmax(230px, auto) 1fr;\n    grid-template-areas:\n      \"s\"\n      \"c\";\n    grid-gap: 10px;\n\n    background-size: cover;\n    background-attachment: fixed;\n    position: relative;\n\n    min-width: 360px;\n    //height: 100vh;\n    box-sizing: border-box; // Include padding in height so that we don't get scrollbars.\n\n    @media only screen and (min-width: 1140px){\n      padding: 10px;\n      grid-template-columns: 6fr minmax(250px, 1fr);\n      grid-template-rows: 50px 1fr;\n      grid-template-areas:\n      \"c s\"\n      \"c s\";\n\n      height: 100vh;\n    }\n  }\n\n  .collection-window {\n    grid-area: c;\n  }\n\n  $card-background-color: $window-background-color;\n  .cards-wrapper {\n    overflow-x: auto;\n    overflow-y: auto;\n\n    background-color: $card-background-color;\n    border: 3px solid black;\n    border-radius: $border-radius;\n    padding: 10px 20px 0 20px;\n  }\n\n  .cards {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    grid-template-rows: repeat(auto-fit, 360px);\n    grid-gap: 10px;\n    justify-items: center;\n    transform: scale(1);\n    transform-origin: top left;\n    min-height: 100%;\n  }\n\n  .scaled {\n    transform: scale(1.06);\n    z-index: 2;\n    border-color: #939393;\n  }\n\n  .collection-tabs {\n    grid-area: t;\n\n    display: flex;\n    height: 63px;\n    margin: 0 5px;\n    overflow-x: auto;\n\n    .text-button {\n      flex-grow: 1;\n      border-top-left-radius: $border-radius;\n      border-top-right-radius: $border-radius;\n      border-top: 3px solid black;\n      border-left: 3px solid black;\n      border-right: 3px solid black;\n      border-bottom: 3px solid black;\n      margin-right: 5px;\n      z-index: 11;\n\n      background-color: darken($card-background-color, 12%);\n\n      &:hover {\n        background-color: darken($card-background-color, 5%);\n      }\n    }\n\n    .active-tab {\n      background-color: $card-background-color;\n      border-bottom-color: $card-background-color;\n      cursor: default;\n\n      &:hover {\n        background-color: darken($card-background-color, 0%);\n      }\n    }\n\n    h1, h2, h3 {\n      margin: 0;\n    }\n  }\n\n  .status-window {\n    grid-area: s;\n  }\n\n  .status-content {\n    height: 100%;\n\n    display: grid;\n    grid-template-rows: 1fr auto;\n    grid-template-areas:\n      \"c\"\n      \"b\";\n  }\n\n  .buttons {\n    grid-area: b;\n    display: flex;\n    flex-wrap: wrap;\n\n    .text-button {\n      flex: 1;\n      min-width: 100px;\n      margin: 5px;\n      border: $component-border-style;\n      border-radius: $border-radius;\n    }\n  }\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport PlayingCard from \"@/components/PlayingCard.vue\"\nimport Card from '@/cards/Card'\nimport Menu from \"@/Menu\"\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport Deck from \"@/cards/Deck\"\nimport CollectionWindow from \"@/components/CollectionWindow.vue\"\n\n@Options({\n  components: {\n    TextButton, PlayingCard, BlushWindow, CollectionWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    toggleScale(card: Card) {\n      card.scale = !card.scale\n      if (this.scaledCard == card) {\n        this.scaledCard.scale = false\n        this.scaledCard = new Card({})\n      } else {\n        this.scaledCard.scale = false\n      }\n      if (card.scale) this.scaledCard = card\n    },\n    activateTab(tab: string) {\n      this.activeTab = tab\n      this.activeCard = new Card({})\n    },\n    activateCard(card: Card) {\n      this.activeCard = card\n    },\n    lookup(id: string): Card {\n      return Deck.lookup(id)!\n    },\n    screenshotName(): string {\n      if (this.isInspectingCard) {\n        return `${util.toKebabCase(this.activeCard.name)}-${this.activeCard.subcards.length}-of-${this.activeCard.levels}`\n      }\n      return `${this.activeTab}-${this.deck.unpack().size()}-of-${this.refDeck.onlyTag(this.activeTab).unpack().size()}`\n    }\n  },\n  computed: {\n    tabs(): string[] {\n      return [\n        'all',\n        'behavior',\n        'body',\n        'clothing',\n        'event',\n        'mind',\n        'reward'\n      ]\n    },\n    util() {\n      return util\n    },\n    refDeck(): Deck {\n      return Deck.referenceDeck().useFilters()\n    },\n    deck(): Deck {\n      if (this.isInspectingCard) {\n        return new Deck(this.activeCard.subcards).sortByLevel().useFilters()\n      }\n      return this.menu.collection.copy().onlyTag(this.activeTab).pack().unique().useFilters()\n    },\n    isInspectingCard(): boolean {\n      return this.activeCard.id != undefined && this.activeCard.isParent\n    }\n  },\n  async created() {\n    //await globalState().load()\n    this.isLoaded = true\n  }\n})\nexport default class CollectionScreen extends Vue {\n  isLoaded = false\n  menu!: Menu\n  scaledCard: Card = new Card({})\n  activeTab: string = 'all'\n  activeCard: Card = new Card({})\n}\n","import { render } from \"./CollectionScreen.vue?vue&type=template&id=13d20cf9&scoped=true\"\nimport script from \"./CollectionScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./CollectionScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./CollectionScreen.vue?vue&type=style&index=0&id=13d20cf9&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-13d20cf9\"\n\nexport default script","<template>\n  <div class=\"settings-screen\">\n    <FilterWindow :menu=\"menu\" v-on:close=\"$emit('close')\"></FilterWindow>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\nimport FilterWindow from \"@/components/FilterWindow.vue\"\n\n@Options({\n  components: {\n    TextButton, Credit, FilterWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  }\n})\nexport default class SettingsScreen extends Vue {\n  menu!: Menu\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.settings-screen {\n  height: 100vh;\n\n  display: grid;\n  grid-template-rows: auto auto;\n  grid-template-columns: 1fr;\n  grid-template-areas:\n    \"t\"\n    \"t\";\n  grid-gap: 20px;\n\n  @media screen and (max-width: $mobile-width){\n    grid-template-areas:\n      \"t\"\n      \"t\";\n    margin: 0;\n  }\n}\n\n.filter-window {\n  grid-area: t;\n\n  //min-height: 200px;\n  max-height: 100%;\n  width: 100%;\n  max-width: 800px;\n  margin: 20px auto;\n\n  @media screen and (max-width: $mobile-width){\n    padding: 10px;\n    margin: 0 auto;\n  }\n}\n\n</style>\n","<template>\n  <BlushWindow class=\"filter-window\" v-on:close=\"$emit('close')\">\n    <template v-slot:title>\n      <h2 style=\"margin: 0;\">Content Selection</h2>\n    </template>\n    <div class=\"content\">\n      <div>\n        <h3>\n          What content do you want to see?\n        </h3>\n        <p>You may still find some content you don't like, but this should remove most of it.</p>\n        <p><b>Tip:</b> Remove only what you actually dislike, not what makes for a \"bad end\", since those are often very fun.</p>\n      </div>\n      <BlushList class=\"instructions\">\n        <p>The game mostly doesn't do anything too extreme, but you may well find some things be a bit much.\n        Example: Breast expansion can be immobilizing, but not room filling.</p>\n        <p><b>All</b> - Include all content in this category.</p>\n        <p><b>Some</b> - Do not include extreme content in this category. Example: No immobilizingly large breast expansion.</p>\n        <p><b>None</b> - Remove as much content in this category as possible.</p>\n      </BlushList>\n      <BlushList>\n        <div v-for=\"filter in menu.settings.filters\" class=\"filter-entry\">\n          <div class=\"label\">\n            <h3>{{ filter.name }}</h3>\n            <p>{{ filter.description }}</p>\n          </div>\n          <TextButton style=\"grid-area: b1;\" :class=\"{'selected-green': filter.strictness === 0}\" @click=\"setStrictness(filter, 0)\"><h4>All</h4></TextButton>\n          <TextButton style=\"grid-area: b2;\" :class=\"{'selected-yellow': filter.strictness === 1}\" @click=\"setStrictness(filter, 1)\"><h4>Some</h4></TextButton>\n          <TextButton style=\"grid-area: b3;\" :class=\"{'selected-red': filter.strictness === 2}\" @click=\"setStrictness(filter, 2)\"><h4>None</h4></TextButton>\n        </div>\n      </BlushList>\n    </div>\n  </BlushWindow>\n</template>\n\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport Menu from \"@/Menu\"\nimport FilterSetting from \"@/FilterSetting\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow, BlushList\n  },\n  props: {\n    menu: Object,\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n    setStrictness(filter: FilterSetting, value: number) {\n      filter.strictness = value\n      this.menu.save()\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class FilterWindow extends Vue {\n  menu!: Menu\n  noCross: boolean = false\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n.filter-window {\n  //height: 500px;\n}\n\n.content {\n  display: grid;\n  grid-template-rows: auto auto 1fr;\n  grid-gap: 10px;\n  height: 100%;\n\n  h1, h2, h3, h4, h5, p {\n    margin: 5px 0;\n  }\n\n  p {\n    font-size: 13px;\n  }\n}\n\n.instructions {\n  p {\n    margin: 5px 10px;\n  }\n}\n\n.filter-entry {\n  display: grid;\n  grid-template-columns: 2fr repeat(3, minmax(auto, 1fr));\n  grid-template-rows: 1fr;\n  grid-template-areas:\n    \"d b1 b2 b3\";\n  grid-gap: 0;\n\n  background-color: $window-background-color;\n  border: 1px solid black;\n  border-radius: $border-radius;\n  margin: 10px;\n\n  h1, h2, h3, h4, p{\n    margin: 0;\n  }\n\n  .label {\n    padding: 0 10px 5px 10px;\n\n    p {\n      font-size: 12px;\n    }\n  }\n\n  @media screen and (max-width: $mobile-width){\n    margin: 5px;\n  }\n}\n\n.text-button {\n  border-left: 1px solid black;\n\n  &:last-child {\n    border-top-right-radius: $border-radius;\n    border-bottom-right-radius: $border-radius;\n  }\n}\n\n.selected-green, .selected-green:hover, .selected-green:active {\n  background-color: #062;\n  cursor: default;\n}\n\n.selected-yellow, .selected-yellow:hover, .selected-yellow:active {\n  background-color: #c80;\n  cursor: default;\n}\n\n.selected-red, .selected-red:hover, .selected-red:active {\n  background-color: #700;\n  cursor: default;\n}\n\n</style>\n","\nimport { Options, Vue } from 'vue-class-component'\nimport TextButton from '@/components/TextButton.vue'\nimport util from \"@/util\"\nimport BlushWindow from \"@/components/BlushWindow.vue\"\nimport BlushList from \"@/components/BlushList.vue\"\nimport Menu from \"@/Menu\"\nimport FilterSetting from \"@/FilterSetting\"\n\n@Options({\n  components: {\n    TextButton, BlushWindow, BlushList\n  },\n  props: {\n    menu: Object,\n    noCross: Boolean\n  },\n  emits: ['close'],\n  methods: {\n    setStrictness(filter: FilterSetting, value: number) {\n      filter.strictness = value\n      this.menu.save()\n    }\n  },\n  computed: {\n    util() {\n      return util\n    }\n  }\n})\nexport default class FilterWindow extends Vue {\n  menu!: Menu\n  noCross: boolean = false\n}\n","import { render } from \"./FilterWindow.vue?vue&type=template&id=1ffd6688&scoped=true\"\nimport script from \"./FilterWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./FilterWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./FilterWindow.vue?vue&type=style&index=0&id=1ffd6688&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-1ffd6688\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport util from \"@/util\"\nimport PatreonButton from \"@/components/PatreonButton.vue\"\nimport TextButton from \"@/components/TextButton.vue\"\nimport Menu from \"@/Menu\"\nimport Credit from \"@/components/Credit.vue\"\nimport FilterWindow from \"@/components/FilterWindow.vue\"\n\n@Options({\n  components: {\n    TextButton, Credit, FilterWindow\n  },\n  props: {\n    menu: Object\n  },\n  emits: ['close'],\n  methods: {\n    log(msg: any) {\n      console.log(msg)\n    },\n    util() {\n      return util\n    },\n    window() {\n      return window\n    }\n  }\n})\nexport default class SettingsScreen extends Vue {\n  menu!: Menu\n}\n","import { render } from \"./SettingsScreen.vue?vue&type=template&id=45dde64e&scoped=true\"\nimport script from \"./SettingsScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./SettingsScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./SettingsScreen.vue?vue&type=style&index=0&id=45dde64e&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-45dde64e\"\n\nexport default script","\nimport { Options, Vue } from 'vue-class-component'\nimport GameScreen from '@/components/screens/GameScreen.vue'\nimport Menu from \"@/Menu\"\nimport StartMenu from \"@/components/screens/StartMenu.vue\"\nimport DialogueScreen from \"@/components/screens/DialogueScreen.vue\"\nimport globalState from \"@/store/globalState\"\nimport HandView from \"@/components/screens/HandView.vue\"\nimport CreditsScreen from \"@/components/screens/CreditsScreen.vue\"\nimport CollectionScreen from \"@/components/screens/CollectionScreen.vue\"\nimport PatchNotesScreen from \"@/components/screens/PatchNotesScreen.vue\"\nimport BargainScreen from \"@/components/screens/BargainScreen.vue\"\nimport SettingsScreen from \"@/components/screens/SettingsScreen.vue\"\n\n@Options({\n  components: {\n    GameScreen, StartMenu, DialogueScreen, HandView, CreditsScreen, CollectionScreen, PatchNotesScreen, SettingsScreen\n  },\n  methods: {\n  },\n  computed: {\n    cssVars() {\n      return {\n        '--background-image': 'url(' + require('@/assets/background.webp') + ')'\n      }\n    },\n    globalState() {\n      return globalState()\n    }\n  }\n})\nexport default class App extends Vue {\n  menu: Menu = new Menu()\n}\n","import { render } from \"./App.vue?vue&type=template&id=40a24842&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=40a24842&lang=scss\"\nimport \"./App.vue?vue&type=style&index=1&id=40a24842&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-40a24842\"\n\nexport default script","import { createWebHistory, createRouter, createWebHashHistory } from \"vue-router\"\nimport GameScreen from \"@/components/screens/GameScreen.vue\"\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Milkfarm\",\n    component: GameScreen,\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory('/'),\n  //history: createWebHashHistory('/gallery/'),\n  // @ts-ignore\n  routes: routes\n})\n\nexport default router\n","import * as Vue from 'vue'\nimport App from './App.vue'\nimport router from \"@/router\"\n\n// @ts-ignore\nVue.createApp(App).use(router).mount('#app')\n","module.exports = __webpack_public_path__ + \"img/devil-512px.webp\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=1&id=40a24842&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ValueMeter.vue?vue&type=style&index=0&id=ef28c724&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./RelatedThumb.vue?vue&type=style&index=0&id=072ed195&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GameScreen.vue?vue&type=style&index=0&id=be81ac38&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PatchNotesScreen.vue?vue&type=style&index=1&id=3f9735b8&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DiceView.vue?vue&type=style&index=0&id=5aa351e4&lang=scss\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=40a24842&lang=scss\""],"sourceRoot":""}