(function(e){function t(t){for(var a,c,s=t[0],o=t[1],u=t[2],d=0,h=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&h.push(i[c][0]),i[c]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var o=n[s];0!==i[o]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},i={app:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/play/ditzy-dice/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=o;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"04e1":function(e,t,n){},"065e":function(e,t,n){"use strict";n("c6fa")},"0704":function(e,t,n){"use strict";n("ff4c")},"091e":function(e,t,n){},"0bb2":function(e,t,n){"use strict";n("6bae")},"0d0a":function(e,t,n){"use strict";n("89a4")},"0df4":function(e,t,n){"use strict";n("fe4e")},1286:function(e,t,n){"use strict";n("314a")},"157a":function(e,t,n){e.exports=n.p+"img/patreon-banner-no-text.webp"},1700:function(e,t,n){},"1a08":function(e,t,n){e.exports=n.p+"fonts/MavenPro-VariableFont_wght.ttf"},"1a7f":function(e,t,n){"use strict";n("7ee5")},"1fc1":function(e,t,n){},"249d":function(e,t,n){},"314a":function(e,t,n){},"319a":function(e,t,n){},"34ce":function(e,t,n){"use strict";n("1fc1")},"39d9":function(e,t,n){e.exports=n.p+"img/background.webp"},"3db7":function(e,t,n){},"3fd7":function(e,t,n){"use strict";n("04e1")},"423c":function(e,t,n){},4739:function(e,t,n){},"4a84":function(e,t,n){},"51be":function(e,t,n){},"52cd":function(e,t,n){},"56ce":function(e,t,n){},"57ec":function(e,t,n){},"67b4":function(e,t,n){},"67d2":function(e,t,n){},"6ad1":function(e,t,n){"use strict";n("4739")},"6bae":function(e,t,n){},7127:function(e,t,n){e.exports=n.p+"img/randomPortrait.webp"},7140:function(e,t,n){"use strict";n("d5f2")},7516:function(e,t,n){},7599:function(e,t,n){"use strict";n("c282")},"7ee5":function(e,t,n){},8020:function(e,t,n){"use strict";n("423c")},8743:function(e,t,n){"use strict";n("3db7")},"89a4":function(e,t,n){},"8c55":function(e,t,n){"use strict";n("4a84")},"8d53":function(e,t,n){"use strict";n("56ce")},9158:function(e,t,n){"use strict";n("ee2a")},9294:function(e,t,n){},"92d9":function(e,t,n){"use strict";n("1700")},9615:function(e,t,n){},9825:function(e,t,n){"use strict";n("51be")},"9b25":function(e,t,n){"use strict";n("319a")},a17f:function(e,t,n){e.exports=n.p+"img/black-felt.png"},b4e7:function(e,t,n){},b783:function(e,t,n){"use strict";n("091e")},ba9d:function(e,t,n){e.exports=n.p+"img/patreon-banner.webp"},baab:function(e,t,n){"use strict";n("ea6b")},bd0e:function(e,t,n){"use strict";n("c5c9")},c282:function(e,t,n){},c340:function(e,t,n){"use strict";n("b4e7")},c5c9:function(e,t,n){},c6fa:function(e,t,n){},c9aa:function(e,t,n){},ca78:function(e,t,n){"use strict";n("9615")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),i=Object(a["H"])("data-v-34e99f59");Object(a["u"])("data-v-34e99f59");var r={key:0,class:"loading"},c=Object(a["g"])("h1",null,"Loading...",-1);Object(a["r"])();var s=i((function(e,t,n,i,s,o){return Object(a["q"])(),Object(a["d"])("div",{id:"milkfarm-app",style:e.cssVars},[e.globalState.loading.value?(Object(a["q"])(),Object(a["d"])("div",r,[c])):(Object(a["q"])(),Object(a["d"])(Object(a["A"])(e.menu.activeComponent),Object(a["l"])({key:1},{menu:e.menu},{onGotoView:t[1]||(t[1]=function(t){e.menu.activeComponent=t}),onClose:t[2]||(t[2]=function(t){return e.menu.activeComponent="StartMenu"})}),null,16))],4)})),o=n("d4ec"),u=n("262e"),l=n("2caf"),d=n("9ab4"),h=n("ce1f"),f=Object(a["H"])("data-v-5bfce8f7");Object(a["u"])("data-v-5bfce8f7");var b={class:"milkfarm"},g={class:"hand-labels"},v={class:"hand-label"},p={class:"hand-label mana-label"},O={class:"hand-label mana-label"},m={class:"hand-label"},j={class:"hand-labels"},y=Object(a["f"])("Show All: On"),k=Object(a["f"])("Show All: Off"),w={class:"dices"},C={class:"abilities"},S={class:"ability-title"},x={class:"ability-subtitle"};Object(a["r"])();var _=f((function(e,t,n,i,r,c){var s=Object(a["z"])("CardHandWindow"),o=Object(a["z"])("TextButton"),u=Object(a["z"])("DialogueCard"),l=Object(a["z"])("DiceView");return Object(a["q"])(),Object(a["d"])("div",b,[Object(a["g"])(s,{menu:e.menu,deck:e.game.drawnCards,class:"drawn-cards"},{default:f((function(){return[Object(a["g"])("div",g,[Object(a["g"])("div",v,Object(a["C"])(e.game.roundString),1),Object(a["g"])("div",p," Bonus rolls: "+Object(a["C"])(e.game.state.bonusRolls.value)+" / "+Object(a["C"])(e.game.state.bonusRolls.max),1),Object(a["g"])("div",O," Mana: "+Object(a["C"])(e.game.player.getMana()),1),Object(a["g"])("div",m,Object(a["C"])(e.game.pickedString),1)])]})),_:1},8,["menu","deck"]),Object(a["g"])(s,{menu:e.menu,deck:e.handDeck,class:"picked-cards"},{default:f((function(){return[Object(a["g"])("div",j,[Object(a["g"])(o,{class:"hand-button",onClick:t[1]||(t[1]=function(t){return e.showActivatedCards=!e.showActivatedCards})},{default:f((function(){return[e.showActivatedCards?(Object(a["q"])(),Object(a["d"])(a["a"],{key:0},[y],64)):(Object(a["q"])(),Object(a["d"])(a["a"],{key:1},[k],64))]})),_:1})])]})),_:1},8,["menu","deck"]),Object(a["g"])(u,{menu:e.menu},null,8,["menu"]),Object(a["g"])("div",w,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.state.dice,(function(e){return Object(a["q"])(),Object(a["d"])(l,{key:e,dice:e},null,8,["dice"])})),128))]),Object(a["g"])("div",C,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.abilities,(function(t){return Object(a["q"])(),Object(a["d"])(a["a"],{key:t},[t.isVisible(e.game)?(Object(a["q"])(),Object(a["d"])(o,{key:0,class:"ability",disabled:!t.isAvailable(e.game),onClick:function(n){return t.activate(e.game)}},{default:f((function(){return[Object(a["g"])("p",S,Object(a["C"])(t.title),1),Object(a["g"])("p",x,Object(a["C"])(t.subtitle),1)]})),_:2},1032,["disabled","onClick"])):Object(a["e"])("",!0)],64)})),128))])])})),T=Object(a["H"])("data-v-2b92d90a"),D=T((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:["text-button",{disabled:e.disabled}],onselectstart:"return false"},[Object(a["y"])(e.$slots,"default")],2)})),R=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.disabled=!1,e}return n}(h["b"]);R=Object(d["a"])([Object(h["a"])({props:{disabled:Boolean}})],R);var B=R,M=(n("6ad1"),n("e733"),n("d959")),q=n.n(M);const E=q()(B,[["render",D],["__scopeId","data-v-2b92d90a"]]);var A=E,N=(n("a4d3"),n("e01a"),Object(a["H"])("data-v-1a237670"));Object(a["u"])("data-v-1a237670");var L={class:"title-field",title:"Name of this card"},P={class:"levels-field",title:"Level of this card / Max level of this card"},I=Object(a["g"])("div",{class:"thumb-container"},null,-1),z={key:0,class:"subtitle-field",title:"Name of this level of this card"},F={class:"description-field"},V={class:"artist-field"};Object(a["r"])();var H=N((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:["playing-card",{"single-card":"single"===e.card.type,"child-card":e.card.hasParent,"highlight-1":1===e.card.highlight,"highlight-2":2===e.card.highlight,"highlight-3":3===e.card.highlight,"highlight-4":e.card.highlight>=4}],style:e.cssVars},[Object(a["g"])("div",L,[Object(a["g"])("h3",null,Object(a["C"])(e.card.title),1)]),Object(a["g"])("div",P,[Object(a["g"])("h3",null,Object(a["C"])(e.card.levelString),1)]),I,""!==e.card.subtitle?(Object(a["q"])(),Object(a["d"])("div",z,[Object(a["g"])("h3",null,Object(a["C"])(e.card.subtitle),1)])):Object(a["e"])("",!0),Object(a["g"])("div",F,[Object(a["g"])("p",null,Object(a["C"])(e.card.description),1)]),Object(a["g"])("div",V,[Object(a["g"])("p",null,"Art by "+Object(a["C"])(e.card.artist),1)])],6)})),W=Object(a["H"])("data-v-ef28c724");Object(a["u"])("data-v-ef28c724");var U=Object(a["g"])("div",{class:"filled-bar"},null,-1),G={class:"label"};Object(a["r"])();var $=W((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:"value-meter",style:e.cssVars},[U,Object(a["g"])("div",G,[Object(a["y"])(e.$slots,"default")])],4)})),J=(n("a9e3"),n("aff5"),n("b680"),n("07ac"),n("bee2")),Y=(n("99af"),n("7db0"),n("d3b7"),n("ac1f"),n("25f0"),n("6062"),n("3ca3"),n("4d90"),n("5319"),n("498a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("96cf"),n("1da1")),X=n("bc3a"),K=n.n(X),Z=n("d5d0"),Q=n.n(Z),ee=n("c0e9"),te={baseUrl:function(){return"https://www.blushingdefeat.com/play/ditzy-dice-beta"},wait:function(e){return new Promise((function(t,n){window.setTimeout(t,e)}))},fetchHjson:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,K.a.get(t.baseUrl()+"/"+e,{transformResponse:[function(e){return e}]});case 2:return a=n.sent,i=a.data,r=Q.a.parse(i),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()},getInfo:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.fetchHjson(e+"/info.hjson");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},isVideo:function(e){return/\.webm$/i.test(e)},sample:function(e){return e[Math.floor(Math.random()*e.length)]},timeToDays:function(e){return e/60},currentDate:function(e){var t=Math.floor(this.timeToDays(e)),n=e%60/60*24,a=Math.floor(n),i=60*(n-a);return"Day ".concat(t,", ").concat(a.toFixed(0).padStart(2,"0"),":").concat(i.toFixed(0).padStart(2,"0"))},displayTime:function(e){var t=Math.floor(this.timeToDays(e)),n=e%60/60*24,a=Math.floor(n),i=60*(n-a),r="";return 1==t&&(r+="".concat(t," day")),t>1&&(r+="".concat(t," days")),t>=1&&a>0&&(r+=", "),1==a&&(r+="".concat(a," hour")),a>1&&(r+="".concat(a," hours")),0==t&&0==a&&(r="".concat(i," minutes")),r},uuid:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)}))},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},toKebabCase:function(e){return e.replace(/\s+/g,"-").toLowerCase()},camelToTitleCase:function(e){return e.replace(/([A-Z])/g,(function(e){return" ".concat(e)})).replace(/^./,(function(e){return e.toUpperCase()})).trim()},pickFrom:function(e,t){var n=this.clamp(Math.round(t*(e.length-1)),0,e.length-1);return e[n]},clamp:function(e,t,n){return Math.max(Math.min(e,n),t)},showNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0==t&&(t=e),t<1?e.toFixed(2):t<10?e.toFixed(1):e.toFixed(0)},ensure:function(e,t){return t.find((function(t){return t==e}))?e:t[0]},shuffle:function(e){var t,n,a=e.length;while(0!==a)n=Math.floor(Math.random()*a),a-=1,t=e[a],e[a]=e[n],e[n]=t;return e},hasDuplicate:function(e){return new Set(e).size!==e.length},setTimeoutAnimationFrame:function(e,t){var n=performance.now(),a=function a(i){var r=i-n;r>=t?e():requestAnimationFrame(a)};requestAnimationFrame(a)},download:function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},screenshot:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collection",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=document.getElementById(e);if(null!=a){var i=Math.max(a.childNodes.length-2,1),r=270,c=380,s=a.style.width,o=a.style.height,u=a.style.minHeight,l=Math.min(r*i,2560);a.style.width="".concat(l,"px"),i*r<2560&&(a.style.height="".concat(c,"px"),a.style.minHeight="".concat(c,"px")),ee(a,{backgroundColor:n}).then((function(e){var a,i=document.createElement("a");null==n?(a=e.toDataURL("image/png"),i.download="".concat(t,".png")):(a=e.toDataURL("image/jpeg"),i.download="".concat(t,".jpg")),i.href=a,i.click()})),a.style.width=s,a.style.minHeight=u,a.style.height=o}else console.error('Could not take a screenshot of element with id "'.concat(e,'".'))}},ne=n("e46d"),ae=n("b85c"),ie=function(){function e(t,n){Object(o["a"])(this,e),this.uuid=te.uuid(),this.type="add",this.value=0,this.type=n,this.value=t}return Object(J["a"])(e,[{key:"equals",value:function(e){return this.value==e.value&&this.type==e.type}},{key:"toString",value:function(){var e="",t=te.showNumber(Math.abs(this.value));return"add"===this.type?e=this.value>0?"+".concat(t):"-".concat(t):"mul"===this.type&&(e="x".concat(t)),e}}],[{key:"activate",value:function(e,t){return"add"===t.type?e+t.value:"mul"===t.type?e*t.value:e}},{key:"reverseActivate",value:function(e,t){return"add"===t.type?e-t.value:"mul"===t.type?e*(1/t.value):e}},{key:"activateAll",value:function(t,n){var a,i=Object(ae["a"])(n);try{for(i.s();!(a=i.n()).done;){var r=a.value;"add"===r.type&&(t=e.activate(t,r))}}catch(u){i.e(u)}finally{i.f()}var c,s=Object(ae["a"])(n);try{for(s.s();!(c=s.n()).done;){var o=c.value;"mul"===o.type&&(t=e.activate(t,o))}}catch(u){s.e(u)}finally{s.f()}return t}},{key:"reverseActivateAll",value:function(t,n){var a,i=Object(ae["a"])(n.reverse());try{for(i.s();!(a=i.n()).done;){var r=a.value;"mul"===r.type&&(t=e.reverseActivate(t,r))}}catch(u){i.e(u)}finally{i.f()}var c,s=Object(ae["a"])(n.reverse());try{for(s.s();!(c=s.n()).done;){var o=c.value;"add"===o.type&&(t=e.reverseActivate(t,o))}}catch(u){s.e(u)}finally{s.f()}return t}}]),e}();Object(d["a"])([Object(ne["g"])(Object(ne["b"])())],ie.prototype,"uuid",void 0),Object(d["a"])([ne["g"]],ie.prototype,"type",void 0),Object(d["a"])([ne["g"]],ie.prototype,"value",void 0);var re=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(o["a"])(this,e),this._baseValue=0,this._min=0,this._max=0,this.valueMods={},this.minMods={},this.maxMods={},this.texts=[],this.capBaseValue=!1,this._baseValue=t,this._min=n,this._max=void 0==a?Number.MAX_SAFE_INTEGER:a,this.texts=i,this.capBaseValue=r}return Object(J["a"])(e,[{key:"addValue",value:function(e){var t=[];for(var n in this.valueMods){var a=this.valueMods[n];"mul"==a.type&&t.push(a)}var i=this.value;this.baseValue;return this.baseValue+=ie.reverseActivateAll(e,t),this.value-i}},{key:"addBaseValue",value:function(e){var t=this.baseValue;return this.baseValue+=e,this.baseValue-t}},{key:"load",value:function(e){this._baseValue=e._baseValue}},{key:"fraction",set:function(e){this.baseValue=this.min+this.max*e},get:function(){return(this.value-this.min)/(this.max-this.min)}},{key:"value",get:function(){var e=ie.activateAll(this._baseValue,Object.values(this.valueMods));return e>this.max?this.max:e<this.min?this.min:e}},{key:"baseValue",set:function(e){this.capBaseValue&&(e=Math.max(Math.min(e,this.max),this.min)),this._baseValue=e},get:function(){return this._baseValue}},{key:"min",get:function(){return ie.activateAll(this._min,Object.values(this.minMods))}},{key:"max",get:function(){return ie.activateAll(this._max,Object.values(this.maxMods))}},{key:"text",get:function(){return 0==this.texts.length?this.value.toFixed(1):te.pickFrom(this.texts,this.fraction)}},{key:"copy",get:function(){var t=new e(this._baseValue,this._min,this._max,this.texts);return t.valueMods=this.valueMods,t}}]),e}();Object(d["a"])([ne["g"]],re.prototype,"_baseValue",void 0),Object(d["a"])([ne["g"]],re.prototype,"_min",void 0),Object(d["a"])([ne["g"]],re.prototype,"_max",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["d"])(Object(ne["e"])(ie)))],re.prototype,"valueMods",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["d"])(Object(ne["e"])(ie)))],re.prototype,"minMods",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["d"])(Object(ne["e"])(ie)))],re.prototype,"maxMods",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["c"])(Object(ne["f"])()))],re.prototype,"texts",void 0),Object(d["a"])([ne["g"]],re.prototype,"capBaseValue",void 0);var ce=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.backgroundColor="#282c3b",e.barColor="#741A32",e}return n}(h["b"]);ce=Object(d["a"])([Object(h["a"])({props:{container:re,barColor:String,backgroundColor:String},methods:{log:function(e){console.log(e)}},computed:{cssVars:function(){return{"--percent-filled":100*this.container.fraction+"%","--background-color":this.backgroundColor,"--bar-color":this.barColor}}}})],ce);var se=ce;n("d4b5");const oe=q()(se,[["render",$],["__scopeId","data-v-ef28c724"]]);var ue=oe,le=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);le=Object(d["a"])([Object(h["a"])({components:{ValueMeter:ue,TextButton:A},props:{card:Object},methods:{log:function(e){console.log(e)}},computed:{cssVars:function(){return{"--border-color":"black","--background-hue":this.card.hue,"--background-image":"url("+n("a17f")+")","--thumb":"url("+this.card.thumb+")"}}}})],le);var de=le;n("8c55");const he=q()(de,[["render",H],["__scopeId","data-v-1a237670"]]);var fe=he,be=(n("d81d"),n("b0c0"),n("5530")),ge=n("3835"),ve=n("d4cd"),pe=n.n(ve);function Oe(e){return me.apply(this,arguments)}function me(){return me=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=[],a=Object(ae["a"])(t);try{for(a.s();!(i=a.n()).done;)r=i.value,n.push(te.fetchHjson(r))}catch(s){a.e(s)}finally{a.f()}return e.next=5,Promise.all(n);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}var je=Object(a["v"])({loading:!0,cardFamilyString:"",dialogueString:"",dialogue2String:"",endingsString:"",artistsString:"",patreonCredits:"",patchNotesString:""});function ye(){var e=function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,r,c,s,o,u,l,d,h,f,b,g,v,p,O,m,j,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return je.loading=!0,e.next=3,Promise.all([te.fetchHjson("cards/series.hjson"),te.fetchHjson("dialogue.hjson"),te.fetchHjson("dialogue-2.hjson"),te.fetchHjson("endings/content.hjson"),te.fetchHjson("cards/artists.hjson"),K.a.get("https://www.blushingdefeat.com/assets/blushing-defeat-credits.json"),te.fetchHjson("patch-notes/content.hjson")]);case 3:return t=e.sent,n=Object(ge["a"])(t,7),a=n[0],i=n[1],r=n[2],c=n[3],s=n[4],o=n[5],u=n[6],je.dialogueString=JSON.stringify(i),je.dialogue2String=JSON.stringify(r),je.artistsString=JSON.stringify(s),je.patreonCredits=o.data,e.next=18,Promise.all([Oe(a.map((function(e){return"cards/".concat(e)}))),Oe(u.map((function(e){return"patch-notes/".concat(e,".hjson")}))),Oe(c.map((function(e){return"endings/".concat(e,".hjson")})))]);case 18:l=e.sent,d=Object(ge["a"])(l,3),h=d[0],f=d[1],b=d[2],je.cardFamilyString=JSON.stringify(h),g=new pe.a,v=Object(ae["a"])(u.entries());try{for(v.s();!(p=v.n()).done;)O=Object(ge["a"])(p.value,2),m=O[0],j=O[1],y=f[m],y.id=j,y.text=g.render(y.text)}catch(k){v.e(k)}finally{v.f()}je.patchNotesString=JSON.stringify(f),je.endingsString=JSON.stringify(b),je.loading=!1;case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(be["a"])(Object(be["a"])({},Object(a["E"])(je)),{},{load:e})}var ke=function(){function e(t){Object(o["a"])(this,e),this.id=t.id,this.name=t.name,this.thumb=t.thumb,this.artist=t.artist?t.artist:"Gardamuse",this.hue=t.hue}return Object(J["a"])(e,null,[{key:"familyMap",value:function(){if(this.familiesLoaded)return this._familyMap;var t,n=JSON.parse(ye().cardFamilyString.value),a=Object(ae["a"])(n);try{for(a.s();!(t=a.n()).done;){var i=t.value,r=new e(i);this._familyMap[r.id]=r}}catch(c){a.e(c)}finally{a.f()}return this.familiesLoaded=!0,this._familyMap}},{key:"familyLookup",value:function(t){var n=e.familyMap()[t];return void 0!=n?n:new e({id:"none",name:"None",thumb:"",artist:"",hue:0})}}]),e}();ke.familiesLoaded=!1,ke._familyMap={},Object(d["a"])([ne["g"]],ke.prototype,"id",void 0),Object(d["a"])([ne["g"]],ke.prototype,"name",void 0),Object(d["a"])([ne["g"]],ke.prototype,"thumb",void 0),Object(d["a"])([ne["g"]],ke.prototype,"artist",void 0),Object(d["a"])([ne["g"]],ke.prototype,"hue",void 0);n("4de4"),n("c740"),n("4160"),n("13d5"),n("a434"),n("159b");var we=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(o["a"])(this,e),this.tags=t,this.guaranteed=n,this.probability=a},Ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Object(o["a"])(this,e),this.cards=void 0!=t?t:[]}return Object(J["a"])(e,[{key:"createNew",value:function(){return e.referenceDeck().copy().useFilters()}},{key:"withoutFamily",value:function(t){var n,a=[],i=Object(ae["a"])(this.cards);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.family.id!=t&&a.push(r)}}catch(c){i.e(c)}finally{i.f()}return new e(a)}},{key:"onlyTag",value:function(t){if("all"==t)return new e(this.cards);var n,a=[],i=Object(ae["a"])(this.cards);try{for(i.s();!(n=i.n()).done;){var r=n.value;(r.family.id==t||r.hasTag(t))&&a.push(r)}}catch(c){i.e(c)}finally{i.f()}return new e(a)}},{key:"useFilters",value:function(){return this.filterBy(e.filters,e.bannedCards)}},{key:"filterBy",value:function(t,n){var a,i=[],r=Object(ae["a"])(this.cards);try{for(r.s();!(a=r.n()).done;){var c=a.value,s=!0;if(c.isParent){var o,u=Object(ae["a"])(c.subcards);try{var l=function(){var e=o.value;if(n.has(e.id))return c.subcards=c.subcards.filter((function(t){return t.id!=e.id})),"continue";e.isFiltered(t)&&(c.subcards=c.subcards.filter((function(t){return t.id!=e.id})))};for(u.s();!(o=u.n()).done;)l()}catch(d){u.e(d)}finally{u.f()}}n.has(c.id)&&(s=!1),c.isFiltered(t)&&(s=!1),c.isParent&&0==c.subcards.length&&(s=!1),s&&i.push(c)}}catch(d){r.e(d)}finally{r.f()}return new e(i)}},{key:"rebase",value:function(){var t,n=new e,a=Object(ae["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.addCard(e.lookup(i.id))}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"unique",value:function(){var t,n={},a=new e,i=Object(ae["a"])(this.cards);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.id in n||(a.addCard(r),n[r.id]=!0)}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"pack",value:function(){var t,n=new e,a=Object(ae["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.hasParent){var r=i.parent.id,c=void 0;n.hasCard(r)?c=n.getCardById(r):this.hasCard(r)?(c=this.getCardById(r),n.addCard(c)):(c=e.lookup(r),c.subcards=[],n.addCard(c)),c.addSubCard(i)}else n.addCard(i)}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"unpack",value:function(){var t,n=[],a=Object(ae["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.isParent)for(var r=0;r<i.subcards.length;r++)n.push(i.getLevel(r));else n.push(i)}}catch(c){a.e(c)}finally{a.f()}return new e(n)}},{key:"pick",value:function(t){for(var n=[],a=0;a<this.cards.length;a++){var i,r=Object(ae["a"])(t);try{for(r.s();!(i=r.n()).done;){var c=i.value;a==c-1&&n.push(this.cards[a])}}catch(s){r.e(s)}finally{r.f()}}return new e(n)}},{key:"draw",value:function(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new we([],0,0),i=this.getWantedCards(a.tags),r=[],c=function(){var e=te.pickFrom(i,Math.random()),t=i.findIndex((function(t){return t.id==e.id}));-1!=t&&i.splice(t,1),n.removeCard(e),r.push(e),console.log("Guaranteed",e.name)};while(r.length<t&&r.length<a.guaranteed&&i.length>0)c();while(r.length<t)if(i.length>0&&Math.random()<a.probability)(function(){var e=i.pop();n.cards.splice(n.cards.findIndex((function(t){return t.id==e.id})),1),r.push(e)})();else{if(!(this.cards.length>0))break;(function(){var e=n.cards.pop(),t=i.findIndex((function(t){return t.id==e.id}));-1!=t&&i.splice(t,1),r.push(e)})()}return new e(r).shuffle()}},{key:"getWantedCards",value:function(e){var t,n=[],a=Object(ae["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.hasAnyTag(e)&&n.push(i)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"drawOneCardTo",value:function(e){var t=this.cards.pop();return void 0!=t&&(e.push(t),!0)}},{key:"drawIndex",value:function(e){return this.cards.splice(e,1)[0]}},{key:"addCard",value:function(e){return this.cards.push(e),this}},{key:"addDeck",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.cards=t?e.cards.concat(this.cards):this.cards.concat(e.cards),this}},{key:"removeCard",value:function(e){var t=this.cards.findIndex((function(t){return t.id==e.id}));return-1!=t&&this.drawIndex(t),this}},{key:"hasCard",value:function(e){return void 0!=this.findCard(e)}},{key:"findCard",value:function(e){var t=this.cards.find((function(t){return t.id==e}));if(void 0!=t)return t;var n,a=Object(ae["a"])(this.cards.filter((function(e){return e.isParent})));try{for(a.s();!(n=a.n()).done;){var i=n.value;if(t=i.subcards.find((function(t){return t.id==e})),void 0!=t)return t}}catch(r){a.e(r)}finally{a.f()}}},{key:"updateCard",value:function(e){if(!e.hasParent){var t=this.findCard(e.id);if(void 0==t)this.addCard(e);else for(var n=0;n<this.cards.length;n++){var a=this.cards[n];a.id==e.id&&(this.cards[n]=e)}}}},{key:"getCardById",value:function(e){var t=this.allLevels.find((function(t){return t.id==e}));return t}},{key:"size",value:function(){return this.cards.length}},{key:"shuffle",value:function(){return this.cards=te.shuffle(this.cards),this}},{key:"sortByFamily",value:function(){return this.cards=this.cards.sort((function(e,t){return e.family.id<t.family.id?-1:1})),this}},{key:"sortByLevel",value:function(){return this.cards=this.cards.sort((function(e,t){return e.level-t.level})),this}},{key:"sortByName",value:function(){return this.cards=this.cards.sort((function(e,t){return e.name<t.name?1:-1})),this}},{key:"removeAllCards",value:function(){return this.cards=[],this}},{key:"copy",value:function(){return new e(this.cards.map((function(e){return e.copy()})))}},{key:"toString",value:function(){var e="--- DECK, ".concat(this.size()," cards ---\n");return e+=this.cards.map((function(e){return"".concat(e.fullTitle,", level ").concat(e.level)})).reduce((function(e,t){return"".concat(e,"\n").concat(t)})),e}},{key:"allLevels",get:function(){var e,t=[],n=Object(ae["a"])(this.cards);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(t.push(a),a.isParent){var i,r=Object(ae["a"])(a.subcards);try{for(r.s();!(i=r.n()).done;){var c=i.value;t.push(c)}}catch(s){r.e(s)}finally{r.f()}}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"pickableCards",get:function(){var e,t=[],n=Object(ae["a"])(this.cards);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.isParent||t.push(a);for(var i=0;i<a.subcards.length;i++)t.push(a.getLevel(i))}}catch(r){n.e(r)}finally{n.f()}return t}}],[{key:"createFromCardStates",value:function(t){var n,a=[],i=Object(ae["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=e.lookup(r.id);void 0!=c&&a.push(c)}}catch(s){i.e(s)}finally{i.f()}return new e(a)}},{key:"isTag",value:function(t){return this.tags.size>1||e.updateTags(),this.tags.has(t)}},{key:"updateTags",value:function(){this.tags=new Set(["all"]);var e,t=Object(ae["a"])(this.referenceAllLevels());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.tags.add(n.family.id);var a,i=Object(ae["a"])(n.tags);try{for(i.s();!(a=i.n()).done;){var r=a.value;this.tags.add(r)}}catch(c){i.e(c)}finally{i.f()}}}catch(c){t.e(c)}finally{t.f()}}},{key:"lookup",value:function(e){var t=this.cardMap()[e];if(void 0!=t)return t.copy();console.warn('Static lookup of card "'.concat(e,'" failed.'))}},{key:"addReferenceCard",value:function(t){this.referenceDeck(),this._cardMap[t.id]=t,this._referenceDeck.updateCard(t),this.tags.size>0&&e.updateTags(),this.tags.add(t.family.id);var n,a=Object(ae["a"])(t.tags);try{for(a.s();!(n=a.n()).done;){var i=n.value;this.tags.add(i)}}catch(r){a.e(r)}finally{a.f()}}},{key:"referenceDeck",value:function(){if(void 0!=this._referenceDeck)return this._referenceDeck.copy();for(var t=Object.values(e.cardMap()),n=new e,a=0,i=t;a<i.length;a++){var r=i[a];r.isParent||n.addCard(r)}return this._referenceDeck=n.pack(),this._referenceDeck.copy()}},{key:"referenceAllLevels",value:function(){return void 0==this._referenceDeck?this.referenceDeck().cards:this._referenceDeck.allLevels}},{key:"cardMap",value:function(){if(this.cardsLoaded)return this._cardMap;var e,t=Object(ae["a"])(this.parseCards(JSON.parse(ye().cardFamilyString.value)));try{for(t.s();!(e=t.n()).done;){var n=e.value;this._cardMap[n.id]=n}}catch(a){t.e(a)}finally{t.f()}return this.cardsLoaded=!0,this._cardMap}},{key:"resetStaticState",value:function(){this._cardMap={},this.cardsLoaded=!1,this._referenceDeck=void 0,this.tags=new Set(["all"])}},{key:"parseCards",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=[],r=Object(ae["a"])(e);try{for(r.s();!(t=r.n()).done;){var c,s=t.value,o=ke.familyLookup(s.id),u=Object(ae["a"])(s.cards);try{for(u.s();!(c=u.n()).done;){var l=c.value,d=[],h=void 0;1==l.override?h="":""!=a&&(h=a+"."),void 0!=l.levels&&(d=this.parseSubCards(l,o,n,h),d.forEach((function(e){return i.push(e)}))),i.push(this.parseCard(l,o,d,n,h))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){r.e(f)}finally{r.f()}return i}},{key:"parseSubCards",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=[],c="".concat(te.baseUrl(),"/cards/"),s=Object(ae["a"])(e.levels.entries());try{for(s.s();!(n=s.n()).done;){var o=Object(ge["a"])(n.value,2),u=o[0],l=o[1],d=e.tags?e.tags:[];l.tags&&(d=d.concat(l.tags));var h=l.thumb?"".concat(c).concat(l.thumb):e.thumb?"".concat(c).concat(e.thumb):"".concat(c).concat(t.thumb);void 0!=a&&(h=a(l.thumb?l.thumb:e.thumb)),""==i||void 0!=e.artist&&""!=e.artist||void 0!=l.artist&&""!=l.artist||(l.artist="an unknown artist");var f=new Se({family:t.id,thumb:h,id:"".concat(i).concat(e.id,".").concat(l.id),name:l.name,description:l.description,transformation:l.transformation?l.transformation:e.transformation?e.transformation:"",type:e.type,subcards:[],levels:1,level:u+1,intensity:void 0!=l.intensity?l.intensity:u+1,parent:"".concat(i).concat(e.id),hue:t.hue,artist:l.artist?l.artist:e.artist?e.artist:t.artist?t.artist:"Gardamuse",tags:d});r.push(f)}}catch(b){s.e(b)}finally{s.f()}return r}},{key:"parseCard",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r="".concat(te.baseUrl(),"/cards/"),c=e.thumb?"".concat(r).concat(e.thumb):"".concat(r).concat(t.thumb);return void 0!=a&&(c=a(e.thumb)),""==i||void 0!=e.artist&&""!=e.artist||(e.artist="an unknown artist"),new Se({family:t.id,thumb:c,id:"".concat(i).concat(e.id),name:e.name,description:e.description,transformation:e.transformation,type:e.type,subcards:n.map((function(e){return e.id})),levels:n.length,intensity:e.intensity,hue:t.hue,artist:e.artist?e.artist:t.artist?t.artist:"Gardamuse",tags:e.tags?e.tags:[]})}}]),e}();Ce.filters=[],Ce.bannedCards=new Set([]),Ce.cardsLoaded=!1,Ce._cardMap={},Ce.tags=new Set([]);var Se=function(){function e(t){Object(o["a"])(this,e),this.scale=!1,this.highlight=0,void 0==t&&(t={}),this._family=t.family?t.family:"none",this._parent=t.parent,this.thumb=t.thumb,this.id=t.id,this.name=t.name,this.description=t.description,this.transformation=t.transformation?t.transformation:"",this._subcards=t.subcards?t.subcards:[],this._level=t.level?t.level:1,this._intensity=void 0!=t.intensity?t.intensity:this._level,this.levels=t.levels?t.levels:0,this.type=t.type?t.type:"single",this.hue=t.hue?t.hue:0,this.artist=t.artist?t.artist:"Gardamuse",this.tags=t.tags?t.tags:[]}return Object(J["a"])(e,[{key:"addSubCard",value:function(e){this.hasSubCard(e)||(this._subcards.push(e.id),this._subcards.sort())}},{key:"hasSubCard",value:function(e){return void 0!=this._subcards.find((function(t){return t==e.id}))}},{key:"getLevel",value:function(e){return"single"!=this.type&&e<this.subcards.length?this.subcards[e]:this}},{key:"hasTag",value:function(e){return this.family.id==e||void 0!=this.tags.find((function(t){return t==e}))}},{key:"hasAnyTag",value:function(e){var t,n=Object(ae["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(this.hasTag(a))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"isFiltered",value:function(e){var t,n=Object(ae["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(this.hasTag(a.tag)&&2==a.strictness)return!0;if(this.hasTag(a.tag)&&this.hasTag("extreme")&&1==a.strictness)return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"equals",value:function(e){return this.id==e.id}},{key:"copy",value:function(){var t=new e({id:this.id,name:this.name,thumb:this.thumb,description:this.description,transformation:this.transformation,subcards:this._subcards,levels:this.levels,level:this._level,intensity:this._intensity,type:this.type,hue:this.hue,artist:this.artist,family:this._family,parent:this._parent,tags:this.tags});return t}},{key:"toJSON",value:function(){return Object(ne["h"])(this)}},{key:"fullTitle",get:function(){return this.hasParent?"".concat(this.parent.name,": ").concat(this.name):this.name}},{key:"title",get:function(){return this.hasParent?"".concat(this.parent.name):this.name}},{key:"subtitle",get:function(){return this.hasParent?"".concat(this.name):""}},{key:"subcards",set:function(e){this._subcards=e.map((function(e){return e.id}))},get:function(){return new Ce(this._subcards.map((function(e){return Ce.lookup(e)}))).sortByLevel().cards}},{key:"intensity",get:function(){var e;return this.isParent||"selection"!=this.type?this._intensity:(null===(e=this.parent)||void 0===e?void 0:e.intensity)||1}},{key:"level",get:function(){return this._level}},{key:"maxLevel",get:function(){return this.hasParent?this.parent.levels:this.levels}},{key:"levelString",get:function(){return"single"==this.type?"1":this.isParent&&this.levels==this.subcards.length?this.levels.toFixed(0):this.isParent?"".concat(this.subcards.length," / ").concat(this.levels):"".concat(this._level," / ").concat(this.maxLevel)}},{key:"parent",get:function(){return Ce.lookup(this._parent)}},{key:"hasParent",get:function(){return void 0!=this._parent}},{key:"isParent",get:function(){return"single"!=this.type&&this.levels>1}},{key:"family",get:function(){return ke.familyLookup(this._family)}}]),e}();function xe(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:["dice-view",{"locked-dice":e.dice.locked}],style:e.cssVars,onClick:t[1]||(t[1]=function(t){return e.dice.roll()})},[Object(a["g"])("p",null,Object(a["C"])(e.dice.value)+" / "+Object(a["C"])(e.dice.max),1)],6)}Object(d["a"])([ne["g"]],Se.prototype,"_family",void 0),Object(d["a"])([ne["g"]],Se.prototype,"_parent",void 0),Object(d["a"])([ne["g"]],Se.prototype,"thumb",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["b"])())],Se.prototype,"id",void 0),Object(d["a"])([ne["g"]],Se.prototype,"name",void 0),Object(d["a"])([ne["g"]],Se.prototype,"description",void 0),Object(d["a"])([ne["g"]],Se.prototype,"transformation",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["c"])(Object(ne["f"])()))],Se.prototype,"_subcards",void 0),Object(d["a"])([ne["g"]],Se.prototype,"type",void 0),Object(d["a"])([ne["g"]],Se.prototype,"_level",void 0),Object(d["a"])([ne["g"]],Se.prototype,"_intensity",void 0),Object(d["a"])([ne["g"]],Se.prototype,"levels",void 0),Object(d["a"])([ne["g"]],Se.prototype,"hue",void 0),Object(d["a"])([ne["g"]],Se.prototype,"artist",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["c"])(Object(ne["f"])()))],Se.prototype,"tags",void 0);var _e=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);_e=Object(d["a"])([Object(h["a"])({components:{ValueMeter:ue,TextButton:A},props:{dice:Object},methods:{log:function(e){console.log(e)}},computed:{cssVars:function(){return{"--border-color":"black"}}}})],_e);var Te=_e;n("bd0e");const De=q()(Te,[["render",xe]]);var Re=De,Be=Object(a["H"])("data-v-6f0fcc3e");Object(a["u"])("data-v-6f0fcc3e");var Me={key:0,style:{"grid-area":"r"}},qe={class:"round-counter"},Ee={key:0},Ae={key:1,style:{margin:"0",padding:"0"}},Ne={key:0,class:"bonus-rolls"},Le={key:1,class:"cards-to-pick"},Pe={class:"buttons"},Ie={style:{margin:"0"}};Object(a["r"])();var ze=Be((function(e,t,n,i,r,c){var s=Object(a["z"])("ChatView"),o=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",{class:["dialogue-status-card window",{simple:void 0!==e.title}]},[Object(a["g"])(s,{class:"text",text:e.game.currentDialogue},null,8,["text"]),void 0!==e.title?(Object(a["q"])(),Object(a["d"])("div",Me,[Object(a["g"])("h1",null,Object(a["C"])(e.title),1)])):(Object(a["q"])(),Object(a["d"])(a["a"],{key:1},[Object(a["g"])("div",qe,[e.game.round.value>0?(Object(a["q"])(),Object(a["d"])("h3",Ee,Object(a["C"])(e.game.roundString),1)):(Object(a["q"])(),Object(a["d"])("h1",Ae,"Ditzy Dice"))]),e.game.round.value>0&&"bonus"!==e.game.stageId?(Object(a["q"])(),Object(a["d"])("div",Ne,[Object(a["g"])("h3",null,"Bonus rolls: "+Object(a["C"])(e.game.state.bonusRolls.value)+" / "+Object(a["C"])(e.game.state.bonusRolls.max),1)])):Object(a["e"])("",!0),e.game.state.cardsToPick>0?(Object(a["q"])(),Object(a["d"])("div",Le,[Object(a["g"])("h3",null,"Picked "+Object(a["C"])(e.game.state.cardsPickedThisRound)+" of "+Object(a["C"])(e.game.state.cardsToPick)+" cards",1)])):Object(a["e"])("",!0)],64)),Object(a["g"])("div",Pe,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.buttons,(function(e){return Object(a["q"])(),Object(a["d"])(o,{key:e,onClick:function(t){return e.fun()}},{default:Be((function(){return[Object(a["g"])("p",Ie,Object(a["C"])(e.label),1)]})),_:2},1032,["onClick"])})),128))])],2)})),Fe=Object(a["H"])("data-v-2a2554f0");Object(a["u"])("data-v-2a2554f0");var Ve={class:"chat-box"},He=Object(a["g"])("div",{class:"profile-image"},null,-1);Object(a["r"])();var We=Fe((function(e,t,n,i,r,c){var s=Object(a["z"])("BlushList");return Object(a["q"])(),Object(a["d"])(s,{class:"chat-view",style:e.cssVars},{default:Fe((function(){return[Object(a["g"])("div",Ve,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.lines,(function(e){return Object(a["q"])(),Object(a["d"])("div",{class:["chat-item",e.name]},[Object(a["g"])("div",{class:"chat-bubble",innerHTML:e.text},null,8,["innerHTML"]),He],2)})),256))])]})),_:1},8,["style"])})),Ue=Object(a["H"])("data-v-4ad23e39");Object(a["u"])("data-v-4ad23e39");var Ge={class:"blush-list"},$e={class:"content"};Object(a["r"])();var Je=Ue((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",Ge,[Object(a["g"])("div",$e,[Object(a["y"])(e.$slots,"default")])])})),Ye=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Ye=Object(d["a"])([Object(h["a"])({components:{},props:{},emits:["close"],methods:{},computed:{util:function(){return te}}})],Ye);var Xe=Ye;n("8020");const Ke=q()(Xe,[["render",Je],["__scopeId","data-v-4ad23e39"]]);var Ze=Ke,Qe=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Qe=Object(d["a"])([Object(h["a"])({components:{BlushList:Ze},props:{lines:Object},emits:["close"],methods:{},computed:{util:function(){return te},cssVars:function(){return{"--devil-image":"url("+n("ce6a")+")","--player-image":"url("+n("7127")+")"}}}})],Qe);var et=Qe;n("7599"),n("0d0a");const tt=q()(et,[["render",We],["__scopeId","data-v-2a2554f0"]]);var nt=tt,at=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);at=Object(d["a"])([Object(h["a"])({components:{ValueMeter:ue,TextButton:A,ChatView:nt},props:{menu:Object,title:String},methods:{log:function(e){console.log(e)}},computed:{game:function(){return this.menu.game}}})],at);var it=at;n("34ce");const rt=q()(it,[["render",ze],["__scopeId","data-v-6f0fcc3e"]]);var ct=rt,st=Object(a["H"])("data-v-f487b2ac");Object(a["u"])("data-v-f487b2ac");var ot={class:"card-hand-window cards-wrapper drawn-cards"},ut={class:"label-wrapper"},lt={class:"label-row"},dt={class:"cards"};Object(a["r"])();var ht=st((function(e,t,n,i,r,c){var s=Object(a["z"])("PlayingCard");return Object(a["q"])(),Object(a["d"])("div",ot,[Object(a["g"])("div",ut,[Object(a["g"])("span",lt,[Object(a["y"])(e.$slots,"default")])]),Object(a["g"])("div",dt,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.deck.cards,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t,card:t,class:{scaled:t.scale},onClick:function(n){e.toggleScale(t),e.game.clickCard(t)}},null,8,["card","class","onClick"])})),128))])])})),ft=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.label="",e.scaledCard=new Se({}),e}return n}(h["b"]);ft=Object(d["a"])([Object(h["a"])({components:{PlayingCard:fe},props:{menu:Object,deck:Object,label:String},methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new Se({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)}},computed:{game:function(){return this.menu.game}}})],ft);var bt=ft;n("8743");const gt=q()(bt,[["render",ht],["__scopeId","data-v-f487b2ac"]]);var vt=gt,pt=Object(a["H"])("data-v-70747209");Object(a["u"])("data-v-70747209");var Ot={key:0,style:{"grid-area":"r"}},mt={class:"buttons"};Object(a["r"])();var jt=pt((function(e,t,n,i,r,c){var s=Object(a["z"])("ChatView"),o=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",{class:["dialogue-card window",{"no-title":void 0===e.title}]},[Object(a["g"])(s,{class:"text",lines:e.game.currentDialogue},null,8,["lines"]),void 0!==e.title?(Object(a["q"])(),Object(a["d"])("div",Ot,[Object(a["g"])("h1",null,Object(a["C"])(e.title),1)])):Object(a["e"])("",!0),Object(a["g"])("div",mt,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.buttons,(function(e){return Object(a["q"])(),Object(a["d"])(o,{key:e,class:"next-button",onClick:function(t){return e.fun()},innerHTML:e.label},null,8,["onClick","innerHTML"])})),128))])],2)})),yt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);yt=Object(d["a"])([Object(h["a"])({components:{ValueMeter:ue,TextButton:A,ChatView:nt},props:{menu:Object,title:String},methods:{log:function(e){console.log(e)}},computed:{game:function(){return this.menu.game}},created:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],yt);var kt=yt;n("d736");const wt=q()(kt,[["render",jt],["__scopeId","data-v-70747209"]]);var Ct=wt,St=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.scaledCard=new Se({}),e.showActivatedCards=!1,e}return n}(h["b"]);St=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PlayingCard:fe,DiceView:Re,DialogueCard:Ct,DialogueStatusCard:ct,CardHandWindow:vt},props:{menu:Object},methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new Se({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)}},computed:{game:function(){return this.menu.game},handDeck:function(){return this.showActivatedCards?this.game.player.hand.copy().addDeck(this.game.pickedCards):this.game.pickedCards}}})],St);var xt=St;n("ca78");const _t=q()(xt,[["render",_],["__scopeId","data-v-5bfce8f7"]]);var Tt=_t,Dt=(n("b64b"),n("2909")),Rt=(n("cb29"),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;Object(o["a"])(this,e),this._value=1,this._locked=!1,this.isRolling=!1,this.valueUsed=!0,this.max=t,this.game=n}return Object(J["a"])(e,[{key:"load",value:function(e){this.game=e}},{key:"useValue",value:function(){return this.valueUsed=!0,this.value}},{key:"roll",value:function(){this.isRolling||this.locked||(this.isRolling=!0,this.rollingDice(400))}},{key:"rollingDice",value:function(e){var t=this,n=9,a=performance.now(),i=function i(r){var c=r-a,s=1-te.clamp(c/e,0,1);t._value=Math.round(s*n),c<e?requestAnimationFrame(i):(t._value=Math.floor(Math.random()*t.max)+1,t.valueUsed=!1,t.game.notifyDiceRoll(t.value),t.isRolling=!1)};requestAnimationFrame(i)}},{key:"isUsed",get:function(){return this.valueUsed}},{key:"locked",set:function(e){this._locked=e},get:function(){return this._locked||!this.isUsed}},{key:"value",get:function(){return this._value}},{key:"rolling",get:function(){return this.isRolling}}]),e}()),Bt=function(){function e(t,n){Object(o["a"])(this,e),this.label=t,this.fun=n}return Object(J["a"])(e,[{key:"setLabel",value:function(e){return this.label=e,this}},{key:"label",set:function(e){var t=new pe.a;this._label=t.render(e)},get:function(){return this._label}}]),e}(),Mt=function(){function e(t,n){var i=this;Object(o["a"])(this,e),this.id="stage",this.args={},this._allowDiceBuy=!1,this._allowManaBuy=!0,this.activeComponent="GameScreen",this.endpoints={},this.state=Object(a["v"])({buttons:[]}),this.nextButton=new Bt("Next",(function(){return i.nextStage()})),this.game=t,this.id=n}return Object(J["a"])(e,[{key:"onStart",value:function(){}},{key:"onResume",value:function(){}},{key:"onEnd",value:function(){}},{key:"onDiceRoll",value:function(e){}},{key:"onCardClick",value:function(e){}},{key:"link",value:function(e){return this._nextStage=e,e}},{key:"resumeStage",value:function(e){this.game.setStage(e),e.onResume()}},{key:"nextStage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.onEnd(),void 0!=e?this.gotoNext(e,t):void 0!=this._nextStage?this.gotoNext(this._nextStage,t):this.game.setStage(this)}},{key:"allowDiceBuy",value:function(){return this._allowDiceBuy}},{key:"allowManaBuy",value:function(){return this._allowManaBuy}},{key:"createMessage",value:function(e){this.game.print(e)}},{key:"sendMessage",value:function(e){this.game.sendMessage(e)}},{key:"gotoNext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.game.setStage(e),e.args=t,e.onStart()}},{key:"buttons",get:function(){return this.state.buttons},set:function(e){this.state.buttons=e}}]),e}(),qt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(o["a"])(this,n),a=t.call(this,e,"text"),a.myText=i,a.buttons=[a.nextButton],a}return Object(J["a"])(n,[{key:"onStart",value:function(){this.createMessage(this.myText)}}]),n}(Mt),Et=function(){function e(){Object(o["a"])(this,e),this.hand=new Ce,this.mana=0,this.abilities=[]}return Object(J["a"])(e,[{key:"useMana",value:function(e){return e<=this.mana&&(this.mana-=e,!0)}},{key:"addMana",value:function(e){this.mana+=e}},{key:"getMana",value:function(){return this.mana}}]),e}(),At=function(){function e(t){Object(o["a"])(this,e),this.game=t}return Object(J["a"])(e,[{key:"start",value:function(){this.firstStage.onStart()}}]),e}(),Nt=n("45eb"),Lt=n("7e84"),Pt=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return!0};Object(o["a"])(this,e),this.name="",this.name=t,this.cost=n,this.fun=a,this.available=i,this.secret=function(e){return!1},this.visible=function(e){return!0}}return Object(J["a"])(e,[{key:"setFun",value:function(e){return this.fun=e,this}},{key:"setAvailableFun",value:function(e){return this.available=e,this}},{key:"setSecretFun",value:function(e){return this.secret=e,this}},{key:"setVisibleFun",value:function(e){return this.visible=e,this}},{key:"activate",value:function(e){this.isAvailable(e)&&("mana"==this.cost.resource&&e.player.useMana(this.cost.value),"bonus"==this.cost.resource&&e.bonusRolls.addValue(-this.cost.value),this.fun(e))}},{key:"isAvailable",value:function(e){return this.available(e)&&("mana"==this.cost.resource&&this.cost.value<=e.player.getMana()||"bonus"==this.cost.resource&&e.bonusRolls.value-this.cost.value<=e.bonusRolls.max)}},{key:"isVisible",value:function(e){return this.visible(e)&&(this.isAvailable(e)||!this.isAvailable(e)&&!this.secret(e))}},{key:"title",get:function(){return"".concat(this.name)}},{key:"subtitle",get:function(){return this.cost.value>0?"Pay ".concat(this.cost.value," ").concat(this.cost.resource):this.cost.value<0?"Gain ".concat(-this.cost.value," ").concat(this.cost.resource):""}}],[{key:"buyMana",value:function(){var t=new e("+2 mana",{value:-1,resource:"bonus"},(function(e){e.player.addMana(2)}),(function(e){return e.allowManaBuy()})).setVisibleFun((function(e){return e.allowManaBuy()}));return t.secret=function(e){return!0},t}},{key:"buyDice",value:function(){return new e("Buy dice",{value:2,resource:"mana"},(function(e){e.diceCount+=1}),(function(e){return e.allowDiceBuy()}))}},{key:"sellDice",value:function(){var t=new e("Sell dice",{value:-2,resource:"mana"},(function(e){e.diceCount-=1}),(function(e){return e.allowDiceSale()}));return t}},{key:"pickAnyCard",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=e.PICK_ANY_CARD_COST+(n-e.PICK_ANY_CARD_COST);i=te.clamp(i,e.PICK_ANY_CARD_COST,12),a>=0&&(i=a);var r=new e("Pick Any",{value:i,resource:"mana"},(function(e){for(var a=[],i=0;i<n;i++)a.push(i+1);t(a)})).setAvailableFun((function(e){return e.diceReadyCount+e.diceRollingCount==0&&!e.diceAreLocked()}));return r}},{key:"addRound",value:function(){var t=new e("Add Round",{value:7,resource:"mana"}).setFun((function(e){e.round.maxMods[te.uuid()]=new ie(1,"add")})).setAvailableFun((function(e){return e.round.max<Qt.MAX_ROUNDS})).setVisibleFun((function(e){return e.round.max<Qt.MAX_ROUNDS}));return t}}]),e}();Pt.PICK_ANY_CARD_COST=7;var It=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"intensity"),a.deck=new Ce([]),a.done=!1,a.abilities=[],a}return Object(J["a"])(n,[{key:"onStart",value:function(){var e=this;this.pickStage=this.args.pickStage,this.parentCard=this.args.parentCard,this._allowDiceBuy=!0,this._allowManaBuy=void 0==this.args.allowManaBuy||this.args.allowManaBuy,this.game.diceCount=1,this.parentCard.levels>=4&&(this.game.diceCount+=1),"numeric"==this.parentCard.type?this.createMessage(this.game.dialogue["intensityStage"]):this.createMessage(this.game.dialogue["intensityStageSelection"]),this.done=!1,this.deck=new Ce(this.parentCard.subcards).sortByLevel(),this.game.drawnCards=this.deck,this.game.diceSize=this.deck.size(),this.abilities=[Pt.buyMana(),Pt.sellDice(),Pt.buyDice(),Pt.pickAnyCard((function(t){return e.pickCard(t)}),this.deck.size())],this.game.abilities=this.abilities}},{key:"onDiceRoll",value:function(e){this.pickCard(e)}},{key:"pickCard",value:function(e){if(!this.done){this.done=!0,this.game.lockDice(!0);this.deck.pick(e);this.nextStage(new zt(this.game),{pickStage:this.pickStage,availableCards:this.deck,highlights:e,allowManaBuy:this._allowManaBuy})}}}]),n}(Mt),zt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"highlight"),a.availableCards=new Ce([]),a.highlights=[],a.highlightedCards=new Ce([]),a.done=!1,a}return Object(J["a"])(n,[{key:"onStart",value:function(){this.pickStage=this.args.pickStage,this.availableCards=this.args.availableCards,this.highlights=this.args.highlights,this.highlightedCards=this.availableCards.pick(this.highlights),this._allowManaBuy=void 0==this.args.allowManaBuy||this.args.allowManaBuy,this._allowDiceBuy=void 0==this.args.allowDiceBuy||this.args.allowDiceBuy,te.hasDuplicate(this.highlights)&&this.createMessage("Destiny calls! Some of your dice rolled the same, choose that card to gain mana for every extra dice.");var e,t=Object(ae["a"])(this.highlights);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=this.availableCards.pick([n]).cards[0];a.highlight+=1}}catch(i){t.e(i)}finally{t.f()}this.done=!1}},{key:"onCardClick",value:function(e){if(e.highlight>0){if(e.highlight>1){var t=e.highlight-1;this.createMessage("You gained ".concat(t," mana.")),this.game.player.addMana(t)}var n,a=Object(ae["a"])(this.availableCards.cards);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.highlight=0,i.scale=!1}}catch(r){a.e(r)}finally{a.f()}e.isParent?(this.pickStage.deck.removeCard(e),this.nextStage(new It(this.game),{pickStage:this.pickStage,parentCard:e,allowDiceBuy:this._allowDiceBuy,allowManaBuy:this._allowManaBuy})):(this.pickStage.deck.removeCard(e),this.game.pickCard(e),this.resumeStage(this.pickStage))}}}]),n}(Mt),Ft=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"end"),a.activeComponent="HandView",a.endpoints.end=function(){a.end()},a}return Object(J["a"])(n,[{key:"onStart",value:function(){this.game.pickedCards.sortByFamily(),this.game.menu.saveHand(),this.createMessage(this.game.dialogue["endStage"]),this.createYourNewLifeButton()}},{key:"createYourNewLifeButton",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,a=(null===(e=this.game.menu.endings)||void 0===e?void 0:e.chooseEpilogues(this.game.player.hand))||[];void 0!=n&&(a=[],a.push(n)),this.buttons=[];var i,r,c=Object(ae["a"])(a);try{var s=function(){var e=i.value;t.buttons.push(new Bt(e.title,(function(){t.epilogue=e,t.dialogue=t.epilogue.dialogueTree,void 0!=n&&(t.dialogue.ignoreRequirements=!0),t.dialogue.start(t.game.player.hand,t),t.game.title=t.epilogue.title})))};for(c.s();!(i=c.n()).done;)s()}catch(o){c.e(o)}finally{c.f()}0==this.buttons.length&&(this.createMessage("ERROR! No epilogues could be loaded. Please report the following to Gardamuse."),this.createMessage("DEBUG! Available epilogues: ".concat(null===(r=this.game.menu.endings)||void 0===r?void 0:r.epilogues.length)),this.createMessage("DEBUG! Fulfilled epilogues: ".concat(a)),this.buttons.push(new Bt("Back to Main Menu",(function(){t.end()}))))}},{key:"end",value:function(){var e,t=this,n=this.epilogue.id,a=this.dialogue.currentSegment.id;a=a.substring(0,a.length-4),this.game.menu.unlockEnding(n,a),this.game.title=(null===(e=this.dialogue)||void 0===e?void 0:e.currentSegment.endpointLabel)||"",this.buttons=[new Bt("Save Screenshot",(function(){te.screenshot("cards","hand-".concat(t.game.pickedCards.size()))})),new Bt("Back to Menu",(function(){t.game.end()}))]}}]),n}(Mt),Vt=(n("a15b"),n("1276"),n("2ca0"),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(o["a"])(this,e),this.name=t,this.text=n}return Object(J["a"])(e,null,[{key:"parseLine",value:function(t){var n=new pe.a({breaks:!0}),a="narrator",i=t.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"');return t.startsWith("demon: ")&&(a="demon",i=t.replace("demon: ","")),t.startsWith("player: ")&&(a="player",i=t.replace("player: ","")),new e(a,i.split("\n").map((function(e){return n.render(e)})).join("\n"))}},{key:"parseLines",value:function(t){var n=t.split(/\n\n/).filter((function(e){return e.length>0})).map((function(t){return e.parseLine(t)}));return n}}]),e}()),Ht=n("ade3"),Wt=(n("25eb"),n("466d"),function(){function e(t,n,a,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.intensitySum;Object(o["a"])(this,e),this.mode="or",this.args=[],this.operator=">",this.intensity=0,this.fun=e.intensitySum,this.mode=t,this.args=n,this.operator=a,this.intensity=i,this.fun=r}return Object(J["a"])(e,[{key:"isFulfilled",value:function(e){return this.scoreIsFulfilled(this.intensityScore(e))}},{key:"scoreIsFulfilled",value:function(e){return"<"==this.operator?e<this.intensity:"<="==this.operator?e<=this.intensity:"=="==this.operator?e==this.intensity:">="==this.operator?e>=this.intensity:">"==this.operator?e>this.intensity:(console.error('Requirement operator "'.concat(this.operator,'" was not recognized.')),!1)}},{key:"intensityScore",value:function(e){return this.fun(e,this.args)}},{key:"toString",value:function(){return"".concat(this.mode.toUpperCase()," [").concat(this.args,"] [").concat(this.operator,"] [").concat(this.intensity,"]")}},{key:"toJSON",value:function(){return Object(ne["h"])(this)}}],[{key:"functions",value:function(t){var n={sum:e.intensitySum};return n[t]}},{key:"intensitySum",value:function(e,t){new Ce(Ce.referenceAllLevels());var n,a=0,i=Object(ae["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(Ce.isTag(r)){var c,s=e.onlyTag(r).cards,o=Object(ae["a"])(s);try{for(o.s();!(c=o.n()).done;){var u=c.value;a+=Math.max(u.intensity,1)}}catch(d){o.e(d)}finally{o.f()}}else{if(void 0==Ce.lookup(r))throw new Error('Bad requirement "'.concat(this.toString(),'", "').concat(r,'" is neither an id, tag or family.'));var l=e.getCardById(r);void 0==l?(l=e.pack().getCardById(r),void 0!=l&&(a+=l.subcards[l.subcards.length-1].intensity)):a+=Math.max(l.intensity,1)}}}catch(d){i.e(d)}finally{i.f()}return a}},{key:"orGroupFulfilled",value:function(e,t){var n,a=!0,i=Object(ae["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!r.isFulfilled(e)){a=!1;break}}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"parseRequirements",value:function(t){var n=[];t=t.toLowerCase().replace(/(\r\n|\n|\r)/gm," ");var a,i=t.split(/\bor\b/).map((function(e){return e.split(/\band\b/)})),r=Object(ae["a"])(i);try{for(r.s();!(a=r.n()).done;){var c,s=a.value,o="or",u=Object(ae["a"])(s.entries());try{for(u.s();!(c=u.n()).done;){var l=Object(ge["a"])(c.value,2),d=l[0],h=l[1];d>0&&(o="and"),h=h.trim();var f=this.getOperator(h),b=this.getLeft(h,f),g=this.getRight(h,f),v=this.stripFun(b),p=Object(ge["a"])(v,2),O=p[0],m=p[1];m=m.map((function(e){return e.replace(/"/g,"")})),n.push(new e(o,m,f,Number.parseInt(g),e.functions(O)))}}catch(j){u.e(j)}finally{u.f()}}}catch(j){r.e(j)}finally{r.f()}return this.groupRequirements(n)}},{key:"groupRequirements",value:function(e){var t,n=[],a=[],i=Object(ae["a"])(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;"or"==r.mode&&a.length>0&&(n.push(a),a=[]),a.push(r)}}catch(c){i.e(c)}finally{i.f()}return n.push(a),n}},{key:"stripFun",value:function(e){var t,n=e.match(/.*(?=\()/);t=null!=n?n[0]:"";var a=[e];if(""!=t){var i=e.match(/\(.*(?=\))/);null!=i?(a=this.splitArgs(i[0]),a[0]=a[0].replace("(","")):console.error("Bad expression: ".concat(e))}return[t,a]}},{key:"splitArgs",value:function(e){return e.split(",").map((function(e){return e.trim()}))}},{key:"getLeft",value:function(e,t){var n;return null===(n=e.split(t)[0])||void 0===n?void 0:n.trim()}},{key:"getRight",value:function(e,t){var n,a=null===(n=e.split(t)[1])||void 0===n?void 0:n.trim();return a||"0"}},{key:"getOperator",value:function(e){var t,n=e.match(/ > | >= | == | <= | < /);return t=null==n?">=":n[0].trim(),t}}]),e}());Object(d["a"])([ne["g"]],Wt.prototype,"mode",void 0),Object(d["a"])([ne["g"]],Wt.prototype,"args",void 0),Object(d["a"])([ne["g"]],Wt.prototype,"operator",void 0),Object(d["a"])([ne["g"]],Wt.prototype,"intensity",void 0);var Ut=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(o["a"])(this,e),this.currentNodeIndex=-1,this.requirements=[],this.optionIds=[],this.optionSegments=[],this.endpointId="",this.endpointLabel="Next",this.id=n,this.title=a,this.nodes=t,this.endpointId=i,void 0!=this.nodes&&0!=this.nodes.length||(this.nodes=[new Vt],this.start())}return Object(J["a"])(e,[{key:"currentMessage",value:function(){var e=this.nodes[this.currentNodeIndex];return e||new Vt}},{key:"start",value:function(){this.currentNodeIndex=0}},{key:"gotoNextNode",value:function(){this.currentNodeIndex<this.nodes.length-1&&(this.currentNodeIndex+=1)}},{key:"isStarted",value:function(){return this.currentNodeIndex>=0}},{key:"isOnLastNode",value:function(){return this.currentNodeIndex==this.nodes.length-1}},{key:"hasEndpoint",value:function(){return""!=this.endpointId}},{key:"getEndpoint",value:function(e){var t=e.endpoints[this.endpointId];if(void 0!=t)return t;throw Error('Could not select option "'.concat(this.id,'" because endpoint ').concat(this.endpointId," is undefined."))}},{key:"linkOptions",value:function(e){this.optionSegments=[];var t,n=Object(ae["a"])(this.optionIds);try{for(n.s();!(t=n.n()).done;){var a=t.value;void 0!=e[a]?this.optionSegments.push(e[a]):console.error('The "'.concat(this.id,'" node has an unknown option "').concat(a,'". It has been skipped.'))}}catch(i){n.e(i)}finally{n.f()}}},{key:"getFulfilledOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.options.filter((function(n){return n.isRequirementFulfilled(e)||t}))}},{key:"isRequirementFulfilled",value:function(e){if(0==this.requirements.length)return!0;var t,n=Object(ae["a"])(this.requirements);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(Wt.orGroupFulfilled(e,a))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"length",value:function(){return this.nodes.length}},{key:"options",get:function(){if(this.isOnLastNode()&&this.hasEndpoint()){var t=new e([],"".concat(this.id,".end"),"".concat(this.endpointLabel),this.endpointId);return t.endpointLabel=this.endpointLabel,[t]}return this.isOnLastNode()?this.optionSegments:[this]}}],[{key:"parseSegment",value:function(t){var n=t.id,a=t.title?t.title:"Next",i=t.text?Vt.parseLines(t.text):[],r=t.options?t.options:[],c=t.endpoint?t.endpoint:"",s=c.fun?c.fun:c,o=c.label?c.label:"Next",u=new e(i,n,a,s);return u.requirements=t.requirements?Wt.parseRequirements(t.requirements):[],u.optionIds=r,u.endpointLabel=o,u}}]),e}(),Gt=function(){function e(t){Object(o["a"])(this,e),this.nodes={},this.ignoreRequirements=!1,this.nodes=t}return Object(J["a"])(e,[{key:"createOptionButtons",value:function(e,t,n){var a,i=this,r=[],c=Object(ae["a"])(e);try{var s=function(){var e,c=a.value,s=c.id!=(null===(e=i.activeNode)||void 0===e?void 0:e.id)?c.title:"Next";c.requirements.length>0&&!c.isStarted()&&(s="__".concat(s,"__")),r.push(new Bt(s,(function(){i.select(c,t,n)})))};for(c.s();!(a=c.n()).done;)s()}catch(o){c.e(o)}finally{c.f()}return r}},{key:"start",value:function(e,t){void 0!=this.firstNode?this.select(this.firstNode,e,t):console.error("Could not start dialogue tree as there was no first node.")}},{key:"select",value:function(e,t,n){if(this.activeNode=e,e.isStarted())if(e.isOnLastNode()){if(e.isOnLastNode()&&e.hasEndpoint())return void e.getEndpoint(n)();console.error("Segment ".concat(e.id," was expected to have an endpoint but does not."))}else e.gotoNextNode();else e.start();n.buttons=this.createOptionButtons(e.getFulfilledOptions(t,this.ignoreRequirements),t,n),n.sendMessage(this.currentMessage)}},{key:"currentSegment",get:function(){return this.activeNode||new Ut([new Vt],"","","")}},{key:"currentMessage",get:function(){return this.activeNode?this.activeNode.currentMessage():new Vt("","Error: Dialogue tree not initialized.")}},{key:"options",get:function(){return this.activeNode?this.activeNode.options:[]}}],[{key:"createLinear",value:function(t,n,a){var i=te.uuid(),r=new Ut(t,i,"",n);r.endpointLabel=a;var c=new e(Object(Ht["a"])({},i,r));return c.firstNode=r,c}},{key:"parseDialogue",value:function(t){var n,a={},i=Object(ae["a"])(t.nodes);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=Ut.parseSegment(r);a[c.id]=c}}catch(d){i.e(d)}finally{i.f()}for(var s=0,o=Object.values(a);s<o.length;s++){var u=o[s];u.linkOptions(a)}var l=new e(a);return l.firstNode=a[t.nodes[0].id],l}}]),e}(),$t=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"transform"),a.endpoints.nextStage=function(){a.nextStage()},a.endpoints.nextTransformation=function(){void 0!=a.nextCard&&a.activateCard(a.nextCard)},a}return Object(J["a"])(n,[{key:"onStart",value:function(){this.game.abilities=[],this._nextStage=this.args.nextStage,this.prepareNextButton(),this.game.diceCount=0,this.game.drawnCards=new Ce([])}},{key:"onEnd",value:function(){this.game.pickedCards=new Ce}},{key:"prepareNextButton",value:function(){var e=this;this.game.pickedCards.size()>0?this.buttons=[new Bt("Activate **".concat(this.nextCard.fullTitle,"**"),(function(){return e.activateCard(e.nextCard)}))]:this.buttons=[this.nextButton]}},{key:"activateCard",value:function(e){this.game.pickedCards.removeCard(e),this.game.drawnCards.addCard(e),this.game.player.hand.addCard(e),this.createNextLinearSegment(e)}},{key:"createNextLinearSegment",value:function(e){var t;if(t=""!=e.transformation?Vt.parseLines(e.transformation):Vt.parseLines("You don't feel any different."),void 0==this.nextCard){var n="Next Round";1==this.game.round.fraction&&(n=this.game.state.bonusRolls.value>0&&!this.game.state.isBonusRound?"To Bonus Round":"To Epilogue"),Gt.createLinear(t,"nextStage",n).start(new Ce,this)}else Gt.createLinear(t,"nextTransformation","Activate **".concat(this.nextCard.fullTitle,"**")).start(new Ce,this)}},{key:"nextCard",get:function(){return this.game.pickedCards.cards[0]}}]),n}(Mt),Jt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"bonus"),a.pickedCards=new Ce([]),a.leftToPick=0,a.deck=new Ce([]),a}return Object(J["a"])(n,[{key:"onStart",value:function(){var e=this;this.createMessage(this.game.dialogue["bonusStage"]),this.deck=this.game.deck.withoutFamily("reward").draw(Qt.CARDS_IN_BONUS_ROUND),this.game.state.drawnCards=this.deck,this.game.round.addValue(1),this.game.state.cardsPickedThisRound=0,this.leftToPick=this.game.state.bonusRolls.value,this.game.state.cardsToPick=this.leftToPick,this.game.diceCount=2,this.game.diceSize=this.deck.size(),this.game.state.isBonusRound=!0,this._allowDiceBuy=!0,this.game.abilities=[Pt.buyDice(),Pt.sellDice(),Pt.pickAnyCard((function(t){return e.onDiceRoll(t)}),this.game.drawnCards.size())],0==this.leftToPick&&(this.onResume(),this.nextStage(new Ft(this.game)))}},{key:"onResume",value:function(){var e=this;this.game.state.drawnCards=this.deck,this.game.diceCount=2,this.game.diceSize=this.deck.size(),this.game.abilities=this.game.abilities=[Pt.buyDice(),Pt.sellDice(),Pt.pickAnyCard((function(t){return e.onDiceRoll(t)}),this.game.drawnCards.size())],this._allowDiceBuy=!0,0==this.leftToPick&&(this.game.diceCount=0,this.createMessage("demon: Great, you've completed the bonus round."),this._nextStage=new Ft(this.game),this.nextStage(new $t(this.game),{nextStage:this._nextStage}),this.game.lockDice(!0))}},{key:"onDiceRoll",value:function(e){this.leftToPick>0&&(this.leftToPick-=1,this.pickedCards=this.deck.pick(e),this.game.lockDice(!0),this.nextStage(new zt(this.game),{pickStage:this,availableCards:this.deck,highlights:e,allowManaBuy:!1}))}}]),n}(Mt),Yt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"pick"),a.leftToPick=0,a.diceCount=1,a.deck=new Ce([]),a.pickAnyCost=Pt.PICK_ANY_CARD_COST,a}return Object(J["a"])(n,[{key:"onStart",value:function(){var e=this;this.leftToPick=this.args.cardsToPick,this._nextStage=this.args.drawStage,this.createMessage(this.game.dialogue["pickStage"]),this.deck=this.game.drawnCards,this.diceCount=2,this.game.diceCount=this.diceCount,this.game.diceSize=this.deck.size(),this.buttons=[],this._allowDiceBuy=!0,this.game.abilities=[Pt.buyMana(),Pt.sellDice(),Pt.buyDice(),Pt.pickAnyCard((function(t){return e.pickCard(t)}),this.deck.size(),this.pickAnyCost),Pt.addRound()]}},{key:"onResume",value:function(){var e=this;this.game.drawnCards=this.deck,this.diceCount=Math.max(2,this.diceCount-1),this.game.diceCount=this.diceCount,this.game.diceSize=this.deck.size(),this._allowDiceBuy=!0,this.game.abilities=[Pt.buyMana(),Pt.sellDice(),Pt.buyDice(),Pt.pickAnyCard((function(t){return e.pickCard(t)}),this.deck.size(),this.pickAnyCost),Pt.addRound()],0==this.leftToPick&&(this.createMessage("demon: Good job! You completed round ".concat(this.game.round.value,".\n")+"Time to see what those cards will do to you!"),this.game.lockDice(!0),this.game.deck.addDeck(this.game.drawnCards,!0),1==this.game.round.fraction&&(this.game.state.bonusRolls.value>0&&!this.game.state.isBonusRound?this._nextStage=new Jt(this.game):this._nextStage=new Ft(this.game)),this.nextStage(new $t(this.game),{nextStage:this._nextStage}))}},{key:"onDiceRoll",value:function(e){this.pickCard(e)}},{key:"pickCard",value:function(e){if(this.leftToPick>0){this.leftToPick-=1;this.deck.pick(e);this.game.lockDice(!0),this.nextStage(new zt(this.game),{pickStage:this,availableCards:this.deck,highlights:e})}}}]),n}(Mt),Xt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"draw"),a.allowNext=!0,a.availableExtraDraws=1,a.diceCount=n.DICE_COUNT,a.diceSize=n.DICE_SIZE,a.diceHasBeenRolled=!1,a.abilities=[Pt.buyMana(),new Pt("Pick Less",{value:2,resource:"mana"},(function(e){a.addDraws(-1),a.availableExtraDraws-=1}),(function(e){return a.game.state.cardsToPick>1&&a.availableExtraDraws>0&&a.diceHasBeenRolled})),new Pt("Pick More",{value:2,resource:"mana"},(function(e){a.addDraws(1),a.availableExtraDraws-=1}),(function(e){return a.game.state.cardsToPick<6&&a.availableExtraDraws>0&&a.diceHasBeenRolled})),Pt.addRound()],a}return Object(J["a"])(n,[{key:"onStart",value:function(){this.createMessage(this.game.dialogue["drawStage"]),this.game.state.drawnCards=this.game.drawCards(0),this.game.diceCount=this.diceCount,this.game.diceSize=this.diceSize,this.allowNext=!1,this.availableExtraDraws=1,this.buttons=[],this.game.round.addValue(1),this.game.state.cardsPickedThisRound=0,this.game.state.cardsToPick=0,this._allowDiceBuy=!1,this.game.abilities=[],this.diceHasBeenRolled=!1}},{key:"onResume",value:function(){this.createMessage(this.game.dialogue["drawStagePostBan"]),this.game.diceCount=this.diceCount,this.game.diceSize=this.diceSize,this.allowNext=!1,this.availableExtraDraws=1,this.buttons=[],this.game.state.cardsPickedThisRound=0,this.game.state.cardsToPick=0,this._allowDiceBuy=!1,this.game.abilities=[],this.diceHasBeenRolled=!1}},{key:"onDiceRoll",value:function(e){if(!this.allowNext){this.game.state.drawnCards=this.game.drawCards(Qt.CARDS_PER_ROUND),this.game.abilities=this.abilities;var t=e.reduce((function(e,t){return e+t}));this.game.state.cardsToPick=t,this.createMessage("demon: You will have to pick ".concat(this.game.state.cardsToPick," cards this round.\nAlthough, if you want to pick more or less cards, you may spend some mana to do that, but you have to do it now.")),this.allowNext=!0,this.diceHasBeenRolled=!0,this.game.lockDice(!0),this.updateButtons()}}},{key:"nextStage",value:function(){this.allowNext&&Object(Nt["a"])(Object(Lt["a"])(n.prototype),"nextStage",this).call(this,new Yt(this.game),{cardsToPick:this.game.state.cardsToPick,drawStage:this})}},{key:"addDraws",value:function(e){this.game.state.cardsToPick=te.clamp(this.game.state.cardsToPick+e,1,6),e>=0?this.createMessage("demon: An extra pick? Guess you're seeing something good, huh? You'll pick ".concat(this.game.state.cardsToPick," cards this round.")):this.createMessage("demon: Alright, you only have to pick ".concat(this.game.state.cardsToPick," cards this round."))}},{key:"updateButtons",value:function(){var e=[];e.push(this.nextButton),this.buttons=e}}]),n}(Mt);Xt.DICE_COUNT=2,Xt.DICE_SIZE=3;var Kt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"dialogue"),a.activeComponent="DialogueScreen",a}return Object(J["a"])(n,[{key:"onStart",value:function(){}}]),n}(Mt),Zt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;Object(o["a"])(this,n),a=t.call(this,e),a.stage1=new Kt(a.game);var i=new Xt(a.game);return a.stage1.endpoints.drawStage=function(){return a.stage1.nextStage(i)},a.stage1.endpoints.leave=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.game.menu.endGame();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Gt.parseDialogue(a.game.dialogue2).start(new Ce,a.stage1),a}return Object(J["a"])(n,[{key:"firstStage",get:function(){return this.stage1}}]),n}(At),Qt=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;Object(o["a"])(this,e),this.state=Object(a["v"])({deck:new Ce,dice:[],drawnCards:new Ce([]),pickedCards:new Ce([]),stage:new qt(this),round:new re(0,0,3),isBonusRound:!1,cardsToPick:0,cardsPickedThisRound:0,rewardRolls:new re(0,0,0),bonusRolls:new re(0,0,0),player:new Et,lines:[],title:""}),this.currentRolls=[],this.menu=t,this.dialogue=JSON.parse(ye().dialogueString.value),this.dialogue2=JSON.parse(ye().dialogue2String.value),this.state.deck=(new Ce).createNew().pack(),this.state.dice=[],this.state.drawnCards=new Ce([]),this.state.pickedCards=new Ce([]),this.state.round=new re(0,0,3),this.state.isBonusRound=!1,this.state.cardsToPick=0,this.state.cardsPickedThisRound=0,this.state.rewardRolls=new re(0,0,6),this.state.bonusRolls=new re(0,0,e.MAX_BONUS_ROLLS),this.state.lines=[],this.gameMode=void 0!=i?i:new Zt(this),this.state.stage=this.gameMode.firstStage,this.state.deck.shuffle(),this.lockDice(!0),this.gameMode.start(),console.log("Deck size:",this.state.deck.size(),this.state.deck.allLevels.length),window.gredraw=function(e){if("draw"!=n.state.stage.id&&"pick"!=n.state.stage.id&&"bonus"!=n.state.stage.id)return"Can not redraw cards in this stage.";var t=n.drawCards(e);return n.state.drawnCards=t,"pick"==n.state.stage.id&&(n.state.stage.deck=t),"Drew ".concat(e," cards, ").concat(n.deck.size()," cards remain in the current deck.")},window.groll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n.state.stage.onDiceRoll(Array(t).fill(e))},window.gameComponent=function(){return n.activeComponent}}return Object(J["a"])(e,[{key:"end",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.menu.endGame());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"drawCards",value:function(e){return this.state.deck.draw(e)}},{key:"pickCard",value:function(e){this.state.pickedCards.addCard(e),this.state.cardsPickedThisRound+=1}},{key:"nextStage",value:function(){this.state.stage.nextStage()}},{key:"setStage",value:function(e){this.state.stage=e}},{key:"notifyDiceRoll",value:function(e){if(this.currentRolls.push(e),this.allDiceReady){this.state.stage.onDiceRoll(this.diceValues),this.currentRolls=[];var t,n=Object(ae["a"])(this.state.dice);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.useValue()}}catch(i){n.e(i)}finally{n.f()}}}},{key:"lockDice",value:function(e){var t,n=Object(ae["a"])(this.state.dice);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.locked=e}}catch(i){n.e(i)}finally{n.f()}}},{key:"diceAreLocked",value:function(){var e,t=0,n=Object(ae["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.locked&&(t+=1)}}catch(i){n.e(i)}finally{n.f()}return t==this.state.dice.length}},{key:"sellDice",value:function(){this.allowDiceSale()&&(this.bonusRolls.addValue(-1),this.state.dice.pop())}},{key:"allowDiceSale",value:function(){return this.state.stage.allowDiceBuy()&&this.diceReadyCount+this.diceRollingCount==0&&!this.diceAreLocked()&&this.state.dice.length>1}},{key:"allowManaBuy",value:function(){return this.state.stage.allowManaBuy()}},{key:"allowDiceBuy",value:function(){return this.state.stage.allowDiceBuy()&&this.diceReadyCount+this.diceRollingCount==0&&!this.diceAreLocked()&&this.state.dice.length<e.MAX_DICE}},{key:"clickCard",value:function(e){this.state.stage.onCardClick(e)}},{key:"sendMessage",value:function(e){this.state.lines.push(e)}},{key:"print",value:function(e){var t,n=Object(ae["a"])(Vt.parseLines(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;this.state.lines.push(a)}}catch(i){n.e(i)}finally{n.f()}}},{key:"buttons",get:function(){return this.state.stage.buttons}},{key:"diceValues",get:function(){var e,t=[],n=Object(ae["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.value)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"allDiceReady",get:function(){return this.diceReadyCount==this.state.dice.length}},{key:"diceReadyCount",get:function(){var e,t=0,n=Object(ae["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.isUsed||(t+=1)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"diceRollingCount",get:function(){var e,t=0,n=Object(ae["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.rolling&&(t+=1)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"activeComponent",get:function(){return this.state.stage.activeComponent}},{key:"diceCount",set:function(e){for(var t=[],n=0;n<e;n++)0==this.state.dice.length?t.push(new Rt(6,this)):t.push(new Rt(this.state.dice[0].max,this));this.state.dice=t},get:function(){return this.state.dice.length}},{key:"diceSize",set:function(e){for(var t=0;t<this.state.dice.length;t++)this.state.dice[t]=new Rt(e,this)},get:function(){return this.diceCount>0?this.state.dice[0].max:0}},{key:"player",get:function(){return this.state.player}},{key:"abilities",get:function(){return this.player.abilities},set:function(e){this.player.abilities=e}},{key:"currentDialogue",get:function(){return this.state.lines}},{key:"deck",get:function(){return this.state.deck}},{key:"drawnCards",get:function(){return this.state.drawnCards},set:function(e){this.state.drawnCards=e}},{key:"pickedCards",get:function(){return this.state.pickedCards},set:function(e){this.state.pickedCards=e}},{key:"round",get:function(){return this.state.round}},{key:"roundString",get:function(){return this.state.isBonusRound?"Bonus Round":"Round ".concat(this.round.value," of ").concat(this.round.max)}},{key:"pickedString",get:function(){return 0==this.state.cardsToPick?"Draw cards":"Picked ".concat(this.state.cardsPickedThisRound," of ").concat(this.state.cardsToPick," cards")}},{key:"stageId",get:function(){return this.state.stage.id}},{key:"rewardRolls",get:function(){return this.state.rewardRolls}},{key:"bonusRolls",get:function(){return this.state.bonusRolls}},{key:"cardsPickedThisRound",get:function(){return this.state.cardsPickedThisRound}},{key:"showDialogueOnly",get:function(){return 0==this.round.value}},{key:"title",get:function(){return this.state.title},set:function(e){this.state.title=e}}]),e}();Qt.MAX_DICE=5,Qt.MAX_ROUNDS=5,Qt.CARDS_PER_ROUND=9,Qt.CARDS_IN_BONUS_ROUND=12,Qt.MAX_BONUS_ROLLS=6;var en=function(){function e(t,n,a){Object(o["a"])(this,e),this.name=t,this.description=n,this.fun=a}return Object(J["a"])(e,[{key:"activate",value:function(e){var t=this;window[this.name]=function(n){return t.fun(e,n)}}}]),e}(),tn=(n("843c"),n("38cf"),n("caad"),n("2532"),function(){function e(t,n,a,i,r){Object(o["a"])(this,e),this.id="",this.title="",this.likelihood=0,this.requirements=[],this.nodes=[],this.mod="",this.id=t,this.title=n,this.likelihood=a,this.requirements=i,this.nodes=r}return Object(J["a"])(e,[{key:"isFulfilled",value:function(e){try{var t,n=Object(ae["a"])(this.requirements);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Wt.orGroupFulfilled(e,a);if(i)return!0}}catch(r){n.e(r)}finally{n.f()}}catch(c){console.error('Could not calculate fulfilment for ending "'.concat(this.id,'".\n').concat(c.message))}return!1}},{key:"getNodes",value:function(){return this.nodes}},{key:"getAllEndings",value:function(){var e,t=this,n=[],a=Object(ae["a"])(this.nodes);try{for(a.s();!(e=a.n()).done;){var i=e.value;"endpoint"in i&&n.push(i.id)}}catch(r){a.e(r)}finally{a.f()}return n.sort((function(e,n){return t.getEndpointLabel(e).localeCompare(t.getEndpointLabel(n))}))}},{key:"findNodeParents",value:function(e){var t,n=[],a=Object(ae["a"])(this.nodes);try{for(a.s();!(t=a.n()).done;){var i=t.value;"options"in i&&i.options.includes(e)&&n.push(i.id)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"getNodeChain",value:function(e){var t=[e];while(1){var n=this.findNodeParents(t[t.length-1]);if(0==n.length)break;t.push(n[0])}return t.reverse()}},{key:"getEnding",value:function(e){var t,n=this,a=this.getNodeChain(e),i=[],r=Object(ae["a"])(a);try{var c=function(){var e=t.value,a=n.nodes.find((function(t){return t.id==e}));i.push.apply(i,Object(Dt["a"])(Vt.parseLines(a.text)))};for(r.s();!(t=r.n()).done;)c()}catch(s){r.e(s)}finally{r.f()}return i}},{key:"getEndpointLabel",value:function(e){return this.nodes.find((function(t){return t.id==e})).endpoint.label}},{key:"dialogueTree",get:function(){return Gt.parseDialogue({id:this.id,nodes:this.nodes})}}],[{key:"create",value:function(t){var n=t.id,a=t.title,i=t.likelihood?t.likelihood:0,r=Wt.parseRequirements(t.requirements),c=t.nodes?t.nodes:[];return new e(n,a,i,r,c)}}]),e}()),nn=function(){function e(){Object(o["a"])(this,e),this.epilogues=[];var t,n=Object(ae["a"])(JSON.parse(ye().endingsString.value));try{for(n.s();!(t=n.n()).done;){var a=t.value,i=tn.create(a);this.epilogues.push(i)}}catch(r){n.e(r)}finally{n.f()}}return Object(J["a"])(e,[{key:"addEpilogue",value:function(e){this.epilogues.push(e)}},{key:"chooseEpilogues",value:function(e){var t,n=[],a=Object(ae["a"])(this.epilogues);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.isFulfilled(e)&&n.push(i)}}catch(c){a.e(c)}finally{a.f()}var r=n.reduce((function(e,t){return t.likelihood>e.likelihood?t:e})).likelihood;return n=n.filter((function(e){return e.likelihood==r})),n}},{key:"selectEnding",value:function(e){var t,n=Object(ae["a"])(this.epilogues);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.id==e)return a}}catch(i){n.e(i)}finally{n.f()}return console.warn('Could not select epilogue with id "'.concat(e,'". Available ids: ').concat(this.epilogues.map((function(e){return e.id})).join(", "))),this.epilogues[0]}},{key:"correctnessSimulation",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i={},r=Object(ae["a"])(this.epilogues);try{for(r.s();!(e=r.n()).done;){var c=e.value;i[c.id]={fulfilled:0,chosen:0,score:0,appearedWith:[]}}}catch(B){r.e(B)}finally{r.f()}for(var s=0;s<t;s++){a(),n("Simulating hand ".concat(s+1));var o,u=Ce.referenceDeck().shuffle(),l=u.draw(Math.round(6+20*Math.random())),d=new Ce,h=Object(ae["a"])(l.cards);try{for(h.s();!(o=h.n()).done;){var f=o.value;f.isParent?d.addCard(te.pickFrom(f.subcards,Math.random())):d.addCard(f)}}catch(B){h.e(B)}finally{h.f()}t<=5&&n(d.toString());var b,g=Object(ae["a"])(this.epilogues);try{for(g.s();!(b=g.n()).done;){var v=b.value;v.isFulfilled(d)&&(i[v.id].fulfilled+=1)}}catch(B){g.e(B)}finally{g.f()}var p,O=this.chooseEpilogues(d),m=Object(ae["a"])(O);try{var j=function(){var e,t=p.value;i[t.id].chosen+=1,(e=i[t.id].appearedWith).push.apply(e,Object(Dt["a"])(O.filter((function(e){return e.id!=t.id})).map((function(e){return e.id}))))};for(m.s();!(p=m.n()).done;)j()}catch(B){m.e(B)}finally{m.f()}}a(),n("After simulating ".concat(t," random hands, epilogues had the following stats:"));var y,k=Object(Dt["a"])(this.epilogues).sort((function(e,t){return i[t.id].chosen-i[e.id].chosen})),w=Object(ae["a"])(k);try{for(w.s();!(y=w.n()).done;){var C,S=y.value,x=i[S.id].fulfilled,_=i[S.id].chosen,T={},D=Object(ae["a"])(i[S.id].appearedWith);try{for(D.s();!(C=D.n()).done;){var R=C.value;R in T?T[R]+=1:T[R]=1}}catch(B){D.e(B)}finally{D.f()}n("-".repeat(80)),n("".concat(S.title.padEnd(12)," | ").concat(_.toString().padStart(4)," available (").concat(this.stringifyAppearances(T),"),\n               ").concat(x.toString().padStart(4)," fulfilled"))}}catch(B){w.e(B)}finally{w.f()}}},{key:"stringifyAppearances",value:function(e){var t,n=this,a="",i=Object.keys(e),r=Object(ae["a"])(i.entries());try{var c=function(){var r,c=Object(ge["a"])(t.value,2),s=c[0],o=c[1];a+="".concat(null===(r=n.epilogues.find((function(e){return e.id==o})))||void 0===r?void 0:r.title,": ").concat(e[o]),s+1<i.length&&(a+=", ")};for(r.s();!(t=r.n()).done;)c()}catch(s){r.e(s)}finally{r.f()}return a}},{key:"testBimboEnding",value:function(){var e=this.epilogues.filter((function(e){return"bimbo"==e.id}))[0],t=new Ce;t.addCard(Ce.referenceDeck().getCardById("intelligence.intelligence 3")),t.addCard(Ce.referenceDeck().getCardById("breast-size.breast size 3")),this.assert(e.isFulfilled(t))}},{key:"assert",value:function(e){e||console.error("Assertion failed")}}]),e}(),an=function(){function e(t){Object(o["a"])(this,e),this.currentEnding="",this.menu=t,this.epilogues=t.endings?t.endings:new nn}return Object(J["a"])(e,[{key:"epiloguesList",value:function(){return this.epilogues.epilogues.sort((function(e,t){return e.title.localeCompare(t.title)}))}},{key:"select",value:function(e,t){this.currentEpilogue=this.epilogues.selectEnding(e),this.currentEnding=t}},{key:"currentEndingMessages",value:function(){return void 0==this.currentEpilogue?[]:this.currentEpilogue.getEnding(this.currentEnding)}},{key:"currentEndingLabel",value:function(){return void 0==this.currentEpilogue?"":this.currentEpilogue.getEndpointLabel(this.currentEnding)}},{key:"parseMessages",value:function(e){return void 0==e?[]:Vt.parseLines(e)}},{key:"unselect",value:function(){this.currentEpilogue=void 0}},{key:"unlockedEpilogues",value:function(){var e=this;return this.epiloguesList().filter((function(t){return e.menu.isEpilogueUnlocked(t.id)}))}},{key:"unlockedEndings",value:function(e){var t=this;return e.getAllEndings().filter((function(n){return t.menu.isEndingUnlocked(e.id,n)}))}},{key:"nrOfAllUnlockedEndings",value:function(){var e,t=0,n=Object(ae["a"])(this.epiloguesList());try{for(n.s();!(e=n.n()).done;){var a=e.value;t+=this.unlockedEndings(a).length}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"nrOfAllEndings",value:function(){var e,t=0,n=Object(ae["a"])(this.epiloguesList());try{for(n.s();!(e=n.n()).done;){var a=e.value;t+=a.getAllEndings().length}}catch(i){n.e(i)}finally{n.f()}return t}}]),e}(),rn=function(){function e(t){var n=this;Object(o["a"])(this,e),this.cheats=[new en("roll","(value): Rolls all dice to this value.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";n.state.stage.onDiceRoll([t])})),new en("pickCard","(name): Picks an unseen card from the current deck and adds it to your hand.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";var a=n.deck.allLevels.find((function(e){return e.name.toLowerCase()==t.toLowerCase()}));return void 0!=a?(n.state.pickedCards.addCard(a),"Added ".concat(a.name," to hand.")):"Could not find the ".concat(t," card in the current deck.")})),new en("addMana","(value): Adds this much mana.",(function(e,t){var n=e.game;return void 0==n?"That command cannot be used from this screen.":(n.player.addMana(t),"Added ".concat(t," mana."))})),new en("drawCard","(name): Picks an unseen card from the current deck and adds it to the list of cards drawn from the deck.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";var a=n.deck.allLevels.find((function(e){return e.name.toLowerCase()==t.toLowerCase()}));return void 0!=a?(n.state.drawnCards.addCard(a),"Added ".concat(a.name," to hand.")):"Could not find the ".concat(t," card in the current deck.")})),new en("redraw","(value): Discard currently drawn cards and replace them with this many.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";if("draw"!=n.state.stage.id&&"pick"!=n.state.stage.id&&"bonus"!=n.state.stage.id)return"Can not redraw cards in this stage.";var a=n.drawCards(t);return n.state.drawnCards=a,"pick"==n.state.stage.id&&(n.state.stage.deck=a),"Drew ".concat(t," cards, ").concat(n.deck.size()," cards remain in the current deck.")})),new en("newDeck","(): Replaces the current deck with a new one. You may get duplicate cards.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";if("draw"!=n.state.stage.id&&"pick"!=n.state.stage.id&&"bonus"!=n.state.stage.id)return"Can not create a new deck in this stage.";n.state.deck=(new Ce).createNew().pack().shuffle();var a=n.drawCards(t);return n.state.drawnCards=a,"pick"==n.state.stage.id&&(n.state.stage.deck=a),"Created a new deck with ".concat(n.deck.size()," cards.")})),new en("deck","(): Shows info about the current deck.",(function(e,t){var n=e.game;return void 0==n?"That command cannot be used from this screen.":"Deck size: ".concat(n.state.deck.size(),", ").concat(n.state.deck.allLevels.length)})),new en("unlockAllCards","(): Permanently unlocks all cards in your collection.",(function(e){return e.collection.addDeck(Ce.referenceDeck()),e.save(),"Done"})),new en("unlockAllEndings","(): Permanently unlocks all endings in your collection.",(function(e){var t,n=new an(e),a=Object(ae["a"])(n.epiloguesList());try{for(a.s();!(t=a.n()).done;){var i,r=t.value,c=Object(ae["a"])(r.getAllEndings());try{for(c.s();!(i=c.n()).done;){var s=i.value;e.unlockEnding(r.id,s)}}catch(o){c.e(o)}finally{c.f()}}}catch(o){a.e(o)}finally{a.f()}return e.save(),"Done"})),new en("clearSave","(): Clears your save. Warning! your card collection will be lost.",function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.deleteCollection();case 2:return e.abrupt("return","Save cleared");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),new en("diagnostics","(iterations): Runs debug diagnostics.",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return console.log("Running diagnostics..."),e.endings.correctnessSimulation(t),"Diagnostics completed."})),new en("toEnd","(id): Goes to the end with the specified ID.",(function(e,t){e.startGame();var n=new Ft(e.game);e.game.state.stage=n,n.onStart();var a=e.endings||new nn,i=a.selectEnding(t);return n.createYourNewLifeButton(i),"End reached."})),new en("editor","(): Opens the editor.",(function(e){return e.showEndingsCollection(),"Editor opened."}))],this.activated=!1,this._menu=t,window.cheatmode=function(e){return n.activateCheats(e)}}return Object(J["a"])(e,[{key:"activateCheats",value:function(e){if("rose"!=e)return"Wrong password. Find out the current password by becoming a Patreon supporter!";this.activated=!0,this.registerCheats();var t,n="Cheatmode activated. Available commands: \n\n",a=Object(ae["a"])(this.cheats);try{for(a.s();!(t=a.n()).done;){var i=t.value;n+="".concat(i.name).concat(i.description,"\n")}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"registerCheats",value:function(){if(!this.activated)return!1;var e,t=Object(ae["a"])(this.cheats);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.activate(this._menu)}}catch(a){t.e(a)}finally{t.f()}}},{key:"menu",set:function(e){this._menu=e,this.registerCheats()}}]),e}(),cn=function(){function e(t,n,a){Object(o["a"])(this,e),this.name=t,this.version=n,this._state=JSON.stringify(a)}return Object(J["a"])(e,[{key:"state",get:function(){return JSON.parse(this._state)}}]),e}();Object(d["a"])([ne["g"]],cn.prototype,"name",void 0),Object(d["a"])([ne["g"]],cn.prototype,"version",void 0),Object(d["a"])([ne["g"]],cn.prototype,"_state",void 0);var sn=n("a002"),on=function(){function e(){Object(o["a"])(this,e),this.saveCache={},this.saveStore=sn["createInstance"]({name:"ditzydice",version:1,storeName:"saves",driver:sn["INDEXEDDB"]}),this.loadedFromLocalStorage=!1}return Object(J["a"])(e,[{key:"save",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.saveCache[t.name]=t,e.prev=1,e.next=4,this.writeCacheToDB();case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 9:this.loadedFromLocalStorage&&(console.log("Saving completed. Deleting local storage save."),this.writeCacheToLocalStorage("blushingdefeat-saves-old"),localStorage.removeItem("blushingdefeat-saves"));case 10:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"load",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("blushingdefeat-saves"),void 0!=n&&(this.loadedFromLocalStorage=!0,this.saveCache=this.loadAllFromStorage(),console.log("Local storage save detected (<=1.5.4). This will be converted to indexeddb on save (1.5.5).")),e.prev=2,void 0!=this.saveCache&&0!=Object.keys(this.saveCache).length){e.next=7;break}return e.next=6,this.readCacheFromDB();case 6:this.saveCache=e.sent;case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e["catch"](2),e.abrupt("return",Promise.reject(e.t0));case 12:if(!(t in this.saveCache)){e.next=16;break}return e.abrupt("return",this.saveCache[t]);case 16:return e.abrupt("return",Promise.reject(Error('No save with the name "'.concat(t,'" was found.'))));case 17:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"writeCacheToDB",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(Object.keys(this.saveCache).map((function(e){return t.saveStore.setItem(e,Object(ne["h"])(cn,t.saveCache[e]))})));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e["catch"](0),alert("There was an error writing the save file to storage:\n\n ".concat(e.t0.msg)),console.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"readCacheFromDB",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.saveStore.keys();case 3:return t=e.sent,e.next=6,Promise.all(t.map((function(e){return a.saveStore.getItem(e)})));case 6:return n=e.sent,e.abrupt("return",n.reduce((function(e,t){var n=Object(ne["a"])(cn,t);return e[n.name]=n,e}),{}));case 10:return e.prev=10,e.t0=e["catch"](0),alert("There was an error reading the save file from storage:\n\n ".concat(e.t0.message)),console.error(e.t0),e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteFromLocalStorage",value:function(e){delete this.saveCache[e],localStorage.setItem("blushingdefeat-saves",JSON.stringify(this.saveCache))}},{key:"writeCacheToLocalStorage",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:localStorage.setItem(t,JSON.stringify(this.saveCache));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadAllFromStorage",value:function(){var e=localStorage.getItem("blushingdefeat-saves"),t={};if(null!=e){t=JSON.parse(e);for(var n=0,a=Object.keys(t);n<a.length;n++){var i=a[n];t[i]=Object(ne["a"])(cn,Object(ne["h"])(cn,t[i]))}}return t}}],[{key:"objectToSave",value:function(e){var t=Object(ne["a"])(cn,e);return console.log("Object to save:",t),t}}]),e}(),un=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(o["a"])(this,e),this._strictness=0,this.tag=t,this.name=n,this.description=a}return Object(J["a"])(e,[{key:"load",value:function(e){void 0!=e&&(this._strictness=e._strictness)}},{key:"strictness",get:function(){return this._strictness},set:function(e){this._strictness=e}}]),e}();Object(d["a"])([ne["g"]],un.prototype,"name",void 0),Object(d["a"])([ne["g"]],un.prototype,"description",void 0),Object(d["a"])([ne["g"]],un.prototype,"tag",void 0),Object(d["a"])([ne["g"]],un.prototype,"_strictness",void 0);var ln=function(){function e(){Object(o["a"])(this,e),this.bannedCards=[],this.filters=[new un("expansion","Expansion","Changes in size to body parts."),new un("iq","Intelligence","Changes that primarily affect intelligence."),new un("doll","Doll","Changes towards a plastic, fake or doll-like appearance and behavior."),new un("pet","Pet","Changes that enforces pet-like behavior, like having to stand on all fours, wear a leash etc."),new un("animal","Mythological","Changes that give horns, ears, a tail etc. Note that you always remain primarily human."),new un("lactation","Lactation","Changes that cause lactation."),new un("preg","Pregnancy","Changes related to pregnancy."),new un("reward","Reward","Don't care for rewards? Turn them off here.")],this.filters.sort((function(e,t){return e.name<t.name?-1:1}))}return Object(J["a"])(e,[{key:"load",value:function(e){var t=this;if(void 0!=e){var n,a=Object(ae["a"])(e.filters);try{var i=function(){var e=n.value,a=t.filters.find((function(t){return t.tag==e.tag}));if(void 0==a)return"continue";a.load(e)};for(a.s();!(n=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}void 0!=e.bannedCards&&(this.bannedCards=e.bannedCards)}}},{key:"banCard",value:function(e){this.bannedCards.push(e),Ce.bannedCards=new Set(this.bannedCards)}},{key:"unbanCard",value:function(e){this.bannedCards=this.bannedCards.filter((function(t){return t!=e})),Ce.bannedCards=new Set(this.bannedCards)}},{key:"isBanned",value:function(e){return void 0!=this.bannedCards.find((function(t){return t==e}))}},{key:"isFiltered",value:function(e){var t=Ce.lookup(e);return void 0==t?(console.warn("Could not find ".concat(e," while checking if it is filtered.")),!1):t.isFiltered(this.filters)}}]),e}();Object(d["a"])([Object(ne["g"])(Object(ne["c"])(Object(ne["e"])(un)))],ln.prototype,"filters",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["c"])(Object(ne["f"])()))],ln.prototype,"bannedCards",void 0);n("8a79");var dn=n("c4e3"),hn=n.n(dn),fn=n("5487"),bn=n.n(fn),gn=function(){function e(t,n,a,i,r,c,s,u){Object(o["a"])(this,e),this.cards=[],this.epilogueStrings=[],this._epilogues=[],this.id=t,this.version=a,this.gameVersion=i,this.name=n,this.authors=r,this.description=c,this.root=s,this.devmode=u}return Object(J["a"])(e,[{key:"toJSON",value:function(){return Object(ne["h"])(this)}},{key:"epilogues",get:function(){if(this._epilogues.length==this.epilogueStrings.length)return this._epilogues;this._epilogues=[];var e,t=Object(ae["a"])(this.epilogueStrings);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=tn.create(Q.a.parse(n));a.id="".concat(this.id,".").concat(a.id),a.mod=this.id,this._epilogues.push(a)}}catch(i){t.e(i)}finally{t.f()}return this._epilogues}}],[{key:"createFromZip",value:function(){var t=Object(Y["a"])(regeneratorRuntime.mark((function t(n){var a,i,r,c,s,o,u,l,d,h,f,b,g,v,p,O,m,j,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new hn.a,t.next=3,i.loadAsync(n);case 3:return r=t.sent,c=Object.keys(r.files)[0],s={},t.t0=Q.a,t.next=9,null===(a=r.file("".concat(c,"info.hjson")))||void 0===a?void 0:a.async("string");case 9:if(t.t1=t.sent,t.t1){t.next=12;break}t.t1="";case 12:t.t2=t.t1,o=t.t0.parse.call(t.t0,t.t2),u=[],l=[],d=0,h=Object.keys(r.files);case 17:if(!(d<h.length)){t.next=47;break}if(f=h[d],!f.startsWith("".concat(c,"cards/"))||!f.endsWith(".hjson")){t.next=28;break}return t.next=22,null===(b=r.file(f))||void 0===b?void 0:b.async("string");case 22:if(t.t3=t.sent,t.t3){t.next=25;break}t.t3="";case 25:g=t.t3,v=Q.a.parse(g),u.push(v);case 28:if(!f.startsWith("".concat(c,"cards/"))||!f.endsWith(".webp")){t.next=36;break}return t.next=31,null===(p=r.file(f))||void 0===p?void 0:p.async("base64");case 31:if(t.t4=t.sent,t.t4){t.next=34;break}t.t4="";case 34:O=t.t4,s[f]="data:image/png;base64,".concat(O);case 36:if(!f.startsWith("".concat(c,"epilogues/"))||!f.endsWith(".hjson")){t.next=44;break}return t.next=39,null===(m=r.file(f))||void 0===m?void 0:m.async("string");case 39:if(t.t5=t.sent,t.t5){t.next=42;break}t.t5="";case 42:j=t.t5,l.push(j);case 44:d++,t.next=17;break;case 47:return y=e.create(o,c),y.cards=y.cards.concat(Ce.parseCards(u,(function(e){var t=s["".concat(c,"cards/").concat(e)];return t||""}),o.id)),y.epilogueStrings=l,y.epilogues,t.abrupt("return",y);case 52:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"create",value:function(t,n){var a=this.verifyId(t.id),i=this.verifyName(t.name),r=this.verifyVersion(t.version),c=this.verifyGameVersion(t.gameVersion),s=this.verifyAuthors(t.authors),o=this.verifyDescription(t.description),u=this.verifyDevmode(t.devmode);return new e(a,i,r,c,s,o,n,u)}},{key:"verifyId",value:function(e){if(void 0==e||void 0==e.length||e.length<4)throw new Error('Bad mod id "'.concat(e,'".'));return e}},{key:"verifyName",value:function(e){if(void 0==e||void 0==e.length||e.length<1)throw new Error('Bad mod name "'.concat(e,'".'));return e}},{key:"verifyVersion",value:function(e){if(void 0==e)throw new Error("Mod must specify its version, but doesn't.");if(null==bn.a.valid(e))throw new Error('Mod version "'.concat(e,'" is not a valid SemVer. Make sure that it follows the Semantic Versioning syntax.'));return e}},{key:"verifyGameVersion",value:function(e){if(void 0==e)throw new Error("Mod must specify its latest compatible game version, but doesn't.");if(null==bn.a.valid(e))throw new Error('Mod game version "'.concat(e,'" is not a valid SemVer. Make sure that it follows the Semantic Versioning syntax.'));if(bn.a.gt(e,vn.GAME_VERSION))throw new Error("Mod is for game version ".concat(e,", but the current game version is only ").concat(vn.GAME_VERSION));return e}},{key:"verifyAuthors",value:function(e){if(void 0==e||void 0==e.length||e.length<1)throw new Error('Bad mod author info "'.concat(e,'".'));return e}},{key:"verifyDescription",value:function(e){return void 0==e?"":e}},{key:"verifyDevmode",value:function(e){return void 0!=e&&e}}]),e}();Object(d["a"])([ne["g"]],gn.prototype,"id",void 0),Object(d["a"])([ne["g"]],gn.prototype,"name",void 0),Object(d["a"])([ne["g"]],gn.prototype,"version",void 0),Object(d["a"])([ne["g"]],gn.prototype,"gameVersion",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["c"])(Object(ne["f"])()))],gn.prototype,"authors",void 0),Object(d["a"])([ne["g"]],gn.prototype,"description",void 0),Object(d["a"])([ne["g"]],gn.prototype,"root",void 0),Object(d["a"])([ne["g"]],gn.prototype,"devmode",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["c"])(Object(ne["e"])(Se)))],gn.prototype,"cards",void 0),Object(d["a"])([Object(ne["g"])(Object(ne["c"])(Object(ne["f"])()))],gn.prototype,"epilogueStrings",void 0);var vn=function(){function e(){var t=this;Object(o["a"])(this,e),this.state=Object(a["v"])({game:void 0,activeComponent:"StartMenu"}),this.saveSystem=new on,this.collection=Object(a["v"])(new Ce([])),this.settings=Object(a["v"])(new ln),this.unlockedEndings={},this.mods={},ye().load().then(Object(Y["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.endings=new nn,e.prev=1,e.next=4,t.saveSystem.load("save-1");case 4:n=e.sent,void 0!=n&&t.useSave(n),e.next=13;break;case 8:return e.prev=8,e.t0=e["catch"](1),e.next=12,t.save();case 12:console.log("No save found. Initialized new save file.");case 13:Ce.filters=t.settings.filters,Ce.bannedCards=new Set(t.settings.bannedCards),(void 0==t.endings||t.endings.epilogues.length<1)&&(alert("ERROR! No endings could be loaded. Refresh this page to try again.\n\nIf this message keeps appearing, make sure you are connected to the internet, and try a different browser. If that doesn't work, contact Gardamuse, or comment that you received this error multiple times,including what browser and device you are using."),console.log("Menu endings:",t.endings));case 16:case"end":return e.stop()}}),e,null,[[1,8]])})))),this.cheatmode=new rn(this)}return Object(J["a"])(e,[{key:"startGame",value:function(){this.state.game=new Qt(this),this.activeComponent=this.game.activeComponent}},{key:"endGame",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.saveHand();case 2:this.state.game=void 0,this.activeComponent="StartMenu";case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveHand",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.collection.addDeck(this.state.game.player.hand),e.next=3,this.save();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"buildSave",value:function(e){for(var t=[],n=0,i=Object.keys(this.mods);n<i.length;n++){var r=i[n];t.push(this.mods[r])}return new cn(e,this.version,{collection:Object(a["D"])(this.collection.unique()).cards.map((function(e){return{id:e.id}})),settings:Object(a["D"])(this.settings),unlockedEndings:Object(a["D"])(this.unlockedEndings),mods:Object(a["D"])(t)})}},{key:"useSave",value:function(e){var t=this;if(void 0!=e.state.mods){var n,i=Object(ae["a"])(e.state.mods);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=Object(ne["a"])(gn,r);this.mountMod(c),this.mods[r.id]=c}}catch(l){i.e(l)}finally{i.f()}}this.collection=Object(a["v"])(Ce.createFromCardStates(e.state.collection));for(var s=0,o=Object.values(this.mods);s<o.length;s++){var u=o[s];u.devmode&&u.cards.map((function(e){return t.collection.addCard(e)}))}this.collection.sortByFamily(),this.unlockedEndings=e.state.unlockedEndings||{},this.collection.size()!=e.state.collection.length&&console.info("Not all saved cards were loaded. Expected size ".concat(e.state.collection.length,", actual size ").concat(this.collection.size(),".")),this.settings.load(e.state.settings)}},{key:"save",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.collection.sortByFamily(),e.next=3,this.saveSystem.save(this.buildSave("save-1"));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"exportSave",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.save();case 2:te.download("savegame.dd",JSON.stringify(Object(ne["h"])(cn,this.buildSave("save-1"))));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"importSave",value:function(e){var t=this,n=e.target.files[0],a=new FileReader;a.addEventListener("load",function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(n){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=n.target.result,i=on.objectToSave(JSON.parse(a)),t.useSave(i),e.next=5,t.save();case 5:console.log("Imported save ".concat(i.name,", version ").concat(i.version,"."));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.readAsText(n)}},{key:"loadMod",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=e.target.files[0];gn.createFromZip(a).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.mods[a.id]=a,Ce.resetStaticState(),e.next=4,t.save();case 4:return e.t0=t,e.next=7,t.saveSystem.load("save-1");case 7:e.t1=e.sent,e.t0.useSave.call(e.t0,e.t1),void 0!=n&&n();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){alert("Mod loading failed with the following error:\n\n".concat(e.message))}))}},{key:"unloadMod",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return delete this.mods[t],e.next=3,this.save();case 3:return Ce.resetStaticState(),e.t0=this,e.next=7,this.saveSystem.load("save-1");case 7:e.t1=e.sent,e.t0.useSave.call(e.t0,e.t1);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"mountMod",value:function(e){var t,n=Object(ae["a"])(e.cards);try{for(n.s();!(t=n.n()).done;){var a=t.value;Ce.addReferenceCard(a)}}catch(o){n.e(o)}finally{n.f()}var i,r=Object(ae["a"])(e.epilogues);try{for(r.s();!(i=r.n()).done;){var c,s=i.value;null===(c=this.endings)||void 0===c||c.addEpilogue(s)}}catch(o){r.e(o)}finally{r.f()}}},{key:"isEpilogueUnlocked",value:function(e){return e in this.unlockedEndings}},{key:"isEndingUnlocked",value:function(e,t){if(this.isEpilogueUnlocked(e)){var n=this.unlockedEndings[e];if(t in n)return!0}return!1}},{key:"unlockEnding",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isEpilogueUnlocked(t)||(this.unlockedEndings[t]={}),this.unlockedEndings[t][n]=!0,e.next=4,this.save();case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"showCollection",value:function(){this.activeComponent="CollectionScreen"}},{key:"deleteCollection",value:function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.collection.removeAllCards(),this.unlockedEndings={},e.next=4,this.save();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"showSettings",value:function(){this.activeComponent="SettingsScreen"}},{key:"showMods",value:function(){this.activeComponent="ModScreen"}},{key:"showEndingsCollection",value:function(){this.activeComponent="EndingsCollectionWindow.vue"}},{key:"cardsFilteredString",value:function(){return"".concat((new Ce).createNew().size()," / ").concat(Ce.referenceDeck().size()," cards and ").concat((new Ce).createNew().unpack().size()," / ").concat(Ce.referenceDeck().unpack().size()," levels.")}},{key:"isFilteringTooMuch",value:function(){return(new Ce).createNew().size()<Qt.MAX_ROUNDS*Xt.DICE_SIZE*Xt.DICE_COUNT+Qt.MAX_BONUS_ROLLS}},{key:"artCredits",value:function(){var e,t=JSON.parse(ye().artistsString.value),n=Object(ae["a"])(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.cards=[]}}catch(d){n.e(d)}finally{n.f()}var i,r=Ce.referenceDeck(),c=Object(ae["a"])(r.allLevels);try{var s=function(){var e=i.value,n=t.find((function(t){return t.artist==e.artist}));if(void 0==n)return"continue";e.isParent?n.cards.push("".concat(e.name)):e.hasParent?n.cards.push("".concat(e.parent.name)):n.cards.push("".concat(e.name))};for(c.s();!(i=c.n()).done;)s()}catch(d){c.e(d)}finally{c.f()}var o,u=Object(ae["a"])(t);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.cards=Object(Dt["a"])(new Set(l.cards)),l.cards.sort()}}catch(d){u.e(d)}finally{u.f()}return t}},{key:"patreonCredits",value:function(){var e=ye().patreonCredits.value;return e}},{key:"game",get:function(){return this.state.game}},{key:"activeComponent",get:function(){return void 0!=this.game?this.game.activeComponent:this.state.activeComponent},set:function(e){this.state.activeComponent=e}},{key:"patchNotes",get:function(){return JSON.parse(ye().patchNotesString.value)}},{key:"version",get:function(){return e.GAME_VERSION}}]),e}();vn.GAME_VERSION="1.5.7";var pn=Object(a["H"])("data-v-1393f094");Object(a["u"])("data-v-1393f094");var On={key:0,class:"menu-view"},mn={class:"window text-window"},jn={class:"title-row"},yn=Object(a["g"])("p",null,null,-1),kn=Object(a["g"])("h1",null,"Ditzy Dice",-1),wn=Object(a["g"])("div",{class:"window start-menu-text"},[Object(a["g"])("p",null,"Greetings!"),Object(a["g"])("p",null,[Object(a["f"])("This is an "),Object(a["g"])("b",null,"erotic transformation"),Object(a["f"])(" game. That means "),Object(a["g"])("b",null,"sexual content"),Object(a["f"])(", focusing on bodily and mental transformations related to bimbofication. If you are not comfortable with, or legally allowed to view such content, turn around now. ")]),Object(a["g"])("p",null,"Otherwise, if you have feedback or questions, let me know in the comments!")],-1),Cn={class:"start-menu-buttons"},Sn=Object(a["g"])("h2",null,"Start",-1),xn=Object(a["g"])("h3",null,"My Collection",-1),_n=Object(a["g"])("h3",null,"Settings",-1),Tn=Object(a["g"])("h3",null,"Mods",-1),Dn=Object(a["g"])("h3",null,"Patch Notes",-1),Rn=Object(a["g"])("h3",null,"Credits",-1),Bn=Object(a["g"])("h3",null,"Exit to Blushing Defeat",-1),Mn={class:"window extras"},qn=Object(a["f"])(" Thank you for your support on "),En=Object(a["g"])("span",{style:{color:"#f96854"}},"Patreon",-1),An=Object(a["f"])("! "),Nn=Object(a["g"])("h3",null,"An extra thank you to",-1),Ln={class:"extra-thanks"},Pn={class:"credit"},In={class:"window more"},zn=Object(a["g"])("h2",null,"More on Blushing Defeat",-1),Fn=Object(a["f"])(" Cowgirl Dairy Farm "),Vn=Object(a["f"])(" Bimbo Personality Quiz "),Hn=Object(a["f"])(" Bimbofication Booth "),Wn=Object(a["f"])(" Mispell ");Object(a["r"])();var Un=pn((function(e,t,i,r,c,s){var o=Object(a["z"])("TextButton"),u=Object(a["z"])("PatreonButton2"),l=Object(a["z"])("RelatedThumb");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",On,[Object(a["g"])("div",mn,[Object(a["g"])("div",jn,[yn,kn,Object(a["g"])("p",null,"v"+Object(a["C"])(e.menu.version),1)]),wn,Object(a["g"])("div",Cn,[Object(a["g"])(o,{class:"farm-button start-button",onClick:t[1]||(t[1]=function(t){return e.menu.startGame()})},{default:pn((function(){return[Sn]})),_:1}),Object(a["g"])(o,{class:"farm-button collection-button",onClick:t[2]||(t[2]=function(t){return e.menu.showCollection()})},{default:pn((function(){return[xn]})),_:1}),Object(a["g"])(o,{class:"farm-button settings-button",onClick:t[3]||(t[3]=function(t){return e.menu.showSettings()})},{default:pn((function(){return[_n]})),_:1}),Object(a["g"])(o,{class:"farm-button mods-button",onClick:t[4]||(t[4]=function(t){return e.menu.showMods()})},{default:pn((function(){return[Tn]})),_:1}),Object(a["g"])(o,{class:"farm-button patch-button",onClick:t[5]||(t[5]=function(t){return e.$emit("goto-view","PatchNotesScreen")})},{default:pn((function(){return[Dn]})),_:1}),Object(a["g"])(o,{class:"farm-button credits-button",onClick:t[6]||(t[6]=function(t){return e.$emit("goto-view","CreditsScreen")})},{default:pn((function(){return[Rn]})),_:1}),Object(a["g"])(o,{class:"farm-button exit-button",onClick:t[7]||(t[7]=function(t){return e.window().location.href="https://www.blushingdefeat.com/play/"})},{default:pn((function(){return[Bn]})),_:1})])]),Object(a["g"])("div",Mn,[Object(a["g"])(u,{image:n("157a"),link:"https://www.patreon.com/gardamuse",class:"patreon"},{default:pn((function(){return[qn,En,An]})),_:1},8,["image"]),Nn,Object(a["g"])("div",Ln,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.patreonCredits(),(function(e){return Object(a["q"])(),Object(a["d"])("p",Pn,Object(a["C"])(e.name),1)})),256))])]),Object(a["g"])("div",In,[zn,Object(a["g"])(l,{image:"https://www.blushingdefeat.com/projects/cowgirl-dairy-farm/thumb-2.webp",link:"https://www.blushingdefeat.com/play/cowgirl-dairy-farm/"},{default:pn((function(){return[Fn]})),_:1}),Object(a["g"])(l,{image:"https://www.blushingdefeat.com/play/bimbo-personality-quiz/thumb.jpg",link:"https://www.blushingdefeat.com/play/bimbo-personality-quiz/"},{default:pn((function(){return[Vn]})),_:1}),Object(a["g"])(l,{image:"https://www.blushingdefeat.com/projects/bimbo-booth/thumb.jpg",link:"https://www.blushingdefeat.com/bimbo-booth/"},{default:pn((function(){return[Hn]})),_:1}),Object(a["g"])(l,{image:"https://www.blushingdefeat.com/projects/mispell/misspell-thumb.png",link:"https://www.blushingdefeat.com/mispell/"},{default:pn((function(){return[Wn]})),_:1})])])):Object(a["e"])("",!0)})),Gn=Object(a["H"])("data-v-d5159fe2"),$n=Gn((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("a",{href:"https://www.patreon.com/gardamuse",style:e.cssVars,class:"patreon-button"},null,4)})),Jn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Jn=Object(d["a"])([Object(h["a"])({props:{label:String},computed:{cssVars:function(){return{"--background-image":"url("+n("ba9d")+")"}}}})],Jn);var Yn=Jn;n("92d9");const Xn=q()(Yn,[["render",$n],["__scopeId","data-v-d5159fe2"]]);var Kn=Xn,Zn=(n("9911"),Object(a["H"])("data-v-072ed195")),Qn=Zn((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("a",{class:"related-thumb",href:e.link},[Object(a["g"])("h3",null,[Object(a["y"])(e.$slots,"default")]),Object(a["g"])("img",{src:e.image},null,8,["src"])],8,["href"])})),ea=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);ea=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PatreonButton:Kn},props:{image:String,link:String},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return te},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){return Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})],ea);var ta=ea;n("d9d0");const na=q()(ta,[["render",Qn],["__scopeId","data-v-072ed195"]]);var aa=na,ia=Object(a["H"])("data-v-3333a497"),ra=ia((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("a",{class:"patreon-button-2",href:e.link},[Object(a["g"])("h2",null,[Object(a["y"])(e.$slots,"default")]),Object(a["g"])("img",{src:e.image},null,8,["src"])],8,["href"])})),ca=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);ca=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PatreonButton:Kn},props:{image:String,link:String},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return te},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){return Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})],ca);var sa=ca;n("b783");const oa=q()(sa,[["render",ra],["__scopeId","data-v-3333a497"]]);var ua=oa,la=Object(a["H"])("data-v-02320d62");Object(a["u"])("data-v-02320d62");var da={class:"menu-view"},ha=Object(a["g"])("h2",{style:{margin:"0"}},"Patch Notes",-1),fa={class:"blush-list"},ba={class:"patch-window"},ga={key:0},va={key:1},pa={style:{"font-weight":"normal","text-align":"right"}};Object(a["r"])();var Oa=la((function(e,t,n,i,r,c){var s=Object(a["z"])("BlushWindow");return Object(a["q"])(),Object(a["d"])("div",da,[Object(a["g"])(s,{onClose:t[1]||(t[1]=function(t){return e.$emit("close")})},{title:la((function(){return[ha]})),default:la((function(){return[Object(a["g"])("div",fa,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.patchNotes,(function(e){return Object(a["q"])(),Object(a["d"])("div",ba,[e.name.length>0?(Object(a["q"])(),Object(a["d"])("h2",ga,Object(a["C"])(e.id)+" - "+Object(a["C"])(e.name),1)):(Object(a["q"])(),Object(a["d"])("h2",va,Object(a["C"])(e.id),1)),Object(a["g"])("h4",pa,Object(a["C"])(e.date),1),Object(a["g"])("div",{class:"md-patchnotes",style:{"grid-column":"span 2"},innerHTML:e.text},null,8,["innerHTML"])])})),256))])]})),_:1})])})),ma=Object(a["H"])("data-v-640bcb6c");Object(a["u"])("data-v-640bcb6c");var ja={class:"blush-window"},ya=Object(a["g"])("h3",null,"X",-1),ka={class:"content"};Object(a["r"])();var wa=ma((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",ja,[Object(a["y"])(e.$slots,"title"),e.noCross?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])(s,{key:0,class:"farm-button close-button",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},{default:ma((function(){return[ya]})),_:1})),Object(a["g"])("div",ka,[Object(a["y"])(e.$slots,"default")])])})),Ca=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.noCross=!1,e}return n}(h["b"]);Ca=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PlayingCard:fe},props:{noCross:Boolean},emits:["close"],methods:{},computed:{util:function(){return te}}})],Ca);var Sa=Ca;n("8d53");const xa=q()(Sa,[["render",wa],["__scopeId","data-v-640bcb6c"]]);var _a=xa,Ta=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);Ta=Object(d["a"])([Object(h["a"])({components:{TextButton:A,BlushWindow:_a},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return te},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Ta);var Da=Ta;n("e7c0"),n("0bb2");const Ra=q()(Da,[["render",Oa],["__scopeId","data-v-02320d62"]]);var Ba=Ra,Ma=Object(a["H"])("data-v-2e56c106");Object(a["u"])("data-v-2e56c106");var qa={key:0,style:{margin:"0"}},Ea={key:1,style:{margin:"0"}},Aa={key:0,class:"blush-list"},Na={class:"patch-window"},La={style:{"grid-column":"1 / -1"}},Pa={class:"text",style:{"font-size":"0.6em","font-weight":"normal"}};Object(a["r"])();var Ia=Ma((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("ChatView"),u=Object(a["z"])("BlushWindow");return Object(a["q"])(),Object(a["d"])(u,{class:"endings-collection-window",onClose:t[1]||(t[1]=function(t){return e.onClose()}),"no-cross":void 0===e.endingsCollection.currentEpilogue},{title:Ma((function(){return[void 0===e.endingsCollection.currentEpilogue?(Object(a["q"])(),Object(a["d"])("h2",qa,"Epilogues")):(Object(a["q"])(),Object(a["d"])("h2",Ea,Object(a["C"])(e.endingsCollection.currentEndingLabel()),1))]})),default:Ma((function(){return[void 0===e.endingsCollection.currentEpilogue?(Object(a["q"])(),Object(a["d"])("div",Aa,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.endingsCollection.unlockedEpilogues(),(function(t){return Object(a["q"])(),Object(a["d"])("div",Na,[Object(a["g"])("h2",La,[Object(a["f"])(Object(a["C"])(t.title)+" ",1),Object(a["g"])("span",Pa," Unlocked endings: "+Object(a["C"])(e.endingsCollection.unlockedEndings(t).length)+" / "+Object(a["C"])(t.getAllEndings().length),1)]),(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.endingsCollection.unlockedEndings(t),(function(n){return Object(a["q"])(),Object(a["d"])(s,{key:n,class:"ending-button",onClick:function(a){return e.endingsCollection.select(t.id,n)}},{default:Ma((function(){return[Object(a["g"])("b",null,Object(a["C"])(t.getEndpointLabel(n)),1)]})),_:2},1032,["onClick"])})),128))])})),256))])):(Object(a["q"])(),Object(a["d"])(o,{key:1,lines:e.endingsCollection.currentEndingMessages()},null,8,["lines"]))]})),_:1},8,["no-cross"])})),za=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.endingsCollection=new an(e.menu),e}return n}(h["b"]);za=Object(d["a"])([Object(h["a"])({components:{ChatView:nt,TextButton:A,BlushWindow:_a},props:{menu:Object,endingsCollection:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return te},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window})),onClose:function(){void 0==this.endingsCollection.currentEpilogue?this.$emit("close"):this.endingsCollection.unselect()}}})],za);var Fa=za;n("ee3e"),n("9158");const Va=q()(Fa,[["render",Ia],["__scopeId","data-v-2e56c106"]]);var Ha=Va,Wa=Object(a["H"])("data-v-fa5433b4");Object(a["u"])("data-v-fa5433b4");var Ua={class:"settings-screen"},Ga={class:"mods"},$a=Object(a["g"])("h2",null,"Mods",-1),Ja={class:"button-row"},Ya=Object(a["g"])("p",{style:{margin:"0"}},"Click the button and then select a mod zip file to load it. It is recommended to back up your save file first. There may be no error message if something goes wrong.",-1),Xa=Object(a["g"])("label",{for:"mod-import",class:"load-button"},[Object(a["g"])("b",null,"Load Mod")],-1),Ka=Object(a["g"])("p",null,"Your save file may grow very large if you load many mods or mods with unoptimized images.",-1),Za=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Only load mods from trusted sources!")],-1),Qa=Object(a["g"])("div",null,[Object(a["g"])("h2",null,"Active Mods")],-1),ei={class:"mod"},ti={class:"mod-info"},ni={class:"mod-title"},ai={class:"mod-version"},ii={class:"mod-authors"},ri=Object(a["f"])(" by "),ci={key:0},si={class:"mod-description"},oi={class:"mod-cards"},ui=Object(a["g"])("span",{style:{margin:"0 10px"}},null,-1),li=Object(a["g"])("p",{class:"mod-epilogues"},null,-1),di=Object(a["g"])("h3",null,"Remove mod",-1),hi=Object(a["g"])("i",null,"All mod content will be immediately removed from your save file.",-1),fi=Object(a["g"])("h2",null,"Create Your Own Mod!",-1),bi=Object(a["g"])("p",null,"If you feel there is some content missing from the game, you may be able to create a mod that adds it! Mods can currently:",-1),gi=Object(a["g"])("p",null,"Override existing cards.",-1),vi=Object(a["g"])("p",null,"Add new cards.",-1),pi=Object(a["g"])("p",null,"Add new epilogues.",-1),Oi=Object(a["g"])("p",null,"Please note that mod support is new in version 1.5. I have done as much testing as I can, but there may well be bugs.",-1),mi=Object(a["g"])("hr",null,null,-1),ji=Object(a["g"])("h2",null,"How to Create a Mod",-1),yi=Object(a["g"])("p",null,[Object(a["f"])("Mods are written in "),Object(a["g"])("a",{href:"https://hjson.github.io/"},"Hjson"),Object(a["f"])(". Don't worry, Hjson files are just text and can be opened in any plain text editor such as Notepad. I can recommend "),Object(a["g"])("a",{href:"https://atom.io/"},"Atom"),Object(a["f"])(" or "),Object(a["g"])("a",{href:"https://notepad-plus-plus.org/"},"Notepad++"),Object(a["f"])(".")],-1),ki=Object(a["g"])("p",null,[Object(a["g"])("b",null,[Object(a["f"])("I have created an "),Object(a["g"])("a",{href:"example-mod.zip"},"Example Mod")]),Object(a["f"])(" that you can download. Look at how that mod adds the type of content you want to do, and do it the same way. I recommend looking at the example mod before reading any more here.")],-1),wi=Object(a["g"])("p",null,[Object(a["f"])("After opening the zip file you will see a folder, inside is a file called "),Object(a["g"])("code",null,"info.hjson"),Object(a["f"])(". This file will contain information about your mod, such as its name. Inside the root folder are more folders, one for each type of moddable content, each with a specific name. You only need the folders you are adding content for.")],-1),Ci=Object(a["g"])("p",null,[Object(a["f"])("When you have created your mod and need to zip everything up, if you're on Windows, the built-in .zip compression has been known to not work. Instead I can recommend using "),Object(a["g"])("a",{href:"https://www.7-zip.org/",target:"_blank"},"7-Zip"),Object(a["f"])(" (you still need to create a .zip file, not .7z or anything else). In addition, if you try loading your mod and it doesn't work, you may need to reload the page before trying again. The mod loader may have crashed without giving you an error message.")],-1),Si=Object(a["g"])("hr",null,null,-1),xi=Object(a["g"])("h2",null,"Mod Distribution and Rules",-1),_i=Object(a["g"])("p",null,[Object(a["f"])("There isn't yet any dedicated mod listing site. For the time being you can upload your mods somewhere ("),Object(a["g"])("a",{href:"https://ufile.io/",target:"_blank"},"ufile.io"),Object(a["f"])(" is a pretty good site) and post the link and a short description in the comments section.")],-1),Ti=Object(a["g"])("p",null,"Make sure that your mod doesn't involve illegal content. Always be clear with what content your mod does contain.",-1),Di=Object(a["g"])("p",null,"Paid mods are not allowed. Any mods you publish should be freely available.",-1),Ri=Object(a["g"])("hr",null,null,-1),Bi=Object(a["g"])("h2",null,"Tags",-1),Mi=Object(a["g"])("p",null,"Cards can have any number of tags. These tags are used by content filters, and to determine which ending the player fulfills. Tags on a parent card are inherited by all its subcards, but the subcards can also add its own tags.",-1),qi=Object(a["g"])("p",null,"Currently, the following tags are in use:",-1),Ei={style:{display:"flex","flex-wrap":"wrap"}},Ai={style:{margin:"0 5px"}},Ni=Object(a["g"])("p",null,'The "extreme" tag is used to indicate that this card is an extreme version of one of its other tags.',-1),Li=Object(a["g"])("hr",null,null,-1),Pi=Object(a["g"])("h2",null,"Epilogue Requirements",-1),Ii=Object(a["g"])("p",null,"Epilogues must specify requirements. If the player has cards that fulfill those requirements, the epilogue is considered fulfilled.",-1),zi=Object(a["g"])("p",null,"An epilogue is not always show even if it is fulfilled. Epilogues have priority groups (0, 10, 20, 30, 40). Only fulfilled epilogues from the highest priority group that has any fulfilled epilogues will be available to the player.",-1),Fi=Object(a["g"])("p",null,'Requirements may contain card ids, card family ids, card tags and the special tag "all". These are compared to numbers and combined with "AND" and "OR" keywords. Let\'s look at some examples.',-1),Vi=Object(a["g"])("div",{class:"code-example"},[Object(a["g"])("p",null,[Object(a["g"])("b",null,"Ex 1:"),Object(a["f"])(" An epilogue with the following requirement will be fulfilled if the player has at least 1 level of a card with the iq tag, and at least level 4 of the gold card.")]),Object(a["g"])("code",null,"iq > 0 AND gold > 3")],-1),Hi=Object(a["g"])("br",null,null,-1),Wi=Object(a["g"])("div",{class:"code-example"},[Object(a["g"])("p",null,[Object(a["g"])("b",null,"Ex 2:"),Object(a["f"])(' The numbers are always card levels. Many cards only have one level, and count as 1, but leveled cards count as however much their level is. The following can be fulfilled by 3 different cards with the "iq" tag, or by for instance, the Level 5 Intelligence card.')]),Object(a["g"])("code",null,"iq > 3")],-1),Ui=Object(a["g"])("br",null,null,-1),Gi=Object(a["g"])("div",{class:"code-example"},[Object(a["g"])("p",null,[Object(a["g"])("b",null,"Ex 3:"),Object(a["f"])(' "OR" separates groups of "AND". The following is fulfilled if there is either at least 1 level of iq tag cards and at least level 4 of the gold card, OR if there is no more than 4 pet cards, at least 2 spell cards and no more than 1 lactation cards.')]),Object(a["g"])("code",null,"iq > 0 AND gold > 3 OR pet <= 4 AND spell >= 2 AND lactation < 2"),Object(a["g"])("p",null,"It is NOT possible to use parenthesis to change the order of operations. OR always separates groups of AND.")],-1),$i=Object(a["g"])("p",null,"Finally, each dialogue option in the epilogue may also have a requirement. These work in the same way as for epilogues. There should always be at least one dialogue option with no requirement.",-1),Ji=Object(a["g"])("hr",null,null,-1),Yi=Object(a["g"])("h2",null,"Epilogue Likelihood (Priority Group)",-1),Xi=Object(a["g"])("div",null,[Object(a["g"])("p",null,[Object(a["f"])("Each epilogue has the field "),Object(a["g"])("code",null,"likelihood"),Object(a["f"])(". The higher the number in this field, the higher the priority group the epilogue belongs to.")]),Object(a["g"])("p",null,"The player is able to choose between all fulfilled epilogues in the highest priority group that has any fulfilled epilogues."),Object(a["g"])("p",null,[Object(a["f"])('For instance, the "Unchanged" epilogue has '),Object(a["g"])("code",null,"likelihood: 0"),Object(a["f"])(', "Bimbo" has '),Object(a["g"])("code",null,"likelihood: 20"),Object(a["f"])(' and "Goth" has '),Object(a["g"])("code",null,"likelihood: 20"),Object(a["f"])(' too. If the player fulfill all those epilogues\' requirements, they will get to choose between "Bimbo" and "Goth".')]),Object(a["g"])("p",null,'This means that endings that are in some sense "worse" can take priority over milder endings. So that if the player fulfills both "Bimbo" and "Bimbo Ditz", they will only be able to choose "Bimbo Ditz".'),Object(a["g"])("p",null,"Below are the priority groups for all built-in and currently loaded modded epilogues.")],-1),Ki=Object(a["f"])(),Zi={style:{margin:"0"}},Qi={style:{"background-color":"#0000"}},er=Object(a["g"])("hr",null,null,-1),tr=Object(a["g"])("h2",null,"Extra Details",-1),nr=Object(a["g"])("p",null,[Object(a["f"])("Mod version must be specified using valid "),Object(a["g"])("a",{href:"https://semver.org/"},"Semantic Versioning"),Object(a["f"])(".")],-1),ar=Object(a["g"])("p",null,"It is not possible to override only a subcard. In that case you must override the entire card and all its levels.",-1),ir=Object(a["g"])("p",null,"If you encounter bugs when loading your mod, you can try opening your browser console. There could be some useful warning messages there.",-1),rr=Object(a["g"])("h2",null,"Card Data",-1),cr=Object(a["g"])("p",null,"This list shows all card ids, and tags for all cards, including loaded mods. You'll want to refer to this list if you're looking to override an existing card.",-1),sr=Object(a["g"])("p",null,[Object(a["f"])("Intensity is how much a card counts towards requirements. For instance, "),Object(a["g"])("code",null,"ass size.ass size 2"),Object(a["f"])(" gives +2 towards any requirement that it's part of, and can thus fulfill "),Object(a["g"])("code",null,"ass size >= 2"),Object(a["f"])(" or "),Object(a["g"])("code",null,"expansion > 1"),Object(a["f"])(".")],-1),or={class:"card-entry"},ur={class:"label"},lr=Object(a["g"])("h3",{class:"card-id"},"ID",-1),dr=Object(a["g"])("h3",{class:"card-tags"},"Tags",-1),hr=Object(a["g"])("h3",{class:"card-level"},"Intensity",-1),fr={class:"card-id"},br={class:"card-tags"},gr={class:"card-level"},vr={class:"card-id"},pr={class:"card-tags"},Or={class:"card-level"},mr=Object(a["g"])("h2",null,"Epilogue Simulation",-1),jr=Object(a["g"])("p",null,"When adding an epilogue it may be difficult to know how strict to make the requirements. This tool lets you simulate a number of games where the player picks cards at random.",-1),yr=Object(a["g"])("p",null,"The tool shows how many times each epilogue was fulfilled and how many times the epilogue was available for the user to pick at the end screen. You can also see how many times another epilogue was available at the same time.",-1),kr=Object(a["g"])("p",null,"The page may become unresponsive for a few seconds while simulating.",-1),wr={style:{display:"grid","grid-template-columns":"1fr 1fr"}},Cr=Object(a["f"])("Simulate 100 games"),Sr=Object(a["f"])("Simulate 1000 games"),xr=Object(a["g"])("pre",{id:"epilogue-simulation-output"},null,-1),_r=Object(a["g"])("hr",null,null,-1),Tr=Object(a["g"])("h2",null,"Epilogue Preview",-1),Dr=Object(a["g"])("p",null,"Here you can go directly to the epilogues of any currently loaded mods with devmode activated.",-1),Rr=Object(a["g"])("p",null,"You will automatically fulfill the requirements for all dialogue options in this mode.",-1),Br=Object(a["g"])("p",null,"Completing endings here will add them to the collection of your current save file.",-1),Mr={class:"epilogue-preview-buttons"};Object(a["r"])();var qr=Wa((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("BlushList"),u=Object(a["z"])("TabWindow");return Object(a["q"])(),Object(a["d"])("div",Ua,[Object(a["g"])(u,{tabs:["mods","modCreation","tools","cardData","exit"],onClose:t[4]||(t[4]=function(t){return e.$emit("close")})},{mods:Wa((function(){return[Object(a["g"])("div",Ga,[Object(a["g"])("div",null,[$a,Object(a["g"])("div",Ja,[Ya,Object(a["g"])("div",null,[Xa,Object(a["g"])("input",{id:"mod-import",type:"file",accept:".zip",onChange:t[1]||(t[1]=function(){return e.addMod&&e.addMod.apply(e,arguments)}),style:{display:"none"}},null,32)])]),Ka,Za]),Qa,Object(a["g"])(o,{style:{overflow:"auto"}},{default:Wa((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.mods,(function(t){return Object(a["q"])(),Object(a["d"])("div",ei,[Object(a["g"])("div",ti,[Object(a["g"])("h3",ni,Object(a["C"])(t.name),1),Object(a["g"])("p",ai,"v"+Object(a["C"])(t.version),1),Object(a["g"])("p",ii,[ri,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(t.authors,(function(e,n){return Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["f"])(Object(a["C"])(e),1),n+1<t.authors.length?(Object(a["q"])(),Object(a["d"])("span",ci,", ")):Object(a["e"])("",!0)],64)})),256))]),Object(a["g"])("p",si,Object(a["C"])(t.description),1),Object(a["g"])("p",oi,[Object(a["f"])("Cards: "+Object(a["C"])(t.cards.length),1),ui,Object(a["f"])(" Epilogues: "+Object(a["C"])(t.epilogues.length),1)]),li]),Object(a["g"])(s,{class:"delete-save-button",onClick:function(n){return e.removeMod(t.id)}},{default:Wa((function(){return[di,hi]})),_:2},1032,["onClick"])])})),256))]})),_:1})])]})),modCreation:Wa((function(){return[fi,bi,Object(a["g"])(o,{class:"mod-supports"},{default:Wa((function(){return[gi,vi,pi]})),_:1}),Oi,mi,ji,yi,ki,wi,Ci,Si,xi,_i,Ti,Di,Ri,Bi,Mi,qi,Object(a["g"])(o,{style:{height:"50px"}},{default:Wa((function(){return[Object(a["g"])("div",Ei,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.allTags(),(function(e){return Object(a["q"])(),Object(a["d"])("p",Ai,'"'+Object(a["C"])(e)+'"',1)})),256))])]})),_:1}),Ni,Li,Pi,Ii,zi,Fi,Vi,Hi,Wi,Ui,Gi,$i,Ji,Yi,Xi,Object(a["g"])(o,{class:"card-ids",style:{"min-height":"100px",height:"auto"}},{default:Wa((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(Object(Dt["a"])(e.menu.endings.epilogues).sort((function(e,t){return e.likelihood-t.likelihood})),(function(t){return Object(a["q"])(),Object(a["d"])("div",{style:[{display:"grid","grid-template-columns":"1fr 3fr","border-bottom":"1px dashed #fffa"},{"background-color":"hsl(".concat(6*t.likelihood,", 50%, ").concat(e.util.clamp(10+t.likelihood/70*50,0,50),"%)")}]},[Object(a["g"])("h3",null,Object(a["C"])(t.title),1),Ki,Object(a["g"])("p",Zi,[Object(a["g"])("code",Qi,"likelihood: "+Object(a["C"])(t.likelihood),1)])],4)})),256))]})),_:1}),er,tr,nr,ar,ir]})),cardData:Wa((function(){return[rr,cr,sr,Object(a["g"])(o,{class:"card-ids"},{default:Wa((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.refDeck().cards.sort((function(e,t){return e.name.localeCompare(t.name)})),(function(e){return Object(a["q"])(),Object(a["d"])("div",or,[Object(a["g"])("div",ur,[Object(a["g"])("h3",null,Object(a["C"])(e.name),1)]),lr,dr,hr,Object(a["g"])("code",fr,'"'+Object(a["C"])(e.id)+'"',1),Object(a["g"])("code",br,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.tags,(function(e){return Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["f"])('"'+Object(a["C"])(e)+'" ',1)],64)})),256))]),Object(a["g"])("code",gr,Object(a["C"])(e.intensity),1),e.isParent?(Object(a["q"])(!0),Object(a["d"])(a["a"],{key:0},Object(a["x"])(e.subcards,(function(e){return Object(a["q"])(),Object(a["d"])(a["a"],{key:e.id},[Object(a["g"])("code",vr,'"'+Object(a["C"])(e.id)+'"',1),Object(a["g"])("code",pr,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.tags,(function(e){return Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["f"])('"'+Object(a["C"])(e)+'" ',1)],64)})),256))]),Object(a["g"])("code",Or,Object(a["C"])(e.intensity),1)],64)})),128)):Object(a["e"])("",!0)])})),256))]})),_:1})]})),tools:Wa((function(){return[mr,jr,yr,kr,Object(a["g"])("div",wr,[Object(a["g"])(s,{class:"load-button",onClick:t[2]||(t[2]=function(t){return e.simulateEpilogues(100)})},{default:Wa((function(){return[Cr]})),_:1}),Object(a["g"])(s,{class:"load-button",onClick:t[3]||(t[3]=function(t){return e.simulateEpilogues(1e3)})},{default:Wa((function(){return[Sr]})),_:1})]),xr,_r,Tr,Dr,Rr,Br,Object(a["g"])("div",Mr,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.moddedEpilogues(),(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t.id,class:"load-button",onClick:function(n){return e.toEnd(t.id)}},{default:Wa((function(){return[Object(a["f"])(Object(a["C"])(t.title),1)]})),_:2},1032,["onClick"])})),128))])]})),_:1})])})),Er=Object(a["H"])("data-v-27444a3f");Object(a["u"])("data-v-27444a3f");var Ar={class:"credit"},Nr={style:{"font-size":"0.8em"}},Lr={style:{"font-size":"0.8em",color:"#ccc"}};Object(a["r"])();var Pr=Er((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",Ar,[Object(a["g"])("h3",null,[Object(a["f"])(Object(a["C"])(e.name)+" | ",1),Object(a["g"])("span",Nr,[Object(a["g"])("a",{href:e.link,target:"_blank"},Object(a["C"])(e.linkText),9,["href"])])]),Object(a["g"])("p",Lr,[Object(a["y"])(e.$slots,"default")])])})),Ir=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Ir=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PatreonButton:Kn},props:{name:String,link:String,linkText:String},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return te},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){return Object(Y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})],Ir);var zr=Ir;n("9b25");const Fr=q()(zr,[["render",Pr],["__scopeId","data-v-27444a3f"]]);var Vr=Fr,Hr=Object(a["H"])("data-v-73496115");Object(a["u"])("data-v-73496115");var Wr={class:"filter-window"},Ur=Object(a["g"])("h2",null,"Content Filters",-1),Gr={key:0},$r={key:1},Jr=Object(a["g"])("p",null,"The game generally isn't very extreme, but you may not like everything. Filters will try to remove most of the content you are not interested in.",-1),Yr=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Tip:"),Object(a["f"])(' Remove only what you actually dislike, not what makes for a "bad end", since those are often very fun.')],-1),Xr=Object(a["g"])("p",null,[Object(a["g"])("b",null,"All"),Object(a["f"])(" - Include all content in this category.")],-1),Kr=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Some"),Object(a["f"])(" - Do not include extreme content in this category. Example: No immobilizingly large breast expansion.")],-1),Zr=Object(a["g"])("p",null,[Object(a["g"])("b",null,"None"),Object(a["f"])(" - Remove as much content in this category as possible.")],-1),Qr={class:"filter-entry"},ec={class:"label"},tc=Object(a["g"])("h4",null,"All",-1),nc=Object(a["g"])("h4",null,"Some",-1),ac=Object(a["g"])("h4",null,"None",-1);Object(a["r"])();var ic=Hr((function(e,t,n,i,r,c){var s=Object(a["z"])("BlushList"),o=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",Wr,[Object(a["g"])("div",null,[Ur,e.menu.isFilteringTooMuch()?(Object(a["q"])(),Object(a["d"])("h3",$r," Currently including "+Object(a["C"])(e.menu.cardsFilteredString())+". WARNING: There may not be enough cards left. ",1)):(Object(a["q"])(),Object(a["d"])("h3",Gr,"Currently including "+Object(a["C"])(e.menu.cardsFilteredString()),1)),Jr,Yr]),Object(a["g"])(s,{class:"instructions"},{default:Hr((function(){return[Xr,Kr,Zr]})),_:1}),Object(a["g"])(s,{class:"filter-entries"},{default:Hr((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.settings.filters,(function(t){return Object(a["q"])(),Object(a["d"])("div",Qr,[Object(a["g"])("div",ec,[Object(a["g"])("h3",null,Object(a["C"])(t.name),1),Object(a["g"])("p",null,Object(a["C"])(t.description),1)]),Object(a["g"])(o,{style:{"grid-area":"b1"},class:{"selected-green":0===t.strictness},onClick:function(n){return e.setStrictness(t,0)}},{default:Hr((function(){return[tc]})),_:2},1032,["class","onClick"]),Object(a["g"])(o,{style:{"grid-area":"b2"},class:{"selected-yellow":1===t.strictness},onClick:function(n){return e.setStrictness(t,1)}},{default:Hr((function(){return[nc]})),_:2},1032,["class","onClick"]),Object(a["g"])(o,{style:{"grid-area":"b3"},class:{"selected-red":2===t.strictness},onClick:function(n){return e.setStrictness(t,2)}},{default:Hr((function(){return[ac]})),_:2},1032,["class","onClick"])])})),256))]})),_:1})])})),rc=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.noCross=!1,e}return n}(h["b"]);rc=Object(d["a"])([Object(h["a"])({components:{TextButton:A,BlushWindow:_a,BlushList:Ze},props:{menu:Object,noCross:Boolean},emits:["close"],methods:{setStrictness:function(e,t){e.strictness=t,this.menu.save()}},computed:{util:function(){return te}}})],rc);var cc=rc;n("3fd7");const sc=q()(cc,[["render",ic],["__scopeId","data-v-73496115"]]);var oc=sc,uc=Object(a["H"])("data-v-e79496f8");Object(a["u"])("data-v-e79496f8");var lc={class:"tab-window"},dc={class:"tabs"},hc={class:"tab-label"},fc={class:"content-window"},bc={class:"content"};Object(a["r"])();var gc=uc((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",lc,[Object(a["g"])("div",dc,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.tabs,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t,class:{"active-tab":t===e.activeTab},onClick:function(n){return e.activateTab(t)}},{default:uc((function(){return[Object(a["g"])("h3",hc,Object(a["C"])(e.util.camelToTitleCase(t)),1)]})),_:2},1032,["class","onClick"])})),128))]),Object(a["g"])("div",fc,[Object(a["g"])("div",bc,[Object(a["y"])(e.$slots,e.activeTab)])])])})),vc=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.tabs=[],e.activeTab="",e}return n}(h["b"]);vc=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PlayingCard:fe},props:{tabs:Array},emits:["close","activatedTab"],methods:{activateTab:function(e){this.activeTab=e,this.$emit("activatedTab",e),"exit"!=e&&"close"!=e||this.$emit("close")}},computed:{util:function(){return te}},created:function(){this.activateTab(this.tabs[0])}})],vc);var pc=vc;n("7140");const Oc=q()(pc,[["render",gc],["__scopeId","data-v-e79496f8"]]);var mc=Oc,jc=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);jc=Object(d["a"])([Object(h["a"])({components:{BlushList:Ze,TextButton:A,Credit:Vr,FilterWindow:oc,BlushWindow:_a,TabWindow:mc},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window})),deleteCollection:function(){confirm("Are you sure you wish to delete your card collection? This can't be undone.")&&this.menu.deleteCollection()},addMod:function(e){var t=this;this.menu.loadMod(e,(function(){console.log("All tags:",t.allTags())}))},removeMod:function(e){confirm("Unloading this mod will remove all its data from your save file. If you wish to update this mod, just load the new version instead.\n\nAre you sure you want to remove this mod?")&&this.menu.unloadMod(e)},simulateEpilogues:function(e){var t=document.getElementById("epilogue-simulation-output");if(null!=t){t.innerText="";var n=function(e){t.innerText+=e+"\n"},a=function(e){t.innerText=""};this.menu.endings.correctnessSimulation(e,n,a)}else console.error("Could not find log field.")},toEnd:function(e){this.menu.startGame();var t=new Ft(this.menu.game);this.menu.game.state.stage=t,t.onStart();var n=this.menu.endings||new nn,a=n.selectEnding(e);t.createYourNewLifeButton(a)},refDeck:function(){return Ce.referenceDeck()},allTags:function(){var e,t=new Set,n=Object(ae["a"])(Ce.referenceDeck().unpack().cards);try{for(n.s();!(e=n.n()).done;){var a,i=e.value,r=Object(ae["a"])(i.tags);try{for(r.s();!(a=r.n()).done;){var c=a.value;t.add(c)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){n.e(s)}finally{n.f()}return Object(Dt["a"])(t.values()).sort()},moddedEpilogues:function(){var e,t=[],n=Object(ae["a"])(this.menu.endings.epilogues);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(""!=a.mod){var i=a.mod,r=this.menu.mods[i];void 0!=r&&r.devmode&&t.push(a)}}}catch(c){n.e(c)}finally{n.f()}return t}},computed:{util:function(){return te}}})],jc);var yc=jc;n("0df4");const kc=q()(yc,[["render",qr],["__scopeId","data-v-fa5433b4"]]);var wc=kc,Cc=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);Cc=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PatreonButton:Kn,PatreonButton2:ua,RelatedThumb:aa,PatchNotesScreen:Ba,EndingsCollectionScreen:Ha,ModScreen:wc},props:{menu:Object},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return te},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Cc);var Sc=Cc;n("fe42");const xc=q()(Sc,[["render",Un],["__scopeId","data-v-1393f094"]]);var _c=xc,Tc=Object(a["H"])("data-v-5f4c2c54");Object(a["u"])("data-v-5f4c2c54");var Dc={key:0,class:"milkfarm dialogue-view"};Object(a["r"])();var Rc=Tc((function(e,t,n,i,r,c){var s=Object(a["z"])("DialogueCard");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",Dc,[Object(a["g"])(s,{menu:e.menu,title:"Ditzy Dice"},null,8,["menu"])])):Object(a["e"])("",!0)})),Bc=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);Bc=Object(d["a"])([Object(h["a"])({components:{TextButton:A,DialogueCard:Ct},props:{menu:Object},methods:{log:function(e){console.log(e)}},computed:{game:function(){return this.menu.game}},created:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Bc);var Mc=Bc;n("065e");const qc=q()(Mc,[["render",Rc],["__scopeId","data-v-5f4c2c54"]]);var Ec=qc,Ac=Object(a["H"])("data-v-622854ee");Object(a["u"])("data-v-622854ee");var Nc={key:0,class:"milkfarm"};Object(a["r"])();var Lc=Ac((function(e,t,n,i,r,c){var s=Object(a["z"])("CollectionWindow"),o=Object(a["z"])("DialogueCard");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",Nc,[Object(a["g"])(s,{deck:e.game.player.hand},null,8,["deck"]),Object(a["g"])(o,{menu:e.menu,title:e.endTitle},null,8,["menu","title"])])):Object(a["e"])("",!0)})),Pc=Object(a["H"])("data-v-35f50ee3");Object(a["u"])("data-v-35f50ee3");var Ic={class:"collection-window"},zc={class:"collection-tabs"},Fc={key:0,class:"tab-label tab-back-label"},Vc={key:1,class:"tab-label"},Hc={class:"cards-border"},Wc={class:"cards-wrapper"},Uc={class:"cards",id:"cards"};Object(a["r"])();var Gc=Pc((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("PlayingCard");return Object(a["q"])(),Object(a["d"])("div",Ic,[Object(a["g"])("div",zc,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.tabs,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t,class:{"active-tab":e.activeTab===t},onClick:function(n){return e.activateTab(t)}},{default:Pc((function(){return[e.isInspectingCard&&e.activeTab===t?(Object(a["q"])(),Object(a["d"])("h3",Fc,"Back")):(Object(a["q"])(),Object(a["d"])("h3",Vc,Object(a["C"])(e.util.capitalize(t)),1))]})),_:2},1032,["class","onClick"])})),128))]),Object(a["g"])("div",Hc,[Object(a["g"])("div",Wc,[Object(a["g"])("div",Uc,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.internalDeck.cards,(function(t){return Object(a["q"])(),Object(a["d"])(o,{key:t.id,card:t,class:{scaled:t.scale},onClick:function(n){e.activateCard(t)}},null,8,["card","class","onClick"])})),128))])])])])})),$c=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.groupByParent=!1,e.scaledCard=new Se({}),e.activeTab="all",e.activeCard=new Se({}),e.activeSubCard=Object(a["v"])(new Se({})),e}return n}(h["b"]);$c=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PlayingCard:fe,BlushWindow:_a},props:{menu:Object,deck:Object,groupByParent:Boolean},emits:["close","activate-tab","activate-card","activate-subcard"],methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new Se({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)},activateTab:function(e){this.activeTab=e,this.activeCard=new Se({}),this.$emit("activate-tab",e)},activateCard:function(e){this.$emit("activate-card",e),e.isParent?(this.activeCard=e,this.activeSubCard.highlight=0,this.activeSubCard=new Se({})):(this.activeSubCard.id!=e.id&&(this.activeSubCard.highlight=0),this.activeSubCard=e,this.activeSubCard.highlight+=1,5==this.activeSubCard.highlight&&(this.activeSubCard.highlight=1)),this.$forceUpdate()},lookup:function(e){return Ce.lookup(e)}},computed:{tabs:function(){return["all","behavior","body","clothing","event","mind","reward"]},util:function(){return te},refDeck:function(){return Ce.referenceDeck().useFilters()},internalDeck:function(){return this.isInspectingCard?new Ce(this.activeCard.subcards).sortByLevel().useFilters():this.groupByParent?this.deck.copy().onlyTag(this.activeTab).pack().unique().sortByName().sortByFamily().useFilters():this.deck.copy().onlyTag(this.activeTab).unpack().unique().sortByName().sortByFamily().useFilters()},isInspectingCard:function(){return void 0!=this.activeCard.id&&this.activeCard.isParent}}})],$c);var Jc=$c;n("c340");const Yc=q()(Jc,[["render",Gc],["__scopeId","data-v-35f50ee3"]]);var Xc=Yc,Kc=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e.scaledCard=new Se({}),e}return n}(h["b"]);Kc=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PlayingCard:fe,DialogueCard:Ct,DialogueStatusCard:ct,CollectionWindow:Xc},props:{menu:Object},methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new Se({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)}},computed:{game:function(){return this.menu.game},endTitle:function(){var e=this.game.title;return""==e?"The End":"The End - ".concat(e)}},created:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Kc);var Zc=Kc;n("e6f3");const Qc=q()(Zc,[["render",Lc],["__scopeId","data-v-622854ee"]]);var es=Qc,ts=Object(a["H"])("data-v-0e922dc8");Object(a["u"])("data-v-0e922dc8");var ns={key:0,class:"menu-view"},as={class:"window text-window",id:"help-window"},is=Object(a["g"])("div",null,[Object(a["g"])("h1",{style:{margin:"0"}},"Credits")],-1),rs=Object(a["g"])("h3",null,"X",-1),cs={class:"farm-list help-list"},ss=Object(a["g"])("div",{class:"farm-window credits-block"},[Object(a["g"])("h2",null,"Development and Design"),Object(a["g"])("h3",{class:"credit"},"Gardamuse")],-1),os={class:"farm-window credits-block"},us=Object(a["g"])("h2",null,"Writing",-1),ls=Object(a["f"])(" Transformation descriptions and epilogues. "),ds={class:"farm-window credits-block"},hs=Object(a["g"])("h2",null,"Artwork",-1),fs=Object(a["f"])(" For illustrations on: "),bs={key:0},gs=Object(a["f"])(". "),vs={class:"farm-window credits-block"},ps=Object(a["g"])("h2",null,"Graphics",-1),Os=Object(a["f"])(" Card textures. "),ms=Object(a["f"])(" Tool for generating images. "),js={class:"farm-window credits-block"},ys=Object(a["g"])("h2",null,"Special Thanks to",-1),ks={class:"credit"},ws=Object(a["g"])("p",{class:"credit"},"And everyone else who supports Blushing Defeat on Patreon!",-1),Cs={class:"farm-window credits-block double-columns"},Ss=Object(a["g"])("h2",null,"Game Inspired by",-1),xs=Object(a["f"])(" For their "),_s=Object(a["g"])("a",{href:"https://www.deviantart.com/xsentisus/art/Bimbo-Dice-700-Watcher-25k-Page-Views-SPECIAL-865174538",target:"_blank"}," Bimbo Dice",-1),Ts=Object(a["f"])(" caption series. "),Ds=Object(a["f"])(" For their "),Rs=Object(a["g"])("a",{href:"https://imgur.com/a/bXlN6Fe",target:"_blank"},"Eliminated",-1),Bs=Object(a["f"])(" choose-your-own-adventure. "),Ms=Object(a["f"])(" For their "),qs=Object(a["g"])("a",{href:"https://www.deviantart.com/grapplerofbooty/art/Transmoria-The-Realm-of-Chang-Faerie-Mind-Shaper-859293252",target:"_blank"}," Transoria",-1),Es=Object(a["f"])(" statblocks and "),As=Object(a["g"])("a",{href:"https://www.deviantart.com/grapplerofbooty/art/MTG-TG-Self-Inflicted-Stupidity-790655990",target:"_blank"},"MTG",-1),Ns=Object(a["f"])(" card series. "),Ls=Object(a["f"])(" For their transformation spins caption series. "),Ps=Object(a["f"])(" For the "),Is=Object(a["g"])("a",{href:"https://imgur.com/W0YNL6l",target:"_blank"}," Bimbofication Curse",-1),zs=Object(a["f"])(" spreadsheet. ");Object(a["r"])();var Fs=ts((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("Credit");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",ns,[Object(a["g"])("div",as,[is,Object(a["g"])(s,{class:"farm-button",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},{default:ts((function(){return[rs]})),_:1}),Object(a["g"])("div",cs,[ss,Object(a["g"])("div",os,[us,Object(a["g"])(o,{name:"Duhad",link:"https://www.deviantart.com/motherduhad",linkText:"DeviantArt"},{default:ts((function(){return[ls]})),_:1})]),Object(a["g"])("div",ds,[hs,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.artCredits(),(function(e){return Object(a["q"])(),Object(a["d"])(o,{key:e,name:e.artist,link:e.link,linkText:e.linkText},{default:ts((function(){return[fs,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.cards,(function(t,n){return Object(a["q"])(),Object(a["d"])("span",null,[Object(a["f"])(Object(a["C"])(t),1),n!==e.cards.length-1?(Object(a["q"])(),Object(a["d"])("span",bs,", ")):Object(a["e"])("",!0)])})),256)),gs]})),_:2},1032,["name","link","linkText"])})),128))]),Object(a["g"])("div",vs,[ps,Object(a["g"])(o,{name:"Transparent Textures",link:"https://www.transparenttextures.com/",linkText:"Website"},{default:ts((function(){return[Os]})),_:1}),Object(a["g"])(o,{name:"Artbreeder",link:"https://www.artbreeder.com",linkText:"Website"},{default:ts((function(){return[ms]})),_:1})]),Object(a["g"])("div",js,[ys,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.patreonCredits(),(function(e){return Object(a["q"])(),Object(a["d"])("h3",ks,Object(a["C"])(e.name),1)})),256)),ws]),Object(a["g"])("div",Cs,[Ss,Object(a["g"])(o,{name:"Xsentisus",link:"https://www.deviantart.com/xsentisus",linkText:"DeviantArt"},{default:ts((function(){return[xs,_s,Ts]})),_:1}),Object(a["g"])(o,{name:"MythicalCreatureBone",link:"https://www.deviantart.com/mythicalcreaturebone",linkText:"DeviantArt"},{default:ts((function(){return[Ds,Rs,Bs]})),_:1}),Object(a["g"])(o,{name:"GrapplerOfBooty",link:"https://www.deviantart.com/grapplerofbooty",linkText:"DeviantArt"},{default:ts((function(){return[Ms,qs,Es,As,Ns]})),_:1}),Object(a["g"])(o,{name:"TF Me Please!",link:"https://www.tumblr.com/blog/view/transformmeplease",linkText:"Tumblr"},{default:ts((function(){return[Ls]})),_:1}),Object(a["g"])(o,{name:"Unknown",link:"https://imgur.com/W0YNL6l",linkText:"Imgur"},{default:ts((function(){return[Ps,Is,zs]})),_:1})])])])])):Object(a["e"])("",!0)})),Vs=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);Vs=Object(d["a"])([Object(h["a"])({components:{TextButton:A,PatreonButton:Kn,Credit:Vr},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return te},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Vs);var Hs=Vs;n("dcaf");const Ws=q()(Hs,[["render",Fs],["__scopeId","data-v-0e922dc8"]]);var Us=Ws,Gs=Object(a["H"])("data-v-3f224c2e");Object(a["u"])("data-v-3f224c2e");var $s={key:0,class:"milkfarm"},Js={class:"status-content"},Ys={class:"status-text"},Xs=Object(a["g"])("p",null,"To go back, click the current tab.",-1),Ks=Object(a["g"])("b",null,"Levels owned",-1),Zs=Object(a["f"])(": "),Qs={class:"status-number"},eo=Object(a["g"])("p",null,"These are all the cards you've collected.",-1),to=Object(a["g"])("p",null,"To inspect a card with multiple levels, click it.",-1),no=Object(a["g"])("b",null,"Owned",-1),ao=Object(a["f"])(": "),io={class:"status-number"},ro=Object(a["f"])(" cards, "),co={class:"status-number"},so=Object(a["f"])(" levels "),oo={class:"buttons"},uo=Object(a["f"])("Save Screenshot"),lo=Object(a["g"])("p",null,"These are all the epilogues and endings you've found.",-1),ho=Object(a["g"])("p",null,"Epilogues are unlocked by having a certain set of cards by the end of the game.",-1),fo=Object(a["g"])("p",null,"Endings are unlocked by making dialogue choices in the epilogue. Some dialogue choices will only show up if you have a specific card.",-1),bo=Object(a["g"])("p",null,"Click an ending to read it.",-1),go=Object(a["g"])("br",null,null,-1),vo=Object(a["g"])("b",null,"Unlocked epilogues",-1),po=Object(a["f"])(": "),Oo={style:{"font-size":"1.1em"}},mo=Object(a["g"])("b",null,"Unlocked endings",-1),jo=Object(a["f"])(": "),yo={style:{"font-size":"1.1em"}},ko=Object(a["g"])("p",null,null,-1);Object(a["r"])();var wo=Gs((function(e,t,n,i,r,c){var s=Object(a["z"])("CollectionWindow"),o=Object(a["z"])("EndingsCollectionWindow"),u=Object(a["z"])("ChatView"),l=Object(a["z"])("TextButton"),d=Object(a["z"])("TabWindow");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",$s,["cards"===e.activeMenuTab?(Object(a["q"])(),Object(a["d"])(s,{key:0,deck:e.menu.collection,menu:e.menu,groupByParent:"",onActivateTab:e.activateTab,onActivateCard:e.activateCard},null,8,["deck","menu","onActivateTab","onActivateCard"])):(Object(a["q"])(),Object(a["d"])(o,{key:1,menu:e.menu,"endings-collection":e.endingsCollection},null,8,["menu","endings-collection"])),Object(a["g"])(d,{style:{"grid-area":"s"},tabs:["cards","endings","exit"],onActivatedTab:e.activateMenuTab},{cards:Gs((function(){return[Object(a["g"])("div",Js,[Object(a["g"])("div",Ys,[e.isInspectingCard?(Object(a["q"])(),Object(a["d"])(a["a"],{key:0},[Object(a["g"])("p",null,'These are all levels of the "'+Object(a["C"])(e.activeCard.name)+"\" card you've collected.",1),Xs,Object(a["g"])("p",null,[Ks,Zs,Object(a["g"])("span",Qs,Object(a["C"])(e.activeCard.subcards.length)+" / "+Object(a["C"])(e.activeCard.levels),1)])],64)):(Object(a["q"])(),Object(a["d"])(a["a"],{key:1},[eo,to,Object(a["g"])("p",null,[no,ao,Object(a["g"])("span",io,Object(a["C"])(e.deck.size())+" / "+Object(a["C"])(e.refDeck.onlyTag(e.activeTab).size()),1),ro,Object(a["g"])("span",co,Object(a["C"])(e.deck.unpack().size())+" / "+Object(a["C"])(e.refDeck.onlyTag(e.activeTab).unpack().size()),1),so])],64))]),Object(a["g"])(u,{class:"transformation-chat",lines:e.transformationText()},null,8,["lines"]),Object(a["g"])("div",oo,[Object(a["g"])(l,{onClick:t[1]||(t[1]=function(t){return e.util.screenshot("cards",e.screenshotName())})},{default:Gs((function(){return[uo]})),_:1})])])]})),endings:Gs((function(){return[lo,ho,fo,bo,go,Object(a["g"])("p",null,[vo,po,Object(a["g"])("span",Oo,Object(a["C"])(e.endingsCollection.unlockedEpilogues().length)+" / "+Object(a["C"])(e.endingsCollection.epiloguesList().length),1)]),Object(a["g"])("p",null,[mo,jo,Object(a["g"])("span",yo,Object(a["C"])(e.endingsCollection.nrOfAllUnlockedEndings())+" / "+Object(a["C"])(e.endingsCollection.nrOfAllEndings()),1)]),ko]})),_:1},8,["onActivatedTab"])])):Object(a["e"])("",!0)})),Co=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e.endingsCollection=new an(e.menu),e.scaledCard=new Se({}),e.activeTab="all",e.activeCard=new Se({}),e.activeSubCard=new Se({}),e.activeMenuTab="",e}return n}(h["b"]);Co=Object(d["a"])([Object(h["a"])({components:{ChatView:nt,TextButton:A,PlayingCard:fe,TabWindow:mc,CollectionWindow:Xc,EndingsCollectionWindow:Ha},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new Se({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)},activateTab:function(e){this.activeTab=e,this.activeCard=new Se({}),this.activeSubCard=new Se({})},activateCard:function(e){e.isParent?(this.activeCard=e,this.activeSubCard=new Se({})):this.activeSubCard=e},activateMenuTab:function(e){this.activeMenuTab=e,"exit"==e&&this.$emit("close")},transformationText:function(){return Vt.parseLines(this.activeSubCard.transformation)},lookup:function(e){return Ce.lookup(e)},screenshotName:function(){return this.isInspectingCard?"".concat(te.toKebabCase(this.activeCard.name),"-").concat(this.activeCard.subcards.length,"-of-").concat(this.activeCard.levels):"".concat(this.activeTab,"-").concat(this.deck.unpack().size(),"-of-").concat(this.refDeck.onlyTag(this.activeTab).unpack().size())}},computed:{tabs:function(){return["all","behavior","body","clothing","event","mind","reward"]},util:function(){return te},refDeck:function(){return Ce.referenceDeck().useFilters()},deck:function(){return this.isInspectingCard?new Ce(this.activeCard.subcards).sortByLevel().useFilters():this.menu.collection.copy().onlyTag(this.activeTab).pack().unique().useFilters()},isInspectingCard:function(){return void 0!=this.activeCard.id&&this.activeCard.isParent}},created:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Co);var So=Co;n("9825");const xo=q()(So,[["render",wo],["__scopeId","data-v-3f224c2e"]]);var _o=xo,To=Object(a["H"])("data-v-7abe1b76");Object(a["u"])("data-v-7abe1b76");var Do={class:"settings-screen"},Ro=Object(a["g"])("h2",null,"Manual Saves",-1),Bo={class:"button-row"},Mo=Object(a["g"])("p",{style:{margin:"0"}},"Running the game in incognito mode, or just want to back up your save? Download your current save game here. This includes all active mods.",-1),qo=Object(a["g"])("b",null,"Download Save",-1),Eo={class:"button-row"},Ao=Object(a["g"])("p",{style:{margin:"0"}},"Restore your save game from a previously downloaded save file. This will overwrite your current save file, including mods.",-1),No=Object(a["g"])("label",{for:"save-import",class:"load-button"},[Object(a["g"])("b",null,"Restore Save")],-1),Lo=Object(a["g"])("h2",{style:{"margin-top":"40px"}},"Delete Saves",-1),Po={class:"button-row"},Io=Object(a["g"])("p",{style:{margin:"0"}},"Do you want to start your collection from scratch? Press this button to clear your save and start again.",-1),zo=Object(a["g"])("b",null,"Clear Collection",-1);Object(a["r"])();var Fo=To((function(e,t,n,i,r,c){var s=Object(a["z"])("FilterWindow"),o=Object(a["z"])("BanWindow"),u=Object(a["z"])("TextButton"),l=Object(a["z"])("TabWindow");return Object(a["q"])(),Object(a["d"])("div",Do,[Object(a["g"])(l,{tabs:["contentFilters","banCards","saves","exit"],onClose:t[6]||(t[6]=function(t){return e.$emit("close")})},{contentFilters:To((function(){return[Object(a["g"])(s,{menu:e.menu,onClose:t[1]||(t[1]=function(t){return e.$emit("close")})},null,8,["menu"])]})),banCards:To((function(){return[Object(a["g"])(o,{menu:e.menu,onClose:t[2]||(t[2]=function(t){return e.$emit("close")})},null,8,["menu"])]})),saves:To((function(){return[Ro,Object(a["g"])("div",Bo,[Mo,Object(a["g"])(u,{class:"normal-button",onClick:t[3]||(t[3]=function(t){return e.menu.exportSave()})},{default:To((function(){return[qo]})),_:1})]),Object(a["g"])("div",Eo,[Ao,Object(a["g"])("div",null,[No,Object(a["g"])("input",{id:"save-import",type:"file",accept:".dd",onChange:t[4]||(t[4]=function(){var t;return e.menu.importSave&&(t=e.menu).importSave.apply(t,arguments)}),style:{display:"none"}},null,32)])]),Lo,Object(a["g"])("div",Po,[Io,Object(a["g"])(u,{class:"delete-save-button",onClick:t[5]||(t[5]=function(t){return e.deleteCollection()})},{default:To((function(){return[zo]})),_:1})])]})),_:1})])})),Vo=Object(a["H"])("data-v-1e833d82");Object(a["u"])("data-v-1e833d82");var Ho={class:"ban-window"},Wo=Object(a["g"])("h2",null,"Ban Individual Cards",-1),Uo={key:0},Go={key:1},$o=Object(a["g"])("p",null,"If the filters don't remove just that one card you don't want you can choose to ban any specific card, irregardless of your filter settings.",-1),Jo=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Tip:"),Object(a["f"])(" Only ban cards you really dislike. Ban too much and you'll ruin your own fun!")],-1),Yo={class:"filter-entry"},Xo={class:"label"},Ko={key:0},Zo={key:1},Qo={key:2},eu={key:0},tu={key:1,style:{"text-decoration":"line-through"}},nu={key:2};Object(a["r"])();var au=Vo((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("BlushList");return Object(a["q"])(),Object(a["d"])("div",Ho,[Object(a["g"])("div",null,[Wo,e.menu.isFilteringTooMuch()?(Object(a["q"])(),Object(a["d"])("h3",Go," Currently including "+Object(a["C"])(e.menu.cardsFilteredString())+". WARNING: There may not be enough cards left. ",1)):(Object(a["q"])(),Object(a["d"])("h3",Uo,"Currently including "+Object(a["C"])(e.menu.cardsFilteredString()),1)),$o,Jo]),Object(a["g"])(o,{class:"filter-entries"},{default:Vo((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.refDeck.cards.sort((function(e,t){return e.name.localeCompare(t.name)})),(function(t){return Object(a["q"])(),Object(a["d"])("div",Yo,[Object(a["g"])("div",Xo,[Object(a["g"])("h3",null,Object(a["C"])(t.name),1)]),t.isParent?(Object(a["q"])(!0),Object(a["d"])(a["a"],{key:1},Object(a["x"])(t.subcards,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t.id,style:{},class:{"selected-green":!e.isBanned(t.id)&&!e.isFiltered(t.id),"selected-yellow":e.isFiltered(t.id),"selected-red":e.isBanned(t.id)},onClick:function(n){return e.toggleBan(t.id)}},{default:Vo((function(){return[e.isBanned(t.id)?(Object(a["q"])(),Object(a["d"])("p",eu," Banned ")):e.isFiltered(t.id)?(Object(a["q"])(),Object(a["d"])("p",tu,Object(a["C"])(t.name),1)):(Object(a["q"])(),Object(a["d"])("p",nu,Object(a["C"])(t.name),1))]})),_:2},1032,["class","onClick"])})),128)):(Object(a["q"])(),Object(a["d"])(s,{key:0,style:{},class:{"selected-green":!e.isBanned(t.id)&&!e.isFiltered(t.id),"selected-yellow":e.isFiltered(t.id),"selected-red":e.isBanned(t.id)},onClick:function(n){return e.toggleBan(t.id)}},{default:Vo((function(){return[e.isBanned(t.id)?(Object(a["q"])(),Object(a["d"])("p",Ko," Banned ")):e.isFiltered(t.id)?(Object(a["q"])(),Object(a["d"])("p",Zo," Filtered ")):(Object(a["q"])(),Object(a["d"])("p",Qo," Allowed "))]})),_:2},1032,["class","onClick"]))])})),256))]})),_:1})])})),iu=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.noCross=!1,e.refDeck=Ce.referenceDeck(),e}return n}(h["b"]);iu=Object(d["a"])([Object(h["a"])({components:{TextButton:A,BlushWindow:_a,BlushList:Ze},props:{menu:Object,noCross:Boolean},emits:["close"],methods:{isBanned:function(e){return this.menu.settings.isBanned(e)},isFiltered:function(e){return this.menu.settings.isFiltered(e)},toggleBan:function(e){this.isBanned(e)?this.menu.settings.unbanCard(e):this.menu.settings.banCard(e),this.menu.save(),this.$forceUpdate()}},computed:{util:function(){return te}}})],iu);var ru=iu;n("0704");const cu=q()(ru,[["render",au],["__scopeId","data-v-1e833d82"]]);var su=cu,ou=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);ou=Object(d["a"])([Object(h["a"])({components:{BlushList:Ze,TextButton:A,Credit:Vr,FilterWindow:oc,BanWindow:su,BlushWindow:_a,TabWindow:mc},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window})),deleteCollection:function(){confirm("Are you sure you wish to delete your card collection? This can't be undone.")&&this.menu.deleteCollection()}},computed:{util:function(){return te}}})],ou);var uu=ou;n("1a7f");const lu=q()(uu,[["render",Fo],["__scopeId","data-v-7abe1b76"]]);var du=lu,hu=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.menu=new vn,e}return n}(h["b"]);hu=Object(d["a"])([Object(h["a"])({components:{GameScreen:Tt,StartMenu:_c,DialogueScreen:Ec,HandView:es,CreditsScreen:Us,CollectionScreen:_o,PatchNotesScreen:Ba,SettingsScreen:du,EndingsCollectionScreen:Ha,ModScreen:wc},methods:{},computed:{cssVars:function(){return{"--background-image":"url("+n("39d9")+")","--maven-pro-path":"url("+n("1a08")+")"}},globalState:function(){return ye()}}})],hu);var fu=hu;n("1286"),n("baab");const bu=q()(fu,[["render",s],["__scopeId","data-v-34e99f59"]]);var gu=bu,vu=n("6c02"),pu=[{path:"/",name:"Milkfarm",component:Tt}],Ou=Object(vu["a"])({history:Object(vu["b"])("/"),routes:pu}),mu=Ou;a["c"](gu).use(mu).mount("#app")},ce6a:function(e,t,n){e.exports=n.p+"img/devil-512px.webp"},cf16:function(e,t,n){},d4b5:function(e,t,n){"use strict";n("52cd")},d5f2:function(e,t,n){},d736:function(e,t,n){"use strict";n("67b4")},d9d0:function(e,t,n){"use strict";n("cf16")},dcaf:function(e,t,n){"use strict";n("9294")},e6f3:function(e,t,n){"use strict";n("7516")},e733:function(e,t,n){"use strict";n("57ec")},e7c0:function(e,t,n){"use strict";n("249d")},ea6b:function(e,t,n){},ee2a:function(e,t,n){},ee3e:function(e,t,n){"use strict";n("c9aa")},fe42:function(e,t,n){"use strict";n("67d2")},fe4e:function(e,t,n){},ff4c:function(e,t,n){}});
//# sourceMappingURL=app.js.map