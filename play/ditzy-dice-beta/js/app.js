(function(e){function t(t){for(var a,c,s=t[0],o=t[1],u=t[2],d=0,h=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&h.push(i[c][0]),i[c]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var o=n[s];0!==i[o]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},i={app:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/play/ditzy-dice/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=o;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"04fb":function(e,t,n){},"05c1":function(e,t,n){},"065e":function(e,t,n){"use strict";n("92db")},"080c":function(e,t,n){"use strict";n("0a11")},"0a11":function(e,t,n){},"0b79":function(e,t,n){},"0bb2":function(e,t,n){"use strict";n("28ad")},"0be7":function(e,t,n){},"0d0a":function(e,t,n){"use strict";n("c50c")},"0da6":function(e,t,n){},1286:function(e,t,n){"use strict";n("d194")},1300:function(e,t,n){},1323:function(e,t,n){},"157a":function(e,t,n){e.exports=n.p+"img/patreon-banner-no-text.webp"},"1a08":function(e,t,n){e.exports=n.p+"fonts/MavenPro-VariableFont_wght.ttf"},"28ad":function(e,t,n){},"34ce":function(e,t,n){"use strict";n("b8a3")},"364d":function(e,t,n){},3905:function(e,t,n){},"39d9":function(e,t,n){e.exports=n.p+"img/background.webp"},"3df8":function(e,t,n){},"3fd7":function(e,t,n){"use strict";n("0da6")},"4d8e":function(e,t,n){},"55c9":function(e,t,n){},"55cd":function(e,t,n){},5650:function(e,t,n){"use strict";n("ccc9")},"58cc":function(e,t,n){},"60bf":function(e,t,n){},"6ad1":function(e,t,n){"use strict";n("3905")},"6cb8":function(e,t,n){},7127:function(e,t,n){e.exports=n.p+"img/randomPortrait.webp"},7140:function(e,t,n){"use strict";n("1300")},7599:function(e,t,n){"use strict";n("d08b")},"7a1e":function(e,t,n){},8020:function(e,t,n){"use strict";n("fb01")},8743:function(e,t,n){"use strict";n("04fb")},"8c55":function(e,t,n){"use strict";n("a140")},"8d53":function(e,t,n){"use strict";n("05c1")},9158:function(e,t,n){"use strict";n("9c6f")},"92d9":function(e,t,n){"use strict";n("93f3")},"92db":function(e,t,n){},"93f3":function(e,t,n){},9512:function(e,t,n){"use strict";n("6cb8")},"9b25":function(e,t,n){"use strict";n("3df8")},"9c06":function(e,t,n){},"9c6f":function(e,t,n){},a08e:function(e,t,n){},a140:function(e,t,n){},a17f:function(e,t,n){e.exports=n.p+"img/black-felt.png"},b783:function(e,t,n){"use strict";n("0be7")},b8a3:function(e,t,n){},ba9d:function(e,t,n){e.exports=n.p+"img/patreon-banner.webp"},baab:function(e,t,n){"use strict";n("55c9")},bd0e:function(e,t,n){"use strict";n("1323")},c340:function(e,t,n){"use strict";n("0b79")},c421:function(e,t,n){},c50c:function(e,t,n){},ca78:function(e,t,n){"use strict";n("58cc")},ccc9:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),i=Object(a["H"])("data-v-34e99f59");Object(a["u"])("data-v-34e99f59");var r={key:0,class:"loading"},c=Object(a["g"])("h1",null,"Loading...",-1);Object(a["r"])();var s=i((function(e,t,n,i,s,o){return Object(a["q"])(),Object(a["d"])("div",{id:"milkfarm-app",style:e.cssVars},[e.globalState.loading.value?(Object(a["q"])(),Object(a["d"])("div",r,[c])):(Object(a["q"])(),Object(a["d"])(Object(a["A"])(e.menu.activeComponent),Object(a["l"])({key:1},{menu:e.menu},{onGotoView:t[1]||(t[1]=function(t){e.menu.activeComponent=t}),onClose:t[2]||(t[2]=function(t){return e.menu.activeComponent="StartMenu"})}),null,16))],4)})),o=n("d4ec"),u=n("262e"),l=n("2caf"),d=n("9ab4"),h=n("ce1f"),f=Object(a["H"])("data-v-5bfce8f7");Object(a["u"])("data-v-5bfce8f7");var b={class:"milkfarm"},g={class:"hand-labels"},v={class:"hand-label"},O={class:"hand-label mana-label"},p={class:"hand-label mana-label"},j={class:"hand-label"},m={class:"hand-labels"},y=Object(a["f"])("Show All: On"),k=Object(a["f"])("Show All: Off"),w={class:"dices"},C={class:"abilities"},S={class:"ability-title"},x={class:"ability-subtitle"};Object(a["r"])();var _=f((function(e,t,n,i,r,c){var s=Object(a["z"])("CardHandWindow"),o=Object(a["z"])("TextButton"),u=Object(a["z"])("DialogueCard"),l=Object(a["z"])("DiceView");return Object(a["q"])(),Object(a["d"])("div",b,[Object(a["g"])(s,{menu:e.menu,deck:e.game.drawnCards,class:"drawn-cards"},{default:f((function(){return[Object(a["g"])("div",g,[Object(a["g"])("div",v,Object(a["C"])(e.game.roundString),1),Object(a["g"])("div",O," Bonus rolls: "+Object(a["C"])(e.game.state.bonusRolls.value)+" / "+Object(a["C"])(e.game.state.bonusRolls.max),1),Object(a["g"])("div",p," Mana: "+Object(a["C"])(e.game.player.getMana()),1),Object(a["g"])("div",j,Object(a["C"])(e.game.pickedString),1)])]})),_:1},8,["menu","deck"]),Object(a["g"])(s,{menu:e.menu,deck:e.handDeck,class:"picked-cards"},{default:f((function(){return[Object(a["g"])("div",m,[Object(a["g"])(o,{class:"hand-button",onClick:t[1]||(t[1]=function(t){return e.showActivatedCards=!e.showActivatedCards})},{default:f((function(){return[e.showActivatedCards?(Object(a["q"])(),Object(a["d"])(a["a"],{key:0},[y],64)):(Object(a["q"])(),Object(a["d"])(a["a"],{key:1},[k],64))]})),_:1})])]})),_:1},8,["menu","deck"]),Object(a["g"])(u,{menu:e.menu},null,8,["menu"]),Object(a["g"])("div",w,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.state.dice,(function(e){return Object(a["q"])(),Object(a["d"])(l,{key:e,dice:e},null,8,["dice"])})),128))]),Object(a["g"])("div",C,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.abilities,(function(t){return Object(a["q"])(),Object(a["d"])(a["a"],{key:t},[t.isVisible(e.game)?(Object(a["q"])(),Object(a["d"])(o,{key:0,class:"ability",disabled:!t.isAvailable(e.game),onClick:function(n){return t.activate(e.game)}},{default:f((function(){return[Object(a["g"])("p",S,Object(a["C"])(t.title),1),Object(a["g"])("p",x,Object(a["C"])(t.subtitle),1)]})),_:2},1032,["disabled","onClick"])):Object(a["e"])("",!0)],64)})),128))])])})),T=Object(a["H"])("data-v-2b92d90a"),D=T((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:["text-button",{disabled:e.disabled}],onselectstart:"return false"},[Object(a["y"])(e.$slots,"default")],2)})),B=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.disabled=!1,e}return n}(h["b"]);B=Object(d["a"])([Object(h["a"])({props:{disabled:Boolean}})],B);var M=B;n("6ad1"),n("e733");M.render=D,M.__scopeId="data-v-2b92d90a";var R=M,q=(n("a4d3"),n("e01a"),Object(a["H"])("data-v-1a237670"));Object(a["u"])("data-v-1a237670");var E={class:"title-field",title:"Name of this card"},N={class:"levels-field",title:"Level of this card / Max level of this card"},A=Object(a["g"])("div",{class:"thumb-container"},null,-1),L={key:0,class:"subtitle-field",title:"Name of this level of this card"},P={class:"description-field"},I={class:"artist-field"};Object(a["r"])();var z=q((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:["playing-card",{"single-card":"single"===e.card.type,"child-card":e.card.hasParent,"highlight-1":1===e.card.highlight,"highlight-2":2===e.card.highlight,"highlight-3":3===e.card.highlight,"highlight-4":e.card.highlight>=4}],style:e.cssVars},[Object(a["g"])("div",E,[Object(a["g"])("h3",null,Object(a["C"])(e.card.title),1)]),Object(a["g"])("div",N,[Object(a["g"])("h3",null,Object(a["C"])(e.card.levelString),1)]),A,""!==e.card.subtitle?(Object(a["q"])(),Object(a["d"])("div",L,[Object(a["g"])("h3",null,Object(a["C"])(e.card.subtitle),1)])):Object(a["e"])("",!0),Object(a["g"])("div",P,[Object(a["g"])("p",null,Object(a["C"])(e.card.description),1)]),Object(a["g"])("div",I,[Object(a["g"])("p",null,"Art by "+Object(a["C"])(e.card.artist),1)])],6)})),F=Object(a["H"])("data-v-ef28c724");Object(a["u"])("data-v-ef28c724");var V=Object(a["g"])("div",{class:"filled-bar"},null,-1),H={class:"label"};Object(a["r"])();var W=F((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:"value-meter",style:e.cssVars},[V,Object(a["g"])("div",H,[Object(a["y"])(e.$slots,"default")])],4)})),U=(n("a9e3"),n("aff5"),n("b680"),n("07ac"),n("bee2")),G=(n("99af"),n("7db0"),n("d3b7"),n("ac1f"),n("25f0"),n("6062"),n("3ca3"),n("4d90"),n("5319"),n("498a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("96cf"),n("1da1")),$=n("bc3a"),J=n.n($),Y=n("d5d0"),X=n.n(Y),K=n("c0e9"),Z={baseUrl:function(){return"https://www.blushingdefeat.com/play/ditzy-dice-beta"},wait:function(e){return new Promise((function(t,n){setTimeout(t,e)}))},fetchHjson:function(e){var t=this;return Object(G["a"])(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,J.a.get(t.baseUrl()+"/"+e,{transformResponse:[function(e){return e}]});case 2:return a=n.sent,i=a.data,r=X.a.parse(i),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()},getInfo:function(e){var t=this;return Object(G["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.fetchHjson(e+"/info.hjson");case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},isVideo:function(e){return/\.webm$/i.test(e)},sample:function(e){return e[Math.floor(Math.random()*e.length)]},timeToDays:function(e){return e/60},currentDate:function(e){var t=Math.floor(this.timeToDays(e)),n=e%60/60*24,a=Math.floor(n),i=60*(n-a);return"Day ".concat(t,", ").concat(a.toFixed(0).padStart(2,"0"),":").concat(i.toFixed(0).padStart(2,"0"))},displayTime:function(e){var t=Math.floor(this.timeToDays(e)),n=e%60/60*24,a=Math.floor(n),i=60*(n-a),r="";return 1==t&&(r+="".concat(t," day")),t>1&&(r+="".concat(t," days")),t>=1&&a>0&&(r+=", "),1==a&&(r+="".concat(a," hour")),a>1&&(r+="".concat(a," hours")),0==t&&0==a&&(r="".concat(i," minutes")),r},uuid:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)}))},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},toKebabCase:function(e){return e.replace(/\s+/g,"-").toLowerCase()},camelToTitleCase:function(e){return e.replace(/([A-Z])/g,(function(e){return" ".concat(e)})).replace(/^./,(function(e){return e.toUpperCase()})).trim()},pickFrom:function(e,t){var n=this.clamp(Math.round(t*(e.length-1)),0,e.length-1);return e[n]},clamp:function(e,t,n){return Math.max(Math.min(e,n),t)},showNumber:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0==t&&(t=e),t<1?e.toFixed(2):t<10?e.toFixed(1):e.toFixed(0)},ensure:function(e,t){return t.find((function(t){return t==e}))?e:t[0]},shuffle:function(e){var t,n,a=e.length;while(0!==a)n=Math.floor(Math.random()*a),a-=1,t=e[a],e[a]=e[n],e[n]=t;return e},hasDuplicate:function(e){return new Set(e).size!==e.length},download:function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},screenshot:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collection",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=document.getElementById(e);if(null!=a){var i=Math.max(a.childNodes.length-2,1),r=270,c=380,s=a.style.width,o=a.style.height,u=a.style.minHeight,l=Math.min(r*i,2560);a.style.width="".concat(l,"px"),i*r<2560&&(a.style.height="".concat(c,"px"),a.style.minHeight="".concat(c,"px")),K(a,{backgroundColor:n}).then((function(e){var a,i=document.createElement("a");null==n?(a=e.toDataURL("image/png"),i.download="".concat(t,".png")):(a=e.toDataURL("image/jpeg"),i.download="".concat(t,".jpg")),i.href=a,i.click()})),a.style.width=s,a.style.minHeight=u,a.style.height=o}else console.error('Could not take a screenshot of element with id "'.concat(e,'".'))}},Q=n("e46d"),ee=n("b85c"),te=function(){function e(t,n){Object(o["a"])(this,e),this.uuid=Z.uuid(),this.type="add",this.value=0,this.type=n,this.value=t}return Object(U["a"])(e,[{key:"equals",value:function(e){return this.value==e.value&&this.type==e.type}},{key:"toString",value:function(){var e="",t=Z.showNumber(Math.abs(this.value));return"add"===this.type?e=this.value>0?"+".concat(t):"-".concat(t):"mul"===this.type&&(e="x".concat(t)),e}}],[{key:"activate",value:function(e,t){return"add"===t.type?e+t.value:"mul"===t.type?e*t.value:e}},{key:"reverseActivate",value:function(e,t){return"add"===t.type?e-t.value:"mul"===t.type?e*(1/t.value):e}},{key:"activateAll",value:function(t,n){var a,i=Object(ee["a"])(n);try{for(i.s();!(a=i.n()).done;){var r=a.value;"add"===r.type&&(t=e.activate(t,r))}}catch(u){i.e(u)}finally{i.f()}var c,s=Object(ee["a"])(n);try{for(s.s();!(c=s.n()).done;){var o=c.value;"mul"===o.type&&(t=e.activate(t,o))}}catch(u){s.e(u)}finally{s.f()}return t}},{key:"reverseActivateAll",value:function(t,n){var a,i=Object(ee["a"])(n.reverse());try{for(i.s();!(a=i.n()).done;){var r=a.value;"mul"===r.type&&(t=e.reverseActivate(t,r))}}catch(u){i.e(u)}finally{i.f()}var c,s=Object(ee["a"])(n.reverse());try{for(s.s();!(c=s.n()).done;){var o=c.value;"add"===o.type&&(t=e.reverseActivate(t,o))}}catch(u){s.e(u)}finally{s.f()}return t}}]),e}();Object(d["a"])([Object(Q["g"])(Object(Q["b"])())],te.prototype,"uuid",void 0),Object(d["a"])([Q["g"]],te.prototype,"type",void 0),Object(d["a"])([Q["g"]],te.prototype,"value",void 0);var ne=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(o["a"])(this,e),this._baseValue=0,this._min=0,this._max=0,this.valueMods={},this.minMods={},this.maxMods={},this.texts=[],this.capBaseValue=!1,this._baseValue=t,this._min=n,this._max=void 0==a?Number.MAX_SAFE_INTEGER:a,this.texts=i,this.capBaseValue=r}return Object(U["a"])(e,[{key:"addValue",value:function(e){var t=[];for(var n in this.valueMods){var a=this.valueMods[n];"mul"==a.type&&t.push(a)}var i=this.value;this.baseValue;return this.baseValue+=te.reverseActivateAll(e,t),this.value-i}},{key:"addBaseValue",value:function(e){var t=this.baseValue;return this.baseValue+=e,this.baseValue-t}},{key:"load",value:function(e){this._baseValue=e._baseValue}},{key:"fraction",set:function(e){this.baseValue=this.min+this.max*e},get:function(){return(this.value-this.min)/(this.max-this.min)}},{key:"value",get:function(){var e=te.activateAll(this._baseValue,Object.values(this.valueMods));return e>this.max?this.max:e<this.min?this.min:e}},{key:"baseValue",set:function(e){this.capBaseValue&&(e=Math.max(Math.min(e,this.max),this.min)),this._baseValue=e},get:function(){return this._baseValue}},{key:"min",get:function(){return te.activateAll(this._min,Object.values(this.minMods))}},{key:"max",get:function(){return te.activateAll(this._max,Object.values(this.maxMods))}},{key:"text",get:function(){return 0==this.texts.length?this.value.toFixed(1):Z.pickFrom(this.texts,this.fraction)}},{key:"copy",get:function(){var t=new e(this._baseValue,this._min,this._max,this.texts);return t.valueMods=this.valueMods,t}}]),e}();Object(d["a"])([Q["g"]],ne.prototype,"_baseValue",void 0),Object(d["a"])([Q["g"]],ne.prototype,"_min",void 0),Object(d["a"])([Q["g"]],ne.prototype,"_max",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["d"])(Object(Q["e"])(te)))],ne.prototype,"valueMods",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["d"])(Object(Q["e"])(te)))],ne.prototype,"minMods",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["d"])(Object(Q["e"])(te)))],ne.prototype,"maxMods",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],ne.prototype,"texts",void 0),Object(d["a"])([Q["g"]],ne.prototype,"capBaseValue",void 0);var ae=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.backgroundColor="#282c3b",e.barColor="#741A32",e}return n}(h["b"]);ae=Object(d["a"])([Object(h["a"])({props:{container:ne,barColor:String,backgroundColor:String},methods:{log:function(e){console.log(e)}},computed:{cssVars:function(){return{"--percent-filled":100*this.container.fraction+"%","--background-color":this.backgroundColor,"--bar-color":this.barColor}}}})],ae);var ie=ae;n("d4b5");ie.render=W,ie.__scopeId="data-v-ef28c724";var re=ie,ce=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);ce=Object(d["a"])([Object(h["a"])({components:{ValueMeter:re,TextButton:R},props:{card:Object},methods:{log:function(e){console.log(e)}},computed:{cssVars:function(){return{"--border-color":"black","--background-hue":this.card.hue,"--background-image":"url("+n("a17f")+")","--thumb":"url("+this.card.thumb+")"}}}})],ce);var se=ce;n("8c55");se.render=z,se.__scopeId="data-v-1a237670";var oe=se,ue=(n("d81d"),n("b0c0"),n("5530")),le=n("3835"),de=n("d4cd"),he=n.n(de);function fe(e){return be.apply(this,arguments)}function be(){return be=Object(G["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=[],a=Object(ee["a"])(t);try{for(a.s();!(i=a.n()).done;)r=i.value,n.push(Z.fetchHjson(r))}catch(s){a.e(s)}finally{a.f()}return e.next=5,Promise.all(n);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}var ge=Object(a["v"])({loading:!0,cardFamilyString:"",dialogueString:"",dialogue2String:"",endingsString:"",artistsString:"",patreonCredits:"",patchNotesString:""});function ve(){var e=function(){var e=Object(G["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,r,c,s,o,u,l,d,h,f,b,g,v,O,p,j,m,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ge.loading=!0,e.next=3,Promise.all([Z.fetchHjson("cards/series.hjson"),Z.fetchHjson("dialogue.hjson"),Z.fetchHjson("dialogue-2.hjson"),Z.fetchHjson("endings/content.hjson"),Z.fetchHjson("cards/artists.hjson"),J.a.get("https://www.blushingdefeat.com/assets/blushing-defeat-credits.json"),Z.fetchHjson("patch-notes/content.hjson")]);case 3:return t=e.sent,n=Object(le["a"])(t,7),a=n[0],i=n[1],r=n[2],c=n[3],s=n[4],o=n[5],u=n[6],ge.dialogueString=JSON.stringify(i),ge.dialogue2String=JSON.stringify(r),ge.artistsString=JSON.stringify(s),ge.patreonCredits=o.data,e.next=18,Promise.all([fe(a.map((function(e){return"cards/".concat(e)}))),fe(u.map((function(e){return"patch-notes/".concat(e,".hjson")}))),fe(c.map((function(e){return"endings/".concat(e,".hjson")})))]);case 18:l=e.sent,d=Object(le["a"])(l,3),h=d[0],f=d[1],b=d[2],ge.cardFamilyString=JSON.stringify(h),g=new he.a,v=Object(ee["a"])(u.entries());try{for(v.s();!(O=v.n()).done;)p=Object(le["a"])(O.value,2),j=p[0],m=p[1],y=f[j],y.id=m,y.text=g.render(y.text)}catch(k){v.e(k)}finally{v.f()}ge.patchNotesString=JSON.stringify(f),ge.endingsString=JSON.stringify(b),ge.loading=!1;case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ue["a"])(Object(ue["a"])({},Object(a["E"])(ge)),{},{load:e})}var Oe=function(){function e(t){Object(o["a"])(this,e),this.id=t.id,this.name=t.name,this.thumb=t.thumb,this.artist=t.artist?t.artist:"Gardamuse",this.hue=t.hue}return Object(U["a"])(e,null,[{key:"familyMap",value:function(){if(this.familiesLoaded)return this._familyMap;var t,n=JSON.parse(ve().cardFamilyString.value),a=Object(ee["a"])(n);try{for(a.s();!(t=a.n()).done;){var i=t.value,r=new e(i);this._familyMap[r.id]=r}}catch(c){a.e(c)}finally{a.f()}return this.familiesLoaded=!0,this._familyMap}},{key:"familyLookup",value:function(t){var n=e.familyMap()[t];return void 0!=n?n:new e({id:"none",name:"None",thumb:"",artist:"",hue:0})}}]),e}();Oe.familiesLoaded=!1,Oe._familyMap={},Object(d["a"])([Q["g"]],Oe.prototype,"id",void 0),Object(d["a"])([Q["g"]],Oe.prototype,"name",void 0),Object(d["a"])([Q["g"]],Oe.prototype,"thumb",void 0),Object(d["a"])([Q["g"]],Oe.prototype,"artist",void 0),Object(d["a"])([Q["g"]],Oe.prototype,"hue",void 0);n("4de4"),n("c740"),n("4160"),n("13d5"),n("a434"),n("159b");var pe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(o["a"])(this,e),this.tags=t,this.guaranteed=n,this.probability=a},je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;Object(o["a"])(this,e),this.cards=void 0!=t?t:[]}return Object(U["a"])(e,[{key:"createNew",value:function(){return e.referenceDeck().copy().useFilters()}},{key:"withoutFamily",value:function(t){var n,a=[],i=Object(ee["a"])(this.cards);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.family.id!=t&&a.push(r)}}catch(c){i.e(c)}finally{i.f()}return new e(a)}},{key:"onlyTag",value:function(t){if("all"==t)return new e(this.cards);var n,a=[],i=Object(ee["a"])(this.cards);try{for(i.s();!(n=i.n()).done;){var r=n.value;(r.family.id==t||r.hasTag(t))&&a.push(r)}}catch(c){i.e(c)}finally{i.f()}return new e(a)}},{key:"useFilters",value:function(){return this.filterBy(e.filters,e.bannedCards)}},{key:"filterBy",value:function(t,n){var a,i=[],r=Object(ee["a"])(this.cards);try{for(r.s();!(a=r.n()).done;){var c=a.value,s=!0;if(c.isParent){var o,u=Object(ee["a"])(c.subcards);try{var l=function(){var e=o.value;if(n.has(e.id))return c.subcards=c.subcards.filter((function(t){return t.id!=e.id})),"continue";e.isFiltered(t)&&(c.subcards=c.subcards.filter((function(t){return t.id!=e.id})))};for(u.s();!(o=u.n()).done;)l()}catch(d){u.e(d)}finally{u.f()}}n.has(c.id)&&(s=!1),c.isFiltered(t)&&(s=!1),c.isParent&&0==c.subcards.length&&(s=!1),s&&i.push(c)}}catch(d){r.e(d)}finally{r.f()}return new e(i)}},{key:"rebase",value:function(){var t,n=new e,a=Object(ee["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.addCard(e.lookup(i.id))}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"unique",value:function(){var t,n={},a=new e,i=Object(ee["a"])(this.cards);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.id in n||(a.addCard(r),n[r.id]=!0)}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"pack",value:function(){var t,n=new e,a=Object(ee["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.hasParent){var r=i.parent.id,c=void 0;n.hasCard(r)?c=n.getCardById(r):this.hasCard(r)?(c=this.getCardById(r),n.addCard(c)):(c=e.lookup(r),c.subcards=[],n.addCard(c)),c.addSubCard(i)}else n.addCard(i)}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"unpack",value:function(){var t,n=[],a=Object(ee["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.isParent)for(var r=0;r<i.subcards.length;r++)n.push(i.getLevel(r));else n.push(i)}}catch(c){a.e(c)}finally{a.f()}return new e(n)}},{key:"pick",value:function(t){for(var n=[],a=0;a<this.cards.length;a++){var i,r=Object(ee["a"])(t);try{for(r.s();!(i=r.n()).done;){var c=i.value;a==c-1&&n.push(this.cards[a])}}catch(s){r.e(s)}finally{r.f()}}return new e(n)}},{key:"draw",value:function(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pe([],0,0),i=this.getWantedCards(a.tags),r=[],c=function(){var e=Z.pickFrom(i,Math.random()),t=i.findIndex((function(t){return t.id==e.id}));-1!=t&&i.splice(t,1),n.removeCard(e),r.push(e),console.log("Guaranteed",e.name)};while(r.length<t&&r.length<a.guaranteed&&i.length>0)c();while(r.length<t)if(i.length>0&&Math.random()<a.probability)(function(){var e=i.pop();n.cards.splice(n.cards.findIndex((function(t){return t.id==e.id})),1),r.push(e)})();else{if(!(this.cards.length>0))break;(function(){var e=n.cards.pop(),t=i.findIndex((function(t){return t.id==e.id}));-1!=t&&i.splice(t,1),r.push(e)})()}return new e(r).shuffle()}},{key:"getWantedCards",value:function(e){var t,n=[],a=Object(ee["a"])(this.cards);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.hasAnyTag(e)&&n.push(i)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"drawOneCardTo",value:function(e){var t=this.cards.pop();return void 0!=t&&(e.push(t),!0)}},{key:"drawIndex",value:function(e){return this.cards.splice(e,1)[0]}},{key:"addCard",value:function(e){return this.cards.push(e),this}},{key:"addDeck",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.cards=t?e.cards.concat(this.cards):this.cards.concat(e.cards),this}},{key:"removeCard",value:function(e){var t=this.cards.findIndex((function(t){return t.id==e.id}));return-1!=t&&this.drawIndex(t),this}},{key:"hasCard",value:function(e){return void 0!=this.findCard(e)}},{key:"findCard",value:function(e){var t=this.cards.find((function(t){return t.id==e}));if(void 0!=t)return t;var n,a=Object(ee["a"])(this.cards.filter((function(e){return e.isParent})));try{for(a.s();!(n=a.n()).done;){var i=n.value;if(t=i.subcards.find((function(t){return t.id==e})),void 0!=t)return t}}catch(r){a.e(r)}finally{a.f()}}},{key:"updateCard",value:function(e){var t=this.findCard(e.id);if(void 0==t)this.addCard(e);else if(t.hasParent);else for(var n=0;n<this.cards.length;n++){var a=this.cards[n];a.id==e.id&&(this.cards[n]=e)}}},{key:"getCardById",value:function(e){var t=this.allLevels.find((function(t){return t.id==e}));return t}},{key:"size",value:function(){return this.cards.length}},{key:"shuffle",value:function(){return this.cards=Z.shuffle(this.cards),this}},{key:"sortByFamily",value:function(){return this.cards=this.cards.sort((function(e,t){return e.family.id<t.family.id?-1:1})),this}},{key:"sortByLevel",value:function(){return this.cards=this.cards.sort((function(e,t){return e.level-t.level})),this}},{key:"sortByName",value:function(){return this.cards=this.cards.sort((function(e,t){return e.name<t.name?1:-1})),this}},{key:"removeAllCards",value:function(){return this.cards=[],this}},{key:"copy",value:function(){return new e(this.cards.map((function(e){return e.copy()})))}},{key:"toString",value:function(){var e="--- DECK, ".concat(this.size()," cards ---\n");return e+=this.cards.map((function(e){return"".concat(e.fullTitle,", level ").concat(e.level)})).reduce((function(e,t){return"".concat(e,"\n").concat(t)})),e}},{key:"allLevels",get:function(){var e,t=[],n=Object(ee["a"])(this.cards);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(t.push(a),a.isParent){var i,r=Object(ee["a"])(a.subcards);try{for(r.s();!(i=r.n()).done;){var c=i.value;t.push(c)}}catch(s){r.e(s)}finally{r.f()}}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"pickableCards",get:function(){var e,t=[],n=Object(ee["a"])(this.cards);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.isParent||t.push(a);for(var i=0;i<a.subcards.length;i++)t.push(a.getLevel(i))}}catch(r){n.e(r)}finally{n.f()}return t}}],[{key:"createFromCardStates",value:function(t){var n,a=[],i=Object(ee["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=e.lookup(r.id);void 0!=c&&a.push(c)}}catch(s){i.e(s)}finally{i.f()}return new e(a)}},{key:"lookup",value:function(e){var t=this.cardMap()[e];if(void 0!=t)return t.copy();console.warn('Static lookup of card "'.concat(e,'" failed.'))}},{key:"addReferenceCard",value:function(e){this.referenceDeck(),this._referenceDeck.updateCard(e),this._cardMap[e.id]=e}},{key:"referenceDeck",value:function(){if(void 0!=this._referenceDeck)return this._referenceDeck.copy();for(var t=Object.values(e.cardMap()),n=new e,a=0,i=t;a<i.length;a++){var r=i[a];r.isParent||n.addCard(r)}return this._referenceDeck=n.pack(),this._referenceDeck.copy()}},{key:"cardMap",value:function(){if(this.cardsLoaded)return this._cardMap;var e,t=Object(ee["a"])(this.parseCards(JSON.parse(ve().cardFamilyString.value)));try{for(t.s();!(e=t.n()).done;){var n=e.value;this._cardMap[n.id]=n}}catch(a){t.e(a)}finally{t.f()}return this.cardsLoaded=!0,this._cardMap}},{key:"resetStaticState",value:function(){this._cardMap={},this.cardsLoaded=!1,this._referenceDeck=void 0}},{key:"parseCards",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=[];""!=n&&(n+=".");var i,r=Object(ee["a"])(e);try{for(r.s();!(i=r.n()).done;){var c,s=i.value,o=Oe.familyLookup(s.id),u=Object(ee["a"])(s.cards);try{for(u.s();!(c=u.n()).done;){var l=c.value,d=[];1==l.override&&(n=""),void 0!=l.levels&&(d=this.parseSubCards(l,o,t,n),d.forEach((function(e){return a.push(e)}))),a.push(this.parseCard(l,o,d,t,n))}}catch(h){u.e(h)}finally{u.f()}}}catch(h){r.e(h)}finally{r.f()}return a}},{key:"parseSubCards",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=[],c="".concat(Z.baseUrl(),"/cards/"),s=Object(ee["a"])(e.levels.entries());try{for(s.s();!(n=s.n()).done;){var o=Object(le["a"])(n.value,2),u=o[0],l=o[1],d=e.tags?e.tags:[];l.tags&&(d=d.concat(l.tags));var h=l.thumb?"".concat(c).concat(l.thumb):e.thumb?"".concat(c).concat(e.thumb):"".concat(c).concat(t.thumb);void 0!=a&&(h=a(l.thumb?l.thumb:e.thumb));var f=new me({family:t.id,thumb:h,id:"".concat(i).concat(e.id,".").concat(l.id),name:l.name,description:l.description,transformation:l.transformation?l.transformation:e.transformation?e.transformation:"",type:e.type,subcards:[],levels:1,level:u+1,parent:e.id,hue:t.hue,artist:l.artist?l.artist:e.artist?e.artist:t.artist?t.artist:"Gardamuse",tags:d});r.push(f)}}catch(b){s.e(b)}finally{s.f()}return r}},{key:"parseCard",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r="".concat(Z.baseUrl(),"/cards/"),c=e.thumb?"".concat(r).concat(e.thumb):"".concat(r).concat(t.thumb);return void 0!=a&&(c=a(e.thumb)),new me({family:t.id,thumb:c,id:"".concat(i).concat(e.id),name:e.name,description:e.description,transformation:e.transformation,type:e.type,subcards:n.map((function(e){return e.id})),levels:n.length,hue:t.hue,artist:e.artist?e.artist:t.artist?t.artist:"Gardamuse",tags:e.tags?e.tags:[]})}}]),e}();je.filters=[],je.bannedCards=new Set([]),je.cardsLoaded=!1,je._cardMap={};var me=function(){function e(t){Object(o["a"])(this,e),this.scale=!1,this.highlight=0,void 0==t&&(t={}),this._family=t.family?t.family:"none",this._parent=t.parent,this.thumb=t.thumb,this.id=t.id,this.name=t.name,this.description=t.description,this.transformation=t.transformation?t.transformation:"",this._subcards=t.subcards?t.subcards:[],this._level=t.level?t.level:1,this.levels=t.levels?t.levels:0,this.type=t.type?t.type:"single",this.hue=t.hue?t.hue:0,this.artist=t.artist?t.artist:"Gardamuse",this.tags=t.tags?t.tags:[]}return Object(U["a"])(e,[{key:"addSubCard",value:function(e){this.hasSubCard(e)||(this._subcards.push(e.id),this._subcards.sort())}},{key:"hasSubCard",value:function(e){return void 0!=this._subcards.find((function(t){return t==e.id}))}},{key:"getLevel",value:function(e){return"single"!=this.type&&e<this.subcards.length?this.subcards[e]:this}},{key:"hasTag",value:function(e){return this.family.id==e||void 0!=this.tags.find((function(t){return t==e}))}},{key:"hasAnyTag",value:function(e){var t,n=Object(ee["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(this.hasTag(a))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"isFiltered",value:function(e){var t,n=Object(ee["a"])(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(this.hasTag(a.tag)&&2==a.strictness)return!0;if(this.hasTag(a.tag)&&this.hasTag("extreme")&&1==a.strictness)return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"equals",value:function(e){return this.id==e.id}},{key:"copy",value:function(){var t=new e({id:this.id,name:this.name,thumb:this.thumb,description:this.description,transformation:this.transformation,subcards:this._subcards,levels:this.levels,level:this._level,type:this.type,hue:this.hue,artist:this.artist,family:this._family,parent:this._parent,tags:this.tags});return t}},{key:"toJSON",value:function(){return Object(Q["h"])(this)}},{key:"fullTitle",get:function(){return this.hasParent?"".concat(this.parent.name,": ").concat(this.name):this.name}},{key:"title",get:function(){return this.hasParent?"".concat(this.parent.name):this.name}},{key:"subtitle",get:function(){return this.hasParent?"".concat(this.name):""}},{key:"subcards",set:function(e){this._subcards=e.map((function(e){return e.id}))},get:function(){return new je(this._subcards.map((function(e){return je.lookup(e)}))).sortByLevel().cards}},{key:"intensity",get:function(){return this.isParent||"selection"!=this.type?this._level:1}},{key:"level",get:function(){return this._level}},{key:"maxLevel",get:function(){return this.hasParent?this.parent.levels:this.levels}},{key:"levelString",get:function(){return"single"==this.type?"1":this.isParent&&this.levels==this.subcards.length?this.levels.toFixed(0):this.isParent?"".concat(this.subcards.length," / ").concat(this.levels):"".concat(this._level," / ").concat(this.maxLevel)}},{key:"parent",get:function(){return je.lookup(this._parent)}},{key:"hasParent",get:function(){return void 0!=this._parent}},{key:"isParent",get:function(){return"single"!=this.type&&this.levels>1}},{key:"family",get:function(){return Oe.familyLookup(this._family)}}]),e}();function ye(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",{class:["dice-view",{"locked-dice":e.dice.locked}],style:e.cssVars,onClick:t[1]||(t[1]=function(t){return e.dice.roll()})},[Object(a["g"])("p",null,Object(a["C"])(e.dice.value)+" / "+Object(a["C"])(e.dice.max),1)],6)}Object(d["a"])([Q["g"]],me.prototype,"_family",void 0),Object(d["a"])([Q["g"]],me.prototype,"_parent",void 0),Object(d["a"])([Q["g"]],me.prototype,"thumb",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["b"])())],me.prototype,"id",void 0),Object(d["a"])([Q["g"]],me.prototype,"name",void 0),Object(d["a"])([Q["g"]],me.prototype,"description",void 0),Object(d["a"])([Q["g"]],me.prototype,"transformation",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],me.prototype,"_subcards",void 0),Object(d["a"])([Q["g"]],me.prototype,"type",void 0),Object(d["a"])([Q["g"]],me.prototype,"_level",void 0),Object(d["a"])([Q["g"]],me.prototype,"levels",void 0),Object(d["a"])([Q["g"]],me.prototype,"hue",void 0),Object(d["a"])([Q["g"]],me.prototype,"artist",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],me.prototype,"tags",void 0);var ke=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);ke=Object(d["a"])([Object(h["a"])({components:{ValueMeter:re,TextButton:R},props:{dice:Object},methods:{log:function(e){console.log(e)}},computed:{cssVars:function(){return{"--border-color":"black"}}}})],ke);var we=ke;n("bd0e");we.render=ye;var Ce=we,Se=Object(a["H"])("data-v-6f0fcc3e");Object(a["u"])("data-v-6f0fcc3e");var xe={key:0,style:{"grid-area":"r"}},_e={class:"round-counter"},Te={key:0},De={key:1,style:{margin:"0",padding:"0"}},Be={key:0,class:"bonus-rolls"},Me={key:1,class:"cards-to-pick"},Re={class:"buttons"},qe={style:{margin:"0"}};Object(a["r"])();var Ee=Se((function(e,t,n,i,r,c){var s=Object(a["z"])("ChatView"),o=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",{class:["dialogue-status-card window",{simple:void 0!==e.title}]},[Object(a["g"])(s,{class:"text",text:e.game.currentDialogue},null,8,["text"]),void 0!==e.title?(Object(a["q"])(),Object(a["d"])("div",xe,[Object(a["g"])("h1",null,Object(a["C"])(e.title),1)])):(Object(a["q"])(),Object(a["d"])(a["a"],{key:1},[Object(a["g"])("div",_e,[e.game.round.value>0?(Object(a["q"])(),Object(a["d"])("h3",Te,Object(a["C"])(e.game.roundString),1)):(Object(a["q"])(),Object(a["d"])("h1",De,"Ditzy Dice"))]),e.game.round.value>0&&"bonus"!==e.game.stageId?(Object(a["q"])(),Object(a["d"])("div",Be,[Object(a["g"])("h3",null,"Bonus rolls: "+Object(a["C"])(e.game.state.bonusRolls.value)+" / "+Object(a["C"])(e.game.state.bonusRolls.max),1)])):Object(a["e"])("",!0),e.game.state.cardsToPick>0?(Object(a["q"])(),Object(a["d"])("div",Me,[Object(a["g"])("h3",null,"Picked "+Object(a["C"])(e.game.state.cardsPickedThisRound)+" of "+Object(a["C"])(e.game.state.cardsToPick)+" cards",1)])):Object(a["e"])("",!0)],64)),Object(a["g"])("div",Re,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.buttons,(function(e){return Object(a["q"])(),Object(a["d"])(o,{key:e,onClick:function(t){return e.fun()}},{default:Se((function(){return[Object(a["g"])("p",qe,Object(a["C"])(e.label),1)]})),_:2},1032,["onClick"])})),128))])],2)})),Ne=Object(a["H"])("data-v-2a2554f0");Object(a["u"])("data-v-2a2554f0");var Ae={class:"chat-box"},Le=Object(a["g"])("div",{class:"profile-image"},null,-1);Object(a["r"])();var Pe=Ne((function(e,t,n,i,r,c){var s=Object(a["z"])("BlushList");return Object(a["q"])(),Object(a["d"])(s,{class:"chat-view",style:e.cssVars},{default:Ne((function(){return[Object(a["g"])("div",Ae,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.lines,(function(e){return Object(a["q"])(),Object(a["d"])("div",{class:["chat-item",e.name]},[Object(a["g"])("div",{class:"chat-bubble",innerHTML:e.text},null,8,["innerHTML"]),Le],2)})),256))])]})),_:1},8,["style"])})),Ie=Object(a["H"])("data-v-4ad23e39");Object(a["u"])("data-v-4ad23e39");var ze={class:"blush-list"},Fe={class:"content"};Object(a["r"])();var Ve=Ie((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",ze,[Object(a["g"])("div",Fe,[Object(a["y"])(e.$slots,"default")])])})),He=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);He=Object(d["a"])([Object(h["a"])({components:{},props:{},emits:["close"],methods:{},computed:{util:function(){return Z}}})],He);var We=He;n("8020");We.render=Ve,We.__scopeId="data-v-4ad23e39";var Ue=We,Ge=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Ge=Object(d["a"])([Object(h["a"])({components:{BlushList:Ue},props:{lines:Object},emits:["close"],methods:{},computed:{util:function(){return Z},cssVars:function(){return{"--devil-image":"url("+n("ce6a")+")","--player-image":"url("+n("7127")+")"}}}})],Ge);var $e=Ge;n("7599"),n("0d0a");$e.render=Pe,$e.__scopeId="data-v-2a2554f0";var Je=$e,Ye=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Ye=Object(d["a"])([Object(h["a"])({components:{ValueMeter:re,TextButton:R,ChatView:Je},props:{menu:Object,title:String},methods:{log:function(e){console.log(e)}},computed:{game:function(){return this.menu.game}}})],Ye);var Xe=Ye;n("34ce");Xe.render=Ee,Xe.__scopeId="data-v-6f0fcc3e";var Ke=Xe,Ze=Object(a["H"])("data-v-f487b2ac");Object(a["u"])("data-v-f487b2ac");var Qe={class:"card-hand-window cards-wrapper drawn-cards"},et={class:"label-wrapper"},tt={class:"label-row"},nt={class:"cards"};Object(a["r"])();var at=Ze((function(e,t,n,i,r,c){var s=Object(a["z"])("PlayingCard");return Object(a["q"])(),Object(a["d"])("div",Qe,[Object(a["g"])("div",et,[Object(a["g"])("span",tt,[Object(a["y"])(e.$slots,"default")])]),Object(a["g"])("div",nt,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.deck.cards,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t,card:t,class:{scaled:t.scale},onClick:function(n){e.toggleScale(t),e.game.clickCard(t)}},null,8,["card","class","onClick"])})),128))])])})),it=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.label="",e.scaledCard=new me({}),e}return n}(h["b"]);it=Object(d["a"])([Object(h["a"])({components:{PlayingCard:oe},props:{menu:Object,deck:Object,label:String},methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new me({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)}},computed:{game:function(){return this.menu.game}}})],it);var rt=it;n("8743");rt.render=at,rt.__scopeId="data-v-f487b2ac";var ct=rt,st=Object(a["H"])("data-v-70747209");Object(a["u"])("data-v-70747209");var ot={key:0,style:{"grid-area":"r"}},ut={class:"buttons"};Object(a["r"])();var lt=st((function(e,t,n,i,r,c){var s=Object(a["z"])("ChatView"),o=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",{class:["dialogue-card window",{"no-title":void 0===e.title}]},[Object(a["g"])(s,{class:"text",lines:e.game.currentDialogue},null,8,["lines"]),void 0!==e.title?(Object(a["q"])(),Object(a["d"])("div",ot,[Object(a["g"])("h1",null,Object(a["C"])(e.title),1)])):Object(a["e"])("",!0),Object(a["g"])("div",ut,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.game.buttons,(function(e){return Object(a["q"])(),Object(a["d"])(o,{key:e,class:"next-button",onClick:function(t){return e.fun()},innerHTML:e.label},null,8,["onClick","innerHTML"])})),128))])],2)})),dt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);dt=Object(d["a"])([Object(h["a"])({components:{ValueMeter:re,TextButton:R,ChatView:Je},props:{menu:Object,title:String},methods:{log:function(e){console.log(e)}},computed:{game:function(){return this.menu.game}},created:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],dt);var ht=dt;n("d736");ht.render=lt,ht.__scopeId="data-v-70747209";var ft=ht,bt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.scaledCard=new me({}),e.showActivatedCards=!1,e}return n}(h["b"]);bt=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PlayingCard:oe,DiceView:Ce,DialogueCard:ft,DialogueStatusCard:Ke,CardHandWindow:ct},props:{menu:Object},methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new me({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)}},computed:{game:function(){return this.menu.game},handDeck:function(){return this.showActivatedCards?this.game.player.hand.copy().addDeck(this.game.pickedCards):this.game.pickedCards}}})],bt);var gt=bt;n("ca78");gt.render=_,gt.__scopeId="data-v-5bfce8f7";var vt=gt,Ot=(n("b64b"),n("2909")),pt=(n("cb29"),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;Object(o["a"])(this,e),this._value=1,this._locked=!1,this.isRolling=!1,this.valueUsed=!0,this.max=t,this.game=n}return Object(U["a"])(e,[{key:"load",value:function(e){this.game=e}},{key:"roll",value:function(){this.isRolling||this.locked||(this.isRolling=!0,this.rollingDice(9))}},{key:"useValue",value:function(){return this.valueUsed=!0,this.value}},{key:"rollingDice",value:function(e){var t=this;e>0?(this._value=e,setTimeout((function(){t.rollingDice(e-1)}),50)):(this._value=Math.floor(Math.random()*this.max)+1,this.valueUsed=!1,this.game.notifyDiceRoll(this.value),this.isRolling=!1)}},{key:"isUsed",get:function(){return this.valueUsed}},{key:"locked",set:function(e){this._locked=e},get:function(){return this._locked||!this.isUsed}},{key:"value",get:function(){return this._value}},{key:"rolling",get:function(){return this.isRolling}}]),e}()),jt=function(){function e(t,n){Object(o["a"])(this,e),this.label=t,this.fun=n}return Object(U["a"])(e,[{key:"setLabel",value:function(e){return this.label=e,this}},{key:"label",set:function(e){var t=new he.a;this._label=t.render(e)},get:function(){return this._label}}]),e}(),mt=function(){function e(t,n){var i=this;Object(o["a"])(this,e),this.id="stage",this.args={},this._allowDiceBuy=!1,this._allowManaBuy=!0,this.activeComponent="GameScreen",this.endpoints={},this.state=Object(a["v"])({buttons:[]}),this.nextButton=new jt("Next",(function(){return i.nextStage()})),this.game=t,this.id=n}return Object(U["a"])(e,[{key:"onStart",value:function(){}},{key:"onResume",value:function(){}},{key:"onEnd",value:function(){}},{key:"onDiceRoll",value:function(e){}},{key:"onCardClick",value:function(e){}},{key:"link",value:function(e){return this._nextStage=e,e}},{key:"resumeStage",value:function(e){this.game.setStage(e),e.onResume()}},{key:"nextStage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.onEnd(),void 0!=e?this.gotoNext(e,t):void 0!=this._nextStage?this.gotoNext(this._nextStage,t):this.game.setStage(this)}},{key:"allowDiceBuy",value:function(){return this._allowDiceBuy}},{key:"allowManaBuy",value:function(){return this._allowManaBuy}},{key:"createMessage",value:function(e){this.game.print(e)}},{key:"sendMessage",value:function(e){this.game.sendMessage(e)}},{key:"gotoNext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.game.setStage(e),e.args=t,e.onStart()}},{key:"buttons",get:function(){return this.state.buttons},set:function(e){this.state.buttons=e}}]),e}(),yt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(o["a"])(this,n),a=t.call(this,e,"text"),a.myText=i,a.buttons=[a.nextButton],a}return Object(U["a"])(n,[{key:"onStart",value:function(){this.createMessage(this.myText)}}]),n}(mt),kt=function(){function e(){Object(o["a"])(this,e),this.hand=new je,this.mana=0,this.abilities=[]}return Object(U["a"])(e,[{key:"useMana",value:function(e){return e<=this.mana&&(this.mana-=e,!0)}},{key:"addMana",value:function(e){this.mana+=e}},{key:"getMana",value:function(){return this.mana}}]),e}(),wt=function(){function e(t){Object(o["a"])(this,e),this.game=t}return Object(U["a"])(e,[{key:"start",value:function(){this.firstStage.onStart()}}]),e}(),Ct=n("45eb"),St=n("7e84"),xt=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return!0};Object(o["a"])(this,e),this.name="",this.name=t,this.cost=n,this.fun=a,this.available=i,this.secret=function(e){return!1},this.visible=function(e){return!0}}return Object(U["a"])(e,[{key:"setFun",value:function(e){return this.fun=e,this}},{key:"setAvailableFun",value:function(e){return this.available=e,this}},{key:"setSecretFun",value:function(e){return this.secret=e,this}},{key:"setVisibleFun",value:function(e){return this.visible=e,this}},{key:"activate",value:function(e){this.isAvailable(e)&&("mana"==this.cost.resource&&e.player.useMana(this.cost.value),"bonus"==this.cost.resource&&e.bonusRolls.addValue(-this.cost.value),this.fun(e))}},{key:"isAvailable",value:function(e){return this.available(e)&&("mana"==this.cost.resource&&this.cost.value<=e.player.getMana()||"bonus"==this.cost.resource&&e.bonusRolls.value-this.cost.value<=e.bonusRolls.max)}},{key:"isVisible",value:function(e){return this.visible(e)&&(this.isAvailable(e)||!this.isAvailable(e)&&!this.secret(e))}},{key:"title",get:function(){return"".concat(this.name)}},{key:"subtitle",get:function(){return this.cost.value>0?"Pay ".concat(this.cost.value," ").concat(this.cost.resource):this.cost.value<0?"Gain ".concat(-this.cost.value," ").concat(this.cost.resource):""}}],[{key:"buyMana",value:function(){var t=new e("+2 mana",{value:-1,resource:"bonus"},(function(e){e.player.addMana(2)}),(function(e){return e.allowManaBuy()})).setVisibleFun((function(e){return e.allowManaBuy()}));return t.secret=function(e){return!0},t}},{key:"buyDice",value:function(){return new e("Buy dice",{value:2,resource:"mana"},(function(e){e.diceCount+=1}),(function(e){return e.allowDiceBuy()}))}},{key:"sellDice",value:function(){var t=new e("Sell dice",{value:-2,resource:"mana"},(function(e){e.diceCount-=1}),(function(e){return e.allowDiceSale()}));return t}},{key:"pickAnyCard",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=e.PICK_ANY_CARD_COST+(n-e.PICK_ANY_CARD_COST);i=Z.clamp(i,e.PICK_ANY_CARD_COST,12),a>=0&&(i=a);var r=new e("Pick Any",{value:i,resource:"mana"},(function(e){for(var a=[],i=0;i<n;i++)a.push(i+1);t(a)})).setAvailableFun((function(e){return e.diceReadyCount+e.diceRollingCount==0&&!e.diceAreLocked()}));return r}},{key:"addRound",value:function(){var t=new e("Add Round",{value:7,resource:"mana"}).setFun((function(e){e.round.maxMods[Z.uuid()]=new te(1,"add")})).setAvailableFun((function(e){return e.round.max<Ft.MAX_ROUNDS})).setVisibleFun((function(e){return e.round.max<Ft.MAX_ROUNDS}));return t}}]),e}();xt.PICK_ANY_CARD_COST=7;var _t=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"intensity"),a.deck=new je([]),a.done=!1,a.abilities=[],a}return Object(U["a"])(n,[{key:"onStart",value:function(){var e=this;this.pickStage=this.args.pickStage,this.parentCard=this.args.parentCard,this._allowDiceBuy=!0,this._allowManaBuy=void 0==this.args.allowManaBuy||this.args.allowManaBuy,this.game.diceCount=1,this.parentCard.levels>=4&&(this.game.diceCount+=1),"numeric"==this.parentCard.type?this.createMessage(this.game.dialogue["intensityStage"]):this.createMessage(this.game.dialogue["intensityStageSelection"]),this.done=!1,this.deck=new je(this.parentCard.subcards).sortByLevel(),this.game.drawnCards=this.deck,this.game.diceSize=this.deck.size(),this.abilities=[xt.buyMana(),xt.sellDice(),xt.buyDice(),xt.pickAnyCard((function(t){return e.pickCard(t)}),this.deck.size())],this.game.abilities=this.abilities}},{key:"onDiceRoll",value:function(e){this.pickCard(e)}},{key:"pickCard",value:function(e){if(!this.done){this.done=!0,this.game.lockDice(!0);this.deck.pick(e);this.nextStage(new Tt(this.game),{pickStage:this.pickStage,availableCards:this.deck,highlights:e,allowManaBuy:this._allowManaBuy})}}}]),n}(mt),Tt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"highlight"),a.availableCards=new je([]),a.highlights=[],a.highlightedCards=new je([]),a.done=!1,a}return Object(U["a"])(n,[{key:"onStart",value:function(){this.pickStage=this.args.pickStage,this.availableCards=this.args.availableCards,this.highlights=this.args.highlights,this.highlightedCards=this.availableCards.pick(this.highlights),this._allowManaBuy=void 0==this.args.allowManaBuy||this.args.allowManaBuy,this._allowDiceBuy=void 0==this.args.allowDiceBuy||this.args.allowDiceBuy,Z.hasDuplicate(this.highlights)&&this.createMessage("Destiny calls! Some of your dice rolled the same, choose that card to gain mana for every extra dice.");var e,t=Object(ee["a"])(this.highlights);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=this.availableCards.pick([n]).cards[0];a.highlight+=1}}catch(i){t.e(i)}finally{t.f()}this.done=!1}},{key:"onCardClick",value:function(e){if(e.highlight>0){if(e.highlight>1){var t=e.highlight-1;this.createMessage("You gained ".concat(t," mana.")),this.game.player.addMana(t)}var n,a=Object(ee["a"])(this.availableCards.cards);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.highlight=0,i.scale=!1}}catch(r){a.e(r)}finally{a.f()}e.isParent?(this.pickStage.deck.removeCard(e),this.nextStage(new _t(this.game),{pickStage:this.pickStage,parentCard:e,allowDiceBuy:this._allowDiceBuy,allowManaBuy:this._allowManaBuy})):(this.pickStage.deck.removeCard(e),this.game.pickCard(e),this.resumeStage(this.pickStage))}}}]),n}(mt),Dt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"end"),a.activeComponent="HandView",a.endpoints.end=function(){a.end()},a}return Object(U["a"])(n,[{key:"onStart",value:function(){this.game.pickedCards.sortByFamily(),this.game.menu.saveHand(),this.createMessage(this.game.dialogue["endStage"]),this.createYourNewLifeButton()}},{key:"createYourNewLifeButton",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,a=(null===(e=this.game.menu.endings)||void 0===e?void 0:e.chooseEpilogues(this.game.player.hand))||[];void 0!=n&&(a=[],a.push(n)),this.buttons=[];var i,r,c=Object(ee["a"])(a);try{var s=function(){var e=i.value;t.buttons.push(new jt(e.title,(function(){t.epilogue=e,t.dialogue=t.epilogue.dialogueTree,void 0!=n&&(t.dialogue.ignoreRequirements=!0),t.dialogue.start(t.game.player.hand,t),t.game.title=t.epilogue.title})))};for(c.s();!(i=c.n()).done;)s()}catch(o){c.e(o)}finally{c.f()}0==this.buttons.length&&(this.createMessage("ERROR! No epilogues could be loaded. Please report the following to Gardamuse."),this.createMessage("DEBUG! Available epilogues: ".concat(null===(r=this.game.menu.endings)||void 0===r?void 0:r.epilogues.length)),this.createMessage("DEBUG! Fulfilled epilogues: ".concat(a)),this.buttons.push(new jt("Back to Main Menu",(function(){t.end()}))))}},{key:"end",value:function(){var e,t=this,n=this.epilogue.id,a=this.dialogue.currentSegment.id;a=a.substring(0,a.length-4),this.game.menu.unlockEnding(n,a),this.game.title=(null===(e=this.dialogue)||void 0===e?void 0:e.currentSegment.endpointLabel)||"",this.buttons=[new jt("Save Screenshot",(function(){Z.screenshot("cards","hand-".concat(t.game.pickedCards.size()))})),new jt("Back to Menu",(function(){t.game.end()}))]}}]),n}(mt),Bt=(n("a15b"),n("1276"),n("2ca0"),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(o["a"])(this,e),this.name=t,this.text=n}return Object(U["a"])(e,null,[{key:"parseLine",value:function(t){var n=new he.a({breaks:!0}),a="narrator",i=t.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"');return t.startsWith("demon: ")&&(a="demon",i=t.replace("demon: ","")),t.startsWith("player: ")&&(a="player",i=t.replace("player: ","")),new e(a,i.split("\n").map((function(e){return n.render(e)})).join("\n"))}},{key:"parseLines",value:function(t){var n=t.split(/\n\n/).filter((function(e){return e.length>0})).map((function(t){return e.parseLine(t)}));return n}}]),e}()),Mt=n("ade3"),Rt=(n("25eb"),n("466d"),function(){function e(t,n,a,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.intensitySum;Object(o["a"])(this,e),this.mode="or",this.args=[],this.operator=">",this.intensity=0,this.fun=e.intensitySum,this.mode=t,this.args=n,this.operator=a,this.intensity=i,this.fun=r}return Object(U["a"])(e,[{key:"score",value:function(e){return"all"==this.args[0]||"<"==this.operator||"<="==this.operator||"=="==this.operator?0:">="==this.operator?this.intensityScore(e):">"==this.operator?this.intensityScore(e)-1:(console.error('Requirement operator "'.concat(this.operator,'" was not recognized.')),0)}},{key:"isFulfilled",value:function(e){return"<"==this.operator?this.intensityScore(e)<this.intensity:"<="==this.operator?this.intensityScore(e)<=this.intensity:"=="==this.operator?this.intensityScore(e)==this.intensity:">="==this.operator?this.intensityScore(e)>=this.intensity:">"==this.operator?this.intensityScore(e)>this.intensity:(console.error('Requirement operator "'.concat(this.operator,'" was not recognized.')),!1)}},{key:"intensityScore",value:function(e){return this.fun(e,this.args)}},{key:"toString",value:function(){return"".concat(this.mode.toUpperCase()," [").concat(this.args,"] [").concat(this.operator,"] [").concat(this.intensity,"]")}},{key:"toJSON",value:function(){return Object(Q["h"])(this)}}],[{key:"functions",value:function(t){var n={sum:e.intensitySum};return n[t]}},{key:"intensitySum",value:function(e,t){var n,a=0,i=Object(ee["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(je.referenceDeck().hasCard(r)){var c=e.getCardById(r);void 0==c?(c=e.pack().getCardById(r),void 0!=c&&(a+=c.subcards[c.subcards.length-1].intensity)):a+=Math.max(c.intensity,1)}else{if(!(je.referenceDeck().onlyTag(r).size()>0))throw new Error('Bad requirement "'.concat(this.toString(),'", "').concat(r,'" is neither an id, tag or family.'));var s,o=Object(ee["a"])(e.onlyTag(r).cards);try{for(o.s();!(s=o.n()).done;){var u=s.value;a+=Math.max(u.intensity,1)}}catch(l){o.e(l)}finally{o.f()}}}}catch(l){i.e(l)}finally{i.f()}return a}},{key:"orGroupFulfilled",value:function(e,t){var n,a=!0,i=Object(ee["a"])(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!r.isFulfilled(e)){a=!1;break}}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"parseRequirements",value:function(t){var n=[];t=t.toLowerCase().replace(/(\r\n|\n|\r)/gm," ");var a,i=t.split(/\bor\b/).map((function(e){return e.split(/\band\b/)})),r=Object(ee["a"])(i);try{for(r.s();!(a=r.n()).done;){var c,s=a.value,o="or",u=Object(ee["a"])(s.entries());try{for(u.s();!(c=u.n()).done;){var l=Object(le["a"])(c.value,2),d=l[0],h=l[1];d>0&&(o="and"),h=h.trim();var f=this.getOperator(h),b=this.getLeft(h,f),g=this.getRight(h,f),v=this.stripFun(b),O=Object(le["a"])(v,2),p=O[0],j=O[1];j=j.map((function(e){return e.replaceAll('"',"")})),n.push(new e(o,j,f,Number.parseInt(g),e.functions(p)))}}catch(m){u.e(m)}finally{u.f()}}}catch(m){r.e(m)}finally{r.f()}return this.groupRequirements(n)}},{key:"groupRequirements",value:function(e){var t,n=[],a=[],i=Object(ee["a"])(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;"or"==r.mode&&a.length>0&&(n.push(a),a=[]),a.push(r)}}catch(c){i.e(c)}finally{i.f()}return n.push(a),n}},{key:"stripFun",value:function(e){var t,n=e.match(/.*(?=\()/);t=null!=n?n[0]:"";var a=[e];if(""!=t){var i=e.match(/\(.*(?=\))/);null!=i?(a=this.splitArgs(i[0]),a[0]=a[0].replace("(","")):console.error("Bad expression: ".concat(e))}return[t,a]}},{key:"splitArgs",value:function(e){return e.split(",").map((function(e){return e.trim()}))}},{key:"getLeft",value:function(e,t){var n;return null===(n=e.split(t)[0])||void 0===n?void 0:n.trim()}},{key:"getRight",value:function(e,t){var n,a=null===(n=e.split(t)[1])||void 0===n?void 0:n.trim();return a||"0"}},{key:"getOperator",value:function(e){var t,n=e.match(/ > | >= | == | <= | < /);return t=null==n?">=":n[0].trim(),t}}]),e}());Object(d["a"])([Q["g"]],Rt.prototype,"mode",void 0),Object(d["a"])([Q["g"]],Rt.prototype,"args",void 0),Object(d["a"])([Q["g"]],Rt.prototype,"operator",void 0),Object(d["a"])([Q["g"]],Rt.prototype,"intensity",void 0);var qt=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(o["a"])(this,e),this.currentNodeIndex=-1,this.requirements=[],this.optionIds=[],this.optionSegments=[],this.endpointId="",this.endpointLabel="Next",this.id=n,this.title=a,this.nodes=t,this.endpointId=i,void 0!=this.nodes&&0!=this.nodes.length||(this.nodes=[new Bt],this.start())}return Object(U["a"])(e,[{key:"currentMessage",value:function(){var e=this.nodes[this.currentNodeIndex];return e||new Bt}},{key:"start",value:function(){this.currentNodeIndex=0}},{key:"gotoNextNode",value:function(){this.currentNodeIndex<this.nodes.length-1&&(this.currentNodeIndex+=1)}},{key:"isStarted",value:function(){return this.currentNodeIndex>=0}},{key:"isOnLastNode",value:function(){return this.currentNodeIndex==this.nodes.length-1}},{key:"hasEndpoint",value:function(){return""!=this.endpointId}},{key:"getEndpoint",value:function(e){var t=e.endpoints[this.endpointId];if(void 0!=t)return t;throw Error('Could not select option "'.concat(this.id,'" because endpoint ').concat(this.endpointId," is undefined."))}},{key:"linkOptions",value:function(e){this.optionSegments=[];var t,n=Object(ee["a"])(this.optionIds);try{for(n.s();!(t=n.n()).done;){var a=t.value;void 0!=e[a]?this.optionSegments.push(e[a]):console.error('The "'.concat(this.id,'" node has an unknown option "').concat(a,'". It has been skipped.'))}}catch(i){n.e(i)}finally{n.f()}}},{key:"getFulfilledOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.options.filter((function(n){return n.isRequirementFulfilled(e)||t}))}},{key:"isRequirementFulfilled",value:function(e){if(0==this.requirements.length)return!0;var t,n=Object(ee["a"])(this.requirements);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(Rt.orGroupFulfilled(e,a))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"length",value:function(){return this.nodes.length}},{key:"options",get:function(){if(this.isOnLastNode()&&this.hasEndpoint()){var t=new e([],"".concat(this.id,".end"),"".concat(this.endpointLabel),this.endpointId);return t.endpointLabel=this.endpointLabel,[t]}return this.isOnLastNode()?this.optionSegments:[this]}}],[{key:"parseSegment",value:function(t){var n=t.id,a=t.title?t.title:"Next",i=t.text?Bt.parseLines(t.text):[],r=t.options?t.options:[],c=t.endpoint?t.endpoint:"",s=c.fun?c.fun:c,o=c.label?c.label:"Next",u=new e(i,n,a,s);return u.requirements=t.requirements?Rt.parseRequirements(t.requirements):[],u.optionIds=r,u.endpointLabel=o,u}}]),e}(),Et=function(){function e(t){Object(o["a"])(this,e),this.nodes={},this.ignoreRequirements=!1,this.nodes=t}return Object(U["a"])(e,[{key:"createOptionButtons",value:function(e,t,n){var a,i=this,r=[],c=Object(ee["a"])(e);try{var s=function(){var e,c=a.value,s=c.id!=(null===(e=i.activeNode)||void 0===e?void 0:e.id)?c.title:"Next";c.requirements.length>0&&!c.isStarted()&&(s="__".concat(s,"__")),r.push(new jt(s,(function(){i.select(c,t,n)})))};for(c.s();!(a=c.n()).done;)s()}catch(o){c.e(o)}finally{c.f()}return r}},{key:"start",value:function(e,t){void 0!=this.firstNode?this.select(this.firstNode,e,t):console.error("Could not start dialogue tree as there was no first node.")}},{key:"select",value:function(e,t,n){if(this.activeNode=e,e.isStarted())if(e.isOnLastNode()){if(e.isOnLastNode()&&e.hasEndpoint())return void e.getEndpoint(n)();console.error("Segment ".concat(e.id," was expected to have an endpoint but does not."))}else e.gotoNextNode();else e.start();n.buttons=this.createOptionButtons(e.getFulfilledOptions(t,this.ignoreRequirements),t,n),n.sendMessage(this.currentMessage)}},{key:"currentSegment",get:function(){return this.activeNode||new qt([new Bt],"","","")}},{key:"currentMessage",get:function(){return this.activeNode?this.activeNode.currentMessage():new Bt("","Error: Dialogue tree not initialized.")}},{key:"options",get:function(){return this.activeNode?this.activeNode.options:[]}}],[{key:"createLinear",value:function(t,n,a){var i=Z.uuid(),r=new qt(t,i,"",n);r.endpointLabel=a;var c=new e(Object(Mt["a"])({},i,r));return c.firstNode=r,c}},{key:"parseDialogue",value:function(t){var n,a={},i=Object(ee["a"])(t.nodes);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=qt.parseSegment(r);a[c.id]=c}}catch(d){i.e(d)}finally{i.f()}for(var s=0,o=Object.values(a);s<o.length;s++){var u=o[s];u.linkOptions(a)}var l=new e(a);return l.firstNode=a[t.nodes[0].id],l}}]),e}(),Nt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"transform"),a.endpoints.nextStage=function(){a.nextStage()},a.endpoints.nextTransformation=function(){void 0!=a.nextCard&&a.activateCard(a.nextCard)},a}return Object(U["a"])(n,[{key:"onStart",value:function(){this.game.abilities=[],this._nextStage=this.args.nextStage,this.prepareNextButton(),this.game.diceCount=0,this.game.drawnCards=new je([])}},{key:"onEnd",value:function(){this.game.pickedCards=new je}},{key:"prepareNextButton",value:function(){var e=this;this.game.pickedCards.size()>0?this.buttons=[new jt("Activate **".concat(this.nextCard.fullTitle,"**"),(function(){return e.activateCard(e.nextCard)}))]:this.buttons=[this.nextButton]}},{key:"activateCard",value:function(e){this.game.pickedCards.removeCard(e),this.game.drawnCards.addCard(e),this.game.player.hand.addCard(e),this.createNextLinearSegment(e)}},{key:"createNextLinearSegment",value:function(e){var t;if(t=""!=e.transformation?Bt.parseLines(e.transformation):Bt.parseLines("You don't feel any different."),void 0==this.nextCard){var n="Next Round";1==this.game.round.fraction&&(n=this.game.state.bonusRolls.value>0&&!this.game.state.isBonusRound?"To Bonus Round":"To Epilogue"),Et.createLinear(t,"nextStage",n).start(new je,this)}else Et.createLinear(t,"nextTransformation","Activate **".concat(this.nextCard.fullTitle,"**")).start(new je,this)}},{key:"nextCard",get:function(){return this.game.pickedCards.cards[0]}}]),n}(mt),At=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"bonus"),a.pickedCards=new je([]),a.leftToPick=0,a.deck=new je([]),a}return Object(U["a"])(n,[{key:"onStart",value:function(){var e=this;this.createMessage(this.game.dialogue["bonusStage"]),this.deck=this.game.deck.withoutFamily("reward").draw(Ft.CARDS_IN_BONUS_ROUND),this.game.state.drawnCards=this.deck,this.game.round.addValue(1),this.game.state.cardsPickedThisRound=0,this.leftToPick=this.game.state.bonusRolls.value,this.game.state.cardsToPick=this.leftToPick,this.game.diceCount=2,this.game.diceSize=this.deck.size(),this.game.state.isBonusRound=!0,this._allowDiceBuy=!0,this.game.abilities=[xt.buyDice(),xt.sellDice(),xt.pickAnyCard((function(t){return e.onDiceRoll(t)}),this.game.drawnCards.size())],0==this.leftToPick&&(this.onResume(),this.nextStage(new Dt(this.game)))}},{key:"onResume",value:function(){var e=this;this.game.state.drawnCards=this.deck,this.game.diceCount=2,this.game.diceSize=this.deck.size(),this.game.abilities=this.game.abilities=[xt.buyDice(),xt.sellDice(),xt.pickAnyCard((function(t){return e.onDiceRoll(t)}),this.game.drawnCards.size())],this._allowDiceBuy=!0,0==this.leftToPick&&(this.game.diceCount=0,this.createMessage("demon: Great, you've completed the bonus round."),this._nextStage=new Dt(this.game),this.nextStage(new Nt(this.game),{nextStage:this._nextStage}),this.game.lockDice(!0))}},{key:"onDiceRoll",value:function(e){this.leftToPick>0&&(this.leftToPick-=1,this.pickedCards=this.deck.pick(e),this.game.lockDice(!0),this.nextStage(new Tt(this.game),{pickStage:this,availableCards:this.deck,highlights:e,allowManaBuy:!1}))}}]),n}(mt),Lt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"pick"),a.leftToPick=0,a.diceCount=1,a.deck=new je([]),a.pickAnyCost=xt.PICK_ANY_CARD_COST,a}return Object(U["a"])(n,[{key:"onStart",value:function(){var e=this;this.leftToPick=this.args.cardsToPick,this._nextStage=this.args.drawStage,this.createMessage(this.game.dialogue["pickStage"]),this.deck=this.game.drawnCards,this.diceCount=2,this.game.diceCount=this.diceCount,this.game.diceSize=this.deck.size(),this.buttons=[],this._allowDiceBuy=!0,this.game.abilities=[xt.buyMana(),xt.sellDice(),xt.buyDice(),xt.pickAnyCard((function(t){return e.pickCard(t)}),this.deck.size(),this.pickAnyCost),xt.addRound()]}},{key:"onResume",value:function(){var e=this;this.game.drawnCards=this.deck,this.diceCount=Math.max(2,this.diceCount-1),this.game.diceCount=this.diceCount,this.game.diceSize=this.deck.size(),this._allowDiceBuy=!0,this.game.abilities=[xt.buyMana(),xt.sellDice(),xt.buyDice(),xt.pickAnyCard((function(t){return e.pickCard(t)}),this.deck.size(),this.pickAnyCost),xt.addRound()],0==this.leftToPick&&(this.createMessage("demon: Good job! You completed round ".concat(this.game.round.value,".\n")+"Time to see what those cards will do to you!"),this.game.lockDice(!0),this.game.deck.addDeck(this.game.drawnCards,!0),1==this.game.round.fraction&&(this.game.state.bonusRolls.value>0&&!this.game.state.isBonusRound?this._nextStage=new At(this.game):this._nextStage=new Dt(this.game)),this.nextStage(new Nt(this.game),{nextStage:this._nextStage}))}},{key:"onDiceRoll",value:function(e){this.pickCard(e)}},{key:"pickCard",value:function(e){if(this.leftToPick>0){this.leftToPick-=1;this.deck.pick(e);this.game.lockDice(!0),this.nextStage(new Tt(this.game),{pickStage:this,availableCards:this.deck,highlights:e})}}}]),n}(mt),Pt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"draw"),a.allowNext=!0,a.availableExtraDraws=1,a.diceCount=n.DICE_COUNT,a.diceSize=n.DICE_SIZE,a.diceHasBeenRolled=!1,a.abilities=[xt.buyMana(),new xt("Pick Less",{value:2,resource:"mana"},(function(e){a.addDraws(-1),a.availableExtraDraws-=1}),(function(e){return a.game.state.cardsToPick>1&&a.availableExtraDraws>0&&a.diceHasBeenRolled})),new xt("Pick More",{value:2,resource:"mana"},(function(e){a.addDraws(1),a.availableExtraDraws-=1}),(function(e){return a.game.state.cardsToPick<6&&a.availableExtraDraws>0&&a.diceHasBeenRolled})),xt.addRound()],a}return Object(U["a"])(n,[{key:"onStart",value:function(){this.createMessage(this.game.dialogue["drawStage"]),this.game.state.drawnCards=this.game.drawCards(0),this.game.diceCount=this.diceCount,this.game.diceSize=this.diceSize,this.allowNext=!1,this.availableExtraDraws=1,this.buttons=[],this.game.round.addValue(1),this.game.state.cardsPickedThisRound=0,this.game.state.cardsToPick=0,this._allowDiceBuy=!1,this.game.abilities=[],this.diceHasBeenRolled=!1}},{key:"onResume",value:function(){this.createMessage(this.game.dialogue["drawStagePostBan"]),this.game.diceCount=this.diceCount,this.game.diceSize=this.diceSize,this.allowNext=!1,this.availableExtraDraws=1,this.buttons=[],this.game.state.cardsPickedThisRound=0,this.game.state.cardsToPick=0,this._allowDiceBuy=!1,this.game.abilities=[],this.diceHasBeenRolled=!1}},{key:"onDiceRoll",value:function(e){if(!this.allowNext){this.game.state.drawnCards=this.game.drawCards(Ft.CARDS_PER_ROUND),this.game.abilities=this.abilities;var t=e.reduce((function(e,t){return e+t}));this.game.state.cardsToPick=t,this.createMessage("demon: You will have to pick ".concat(this.game.state.cardsToPick," cards this round.\nAlthough, if you want to pick more or less cards, you may spend some mana to do that, but you have to do it now.")),this.allowNext=!0,this.diceHasBeenRolled=!0,this.game.lockDice(!0),this.updateButtons()}}},{key:"nextStage",value:function(){this.allowNext&&Object(Ct["a"])(Object(St["a"])(n.prototype),"nextStage",this).call(this,new Lt(this.game),{cardsToPick:this.game.state.cardsToPick,drawStage:this})}},{key:"addDraws",value:function(e){this.game.state.cardsToPick=Z.clamp(this.game.state.cardsToPick+e,1,6),e>=0?this.createMessage("demon: An extra pick? Guess you're seeing something good, huh? You'll pick ".concat(this.game.state.cardsToPick," cards this round.")):this.createMessage("demon: Alright, you only have to pick ".concat(this.game.state.cardsToPick," cards this round."))}},{key:"updateButtons",value:function(){var e=[];e.push(this.nextButton),this.buttons=e}}]),n}(mt);Pt.DICE_COUNT=2,Pt.DICE_SIZE=3;var It=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;return Object(o["a"])(this,n),a=t.call(this,e,"dialogue"),a.activeComponent="DialogueScreen",a}return Object(U["a"])(n,[{key:"onStart",value:function(){}}]),n}(mt),zt=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var a;Object(o["a"])(this,n),a=t.call(this,e),a.stage1=new It(a.game);var i=new Pt(a.game);return a.stage1.endpoints.drawStage=function(){return a.stage1.nextStage(i)},a.stage1.endpoints.leave=function(){return a.game.menu.endGame()},Et.parseDialogue(a.game.dialogue2).start(new je,a.stage1),a}return Object(U["a"])(n,[{key:"firstStage",get:function(){return this.stage1}}]),n}(wt),Ft=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;Object(o["a"])(this,e),this.state=Object(a["v"])({deck:new je,dice:[],drawnCards:new je([]),pickedCards:new je([]),stage:new yt(this),round:new ne(0,0,3),isBonusRound:!1,cardsToPick:0,cardsPickedThisRound:0,rewardRolls:new ne(0,0,0),bonusRolls:new ne(0,0,0),player:new kt,lines:[],title:""}),this.currentRolls=[],this.menu=t,this.dialogue=JSON.parse(ve().dialogueString.value),this.dialogue2=JSON.parse(ve().dialogue2String.value),this.state.deck=(new je).createNew().pack(),this.state.dice=[],this.state.drawnCards=new je([]),this.state.pickedCards=new je([]),this.state.round=new ne(0,0,3),this.state.isBonusRound=!1,this.state.cardsToPick=0,this.state.cardsPickedThisRound=0,this.state.rewardRolls=new ne(0,0,6),this.state.bonusRolls=new ne(0,0,e.MAX_BONUS_ROLLS),this.state.lines=[],this.gameMode=void 0!=i?i:new zt(this),this.state.stage=this.gameMode.firstStage,this.state.deck.shuffle(),this.lockDice(!0),this.gameMode.start(),console.log("Deck size:",this.state.deck.size(),this.state.deck.allLevels.length),window.gredraw=function(e){if("draw"!=n.state.stage.id&&"pick"!=n.state.stage.id&&"bonus"!=n.state.stage.id)return"Can not redraw cards in this stage.";var t=n.drawCards(e);return n.state.drawnCards=t,"pick"==n.state.stage.id&&(n.state.stage.deck=t),"Drew ".concat(e," cards, ").concat(n.deck.size()," cards remain in the current deck.")},window.groll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n.state.stage.onDiceRoll(Array(t).fill(e))},window.gameComponent=function(){return n.activeComponent}}return Object(U["a"])(e,[{key:"end",value:function(){this.menu.endGame()}},{key:"drawCards",value:function(e){return this.state.deck.draw(e)}},{key:"pickCard",value:function(e){this.state.pickedCards.addCard(e),this.state.cardsPickedThisRound+=1}},{key:"nextStage",value:function(){this.state.stage.nextStage()}},{key:"setStage",value:function(e){this.state.stage=e}},{key:"notifyDiceRoll",value:function(e){if(this.currentRolls.push(e),this.allDiceReady){this.state.stage.onDiceRoll(this.diceValues),this.currentRolls=[];var t,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.useValue()}}catch(i){n.e(i)}finally{n.f()}}}},{key:"lockDice",value:function(e){var t,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.locked=e}}catch(i){n.e(i)}finally{n.f()}}},{key:"diceAreLocked",value:function(){var e,t=0,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.locked&&(t+=1)}}catch(i){n.e(i)}finally{n.f()}return t==this.state.dice.length}},{key:"sellDice",value:function(){this.allowDiceSale()&&(this.bonusRolls.addValue(-1),this.state.dice.pop())}},{key:"allowDiceSale",value:function(){return this.state.stage.allowDiceBuy()&&this.diceReadyCount+this.diceRollingCount==0&&!this.diceAreLocked()&&this.state.dice.length>1}},{key:"allowManaBuy",value:function(){return this.state.stage.allowManaBuy()}},{key:"allowDiceBuy",value:function(){return this.state.stage.allowDiceBuy()&&this.diceReadyCount+this.diceRollingCount==0&&!this.diceAreLocked()&&this.state.dice.length<e.MAX_DICE}},{key:"clickCard",value:function(e){this.state.stage.onCardClick(e)}},{key:"sendMessage",value:function(e){this.state.lines.push(e)}},{key:"print",value:function(e){var t,n=Object(ee["a"])(Bt.parseLines(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;this.state.lines.push(a)}}catch(i){n.e(i)}finally{n.f()}}},{key:"buttons",get:function(){return this.state.stage.buttons}},{key:"diceValues",get:function(){var e,t=[],n=Object(ee["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push(a.value)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"allDiceReady",get:function(){return this.diceReadyCount==this.state.dice.length}},{key:"diceReadyCount",get:function(){var e,t=0,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.isUsed||(t+=1)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"diceRollingCount",get:function(){var e,t=0,n=Object(ee["a"])(this.state.dice);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.rolling&&(t+=1)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"activeComponent",get:function(){return this.state.stage.activeComponent}},{key:"diceCount",set:function(e){for(var t=[],n=0;n<e;n++)0==this.state.dice.length?t.push(new pt(6,this)):t.push(new pt(this.state.dice[0].max,this));this.state.dice=t},get:function(){return this.state.dice.length}},{key:"diceSize",set:function(e){for(var t=0;t<this.state.dice.length;t++)this.state.dice[t]=new pt(e,this)},get:function(){return this.diceCount>0?this.state.dice[0].max:0}},{key:"player",get:function(){return this.state.player}},{key:"abilities",get:function(){return this.player.abilities},set:function(e){this.player.abilities=e}},{key:"currentDialogue",get:function(){return this.state.lines}},{key:"deck",get:function(){return this.state.deck}},{key:"drawnCards",get:function(){return this.state.drawnCards},set:function(e){this.state.drawnCards=e}},{key:"pickedCards",get:function(){return this.state.pickedCards},set:function(e){this.state.pickedCards=e}},{key:"round",get:function(){return this.state.round}},{key:"roundString",get:function(){return this.state.isBonusRound?"Bonus Round":"Round ".concat(this.round.value," of ").concat(this.round.max)}},{key:"pickedString",get:function(){return 0==this.state.cardsToPick?"Draw cards":"Picked ".concat(this.state.cardsPickedThisRound," of ").concat(this.state.cardsToPick," cards")}},{key:"stageId",get:function(){return this.state.stage.id}},{key:"rewardRolls",get:function(){return this.state.rewardRolls}},{key:"bonusRolls",get:function(){return this.state.bonusRolls}},{key:"cardsPickedThisRound",get:function(){return this.state.cardsPickedThisRound}},{key:"showDialogueOnly",get:function(){return 0==this.round.value}},{key:"title",get:function(){return this.state.title},set:function(e){this.state.title=e}}]),e}();Ft.MAX_DICE=5,Ft.MAX_ROUNDS=5,Ft.CARDS_PER_ROUND=9,Ft.CARDS_IN_BONUS_ROUND=12,Ft.MAX_BONUS_ROLLS=6;var Vt=function(){function e(t,n,a){Object(o["a"])(this,e),this.name=t,this.description=n,this.fun=a}return Object(U["a"])(e,[{key:"activate",value:function(e){var t=this;window[this.name]=function(n){return t.fun(e,n)}}}]),e}(),Ht=(n("843c"),n("38cf"),n("caad"),n("2532"),function(){function e(t,n,a,i,r){Object(o["a"])(this,e),this.id="",this.title="",this.likelihood=0,this.requirements=[],this.nodes=[],this.id=t,this.title=n,this.likelihood=a,this.requirements=i,this.nodes=r}return Object(U["a"])(e,[{key:"isFulfilled",value:function(e){try{var t,n=Object(ee["a"])(this.requirements);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Rt.orGroupFulfilled(e,a);if(i)return!0}}catch(r){n.e(r)}finally{n.f()}}catch(c){console.error('Could not calculate fulfilment for ending "'.concat(this.id,'".\n').concat(c.message))}return!1}},{key:"score",value:function(e){var t=[];try{var n,a=Object(ee["a"])(this.requirements);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=0;if(Rt.orGroupFulfilled(e,i)){var c,s=Object(ee["a"])(i);try{for(s.s();!(c=s.n()).done;){var o=c.value;r+=o.score(e)}}catch(u){s.e(u)}finally{s.f()}}t.push(r)}}catch(u){a.e(u)}finally{a.f()}}catch(l){console.error('Could not calculate score for ending "'.concat(this.id,'".\n').concat(l.message))}return Math.max.apply(Math,t)*this.likelihood}},{key:"getNodes",value:function(){return this.nodes}},{key:"getAllEndings",value:function(){var e,t=this,n=[],a=Object(ee["a"])(this.nodes);try{for(a.s();!(e=a.n()).done;){var i=e.value;"endpoint"in i&&n.push(i.id)}}catch(r){a.e(r)}finally{a.f()}return n.sort((function(e,n){return t.getEndpointLabel(e).localeCompare(t.getEndpointLabel(n))}))}},{key:"findNodeParents",value:function(e){var t,n=[],a=Object(ee["a"])(this.nodes);try{for(a.s();!(t=a.n()).done;){var i=t.value;"options"in i&&i.options.includes(e)&&n.push(i.id)}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"getNodeChain",value:function(e){var t=[e];while(1){var n=this.findNodeParents(t[t.length-1]);if(0==n.length)break;t.push(n[0])}return t.reverse()}},{key:"getEnding",value:function(e){var t,n=this,a=this.getNodeChain(e),i=[],r=Object(ee["a"])(a);try{var c=function(){var e=t.value,a=n.nodes.find((function(t){return t.id==e}));i.push.apply(i,Object(Ot["a"])(Bt.parseLines(a.text)))};for(r.s();!(t=r.n()).done;)c()}catch(s){r.e(s)}finally{r.f()}return i}},{key:"getEndpointLabel",value:function(e){return this.nodes.find((function(t){return t.id==e})).endpoint.label}},{key:"dialogueTree",get:function(){return Et.parseDialogue({id:this.id,nodes:this.nodes})}}],[{key:"create",value:function(t){var n=t.id,a=t.title,i=t.likelihood?t.likelihood:0,r=Rt.parseRequirements(t.requirements),c=t.nodes?t.nodes:[];return new e(n,a,i,r,c)}}]),e}()),Wt=function(){function e(){Object(o["a"])(this,e),this.epilogues=[];var t,n=Object(ee["a"])(JSON.parse(ve().endingsString.value));try{for(n.s();!(t=n.n()).done;){var a=t.value,i=Ht.create(a);this.epilogues.push(i)}}catch(r){n.e(r)}finally{n.f()}}return Object(U["a"])(e,[{key:"addEpilogue",value:function(e){this.epilogues.push(e)}},{key:"chooseEpilogues",value:function(e){var t,n=[],a=Object(ee["a"])(this.epilogues);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.isFulfilled(e)&&n.push(i)}}catch(c){a.e(c)}finally{a.f()}var r=n.reduce((function(e,t){return t.likelihood>e.likelihood?t:e})).likelihood;return n=n.filter((function(e){return e.likelihood==r})),n}},{key:"selectEnding",value:function(e){var t,n=Object(ee["a"])(this.epilogues);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.id==e)return a}}catch(i){n.e(i)}finally{n.f()}return console.warn('Could not select epilogue with id "'.concat(e,'". Available ids: ').concat(this.epilogues.map((function(e){return e.id})).join(", "))),this.epilogues[0]}},{key:"correctnessSimulation",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a={},i=Object(ee["a"])(this.epilogues);try{for(i.s();!(e=i.n()).done;){var r=e.value;a[r.id]={fulfilled:0,chosen:0,score:0,appearedWith:[]}}}catch(B){i.e(B)}finally{i.f()}for(var c=0;c<t;c++){var s,o=je.referenceDeck().shuffle(),u=o.draw(Math.round(6+20*Math.random())),l=new je,d=Object(ee["a"])(u.cards);try{for(d.s();!(s=d.n()).done;){var h=s.value;h.isParent?l.addCard(Z.pickFrom(h.subcards,Math.random())):l.addCard(h)}}catch(B){d.e(B)}finally{d.f()}t<=5&&n(l.toString());var f,b=Object(ee["a"])(this.epilogues);try{for(b.s();!(f=b.n()).done;){var g=f.value;g.isFulfilled(l)&&(a[g.id].fulfilled+=1,a[g.id].score+=g.score(l))}}catch(B){b.e(B)}finally{b.f()}var v,O=this.chooseEpilogues(l),p=Object(ee["a"])(O);try{var j=function(){var e,t=v.value;a[t.id].chosen+=1,(e=a[t.id].appearedWith).push.apply(e,Object(Ot["a"])(O.filter((function(e){return e.id!=t.id})).map((function(e){return e.id}))))};for(p.s();!(v=p.n()).done;)j()}catch(B){p.e(B)}finally{p.f()}}n("After simulating ".concat(t," random hands, epilogues had the following stats:"));var m,y=Object(Ot["a"])(this.epilogues).sort((function(e,t){return a[t.id].chosen-a[e.id].chosen})),k=Object(ee["a"])(y);try{for(k.s();!(m=k.n()).done;){var w,C=m.value,S=a[C.id].fulfilled,x=a[C.id].chosen,_={},T=Object(ee["a"])(a[C.id].appearedWith);try{for(T.s();!(w=T.n()).done;){var D=w.value;D in _?_[D]+=1:_[D]=1}}catch(B){T.e(B)}finally{T.f()}n("-".repeat(80)),n("".concat(C.title.padEnd(12)," | ").concat(x.toString().padStart(4)," available (").concat(this.stringifyAppearances(_),"),\n               ").concat(S.toString().padStart(4)," fulfilled"))}}catch(B){k.e(B)}finally{k.f()}}},{key:"stringifyAppearances",value:function(e){var t,n=this,a="",i=Object.keys(e),r=Object(ee["a"])(i.entries());try{var c=function(){var r,c=Object(le["a"])(t.value,2),s=c[0],o=c[1];a+="".concat(null===(r=n.epilogues.find((function(e){return e.id==o})))||void 0===r?void 0:r.title,": ").concat(e[o]),s+1<i.length&&(a+=", ")};for(r.s();!(t=r.n()).done;)c()}catch(s){r.e(s)}finally{r.f()}return a}},{key:"testBimboEnding",value:function(){var e=this.epilogues.filter((function(e){return"bimbo"==e.id}))[0],t=new je;t.addCard(je.referenceDeck().getCardById("intelligence.intelligence 3")),t.addCard(je.referenceDeck().getCardById("breast-size.breast size 3")),this.assert(e.isFulfilled(t))}},{key:"assert",value:function(e){e||console.error("Assertion failed")}}]),e}(),Ut=function(){function e(t){Object(o["a"])(this,e),this.currentEnding="",this.menu=t,this.epilogues=t.endings?t.endings:new Wt}return Object(U["a"])(e,[{key:"epiloguesList",value:function(){return this.epilogues.epilogues.sort((function(e,t){return e.title.localeCompare(t.title)}))}},{key:"select",value:function(e,t){this.currentEpilogue=this.epilogues.selectEnding(e),this.currentEnding=t}},{key:"currentEndingMessages",value:function(){return void 0==this.currentEpilogue?[]:this.currentEpilogue.getEnding(this.currentEnding)}},{key:"currentEndingLabel",value:function(){return void 0==this.currentEpilogue?"":this.currentEpilogue.getEndpointLabel(this.currentEnding)}},{key:"parseMessages",value:function(e){return void 0==e?[]:Bt.parseLines(e)}},{key:"unselect",value:function(){this.currentEpilogue=void 0}},{key:"unlockedEpilogues",value:function(){var e=this;return this.epiloguesList().filter((function(t){return e.menu.isEpilogueUnlocked(t.id)}))}},{key:"unlockedEndings",value:function(e){var t=this;return e.getAllEndings().filter((function(n){return t.menu.isEndingUnlocked(e.id,n)}))}},{key:"nrOfAllUnlockedEndings",value:function(){var e,t=0,n=Object(ee["a"])(this.epiloguesList());try{for(n.s();!(e=n.n()).done;){var a=e.value;t+=this.unlockedEndings(a).length}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"nrOfAllEndings",value:function(){var e,t=0,n=Object(ee["a"])(this.epiloguesList());try{for(n.s();!(e=n.n()).done;){var a=e.value;t+=a.getAllEndings().length}}catch(i){n.e(i)}finally{n.f()}return t}}]),e}(),Gt=function(){function e(t){var n=this;Object(o["a"])(this,e),this.cheats=[new Vt("roll","(value): Rolls all dice to this value.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";n.state.stage.onDiceRoll([t])})),new Vt("pickCard","(name): Picks an unseen card from the current deck and adds it to your hand.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";var a=n.deck.allLevels.find((function(e){return e.name.toLowerCase()==t.toLowerCase()}));return void 0!=a?(n.state.pickedCards.addCard(a),"Added ".concat(a.name," to hand.")):"Could not find the ".concat(t," card in the current deck.")})),new Vt("addMana","(value): Adds this much mana.",(function(e,t){var n=e.game;return void 0==n?"That command cannot be used from this screen.":(n.player.addMana(t),"Added ".concat(t," mana."))})),new Vt("drawCard","(name): Picks an unseen card from the current deck and adds it to the list of cards drawn from the deck.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";var a=n.deck.allLevels.find((function(e){return e.name.toLowerCase()==t.toLowerCase()}));return void 0!=a?(n.state.drawnCards.addCard(a),"Added ".concat(a.name," to hand.")):"Could not find the ".concat(t," card in the current deck.")})),new Vt("redraw","(value): Discard currently drawn cards and replace them with this many.",(function(e,t){var n=e.game;if(void 0==n)return"That command cannot be used from this screen.";if("draw"!=n.state.stage.id&&"pick"!=n.state.stage.id&&"bonus"!=n.state.stage.id)return"Can not redraw cards in this stage.";var a=n.drawCards(t);return n.state.drawnCards=a,"pick"==n.state.stage.id&&(n.state.stage.deck=a),"Drew ".concat(t," cards, ").concat(n.deck.size()," cards remain in the current deck.")})),new Vt("deck","(): Shows info about the current deck.",(function(e,t){var n=e.game;return void 0==n?"That command cannot be used from this screen.":"Deck size: ".concat(n.state.deck.size(),", ").concat(n.state.deck.allLevels.length)})),new Vt("unlockAllCards","(): Permanently unlocks all cards in your collection.",(function(e){return e.collection.addDeck(je.referenceDeck()),e.save(),"Done"})),new Vt("unlockAllEndings","(): Permanently unlocks all endings in your collection.",(function(e){var t,n=new Ut(e),a=Object(ee["a"])(n.epiloguesList());try{for(a.s();!(t=a.n()).done;){var i,r=t.value,c=Object(ee["a"])(r.getAllEndings());try{for(c.s();!(i=c.n()).done;){var s=i.value;e.unlockEnding(r.id,s)}}catch(o){c.e(o)}finally{c.f()}}}catch(o){a.e(o)}finally{a.f()}return e.save(),"Done"})),new Vt("clearSave","(): Clears your save. Warning! your card collection will be lost.",(function(e){return e.deleteCollection(),"Save cleared"})),new Vt("diagnostics","(iterations): Runs debug diagnostics.",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return console.log("Running diagnostics..."),e.endings.correctnessSimulation(t),"Diagnostics completed."})),new Vt("toEnd","(id): Goes to the end with the specified ID.",(function(e,t){e.startGame();var n=new Dt(e.game);e.game.state.stage=n,n.onStart();var a=e.endings||new Wt,i=a.selectEnding(t);return n.createYourNewLifeButton(i),"End reached."})),new Vt("editor","(): Opens the editor.",(function(e){return e.showEndingsCollection(),"Editor opened."}))],this.activated=!1,this._menu=t,window.cheatmode=function(e){return n.activateCheats(e)}}return Object(U["a"])(e,[{key:"activateCheats",value:function(e){if("rose"!=e)return"Wrong password. Find out the current password by becoming a Patreon supporter!";this.activated=!0,this.registerCheats();var t,n="Cheatmode activated. Available commands: \n\n",a=Object(ee["a"])(this.cheats);try{for(a.s();!(t=a.n()).done;){var i=t.value;n+="".concat(i.name).concat(i.description,"\n")}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"registerCheats",value:function(){if(!this.activated)return!1;var e,t=Object(ee["a"])(this.cheats);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.activate(this._menu)}}catch(a){t.e(a)}finally{t.f()}}},{key:"menu",set:function(e){this._menu=e,this.registerCheats()}}]),e}(),$t=function(){function e(t,n,a){Object(o["a"])(this,e),this.name=t,this.version=n,this._state=JSON.stringify(a)}return Object(U["a"])(e,[{key:"state",get:function(){return JSON.parse(this._state)}}]),e}();Object(d["a"])([Q["g"]],$t.prototype,"name",void 0),Object(d["a"])([Q["g"]],$t.prototype,"version",void 0),Object(d["a"])([Q["g"]],$t.prototype,"_state",void 0);var Jt=function(){function e(){Object(o["a"])(this,e),this.saves=this.loadAllFromStorage()}return Object(U["a"])(e,[{key:"save",value:function(e){this.writeToLocalStorage(e)}},{key:"load",value:function(e){if(e in this.saves)return this.readFromLocalStorage(e)}},{key:"deleteFromLocalStorage",value:function(e){delete this.saves[e],localStorage.setItem("blushingdefeat-saves",JSON.stringify(this.saves))}},{key:"writeToLocalStorage",value:function(e){this.saves[e.name]=e,localStorage.setItem("blushingdefeat-saves",JSON.stringify(this.saves))}},{key:"readFromLocalStorage",value:function(t){return e.objectToSave(this.saves[t])}},{key:"loadAllFromStorage",value:function(){var e=localStorage.getItem("blushingdefeat-saves"),t={};return null!=e&&(t=JSON.parse(e)),t}}],[{key:"objectToSave",value:function(e){return Object(Q["a"])($t,e)}}]),e}(),Yt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(o["a"])(this,e),this._strictness=0,this.tag=t,this.name=n,this.description=a}return Object(U["a"])(e,[{key:"load",value:function(e){void 0!=e&&(this._strictness=e._strictness)}},{key:"strictness",get:function(){return this._strictness},set:function(e){this._strictness=e}}]),e}();Object(d["a"])([Q["g"]],Yt.prototype,"name",void 0),Object(d["a"])([Q["g"]],Yt.prototype,"description",void 0),Object(d["a"])([Q["g"]],Yt.prototype,"tag",void 0),Object(d["a"])([Q["g"]],Yt.prototype,"_strictness",void 0);var Xt=function(){function e(){Object(o["a"])(this,e),this.bannedCards=[],this.filters=[new Yt("expansion","Expansion","Changes in size to body parts."),new Yt("iq","Intelligence","Changes that primarily affect intelligence."),new Yt("doll","Doll","Changes towards a plastic, fake or doll-like appearance and behavior."),new Yt("pet","Pet","Changes that enforces pet-like behavior, like having to stand on all fours, wear a leash etc."),new Yt("animal","Mythological","Changes that give horns, ears, a tail etc. Note that you always remain primarily human."),new Yt("lactation","Lactation","Changes that cause lactation."),new Yt("reward","Reward","Don't care for rewards? Turn them off here.")],this.filters.sort((function(e,t){return e.name<t.name?-1:1}))}return Object(U["a"])(e,[{key:"load",value:function(e){var t=this;if(void 0!=e){var n,a=Object(ee["a"])(e.filters);try{var i=function(){var e=n.value,a=t.filters.find((function(t){return t.tag==e.tag}));if(void 0==a)return"continue";a.load(e)};for(a.s();!(n=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}void 0!=e.bannedCards&&(this.bannedCards=e.bannedCards)}}},{key:"banCard",value:function(e){this.bannedCards.push(e),je.bannedCards=new Set(this.bannedCards)}},{key:"unbanCard",value:function(e){this.bannedCards=this.bannedCards.filter((function(t){return t!=e})),je.bannedCards=new Set(this.bannedCards)}},{key:"isBanned",value:function(e){return void 0!=this.bannedCards.find((function(t){return t==e}))}},{key:"isFiltered",value:function(e){var t=je.lookup(e);return void 0==t?(console.warn("Could not find ".concat(e," while checking if it is filtered.")),!1):t.isFiltered(this.filters)}}]),e}();Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["e"])(Yt)))],Xt.prototype,"filters",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],Xt.prototype,"bannedCards",void 0);n("8a79");var Kt=n("c4e3"),Zt=n.n(Kt),Qt=n("5487"),en=n.n(Qt),tn=function(){function e(t,n,a,i,r,c,s){Object(o["a"])(this,e),this.cards=[],this.epilogueStrings=[],this._epilogues=[],this.id=t,this.version=a,this.name=n,this.authors=i,this.description=r,this.root=c,this.devmode=s}return Object(U["a"])(e,[{key:"toJSON",value:function(){return Object(Q["h"])(this)}},{key:"epilogues",get:function(){if(this._epilogues.length==this.epilogueStrings.length)return this._epilogues;this._epilogues=[];var e,t=Object(ee["a"])(this.epilogueStrings);try{for(t.s();!(e=t.n()).done;){var n=e.value,a=Ht.create(X.a.parse(n));a.id="".concat(this.id,".").concat(a.id),this._epilogues.push(a)}}catch(i){t.e(i)}finally{t.f()}return this._epilogues}}],[{key:"createFromZip",value:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(n){var a,i,r,c,s,o,u,l,d,h,f,b,g,v,O,p,j,m,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new Zt.a,t.next=3,i.loadAsync(n);case 3:return r=t.sent,c=Object.keys(r.files)[0],s={},t.t0=X.a,t.next=9,null===(a=r.file("".concat(c,"info.hjson")))||void 0===a?void 0:a.async("string");case 9:if(t.t1=t.sent,t.t1){t.next=12;break}t.t1="";case 12:t.t2=t.t1,o=t.t0.parse.call(t.t0,t.t2),u=[],l=[],d=0,h=Object.keys(r.files);case 17:if(!(d<h.length)){t.next=47;break}if(f=h[d],!f.startsWith("".concat(c,"cards/"))||!f.endsWith(".hjson")){t.next=28;break}return t.next=22,null===(b=r.file(f))||void 0===b?void 0:b.async("string");case 22:if(t.t3=t.sent,t.t3){t.next=25;break}t.t3="";case 25:g=t.t3,v=X.a.parse(g),u.push(v);case 28:if(!f.startsWith("".concat(c,"cards/"))||!f.endsWith(".webp")){t.next=36;break}return t.next=31,null===(O=r.file(f))||void 0===O?void 0:O.async("base64");case 31:if(t.t4=t.sent,t.t4){t.next=34;break}t.t4="";case 34:p=t.t4,s[f]="data:image/png;base64,".concat(p);case 36:if(!f.startsWith("".concat(c,"endings/"))||!f.endsWith(".hjson")){t.next=44;break}return t.next=39,null===(j=r.file(f))||void 0===j?void 0:j.async("string");case 39:if(t.t5=t.sent,t.t5){t.next=42;break}t.t5="";case 42:m=t.t5,l.push(m);case 44:d++,t.next=17;break;case 47:return y=e.create(o,c),y.cards=y.cards.concat(je.parseCards(u,(function(e){var t=s["".concat(c,"cards/").concat(e)];return t||""}),o.id)),y.epilogueStrings=l,y.epilogues,t.abrupt("return",y);case 52:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"create",value:function(t,n){var a=this.verifyId(t.id),i=this.verifyName(t.name),r=this.verifyVersion(t.version),c=this.verifyAuthors(t.authors),s=this.verifyDescription(t.description),o=this.verifyDevmode(t.devmode);return new e(a,i,r,c,s,n,o)}},{key:"verifyId",value:function(e){if(void 0==e||void 0==e.length||e.length<4)throw new Error('Bad mod id "'.concat(e,'".'));return e}},{key:"verifyName",value:function(e){if(void 0==e||void 0==e.length||e.length<1)throw new Error('Bad mod name "'.concat(e,'".'));return e}},{key:"verifyVersion",value:function(e){if(void 0==e)throw new Error("Mod must specify its version, but doesn't.");if(null==en.a.valid(e))throw new Error('Mod version "'.concat(e,'" is not a valid SemVer. Make sure that it follows the Semantic Versioning syntax.'));return e}},{key:"verifyAuthors",value:function(e){if(void 0==e||void 0==e.length||e.length<1)throw new Error('Bad mod author info "'.concat(e,'".'));return e}},{key:"verifyDescription",value:function(e){return void 0==e?"":e}},{key:"verifyDevmode",value:function(e){return void 0!=e&&e}}]),e}();Object(d["a"])([Q["g"]],tn.prototype,"id",void 0),Object(d["a"])([Q["g"]],tn.prototype,"name",void 0),Object(d["a"])([Q["g"]],tn.prototype,"version",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],tn.prototype,"authors",void 0),Object(d["a"])([Q["g"]],tn.prototype,"description",void 0),Object(d["a"])([Q["g"]],tn.prototype,"root",void 0),Object(d["a"])([Q["g"]],tn.prototype,"devmode",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["e"])(me)))],tn.prototype,"cards",void 0),Object(d["a"])([Object(Q["g"])(Object(Q["c"])(Object(Q["f"])()))],tn.prototype,"epilogueStrings",void 0);var nn=function(){function e(){var t=this;Object(o["a"])(this,e),this.state=Object(a["v"])({game:void 0,activeComponent:"StartMenu"}),this.saveSystem=new Jt,this.collection=Object(a["v"])(new je([])),this.settings=Object(a["v"])(new Xt),this.unlockedEndings={},this.mods={},ve().load().then((function(){var e=t.saveSystem.load("save-1");void 0!=e&&t.useSave(e),je.filters=t.settings.filters,je.bannedCards=new Set(t.settings.bannedCards),(void 0==t.endings||t.endings.epilogues.length<1)&&alert("ERROR! No endings could be loaded. Refresh this page to try again.\n\nIf this message keeps appearing, make sure you are connected to the internet, and try a different browser. If that doesn't work, contact Gardamuse, or comment that you received this error multiple times,including what browser and device you are using.")})),this.cheatmode=new Gt(this)}return Object(U["a"])(e,[{key:"startGame",value:function(){this.state.game=new Ft(this),this.activeComponent=this.game.activeComponent}},{key:"endGame",value:function(){this.saveHand(),this.state.game=void 0,this.activeComponent="StartMenu"}},{key:"saveHand",value:function(){this.collection.addDeck(this.state.game.player.hand),this.save()}},{key:"buildSave",value:function(e){for(var t=[],n=0,i=Object.keys(this.mods);n<i.length;n++){var r=i[n];t.push(this.mods[r])}return new $t(e,this.version,{collection:Object(a["D"])(this.collection.unique()).cards.map((function(e){return{id:e.id}})),settings:Object(a["D"])(this.settings),unlockedEndings:Object(a["D"])(this.unlockedEndings),mods:Object(a["D"])(t)})}},{key:"useSave",value:function(e){var t=this;if(this.endings=new Wt,void 0!=e.state.mods){var n,i=Object(ee["a"])(e.state.mods);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=Object(Q["a"])(tn,r);this.mountMod(c),this.mods[r.id]=c}}catch(l){i.e(l)}finally{i.f()}}this.collection=Object(a["v"])(je.createFromCardStates(e.state.collection));for(var s=0,o=Object.values(this.mods);s<o.length;s++){var u=o[s];u.devmode&&u.cards.map((function(e){return t.collection.addCard(e)}))}this.collection.sortByFamily(),this.unlockedEndings=e.state.unlockedEndings||{},this.collection.size()!=e.state.collection.length&&console.info("Not all saved cards were loaded. Expected size ".concat(e.state.collection.length,", actual size ").concat(this.collection.size(),".")),this.settings.load(e.state.settings)}},{key:"save",value:function(){this.collection.sortByFamily(),this.saveSystem.save(this.buildSave("save-1"))}},{key:"exportSave",value:function(){this.save(),Z.download("savegame.dd",JSON.stringify(Object(Q["h"])($t,this.buildSave("save-1"))))}},{key:"importSave",value:function(e){var t=this,n=e.target.files[0],a=new FileReader;a.addEventListener("load",(function(e){var n=e.target.result,a=Jt.objectToSave(JSON.parse(n));t.useSave(a),t.save(),console.log("Imported save ".concat(a.name,", version ").concat(a.version,"."))})),a.readAsText(n)}},{key:"loadMod",value:function(e){var t=this,n=e.target.files[0];tn.createFromZip(n).then((function(e){t.mods[e.id]=e,je.resetStaticState(),t.save(),t.useSave(t.saveSystem.load("save-1"))})).catch((function(e){alert("Mod loading failed with the following error.\n\n".concat(e.message))}))}},{key:"unloadMod",value:function(e){delete this.mods[e],this.save(),je.resetStaticState(),this.useSave(this.saveSystem.load("save-1"))}},{key:"mountMod",value:function(e){var t,n=Object(ee["a"])(e.cards);try{for(n.s();!(t=n.n()).done;){var a=t.value;je.addReferenceCard(a)}}catch(o){n.e(o)}finally{n.f()}var i,r=Object(ee["a"])(e.epilogues);try{for(r.s();!(i=r.n()).done;){var c,s=i.value;null===(c=this.endings)||void 0===c||c.addEpilogue(s)}}catch(o){r.e(o)}finally{r.f()}}},{key:"isEpilogueUnlocked",value:function(e){return e in this.unlockedEndings}},{key:"isEndingUnlocked",value:function(e,t){if(this.isEpilogueUnlocked(e)){var n=this.unlockedEndings[e];if(t in n)return!0}return!1}},{key:"unlockEnding",value:function(e,t){this.isEpilogueUnlocked(e)||(this.unlockedEndings[e]={}),this.unlockedEndings[e][t]=!0,this.save()}},{key:"showCollection",value:function(){this.activeComponent="CollectionScreen"}},{key:"deleteCollection",value:function(){this.collection.removeAllCards(),this.unlockedEndings={},this.save()}},{key:"showSettings",value:function(){this.activeComponent="SettingsScreen"}},{key:"showMods",value:function(){this.activeComponent="ModScreen"}},{key:"showEndingsCollection",value:function(){this.activeComponent="EndingsCollectionWindow.vue"}},{key:"cardsFilteredString",value:function(){return"".concat((new je).createNew().size()," / ").concat(je.referenceDeck().size()," cards and ").concat((new je).createNew().unpack().size()," / ").concat(je.referenceDeck().unpack().size()," levels.")}},{key:"isFilteringTooMuch",value:function(){return(new je).createNew().size()<Ft.MAX_ROUNDS*Pt.DICE_SIZE*Pt.DICE_COUNT+Ft.MAX_BONUS_ROLLS}},{key:"artCredits",value:function(){var e,t=JSON.parse(ve().artistsString.value),n=Object(ee["a"])(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.cards=[]}}catch(d){n.e(d)}finally{n.f()}var i,r=je.referenceDeck(),c=Object(ee["a"])(r.allLevels);try{var s=function(){var e=i.value,n=t.find((function(t){return t.artist==e.artist}));if(void 0==n)return"continue";e.isParent?n.cards.push("".concat(e.name)):e.hasParent?n.cards.push("".concat(e.parent.name)):n.cards.push("".concat(e.name))};for(c.s();!(i=c.n()).done;)s()}catch(d){c.e(d)}finally{c.f()}var o,u=Object(ee["a"])(t);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.cards=Object(Ot["a"])(new Set(l.cards)),l.cards.sort()}}catch(d){u.e(d)}finally{u.f()}return t}},{key:"patreonCredits",value:function(){var e=ve().patreonCredits.value;return e}},{key:"game",get:function(){return this.state.game}},{key:"activeComponent",get:function(){return void 0!=this.game?this.game.activeComponent:this.state.activeComponent},set:function(e){this.state.activeComponent=e}},{key:"patchNotes",get:function(){return JSON.parse(ve().patchNotesString.value)}},{key:"version",get:function(){return e.GAME_VERSION}}]),e}();nn.GAME_VERSION="1.5.0-beta.4";var an=Object(a["H"])("data-v-1393f094");Object(a["u"])("data-v-1393f094");var rn={key:0,class:"menu-view"},cn={class:"window text-window"},sn={class:"title-row"},on=Object(a["g"])("p",null,null,-1),un=Object(a["g"])("h1",null,"Ditzy Dice",-1),ln=Object(a["g"])("div",{class:"window start-menu-text"},[Object(a["g"])("p",null,"Greetings!"),Object(a["g"])("p",null,[Object(a["f"])("This is an "),Object(a["g"])("b",null,"erotic transformation"),Object(a["f"])(" game. That means "),Object(a["g"])("b",null,"sexual content"),Object(a["f"])(", focusing on bodily and mental transformations related to bimbofication. If you are not comfortable with, or legally allowed to view such content, turn around now. ")]),Object(a["g"])("p",null,"Otherwise, if you have feedback or questions, let me know in the comments!")],-1),dn={class:"start-menu-buttons"},hn=Object(a["g"])("h2",null,"Start",-1),fn=Object(a["g"])("h3",null,"My Collection",-1),bn=Object(a["g"])("h3",null,"Settings",-1),gn=Object(a["g"])("h3",null,"Mods",-1),vn=Object(a["g"])("h3",null,"Patch Notes",-1),On=Object(a["g"])("h3",null,"Credits",-1),pn=Object(a["g"])("h3",null,"Exit to Blushing Defeat",-1),jn={class:"window extras"},mn=Object(a["f"])(" Thank you for your support on "),yn=Object(a["g"])("span",{style:{color:"#f96854"}},"Patreon",-1),kn=Object(a["f"])("! "),wn=Object(a["g"])("h3",null,"An extra thank you to",-1),Cn={class:"extra-thanks"},Sn={class:"credit"},xn={class:"window more"},_n=Object(a["g"])("h2",null,"More on Blushing Defeat",-1),Tn=Object(a["f"])(" Cowgirl Dairy Farm "),Dn=Object(a["f"])(" Bimbo Personality Quiz "),Bn=Object(a["f"])(" Bimbofication Booth "),Mn=Object(a["f"])(" Mispell ");Object(a["r"])();var Rn=an((function(e,t,i,r,c,s){var o=Object(a["z"])("TextButton"),u=Object(a["z"])("PatreonButton2"),l=Object(a["z"])("RelatedThumb");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",rn,[Object(a["g"])("div",cn,[Object(a["g"])("div",sn,[on,un,Object(a["g"])("p",null,"v"+Object(a["C"])(e.menu.version),1)]),ln,Object(a["g"])("div",dn,[Object(a["g"])(o,{class:"farm-button start-button",onClick:t[1]||(t[1]=function(t){return e.menu.startGame()})},{default:an((function(){return[hn]})),_:1}),Object(a["g"])(o,{class:"farm-button collection-button",onClick:t[2]||(t[2]=function(t){return e.menu.showCollection()})},{default:an((function(){return[fn]})),_:1}),Object(a["g"])(o,{class:"farm-button settings-button",onClick:t[3]||(t[3]=function(t){return e.menu.showSettings()})},{default:an((function(){return[bn]})),_:1}),Object(a["g"])(o,{class:"farm-button mods-button",onClick:t[4]||(t[4]=function(t){return e.menu.showMods()})},{default:an((function(){return[gn]})),_:1}),Object(a["g"])(o,{class:"farm-button patch-button",onClick:t[5]||(t[5]=function(t){return e.$emit("goto-view","PatchNotesScreen")})},{default:an((function(){return[vn]})),_:1}),Object(a["g"])(o,{class:"farm-button credits-button",onClick:t[6]||(t[6]=function(t){return e.$emit("goto-view","CreditsScreen")})},{default:an((function(){return[On]})),_:1}),Object(a["g"])(o,{class:"farm-button exit-button",onClick:t[7]||(t[7]=function(t){return e.window().location.href="https://www.blushingdefeat.com/play/"})},{default:an((function(){return[pn]})),_:1})])]),Object(a["g"])("div",jn,[Object(a["g"])(u,{image:n("157a"),link:"https://www.patreon.com/gardamuse",class:"patreon"},{default:an((function(){return[mn,yn,kn]})),_:1},8,["image"]),wn,Object(a["g"])("div",Cn,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.patreonCredits(),(function(e){return Object(a["q"])(),Object(a["d"])("p",Sn,Object(a["C"])(e.name),1)})),256))])]),Object(a["g"])("div",xn,[_n,Object(a["g"])(l,{image:"https://www.blushingdefeat.com/projects/cowgirl-dairy-farm/thumb-2.webp",link:"https://www.blushingdefeat.com/play/cowgirl-dairy-farm/"},{default:an((function(){return[Tn]})),_:1}),Object(a["g"])(l,{image:"https://www.blushingdefeat.com/play/bimbo-personality-quiz/thumb.jpg",link:"https://www.blushingdefeat.com/play/bimbo-personality-quiz/"},{default:an((function(){return[Dn]})),_:1}),Object(a["g"])(l,{image:"https://www.blushingdefeat.com/projects/bimbo-booth/thumb.jpg",link:"https://www.blushingdefeat.com/bimbo-booth/"},{default:an((function(){return[Bn]})),_:1}),Object(a["g"])(l,{image:"https://www.blushingdefeat.com/projects/mispell/misspell-thumb.png",link:"https://www.blushingdefeat.com/mispell/"},{default:an((function(){return[Mn]})),_:1})])])):Object(a["e"])("",!0)})),qn=Object(a["H"])("data-v-d5159fe2"),En=qn((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("a",{href:"https://www.patreon.com/gardamuse",style:e.cssVars,class:"patreon-button"},null,4)})),Nn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Nn=Object(d["a"])([Object(h["a"])({props:{label:String},computed:{cssVars:function(){return{"--background-image":"url("+n("ba9d")+")"}}}})],Nn);var An=Nn;n("92d9");An.render=En,An.__scopeId="data-v-d5159fe2";var Ln=An,Pn=(n("9911"),Object(a["H"])("data-v-072ed195")),In=Pn((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("a",{class:"related-thumb",href:e.link},[Object(a["g"])("h3",null,[Object(a["y"])(e.$slots,"default")]),Object(a["g"])("img",{src:e.image},null,8,["src"])],8,["href"])})),zn=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);zn=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PatreonButton:Ln},props:{image:String,link:String},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){return Object(G["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})],zn);var Fn=zn;n("d9d0");Fn.render=In,Fn.__scopeId="data-v-072ed195";var Vn=Fn,Hn=Object(a["H"])("data-v-3333a497"),Wn=Hn((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("a",{class:"patreon-button-2",href:e.link},[Object(a["g"])("h2",null,[Object(a["y"])(e.$slots,"default")]),Object(a["g"])("img",{src:e.image},null,8,["src"])],8,["href"])})),Un=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Un=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PatreonButton:Ln},props:{image:String,link:String},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){return Object(G["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})],Un);var Gn=Un;n("b783");Gn.render=Wn,Gn.__scopeId="data-v-3333a497";var $n=Gn,Jn=Object(a["H"])("data-v-02320d62");Object(a["u"])("data-v-02320d62");var Yn={class:"menu-view"},Xn=Object(a["g"])("h2",{style:{margin:"0"}},"Patch Notes",-1),Kn={class:"blush-list"},Zn={class:"patch-window"},Qn={key:0},ea={key:1},ta={style:{"font-weight":"normal","text-align":"right"}};Object(a["r"])();var na=Jn((function(e,t,n,i,r,c){var s=Object(a["z"])("BlushWindow");return Object(a["q"])(),Object(a["d"])("div",Yn,[Object(a["g"])(s,{onClose:t[1]||(t[1]=function(t){return e.$emit("close")})},{title:Jn((function(){return[Xn]})),default:Jn((function(){return[Object(a["g"])("div",Kn,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.patchNotes,(function(e){return Object(a["q"])(),Object(a["d"])("div",Zn,[e.name.length>0?(Object(a["q"])(),Object(a["d"])("h2",Qn,Object(a["C"])(e.id)+" - "+Object(a["C"])(e.name),1)):(Object(a["q"])(),Object(a["d"])("h2",ea,Object(a["C"])(e.id),1)),Object(a["g"])("h4",ta,Object(a["C"])(e.date),1),Object(a["g"])("div",{class:"md-patchnotes",style:{"grid-column":"span 2"},innerHTML:e.text},null,8,["innerHTML"])])})),256))])]})),_:1})])})),aa=Object(a["H"])("data-v-640bcb6c");Object(a["u"])("data-v-640bcb6c");var ia={class:"blush-window"},ra=Object(a["g"])("h3",null,"X",-1),ca={class:"content"};Object(a["r"])();var sa=aa((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",ia,[Object(a["y"])(e.$slots,"title"),e.noCross?Object(a["e"])("",!0):(Object(a["q"])(),Object(a["d"])(s,{key:0,class:"farm-button close-button",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},{default:aa((function(){return[ra]})),_:1})),Object(a["g"])("div",ca,[Object(a["y"])(e.$slots,"default")])])})),oa=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.noCross=!1,e}return n}(h["b"]);oa=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PlayingCard:oe},props:{noCross:Boolean},emits:["close"],methods:{},computed:{util:function(){return Z}}})],oa);var ua=oa;n("8d53");ua.render=sa,ua.__scopeId="data-v-640bcb6c";var la=ua,da=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);da=Object(d["a"])([Object(h["a"])({components:{TextButton:R,BlushWindow:la},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],da);var ha=da;n("e7c0"),n("0bb2");ha.render=na,ha.__scopeId="data-v-02320d62";var fa=ha,ba=Object(a["H"])("data-v-2e56c106");Object(a["u"])("data-v-2e56c106");var ga={key:0,style:{margin:"0"}},va={key:1,style:{margin:"0"}},Oa={key:0,class:"blush-list"},pa={class:"patch-window"},ja={style:{"grid-column":"1 / -1"}},ma={class:"text",style:{"font-size":"0.6em","font-weight":"normal"}};Object(a["r"])();var ya=ba((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("ChatView"),u=Object(a["z"])("BlushWindow");return Object(a["q"])(),Object(a["d"])(u,{class:"endings-collection-window",onClose:t[1]||(t[1]=function(t){return e.onClose()}),"no-cross":void 0===e.endingsCollection.currentEpilogue},{title:ba((function(){return[void 0===e.endingsCollection.currentEpilogue?(Object(a["q"])(),Object(a["d"])("h2",ga,"Epilogues")):(Object(a["q"])(),Object(a["d"])("h2",va,Object(a["C"])(e.endingsCollection.currentEndingLabel()),1))]})),default:ba((function(){return[void 0===e.endingsCollection.currentEpilogue?(Object(a["q"])(),Object(a["d"])("div",Oa,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.endingsCollection.unlockedEpilogues(),(function(t){return Object(a["q"])(),Object(a["d"])("div",pa,[Object(a["g"])("h2",ja,[Object(a["f"])(Object(a["C"])(t.title)+" ",1),Object(a["g"])("span",ma," Unlocked endings: "+Object(a["C"])(e.endingsCollection.unlockedEndings(t).length)+" / "+Object(a["C"])(t.getAllEndings().length),1)]),(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.endingsCollection.unlockedEndings(t),(function(n){return Object(a["q"])(),Object(a["d"])(s,{key:n,class:"ending-button",onClick:function(a){return e.endingsCollection.select(t.id,n)}},{default:ba((function(){return[Object(a["g"])("b",null,Object(a["C"])(t.getEndpointLabel(n)),1)]})),_:2},1032,["onClick"])})),128))])})),256))])):(Object(a["q"])(),Object(a["d"])(o,{key:1,lines:e.endingsCollection.currentEndingMessages()},null,8,["lines"]))]})),_:1},8,["no-cross"])})),ka=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.endingsCollection=new Ut(e.menu),e}return n}(h["b"]);ka=Object(d["a"])([Object(h["a"])({components:{ChatView:Je,TextButton:R,BlushWindow:la},props:{menu:Object,endingsCollection:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window})),onClose:function(){void 0==this.endingsCollection.currentEpilogue?this.$emit("close"):this.endingsCollection.unselect()}}})],ka);var wa=ka;n("ee3e"),n("9158");wa.render=ya,wa.__scopeId="data-v-2e56c106";var Ca=wa,Sa=Object(a["H"])("data-v-754d163e");Object(a["u"])("data-v-754d163e");var xa={class:"settings-screen"},_a={class:"mods"},Ta=Object(a["g"])("h2",null,"Mods",-1),Da={class:"button-row"},Ba=Object(a["g"])("p",{style:{margin:"0"}},"Click the button and then select a mod zip file to load it. It is recommended to back up your save file first. There may be no error message if something goes wrong.",-1),Ma=Object(a["g"])("label",{for:"mod-import",class:"load-button"},[Object(a["g"])("b",null,"Load Mod")],-1),Ra=Object(a["g"])("p",null,"Your save file may grow very large if you load many mods or mods with unoptimized images.",-1),qa=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Only load mods from trusted sources!")],-1),Ea=Object(a["g"])("div",null,[Object(a["g"])("h2",null,"Active Mods")],-1),Na={class:"mod"},Aa={class:"mod-info"},La={class:"mod-title"},Pa={class:"mod-version"},Ia={class:"mod-authors"},za=Object(a["f"])(" by "),Fa={key:0},Va={class:"mod-description"},Ha={class:"mod-cards"},Wa={class:"mod-epilogues"},Ua=Object(a["g"])("h3",null,"Remove mod",-1),Ga=Object(a["g"])("i",null,"All mod content will be immediately removed from your save file.",-1),$a=Object(a["g"])("h2",null,"Create Your Own Mod!",-1),Ja=Object(a["g"])("p",null,"If you feel there is some content missing from the game, you may be able to create a mod that adds it! Mods can currently:",-1),Ya=Object(a["g"])("p",null,"Override existing cards.",-1),Xa=Object(a["g"])("p",null,"Add new cards.",-1),Ka=Object(a["g"])("hr",null,null,-1),Za=Object(a["g"])("h2",null,"How to Create a Mod",-1),Qa=Object(a["g"])("p",null,[Object(a["f"])("Mods are written in "),Object(a["g"])("a",{href:"https://hjson.github.io/"},"Hjson"),Object(a["f"])(". Don't worry, Hjson files are just text and can be opened in any plain text editor such as Notepad. I can recommend "),Object(a["g"])("a",{href:"https://atom.io/"},"Atom"),Object(a["f"])(" or "),Object(a["g"])("a",{href:"https://notepad-plus-plus.org/"},"Notepad++"),Object(a["f"])(".")],-1),ei=Object(a["g"])("p",null,'To create a mod, first create a folder for your mod, and then a file called "info.hjson" inside it. This file will contain information about your mod, such as its name. Inside your folder, you can now create more folders, depending on what you want to add. These folders need to have specific names, depending on what they will contain. For instance, to add cards, you need to add a folder called "cards".',-1),ti=Object(a["g"])("p",null,[Object(a["f"])("Rather than writing long instructions "),Object(a["g"])("b",null,[Object(a["f"])("I have created an "),Object(a["g"])("a",{href:""},"Example Mod")]),Object(a["f"])(' that you can download. Look at how that mod adds the type of content you want to do, and do it the same way. The mod files also contain comments (text preceded by "//") that will explain what everything does.')],-1),ni=Object(a["g"])("hr",null,null,-1),ai=Object(a["g"])("h2",null,"Extra Details",-1),ii=Object(a["g"])("p",null,[Object(a["f"])("Mod version must be specified using valid "),Object(a["g"])("a",{href:"https://semver.org/"},"Semantic Versioning"),Object(a["f"])(".")],-1),ri=Object(a["g"])("p",null,"It is not possible to override only a subcard. In that case you must override the entire card and all its levels.",-1),ci=Object(a["g"])("hr",null,null,-1),si=Object(a["g"])("h2",null,"Tags",-1),oi=Object(a["g"])("p",null,"Cards can have any number of tags. These tags are used by content filters, and to determine which ending the player fulfills. Tags on a parent card are inherited by all its subcards, but the subcards can also add its own tags.",-1),ui=Object(a["g"])("p",null,"Currently, the following tags are in use:",-1),li={style:{display:"flex","flex-wrap":"wrap"}},di={style:{margin:"0 5px"}},hi=Object(a["g"])("p",null,'The "extreme" tag is used to indicate that this card is an extreme version of one of its other tags.',-1),fi=Object(a["g"])("hr",null,null,-1),bi=Object(a["g"])("h2",null,"Card Data",-1),gi=Object(a["g"])("p",null,"This list shows all card ids, as well as the tags for different cards. This includes cards in currently loaded mods. You'll want to refer to this list if you're looking to override an existing card.",-1),vi={class:"card-entry"},Oi={class:"label"},pi={class:"card-data"},ji=Object(a["g"])("p",{style:{margin:"0"}},"Tags:",-1),mi={class:"tags"},yi=Object(a["g"])("p",{style:{margin:"0"}},"Ids:",-1),ki=Object(a["g"])("h2",null,"Epilogue Simulation",-1),wi=Object(a["g"])("p",null,"When adding an epilogue it may be difficult to know how strict to make the requirements. This tool lets you simulate a number of games where the player picks cards at random, and then tell you how many of those games each epilogue was fulfilled and how many times the epilogue was available for the user to pick at the end screen. (These numbers usually differ since different endings have different priority.) Out of the times each epilogue was available, you are also able to see how many times other epilogues were available alongside it.",-1),Ci=Object(a["g"])("p",null,"The page may become unresponsive for a few seconds while simulating.",-1),Si={style:{display:"grid","grid-template-columns":"1fr 1fr"}},xi=Object(a["f"])("Simulate 100 games"),_i=Object(a["f"])("Simulate 1000 games"),Ti=Object(a["g"])("pre",{id:"epilogue-simulation-output"},null,-1);Object(a["r"])();var Di=Sa((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("BlushList"),u=Object(a["z"])("TabWindow");return Object(a["q"])(),Object(a["d"])("div",xa,[Object(a["g"])(u,{tabs:["mods","modCreation","tools","exit"],onClose:t[4]||(t[4]=function(t){return e.$emit("close")})},{mods:Sa((function(){return[Object(a["g"])("div",_a,[Object(a["g"])("div",null,[Ta,Object(a["g"])("div",Da,[Ba,Object(a["g"])("div",null,[Ma,Object(a["g"])("input",{id:"mod-import",type:"file",accept:".zip",onChange:t[1]||(t[1]=function(){var t;return e.menu.loadMod&&(t=e.menu).loadMod.apply(t,arguments)}),style:{display:"none"}},null,32)])]),Ra,qa]),Ea,Object(a["g"])(o,{style:{overflow:"auto"}},{default:Sa((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.mods,(function(t){return Object(a["q"])(),Object(a["d"])("div",Na,[Object(a["g"])("div",Aa,[Object(a["g"])("h3",La,Object(a["C"])(t.name),1),Object(a["g"])("p",Pa,"v"+Object(a["C"])(t.version),1),Object(a["g"])("p",Ia,[za,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(t.authors,(function(e,n){return Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["f"])(Object(a["C"])(e),1),n+1<t.authors.length?(Object(a["q"])(),Object(a["d"])("span",Fa,", ")):Object(a["e"])("",!0)],64)})),256))]),Object(a["g"])("p",Va,Object(a["C"])(t.description),1),Object(a["g"])("p",Ha,"Cards: "+Object(a["C"])(t.cards.length),1),Object(a["g"])("p",Wa,"Epilogues: "+Object(a["C"])(t.epilogues.length),1)]),Object(a["g"])(s,{class:"delete-save-button",onClick:function(n){return e.removeMod(t.id)}},{default:Sa((function(){return[Ua,Ga]})),_:2},1032,["onClick"])])})),256))]})),_:1})])]})),modCreation:Sa((function(){return[$a,Ja,Object(a["g"])(o,{class:"mod-supports"},{default:Sa((function(){return[Ya,Xa]})),_:1}),Ka,Za,Qa,ei,ti,ni,ai,ii,ri,ci,si,oi,ui,Object(a["g"])(o,{style:{height:"50px"}},{default:Sa((function(){return[Object(a["g"])("div",li,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.allTags,(function(e){return Object(a["q"])(),Object(a["d"])("p",di,'"'+Object(a["C"])(e)+'"',1)})),256))])]})),_:1}),hi,fi,bi,gi,Object(a["g"])(o,{class:"card-ids"},{default:Sa((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.refDeck.cards.sort((function(e,t){return e.name.localeCompare(t.name)})),(function(e){return Object(a["q"])(),Object(a["d"])("div",vi,[Object(a["g"])("div",Oi,[Object(a["g"])("h3",null,Object(a["C"])(e.name),1)]),Object(a["g"])("div",pi,[ji,Object(a["g"])("div",mi,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.tags,(function(e){return Object(a["q"])(),Object(a["d"])("code",null,'"'+Object(a["C"])(e)+'"',1)})),256))]),yi,Object(a["g"])("code",null,'"'+Object(a["C"])(e.id)+'"',1),e.isParent?(Object(a["q"])(!0),Object(a["d"])(a["a"],{key:0},Object(a["x"])(e.subcards,(function(e){return Object(a["q"])(),Object(a["d"])("code",{key:e.id},'"'+Object(a["C"])(e.id)+'"',1)})),128)):Object(a["e"])("",!0)])])})),256))]})),_:1})]})),tools:Sa((function(){return[ki,wi,Ci,Object(a["g"])("div",Si,[Object(a["g"])(s,{class:"load-button",onClick:t[2]||(t[2]=function(t){return e.simulateEpilogues(100)})},{default:Sa((function(){return[xi]})),_:1}),Object(a["g"])(s,{class:"load-button",onClick:t[3]||(t[3]=function(t){return e.simulateEpilogues(1e3)})},{default:Sa((function(){return[_i]})),_:1})]),Ti]})),_:1})])})),Bi=Object(a["H"])("data-v-27444a3f");Object(a["u"])("data-v-27444a3f");var Mi={class:"credit"},Ri={style:{"font-size":"0.8em"}},qi={style:{"font-size":"0.8em",color:"#ccc"}};Object(a["r"])();var Ei=Bi((function(e,t,n,i,r,c){return Object(a["q"])(),Object(a["d"])("div",Mi,[Object(a["g"])("h3",null,[Object(a["f"])(Object(a["C"])(e.name)+" | ",1),Object(a["g"])("span",Ri,[Object(a["g"])("a",{href:e.link,target:"_blank"},Object(a["C"])(e.linkText),9,["href"])])]),Object(a["g"])("p",qi,[Object(a["y"])(e.$slots,"default")])])})),Ni=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Ni=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PatreonButton:Ln},props:{name:String,link:String,linkText:String},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){return Object(G["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})],Ni);var Ai=Ni;n("9b25");Ai.render=Ei,Ai.__scopeId="data-v-27444a3f";var Li=Ai,Pi=Object(a["H"])("data-v-73496115");Object(a["u"])("data-v-73496115");var Ii={class:"filter-window"},zi=Object(a["g"])("h2",null,"Content Filters",-1),Fi={key:0},Vi={key:1},Hi=Object(a["g"])("p",null,"The game generally isn't very extreme, but you may not like everything. Filters will try to remove most of the content you are not interested in.",-1),Wi=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Tip:"),Object(a["f"])(' Remove only what you actually dislike, not what makes for a "bad end", since those are often very fun.')],-1),Ui=Object(a["g"])("p",null,[Object(a["g"])("b",null,"All"),Object(a["f"])(" - Include all content in this category.")],-1),Gi=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Some"),Object(a["f"])(" - Do not include extreme content in this category. Example: No immobilizingly large breast expansion.")],-1),$i=Object(a["g"])("p",null,[Object(a["g"])("b",null,"None"),Object(a["f"])(" - Remove as much content in this category as possible.")],-1),Ji={class:"filter-entry"},Yi={class:"label"},Xi=Object(a["g"])("h4",null,"All",-1),Ki=Object(a["g"])("h4",null,"Some",-1),Zi=Object(a["g"])("h4",null,"None",-1);Object(a["r"])();var Qi=Pi((function(e,t,n,i,r,c){var s=Object(a["z"])("BlushList"),o=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",Ii,[Object(a["g"])("div",null,[zi,e.menu.isFilteringTooMuch()?(Object(a["q"])(),Object(a["d"])("h3",Vi," Currently including "+Object(a["C"])(e.menu.cardsFilteredString())+". WARNING: There may not be enough cards left. ",1)):(Object(a["q"])(),Object(a["d"])("h3",Fi,"Currently including "+Object(a["C"])(e.menu.cardsFilteredString()),1)),Hi,Wi]),Object(a["g"])(s,{class:"instructions"},{default:Pi((function(){return[Ui,Gi,$i]})),_:1}),Object(a["g"])(s,{class:"filter-entries"},{default:Pi((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.settings.filters,(function(t){return Object(a["q"])(),Object(a["d"])("div",Ji,[Object(a["g"])("div",Yi,[Object(a["g"])("h3",null,Object(a["C"])(t.name),1),Object(a["g"])("p",null,Object(a["C"])(t.description),1)]),Object(a["g"])(o,{style:{"grid-area":"b1"},class:{"selected-green":0===t.strictness},onClick:function(n){return e.setStrictness(t,0)}},{default:Pi((function(){return[Xi]})),_:2},1032,["class","onClick"]),Object(a["g"])(o,{style:{"grid-area":"b2"},class:{"selected-yellow":1===t.strictness},onClick:function(n){return e.setStrictness(t,1)}},{default:Pi((function(){return[Ki]})),_:2},1032,["class","onClick"]),Object(a["g"])(o,{style:{"grid-area":"b3"},class:{"selected-red":2===t.strictness},onClick:function(n){return e.setStrictness(t,2)}},{default:Pi((function(){return[Zi]})),_:2},1032,["class","onClick"])])})),256))]})),_:1})])})),er=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.noCross=!1,e}return n}(h["b"]);er=Object(d["a"])([Object(h["a"])({components:{TextButton:R,BlushWindow:la,BlushList:Ue},props:{menu:Object,noCross:Boolean},emits:["close"],methods:{setStrictness:function(e,t){e.strictness=t,this.menu.save()}},computed:{util:function(){return Z}}})],er);var tr=er;n("3fd7");tr.render=Qi,tr.__scopeId="data-v-73496115";var nr=tr,ar=Object(a["H"])("data-v-e79496f8");Object(a["u"])("data-v-e79496f8");var ir={class:"tab-window"},rr={class:"tabs"},cr={class:"tab-label"},sr={class:"content-window"},or={class:"content"};Object(a["r"])();var ur=ar((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton");return Object(a["q"])(),Object(a["d"])("div",ir,[Object(a["g"])("div",rr,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.tabs,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t,class:{"active-tab":t===e.activeTab},onClick:function(n){return e.activateTab(t)}},{default:ar((function(){return[Object(a["g"])("h3",cr,Object(a["C"])(e.util.camelToTitleCase(t)),1)]})),_:2},1032,["class","onClick"])})),128))]),Object(a["g"])("div",sr,[Object(a["g"])("div",or,[Object(a["y"])(e.$slots,e.activeTab)])])])})),lr=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.tabs=[],e.activeTab="",e}return n}(h["b"]);lr=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PlayingCard:oe},props:{tabs:Array},emits:["close","activatedTab"],methods:{activateTab:function(e){this.activeTab=e,this.$emit("activatedTab",e),"exit"!=e&&"close"!=e||this.$emit("close")}},computed:{util:function(){return Z}},created:function(){this.activateTab(this.tabs[0])}})],lr);var dr=lr;n("7140");dr.render=ur,dr.__scopeId="data-v-e79496f8";var hr=dr,fr=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);fr=Object(d["a"])([Object(h["a"])({components:{BlushList:Ue,TextButton:R,Credit:Li,FilterWindow:nr,BlushWindow:la,TabWindow:hr},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window})),deleteCollection:function(){confirm("Are you sure you wish to delete your card collection? This can't be undone.")&&this.menu.deleteCollection()},removeMod:function(e){confirm("Unloading this mod will remove all its data from your save file. If you wish to update this mod, just load the new version instead.\n\nAre you sure you want to remove this mod?")&&this.menu.unloadMod(e)},simulateEpilogues:function(e){var t=document.getElementById("epilogue-simulation-output");if(null!=t){t.innerText="";var n=function(e){t.innerText+=e+"\n"};this.menu.endings.correctnessSimulation(e,n)}else console.error("Could not find log field.")}},computed:{util:function(){return Z},refDeck:function(){return je.referenceDeck()},allTags:function(){var e,t=new Set,n=Object(ee["a"])(je.referenceDeck().cards);try{for(n.s();!(e=n.n()).done;){var a,i=e.value,r=Object(ee["a"])(i.tags);try{for(r.s();!(a=r.n()).done;){var c=a.value;t.add(c)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){n.e(s)}finally{n.f()}return Object(Ot["a"])(t.values()).sort()}}})],fr);var br=fr;n("9512");br.render=Di,br.__scopeId="data-v-754d163e";var gr=br,vr=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);vr=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PatreonButton:Ln,PatreonButton2:$n,RelatedThumb:Vn,PatchNotesScreen:fa,EndingsCollectionScreen:Ca,ModScreen:gr},props:{menu:Object},emits:["goto-view","close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],vr);var Or=vr;n("fe42");Or.render=Rn,Or.__scopeId="data-v-1393f094";var pr=Or,jr=Object(a["H"])("data-v-5f4c2c54");Object(a["u"])("data-v-5f4c2c54");var mr={key:0,class:"milkfarm dialogue-view"};Object(a["r"])();var yr=jr((function(e,t,n,i,r,c){var s=Object(a["z"])("DialogueCard");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",mr,[Object(a["g"])(s,{menu:e.menu,title:"Ditzy Dice"},null,8,["menu"])])):Object(a["e"])("",!0)})),kr=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);kr=Object(d["a"])([Object(h["a"])({components:{TextButton:R,DialogueCard:ft},props:{menu:Object},methods:{log:function(e){console.log(e)}},computed:{game:function(){return this.menu.game}},created:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],kr);var wr=kr;n("065e");wr.render=yr,wr.__scopeId="data-v-5f4c2c54";var Cr=wr,Sr=Object(a["H"])("data-v-622854ee");Object(a["u"])("data-v-622854ee");var xr={key:0,class:"milkfarm"};Object(a["r"])();var _r=Sr((function(e,t,n,i,r,c){var s=Object(a["z"])("CollectionWindow"),o=Object(a["z"])("DialogueCard");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",xr,[Object(a["g"])(s,{deck:e.game.player.hand},null,8,["deck"]),Object(a["g"])(o,{menu:e.menu,title:e.endTitle},null,8,["menu","title"])])):Object(a["e"])("",!0)})),Tr=Object(a["H"])("data-v-35f50ee3");Object(a["u"])("data-v-35f50ee3");var Dr={class:"collection-window"},Br={class:"collection-tabs"},Mr={key:0,class:"tab-label tab-back-label"},Rr={key:1,class:"tab-label"},qr={class:"cards-border"},Er={class:"cards-wrapper"},Nr={class:"cards",id:"cards"};Object(a["r"])();var Ar=Tr((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("PlayingCard");return Object(a["q"])(),Object(a["d"])("div",Dr,[Object(a["g"])("div",Br,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.tabs,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t,class:{"active-tab":e.activeTab===t},onClick:function(n){return e.activateTab(t)}},{default:Tr((function(){return[e.isInspectingCard&&e.activeTab===t?(Object(a["q"])(),Object(a["d"])("h3",Mr,"Back")):(Object(a["q"])(),Object(a["d"])("h3",Rr,Object(a["C"])(e.util.capitalize(t)),1))]})),_:2},1032,["class","onClick"])})),128))]),Object(a["g"])("div",qr,[Object(a["g"])("div",Er,[Object(a["g"])("div",Nr,[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.internalDeck.cards,(function(t){return Object(a["q"])(),Object(a["d"])(o,{key:t.id,card:t,class:{scaled:t.scale},onClick:function(n){e.activateCard(t)}},null,8,["card","class","onClick"])})),128))])])])])})),Lr=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.groupByParent=!1,e.scaledCard=new me({}),e.activeTab="all",e.activeCard=new me({}),e.activeSubCard=Object(a["v"])(new me({})),e}return n}(h["b"]);Lr=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PlayingCard:oe,BlushWindow:la},props:{menu:Object,deck:Object,groupByParent:Boolean},emits:["close","activate-tab","activate-card","activate-subcard"],methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new me({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)},activateTab:function(e){this.activeTab=e,this.activeCard=new me({}),this.$emit("activate-tab",e)},activateCard:function(e){this.$emit("activate-card",e),e.isParent?(this.activeCard=e,this.activeSubCard.highlight=0,this.activeSubCard=new me({})):(this.activeSubCard.id!=e.id&&(this.activeSubCard.highlight=0),this.activeSubCard=e,this.activeSubCard.highlight+=1,5==this.activeSubCard.highlight&&(this.activeSubCard.highlight=1)),this.$forceUpdate()},lookup:function(e){return je.lookup(e)}},computed:{tabs:function(){return["all","behavior","body","clothing","event","mind","reward"]},util:function(){return Z},refDeck:function(){return je.referenceDeck().useFilters()},internalDeck:function(){return this.isInspectingCard?new je(this.activeCard.subcards).sortByLevel().useFilters():this.groupByParent?this.deck.copy().onlyTag(this.activeTab).pack().unique().sortByName().sortByFamily().useFilters():this.deck.copy().onlyTag(this.activeTab).unpack().unique().sortByName().sortByFamily().useFilters()},isInspectingCard:function(){return void 0!=this.activeCard.id&&this.activeCard.isParent}}})],Lr);var Pr=Lr;n("c340");Pr.render=Ar,Pr.__scopeId="data-v-35f50ee3";var Ir=Pr,zr=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e.scaledCard=new me({}),e}return n}(h["b"]);zr=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PlayingCard:oe,DialogueCard:ft,DialogueStatusCard:Ke,CollectionWindow:Ir},props:{menu:Object},methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new me({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)}},computed:{game:function(){return this.menu.game},endTitle:function(){var e=this.game.title;return""==e?"The End":"The End - ".concat(e)}},created:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],zr);var Fr=zr;n("e6f3");Fr.render=_r,Fr.__scopeId="data-v-622854ee";var Vr=Fr,Hr=Object(a["H"])("data-v-0e922dc8");Object(a["u"])("data-v-0e922dc8");var Wr={key:0,class:"menu-view"},Ur={class:"window text-window",id:"help-window"},Gr=Object(a["g"])("div",null,[Object(a["g"])("h1",{style:{margin:"0"}},"Credits")],-1),$r=Object(a["g"])("h3",null,"X",-1),Jr={class:"farm-list help-list"},Yr=Object(a["g"])("div",{class:"farm-window credits-block"},[Object(a["g"])("h2",null,"Development and Design"),Object(a["g"])("h3",{class:"credit"},"Gardamuse")],-1),Xr={class:"farm-window credits-block"},Kr=Object(a["g"])("h2",null,"Writing",-1),Zr=Object(a["f"])(" Transformation descriptions and epilogues. "),Qr={class:"farm-window credits-block"},ec=Object(a["g"])("h2",null,"Artwork",-1),tc=Object(a["f"])(" For illustrations on: "),nc={key:0},ac=Object(a["f"])(". "),ic={class:"farm-window credits-block"},rc=Object(a["g"])("h2",null,"Graphics",-1),cc=Object(a["f"])(" Card textures. "),sc=Object(a["f"])(" Tool for generating images. "),oc={class:"farm-window credits-block"},uc=Object(a["g"])("h2",null,"Special Thanks to",-1),lc={class:"credit"},dc=Object(a["g"])("p",{class:"credit"},"And everyone else who supports Blushing Defeat on Patreon!",-1),hc={class:"farm-window credits-block double-columns"},fc=Object(a["g"])("h2",null,"Game Inspired by",-1),bc=Object(a["f"])(" For their "),gc=Object(a["g"])("a",{href:"https://www.deviantart.com/xsentisus/art/Bimbo-Dice-700-Watcher-25k-Page-Views-SPECIAL-865174538",target:"_blank"}," Bimbo Dice",-1),vc=Object(a["f"])(" caption series. "),Oc=Object(a["f"])(" For their "),pc=Object(a["g"])("a",{href:"https://imgur.com/a/bXlN6Fe",target:"_blank"},"Eliminated",-1),jc=Object(a["f"])(" choose-your-own-adventure. "),mc=Object(a["f"])(" For their "),yc=Object(a["g"])("a",{href:"https://www.deviantart.com/grapplerofbooty/art/Transmoria-The-Realm-of-Chang-Faerie-Mind-Shaper-859293252",target:"_blank"}," Transoria",-1),kc=Object(a["f"])(" statblocks and "),wc=Object(a["g"])("a",{href:"https://www.deviantart.com/grapplerofbooty/art/MTG-TG-Self-Inflicted-Stupidity-790655990",target:"_blank"},"MTG",-1),Cc=Object(a["f"])(" card series. "),Sc=Object(a["f"])(" For their transformation spins caption series. "),xc=Object(a["f"])(" For the "),_c=Object(a["g"])("a",{href:"https://imgur.com/W0YNL6l",target:"_blank"}," Bimbofication Curse",-1),Tc=Object(a["f"])(" spreadsheet. ");Object(a["r"])();var Dc=Hr((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("Credit");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",Wr,[Object(a["g"])("div",Ur,[Gr,Object(a["g"])(s,{class:"farm-button",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},{default:Hr((function(){return[$r]})),_:1}),Object(a["g"])("div",Jr,[Yr,Object(a["g"])("div",Xr,[Kr,Object(a["g"])(o,{name:"Duhad",link:"https://www.deviantart.com/motherduhad",linkText:"DeviantArt"},{default:Hr((function(){return[Zr]})),_:1})]),Object(a["g"])("div",Qr,[ec,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.artCredits(),(function(e){return Object(a["q"])(),Object(a["d"])(o,{key:e,name:e.artist,link:e.link,linkText:e.linkText},{default:Hr((function(){return[tc,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.cards,(function(t,n){return Object(a["q"])(),Object(a["d"])("span",null,[Object(a["f"])(Object(a["C"])(t),1),n!==e.cards.length-1?(Object(a["q"])(),Object(a["d"])("span",nc,", ")):Object(a["e"])("",!0)])})),256)),ac]})),_:2},1032,["name","link","linkText"])})),128))]),Object(a["g"])("div",ic,[rc,Object(a["g"])(o,{name:"Transparent Textures",link:"https://www.transparenttextures.com/",linkText:"Website"},{default:Hr((function(){return[cc]})),_:1}),Object(a["g"])(o,{name:"Artbreeder",link:"https://www.artbreeder.com",linkText:"Website"},{default:Hr((function(){return[sc]})),_:1})]),Object(a["g"])("div",oc,[uc,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.menu.patreonCredits(),(function(e){return Object(a["q"])(),Object(a["d"])("h3",lc,Object(a["C"])(e.name),1)})),256)),dc]),Object(a["g"])("div",hc,[fc,Object(a["g"])(o,{name:"Xsentisus",link:"https://www.deviantart.com/xsentisus",linkText:"DeviantArt"},{default:Hr((function(){return[bc,gc,vc]})),_:1}),Object(a["g"])(o,{name:"MythicalCreatureBone",link:"https://www.deviantart.com/mythicalcreaturebone",linkText:"DeviantArt"},{default:Hr((function(){return[Oc,pc,jc]})),_:1}),Object(a["g"])(o,{name:"GrapplerOfBooty",link:"https://www.deviantart.com/grapplerofbooty",linkText:"DeviantArt"},{default:Hr((function(){return[mc,yc,kc,wc,Cc]})),_:1}),Object(a["g"])(o,{name:"TF Me Please!",link:"https://www.tumblr.com/blog/view/transformmeplease",linkText:"Tumblr"},{default:Hr((function(){return[Sc]})),_:1}),Object(a["g"])(o,{name:"Unknown",link:"https://imgur.com/W0YNL6l",linkText:"Imgur"},{default:Hr((function(){return[xc,_c,Tc]})),_:1})])])])])):Object(a["e"])("",!0)})),Bc=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e}return n}(h["b"]);Bc=Object(d["a"])([Object(h["a"])({components:{TextButton:R,PatreonButton:Ln,Credit:Li},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},util:function(){return Z},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window}))},created:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],Bc);var Mc=Bc;n("dcaf");Mc.render=Dc,Mc.__scopeId="data-v-0e922dc8";var Rc=Mc,qc=Object(a["H"])("data-v-41726e0e");Object(a["u"])("data-v-41726e0e");var Ec={key:0,class:"milkfarm"},Nc={class:"status-content"},Ac={class:"status-text"},Lc=Object(a["g"])("p",null,"To go back, click the current tab.",-1),Pc=Object(a["g"])("p",null,"These are all the cards you've collected.",-1),Ic=Object(a["g"])("p",null,"To inspect a card with multiple levels, click it.",-1),zc=Object(a["g"])("b",null,"Owned",-1),Fc=Object(a["f"])(": "),Vc={style:{"font-size":"1.1em"}},Hc=Object(a["f"])(" cards, "),Wc={style:{"font-size":"1.1em"}},Uc=Object(a["f"])(" levels"),Gc={class:"buttons"},$c=Object(a["f"])("Save Screenshot"),Jc=Object(a["g"])("p",null,"These are all the epilogues and endings you've found.",-1),Yc=Object(a["g"])("p",null,"Epilogues are unlocked by having a certain set of cards by the end of the game.",-1),Xc=Object(a["g"])("p",null,"Endings are unlocked by making dialogue choices in the epilogue. Some dialogue choices will only show up if you have a specific card.",-1),Kc=Object(a["g"])("p",null,"Click an ending to read it.",-1),Zc=Object(a["g"])("br",null,null,-1),Qc=Object(a["g"])("b",null,"Unlocked epilogues",-1),es=Object(a["f"])(": "),ts={style:{"font-size":"1.1em"}},ns=Object(a["g"])("b",null,"Unlocked endings",-1),as=Object(a["f"])(": "),is={style:{"font-size":"1.1em"}},rs=Object(a["g"])("p",null,null,-1);Object(a["r"])();var cs=qc((function(e,t,n,i,r,c){var s=Object(a["z"])("CollectionWindow"),o=Object(a["z"])("EndingsCollectionWindow"),u=Object(a["z"])("ChatView"),l=Object(a["z"])("TextButton"),d=Object(a["z"])("TabWindow");return e.isLoaded?(Object(a["q"])(),Object(a["d"])("div",Ec,["cards"===e.activeMenuTab?(Object(a["q"])(),Object(a["d"])(s,{key:0,deck:e.menu.collection,menu:e.menu,groupByParent:"",onActivateTab:e.activateTab,onActivateCard:e.activateCard},null,8,["deck","menu","onActivateTab","onActivateCard"])):(Object(a["q"])(),Object(a["d"])(o,{key:1,menu:e.menu,"endings-collection":e.endingsCollection},null,8,["menu","endings-collection"])),Object(a["g"])(d,{style:{"grid-area":"s"},tabs:["cards","endings","exit"],onActivatedTab:e.activateMenuTab},{cards:qc((function(){return[Object(a["g"])("div",Nc,[Object(a["g"])("div",Ac,[e.isInspectingCard?(Object(a["q"])(),Object(a["d"])(a["a"],{key:0},[Object(a["g"])("p",null,'These are all levels of the "'+Object(a["C"])(e.activeCard.name)+"\" card you've collected.",1),Lc,Object(a["g"])("p",null,"Levels owned: "+Object(a["C"])(e.activeCard.subcards.length)+" / "+Object(a["C"])(e.activeCard.levels),1)],64)):(Object(a["q"])(),Object(a["d"])(a["a"],{key:1},[Pc,Ic,Object(a["g"])("p",null,[zc,Fc,Object(a["g"])("span",Vc,Object(a["C"])(e.deck.size())+" / "+Object(a["C"])(e.refDeck.onlyTag(e.activeTab).size()),1),Hc,Object(a["g"])("span",Wc,Object(a["C"])(e.deck.unpack().size())+" / "+Object(a["C"])(e.refDeck.onlyTag(e.activeTab).unpack().size()),1),Uc])],64))]),Object(a["g"])(u,{class:"transformation-chat",lines:e.transformationText()},null,8,["lines"]),Object(a["g"])("div",Gc,[Object(a["g"])(l,{onClick:t[1]||(t[1]=function(t){return e.util.screenshot("cards",e.screenshotName())})},{default:qc((function(){return[$c]})),_:1})])])]})),endings:qc((function(){return[Jc,Yc,Xc,Kc,Zc,Object(a["g"])("p",null,[Qc,es,Object(a["g"])("span",ts,Object(a["C"])(e.endingsCollection.unlockedEpilogues().length)+" / "+Object(a["C"])(e.endingsCollection.epiloguesList().length),1)]),Object(a["g"])("p",null,[ns,as,Object(a["g"])("span",is,Object(a["C"])(e.endingsCollection.nrOfAllUnlockedEndings())+" / "+Object(a["C"])(e.endingsCollection.nrOfAllEndings()),1)]),rs]})),_:1},8,["onActivatedTab"])])):Object(a["e"])("",!0)})),ss=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isLoaded=!1,e.endingsCollection=new Ut(e.menu),e.scaledCard=new me({}),e.activeTab="all",e.activeCard=new me({}),e.activeSubCard=new me({}),e.activeMenuTab="",e}return n}(h["b"]);ss=Object(d["a"])([Object(h["a"])({components:{ChatView:Je,TextButton:R,PlayingCard:oe,TabWindow:hr,CollectionWindow:Ir,EndingsCollectionWindow:Ca},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},toggleScale:function(e){e.scale=!e.scale,this.scaledCard==e?(this.scaledCard.scale=!1,this.scaledCard=new me({})):this.scaledCard.scale=!1,e.scale&&(this.scaledCard=e)},activateTab:function(e){this.activeTab=e,this.activeCard=new me({}),this.activeSubCard=new me({})},activateCard:function(e){e.isParent?(this.activeCard=e,this.activeSubCard=new me({})):this.activeSubCard=e},activateMenuTab:function(e){this.activeMenuTab=e,"exit"==e&&this.$emit("close")},transformationText:function(){return Bt.parseLines(this.activeSubCard.transformation)},lookup:function(e){return je.lookup(e)},screenshotName:function(){return this.isInspectingCard?"".concat(Z.toKebabCase(this.activeCard.name),"-").concat(this.activeCard.subcards.length,"-of-").concat(this.activeCard.levels):"".concat(this.activeTab,"-").concat(this.deck.unpack().size(),"-of-").concat(this.refDeck.onlyTag(this.activeTab).unpack().size())}},computed:{tabs:function(){return["all","behavior","body","clothing","event","mind","reward"]},util:function(){return Z},refDeck:function(){return je.referenceDeck().useFilters()},deck:function(){return this.isInspectingCard?new je(this.activeCard.subcards).sortByLevel().useFilters():this.menu.collection.copy().onlyTag(this.activeTab).pack().unique().useFilters()},isInspectingCard:function(){return void 0!=this.activeCard.id&&this.activeCard.isParent}},created:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoaded=!0;case 1:case"end":return t.stop()}}),t)})))()}})],ss);var os=ss;n("080c");os.render=cs,os.__scopeId="data-v-41726e0e";var us=os,ls=Object(a["H"])("data-v-36d8bb30");Object(a["u"])("data-v-36d8bb30");var ds={class:"settings-screen"},hs=Object(a["g"])("h2",null,"Manual Saves",-1),fs={class:"button-row"},bs=Object(a["g"])("p",{style:{margin:"0"}},"Running the game in incognito mode, or just want to back up your save? Download your current save game here.",-1),gs=Object(a["g"])("b",null,"Download Save",-1),vs={class:"button-row"},Os=Object(a["g"])("p",{style:{margin:"0"}},"Restore your save game from a previously downloaded save file. This will overwrite your current save file.",-1),ps=Object(a["g"])("label",{for:"save-import",class:"load-button"},[Object(a["g"])("b",null,"Restore Save")],-1),js=Object(a["g"])("h2",null,"Delete Saves",-1),ms={class:"button-row"},ys=Object(a["g"])("p",{style:{margin:"0"}},"Do you want to start your collection from scratch? Press this button to clear your save and start again.",-1),ks=Object(a["g"])("b",null,"Clear Collection",-1);Object(a["r"])();var ws=ls((function(e,t,n,i,r,c){var s=Object(a["z"])("FilterWindow"),o=Object(a["z"])("BanWindow"),u=Object(a["z"])("TextButton"),l=Object(a["z"])("TabWindow");return Object(a["q"])(),Object(a["d"])("div",ds,[Object(a["g"])(l,{tabs:["contentFilters","banCards","saves","exit"],onClose:t[6]||(t[6]=function(t){return e.$emit("close")})},{contentFilters:ls((function(){return[Object(a["g"])(s,{menu:e.menu,onClose:t[1]||(t[1]=function(t){return e.$emit("close")})},null,8,["menu"])]})),banCards:ls((function(){return[Object(a["g"])(o,{menu:e.menu,onClose:t[2]||(t[2]=function(t){return e.$emit("close")})},null,8,["menu"])]})),saves:ls((function(){return[hs,Object(a["g"])("div",fs,[bs,Object(a["g"])(u,{class:"normal-button",onClick:t[3]||(t[3]=function(t){return e.menu.exportSave()})},{default:ls((function(){return[gs]})),_:1})]),Object(a["g"])("div",vs,[Os,Object(a["g"])("div",null,[ps,Object(a["g"])("input",{id:"save-import",type:"file",accept:".dd",onChange:t[4]||(t[4]=function(){var t;return e.menu.importSave&&(t=e.menu).importSave.apply(t,arguments)}),style:{display:"none"}},null,32)])]),js,Object(a["g"])("div",ms,[ys,Object(a["g"])(u,{class:"delete-save-button",onClick:t[5]||(t[5]=function(t){return e.deleteCollection()})},{default:ls((function(){return[ks]})),_:1})])]})),_:1})])})),Cs=Object(a["H"])("data-v-1c6aa1d5");Object(a["u"])("data-v-1c6aa1d5");var Ss={class:"ban-window"},xs=Object(a["g"])("h2",null,"Ban Individual Cards",-1),_s={key:0},Ts={key:1},Ds=Object(a["g"])("p",null,"If the filters don't remove just that one card you don't want you can choose to ban any specific card, irregardless of your filter settings.",-1),Bs=Object(a["g"])("p",null,[Object(a["g"])("b",null,"Tip:"),Object(a["f"])(' If you use this function to "cheat", you\'ll only ruin the fun for yourself!')],-1),Ms={class:"filter-entry"},Rs={class:"label"},qs={key:0},Es={key:1},Ns={key:2},As={key:0},Ls={key:1,style:{"text-decoration":"line-through"}},Ps={key:2};Object(a["r"])();var Is=Cs((function(e,t,n,i,r,c){var s=Object(a["z"])("TextButton"),o=Object(a["z"])("BlushList");return Object(a["q"])(),Object(a["d"])("div",Ss,[Object(a["g"])("div",null,[xs,e.menu.isFilteringTooMuch()?(Object(a["q"])(),Object(a["d"])("h3",Ts," Currently including "+Object(a["C"])(e.menu.cardsFilteredString())+". WARNING: There may not be enough cards left. ",1)):(Object(a["q"])(),Object(a["d"])("h3",_s,"Currently including "+Object(a["C"])(e.menu.cardsFilteredString()),1)),Ds,Bs]),Object(a["g"])(o,{class:"filter-entries"},{default:Cs((function(){return[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["x"])(e.refDeck.cards.sort((function(e,t){return e.name.localeCompare(t.name)})),(function(t){return Object(a["q"])(),Object(a["d"])("div",Ms,[Object(a["g"])("div",Rs,[Object(a["g"])("h3",null,Object(a["C"])(t.name),1)]),t.isParent?(Object(a["q"])(!0),Object(a["d"])(a["a"],{key:1},Object(a["x"])(t.subcards,(function(t){return Object(a["q"])(),Object(a["d"])(s,{key:t.id,style:{},class:{"selected-green":!e.isBanned(t.id)&&!e.isFiltered(t.id),"selected-yellow":e.isFiltered(t.id),"selected-red":e.isBanned(t.id)},onClick:function(n){return e.toggleBan(t.id)}},{default:Cs((function(){return[e.isBanned(t.id)?(Object(a["q"])(),Object(a["d"])("p",As," Banned ")):e.isFiltered(t.id)?(Object(a["q"])(),Object(a["d"])("p",Ls,Object(a["C"])(t.name),1)):(Object(a["q"])(),Object(a["d"])("p",Ps,Object(a["C"])(t.name),1))]})),_:2},1032,["class","onClick"])})),128)):(Object(a["q"])(),Object(a["d"])(s,{key:0,style:{},class:{"selected-green":!e.isBanned(t.id)&&!e.isFiltered(t.id),"selected-yellow":e.isFiltered(t.id),"selected-red":e.isBanned(t.id)},onClick:function(n){return e.toggleBan(t.id)}},{default:Cs((function(){return[e.isBanned(t.id)?(Object(a["q"])(),Object(a["d"])("p",qs," Banned ")):e.isFiltered(t.id)?(Object(a["q"])(),Object(a["d"])("p",Es," Filtered ")):(Object(a["q"])(),Object(a["d"])("p",Ns," Allowed "))]})),_:2},1032,["class","onClick"]))])})),256))]})),_:1})])})),zs=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.noCross=!1,e.refDeck=je.referenceDeck(),e}return n}(h["b"]);zs=Object(d["a"])([Object(h["a"])({components:{TextButton:R,BlushWindow:la,BlushList:Ue},props:{menu:Object,noCross:Boolean},emits:["close"],methods:{isBanned:function(e){return this.menu.settings.isBanned(e)},isFiltered:function(e){return this.menu.settings.isFiltered(e)},toggleBan:function(e){this.isBanned(e)?this.menu.settings.unbanCard(e):this.menu.settings.banCard(e),this.menu.save(),this.$forceUpdate()}},computed:{util:function(){return Z}}})],zs);var Fs=zs;n("5650");Fs.render=Is,Fs.__scopeId="data-v-1c6aa1d5";var Vs=Fs,Hs=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return n}(h["b"]);Hs=Object(d["a"])([Object(h["a"])({components:{BlushList:Ue,TextButton:R,Credit:Li,FilterWindow:nr,BanWindow:Vs,BlushWindow:la,TabWindow:hr},props:{menu:Object},emits:["close"],methods:{log:function(e){console.log(e)},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return window})),deleteCollection:function(){confirm("Are you sure you wish to delete your card collection? This can't be undone.")&&this.menu.deleteCollection()}},computed:{util:function(){return Z}}})],Hs);var Ws=Hs;n("f614");Ws.render=ws,Ws.__scopeId="data-v-36d8bb30";var Us=Ws,Gs=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.menu=new nn,e}return n}(h["b"]);Gs=Object(d["a"])([Object(h["a"])({components:{GameScreen:vt,StartMenu:pr,DialogueScreen:Cr,HandView:Vr,CreditsScreen:Rc,CollectionScreen:us,PatchNotesScreen:fa,SettingsScreen:Us,EndingsCollectionScreen:Ca,ModScreen:gr},methods:{},computed:{cssVars:function(){return{"--background-image":"url("+n("39d9")+")","--maven-pro-path":"url("+n("1a08")+")"}},globalState:function(){return ve()}}})],Gs);var $s=Gs;n("1286"),n("baab");$s.render=s,$s.__scopeId="data-v-34e99f59";var Js=$s,Ys=n("6c02"),Xs=[{path:"/",name:"Milkfarm",component:vt}],Ks=Object(Ys["a"])({history:Object(Ys["b"])("/"),routes:Xs}),Zs=Ks;a["c"](Js).use(Zs).mount("#app")},ce6a:function(e,t,n){e.exports=n.p+"img/devil-512px.webp"},d08b:function(e,t,n){},d194:function(e,t,n){},d4b5:function(e,t,n){"use strict";n("60bf")},d736:function(e,t,n){"use strict";n("364d")},d771:function(e,t,n){},d9d0:function(e,t,n){"use strict";n("a08e")},dcaf:function(e,t,n){"use strict";n("d771")},e6f3:function(e,t,n){"use strict";n("55cd")},e733:function(e,t,n){"use strict";n("7a1e")},e7c0:function(e,t,n){"use strict";n("c421")},e9b1:function(e,t,n){},ee3e:function(e,t,n){"use strict";n("4d8e")},f614:function(e,t,n){"use strict";n("e9b1")},fb01:function(e,t,n){},fe42:function(e,t,n){"use strict";n("9c06")}});
//# sourceMappingURL=app.js.map