(function(e){function t(t){for(var r,i,u=t[0],s=t[1],o=t[2],b=0,f=[];b<u.length;b++)i=u[b],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&f.push(c[i][0]),c[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,o||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var s=n[u];0!==c[s]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},c={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/gallery/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"019c":function(e,t,n){e.exports=n.p+"img/exit.svg"},"1deb":function(e,t,n){"use strict";n("f668")},"241c2":function(e,t,n){"use strict";n("271c")},"271c":function(e,t,n){},4184:function(e,t,n){e.exports=n.p+"img/toStart.svg"},"468c":function(e,t,n){},"540c":function(e,t,n){"use strict";n("713a")},5830:function(e,t,n){e.exports=n.p+"img/play.svg"},"6ccb":function(e,t,n){},"713a":function(e,t,n){},"8e0f":function(e,t,n){e.exports=n.p+"img/video.svg"},"9cdc":function(e,t,n){"use strict";n("c701")},b2f3:function(e,t,n){e.exports=n.p+"img/next.svg"},c701:function(e,t,n){},ccfe:function(e,t,n){e.exports=n.p+"img/back.svg"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={id:"app"};function a(e,t,n,a,i,u){var s=Object(r["y"])("router-view");return Object(r["p"])(),Object(r["e"])("div",c,[Object(r["g"])(s,null,{default:Object(r["F"])((function(e){var t=e.Component;return[Object(r["g"])(r["b"],{name:"fade",mode:"out-in"},{default:Object(r["F"])((function(){return[(Object(r["p"])(),Object(r["e"])(Object(r["z"])(t)))]})),_:2},1024)]})),_:1})])}var i=n("d4ec"),u=n("262e"),s=n("2caf"),o=n("9ab4"),l=n("ce1f"),b=(n("a4d3"),n("e01a"),n("4184")),f=n.n(b),d=n("ccfe"),p=n.n(d),g=n("b2f3"),h=n.n(g),O=n("5830"),j=n.n(O),v=n("ec7e"),m=n.n(v),x=n("019c"),y=n.n(x),k=n("8e0f"),w=n.n(k),I=Object(r["G"])("data-v-56fe5ed8");Object(r["t"])("data-v-56fe5ed8");var q={class:"image-container"},B={class:"control-panel"},P=Object(r["g"])("img",{src:f.a,alt:"",class:"svg-2"},null,-1),_=Object(r["g"])("img",{src:p.a,alt:"",class:"svg-2"},null,-1),S=Object(r["g"])("img",{src:h.a,alt:"",class:"svg-2"},null,-1),C={key:0},T=Object(r["g"])("img",{src:j.a,alt:"",class:"svg-2"},null,-1),R={key:1},V=Object(r["g"])("img",{src:m.a,alt:"",class:"svg-2"},null,-1),M=Object(r["g"])("img",{src:y.a,alt:"",class:"svg-2"},null,-1),U={class:"info-panel"},L={id:"titlebar"},G={id:"title"},$={id:"index-counter"};Object(r["q"])();var F=I((function(e,t,n,c,a,i){var u=this,s=Object(r["y"])("BlushButton"),o=Object(r["y"])("PatreonButton");return Object(r["p"])(),Object(r["e"])("div",{id:this.id,class:"image-view"},[Object(r["g"])("div",q,[this.isVideo(e.img)?(Object(r["p"])(),Object(r["e"])("video",{key:0,class:"current-image",controls:"",poster:this.sequencePlayer.getThumb()},[Object(r["g"])("source",{src:e.img,type:"video/webm"},null,8,["src"])],8,["poster"])):(Object(r["p"])(),Object(r["e"])("img",{key:1,class:"current-image",src:e.img},null,8,["src"]))]),Object(r["g"])("div",B,[this.isVideo(e.img)?Object(r["f"])("",!0):(Object(r["p"])(),Object(r["e"])(s,{key:0,onClick:t[1]||(t[1]=function(e){return u.firstB()})},{default:I((function(){return[P]})),_:1})),this.isVideo(e.img)?Object(r["f"])("",!0):(Object(r["p"])(),Object(r["e"])(s,{key:1,onClick:t[2]||(t[2]=function(e){return u.prevB()})},{default:I((function(){return[_]})),_:1})),this.isVideo(e.img)?Object(r["f"])("",!0):(Object(r["p"])(),Object(r["e"])(s,{key:2,onClick:t[3]||(t[3]=function(e){return u.nextB()})},{default:I((function(){return[S]})),_:1})),this.isVideo(e.img)?Object(r["f"])("",!0):(Object(r["p"])(),Object(r["e"])(s,{key:3,onClick:t[4]||(t[4]=function(e){return u.playB()})},{default:I((function(){return[e.paused?(Object(r["p"])(),Object(r["e"])("span",C,[T])):(Object(r["p"])(),Object(r["e"])("span",R,[V]))]})),_:1})),Object(r["g"])(s,{onClick:t[5]||(t[5]=function(e){return u.exitB()})},{default:I((function(){return[M]})),_:1})]),Object(r["g"])("div",U,[Object(r["g"])("div",L,[Object(r["g"])("h1",G,Object(r["B"])(e.info.title),1),Object(r["g"])("h3",$,Object(r["B"])(e.sequencePlayer.getCurrentIndex())+" / "+Object(r["B"])(e.sequencePlayer.getLastIndex()),1)]),Object(r["g"])("div",{id:"description",innerHTML:e.description},null,8,["innerHTML"])]),(Object(r["p"])(!0),Object(r["e"])(r["a"],null,Object(r["w"])(e.extraImages,(function(e){return Object(r["p"])(),Object(r["e"])("div",null,[Object(r["g"])("img",{class:"thumb-container",src:u.sequencePlayer.getThumb(),onClick:t[6]||(t[6]=function(e){return u.showImage(u.sequencePlayer.get())})},null,8,["src"]),u.isVideo(e)?(Object(r["p"])(),Object(r["e"])("img",{key:0,class:"thumb-container",src:w.a,onClick:function(t){return u.showImage(e)}},null,8,["onClick"])):(Object(r["p"])(),Object(r["e"])("img",{key:1,class:"thumb-container",src:e,onClick:function(t){return u.showImage(e)}},null,8,["src","onClick"]))])})),256)),Object(r["g"])(o)])})),E=n("b85c"),H=(n("96cf"),n("1da1")),J=(n("d3b7"),n("bc3a")),z=n.n(J),A=n("d5d0"),D=n.n(A),K={baseUrl:function(){return"http://localhost:4000/gallery"},wait:function(e){return new Promise((function(t,n){setTimeout(t,e)}))},getInfo:function(e){var t=this;return Object(H["a"])(regeneratorRuntime.mark((function n(){var r,c,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,z.a.get(t.baseUrl()+"/"+e+"/info.hjson",{transformResponse:[function(e){return e}]});case 2:return r=n.sent,c=r.data,a=D.a.parse(c),n.abrupt("return",a);case 6:case"end":return n.stop()}}),n)})))()}},N=(n("99af"),n("baa5"),n("ac1f"),n("25f0"),n("466d"),n("4d90"),n("bee2")),Q=function(){function e(t,n){Object(i["a"])(this,e),this.id=t,this.info=n,this.firstIndex=e.sequenceIndex(this.info.firstImage),this.lastIndex=this.firstIndex+this.info.length,this.index=0}return Object(N["a"])(e,[{key:"goto",value:function(e){return this.index=e,this.index=Math.min(this.index,this.info.length-1),this.index=Math.max(this.index,0),this}},{key:"next",value:function(){return this.goto(this.index+1),this}},{key:"prev",value:function(){return this.goto(this.index-1),this}},{key:"get",value:function(){return e.setSequenceIndex("".concat(K.baseUrl(),"/").concat(this.id)+this.info.firstImage,this.getImageIndex())}},{key:"getAll",value:function(){for(var t=[],n=this.firstIndex;n<this.lastIndex;n++)t.push(e.setSequenceIndex("".concat(K.baseUrl(),"/").concat(this.id)+this.info.firstImage,n));return t}},{key:"getThumb",value:function(){return"".concat(K.baseUrl(),"/").concat(this.id)+this.info.thumb}},{key:"getCurrentIndex",value:function(){return this.index+1}},{key:"getLastIndex",value:function(){return this.info.length}},{key:"getImageIndex",value:function(){return this.firstIndex+this.index}}],[{key:"sequencePrefix",value:function(e){var t=e.match(/([0-9]+)/g),n=null===t||void 0===t?void 0:t[t.length-1];if(null!=n){var r=e.lastIndexOf(n);return e.substr(0,r)}return e}},{key:"sequenceSuffix",value:function(e){var t=e.lastIndexOf(".");return e.substr(t,e.length)}},{key:"sequenceIndex",value:function(e){var t=e.match(/[0-9]+/g),n=null===t||void 0===t?void 0:t[t.length-1];return parseFloat((null===n||void 0===n?void 0:n.toString())||"0")}},{key:"sequenceIndexLength",value:function(e){var t=e.match(/[0-9]+/g),n=null===t||void 0===t?void 0:t[t.length-1],r=null===n||void 0===n?void 0:n.length;return r||0}},{key:"setSequenceIndex",value:function(e,t){var n=this.sequencePrefix(e),r=this.sequenceSuffix(e),c=this.sequenceIndexLength(e),a=t.toString().padStart(c,"0");return n+a+r}}]),e}(),W=Object(r["G"])("data-v-3443d55b");Object(r["t"])("data-v-3443d55b");var X={class:"blush-button",onselectstart:"return false"};Object(r["q"])();var Y=W((function(e,t,n,c,a,i){return Object(r["p"])(),Object(r["e"])("div",X,[Object(r["x"])(e.$slots,"default")])})),Z=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);Z=Object(o["a"])([Object(l["a"])({props:{label:String}})],Z);var ee=Z;n("241c2");ee.render=Y,ee.__scopeId="data-v-3443d55b";var te=ee,ne=Object(r["G"])("data-v-1ae98445");Object(r["t"])("data-v-1ae98445");var re={href:"https://www.patreon.com/gardamuse",style:{display:"block"},class:"patreon-image"};Object(r["q"])();var ce=ne((function(e,t,n,c,a,i){return Object(r["p"])(),Object(r["e"])("a",re)})),ae=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);ae=Object(o["a"])([Object(l["a"])({props:{label:String}})],ae);var ie=ae;n("1deb");ie.render=ce,ie.__scopeId="data-v-1ae98445";var ue=ie,se=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.img="",e.description="",e.info={title:"",firstImage:""},e.sequencePlayer=new Q("none",e.info),e.extraImages=[],e.paused=!0,e}return n}(l["b"]);se=Object(o["a"])([Object(l["a"])({components:{BlushButton:te,PatreonButton:ue},props:{},methods:{log:function(e){console.log(e)},play:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,K.wait(200);case 2:if(e.sequencePlayer.getCurrentIndex()!=e.sequencePlayer.getLastIndex()){t.next=12;break}return t.next=5,K.wait(1e3);case 5:if(!e.paused){t.next=7;break}return t.abrupt("return");case 7:return e.firstB(),t.next=10,K.wait(800);case 10:if(!e.paused){t.next=12;break}return t.abrupt("return");case 12:return e.nextB(),t.next=15,K.wait(800);case 15:e.paused||e.play();case 16:case"end":return t.stop()}}),t)})))()},playB:function(){this.paused=!this.paused,this.paused||this.play()},firstB:function(){this.img=this.sequencePlayer.goto(0).get()},prevB:function(){this.img=this.sequencePlayer.prev().get()},nextB:function(){this.img=this.sequencePlayer.next().get()},exitB:function(){this.$router.push("/")},showImage:function(e){this.img=e},isVideo:function(e){return/\.webm$/i.test(e)}},beforeCreate:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){var n,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id=e.$route.params.id,t.next=3,K.getInfo(e.id);case 3:if(e.info=t.sent,e.description=e.info.description,e.sequencePlayer=new Q(e.id,e.info),e.img=e.sequencePlayer.get(),e.info.extra&&e.info.extra.length>0){n=Object(E["a"])(e.info.extra);try{for(n.s();!(r=n.n()).done;)c=r.value,e.extraImages.push(K.baseUrl()+"/"+e.id+c)}catch(a){n.e(a)}finally{n.f()}}case 8:case"end":return t.stop()}}),t)})))()}})],se);var oe=se;n("540c");oe.render=F,oe.__scopeId="data-v-56fe5ed8";var le=oe,be=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);be=Object(o["a"])([Object(l["a"])({components:{ImageView:le},methods:{beforeEnter:function(){this.$root.$emit("scrollBeforeEnter")}}})],be);var fe=be;n("9cdc");fe.render=a;var de=fe,pe=n("6c02"),ge=Object(r["G"])("data-v-bd1de7c4");Object(r["t"])("data-v-bd1de7c4");var he={id:"gallery",class:"gallery"},Oe={class:"thumbs"};Object(r["q"])();var je=ge((function(e,t,n,c,a,i){var u=Object(r["y"])("BlushThumb"),s=Object(r["y"])("router-link");return Object(r["p"])(),Object(r["e"])("div",he,[Object(r["g"])("div",Oe,[(Object(r["p"])(!0),Object(r["e"])(r["a"],null,Object(r["w"])(e.allSequences,(function(e){return Object(r["p"])(),Object(r["e"])("div",null,[Object(r["g"])(s,{to:"/"+e.id},{default:ge((function(){return[Object(r["g"])(u,{sequence:e},null,8,["sequence"])]})),_:2},1032,["to"])])})),256))])])})),ve=Object(r["G"])("data-v-330359e8");Object(r["t"])("data-v-330359e8");var me={class:"thumb-container"},xe={class:"thumb-title"};Object(r["q"])();var ye=ve((function(e,t,n,c,a,i){return Object(r["p"])(),Object(r["e"])("div",me,[Object(r["g"])("img",{class:"thumb",src:this.sequence.getThumb()},null,8,["src"]),Object(r["g"])("div",xe,[Object(r["g"])("h3",null,Object(r["B"])(e.sequence.info.title),1)])])})),ke=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);ke=Object(o["a"])([Object(l["a"])({props:{sequence:Q}})],ke);var we=ke;n("f2aa");we.render=ye,we.__scopeId="data-v-330359e8";var Ie=we,qe=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.sequences=[],e.allSequences=[],e}return n}(l["b"]);qe=Object(o["a"])([Object(l["a"])({components:{BlushButton:te,BlushThumb:Ie},props:{},methods:{getThumb:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,K.getInfo(e);case 2:return n=t.sent,t.abrupt("return","".concat(K.baseUrl(),"/").concat(e).concat(n.thumb));case 4:case"end":return t.stop()}}),t)})))()}},beforeCreate:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){var n,r,c,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.a.get(K.baseUrl()+"/gallery-info.json");case 2:n=t.sent,e.sequences=n.data.sequences,r=Object(E["a"])(e.sequences),t.prev=5,r.s();case 7:if((c=r.n()).done){t.next=15;break}return a=c.value,t.next=11,K.getInfo(a);case 11:i=t.sent,e.allSequences.push(new Q(a,i));case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](5),r.e(t.t0);case 20:return t.prev=20,r.f(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})))()}})],qe);var Be=qe;n("d8bb");Be.render=je,Be.__scopeId="data-v-bd1de7c4";var Pe=Be,_e=[{path:"/",name:"Gallery",component:Pe},{path:"/:id",name:"Image View",component:le}],Se=Object(pe["a"])({history:Object(pe["b"])("/gallery/"),routes:_e}),Ce=Se;r["d"](de).use(Ce).mount("#app")},d8bb:function(e,t,n){"use strict";n("468c")},ec7e:function(e,t,n){e.exports=n.p+"img/pause.svg"},f2aa:function(e,t,n){"use strict";n("6ccb")},f668:function(e,t,n){}});
//# sourceMappingURL=app.js.map