(function(e){function t(t){for(var r,i,u=t[0],s=t[1],o=t[2],f=0,b=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&b.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(b.length)b.shift()();return c.push.apply(c,o||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,u=1;u<n.length;u++){var s=n[u];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/gallery/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var l=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"019c":function(e,t,n){e.exports=n.p+"img/exit.svg"},"1deb":function(e,t,n){"use strict";n("f668")},"241c2":function(e,t,n){"use strict";n("271c")},"271c":function(e,t,n){},4184:function(e,t,n){e.exports=n.p+"img/toStart.svg"},5830:function(e,t,n){e.exports=n.p+"img/play.svg"},"72be":function(e,t,n){},"9cdc":function(e,t,n){"use strict";n("c701")},b2f3:function(e,t,n){e.exports=n.p+"img/next.svg"},bd65:function(e,t,n){},bdd6:function(e,t,n){"use strict";n("72be")},c701:function(e,t,n){},ccfe:function(e,t,n){e.exports=n.p+"img/back.svg"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={id:"app"};function c(e,t,n,c,i,u){var s=Object(r["x"])("router-view");return Object(r["o"])(),Object(r["e"])("div",a,[Object(r["f"])(s,null,{default:Object(r["E"])((function(e){var t=e.Component;return[Object(r["f"])(r["b"],{name:"fade",mode:"out-in"},{default:Object(r["E"])((function(){return[(Object(r["o"])(),Object(r["e"])(Object(r["y"])(t)))]})),_:2},1024)]})),_:1})])}var i=n("d4ec"),u=n("262e"),s=n("2caf"),o=n("9ab4"),l=n("ce1f"),f=(n("a4d3"),n("e01a"),n("4184")),b=n.n(f),d=n("ccfe"),p=n.n(d),h=n("b2f3"),v=n.n(h),g=n("5830"),O=n.n(g),j=n("ec7e"),m=n.n(j),x=n("019c"),y=n.n(x),w=Object(r["F"])("data-v-df0c1bc0");Object(r["s"])("data-v-df0c1bc0");var I={class:"control-panel"},k=Object(r["f"])("img",{src:b.a,alt:"",class:"svg-2"},null,-1),q=Object(r["f"])("img",{src:p.a,alt:"",class:"svg-2"},null,-1),P=Object(r["f"])("img",{src:v.a,alt:"",class:"svg-2"},null,-1),_={key:0},B=Object(r["f"])("img",{src:O.a,alt:"",class:"svg-2"},null,-1),S={key:1},C=Object(r["f"])("img",{src:m.a,alt:"",class:"svg-2"},null,-1),R=Object(r["f"])("img",{src:y.a,alt:"",class:"svg-2"},null,-1),T={class:"info-panel"},M={id:"titlebar"},L={id:"title"},U={id:"index-counter"};Object(r["p"])();var $=w((function(e,t,n,a,c,i){var u=this,s=Object(r["x"])("BlushButton"),o=Object(r["x"])("PatreonButton");return Object(r["o"])(),Object(r["e"])("div",{id:this.id,class:"image-view"},[Object(r["f"])("img",{class:"current-image",src:e.img},null,8,["src"]),Object(r["f"])("div",I,[Object(r["f"])(s,{onClick:t[1]||(t[1]=function(e){return u.firstB()})},{default:w((function(){return[k]})),_:1}),Object(r["f"])(s,{onClick:t[2]||(t[2]=function(e){return u.prevB()})},{default:w((function(){return[q]})),_:1}),Object(r["f"])(s,{onClick:t[3]||(t[3]=function(e){return u.nextB()})},{default:w((function(){return[P]})),_:1}),Object(r["f"])(s,{onClick:t[4]||(t[4]=function(e){return u.playB()})},{default:w((function(){return[e.paused?(Object(r["o"])(),Object(r["e"])("span",_,[B])):(Object(r["o"])(),Object(r["e"])("span",S,[C]))]})),_:1}),Object(r["f"])(s,{onClick:t[5]||(t[5]=function(e){return u.exitB()}),style:{}},{default:w((function(){return[R]})),_:1})]),Object(r["f"])("div",T,[Object(r["f"])("div",M,[Object(r["f"])("h1",L,Object(r["A"])(e.info.title),1),Object(r["f"])("h3",U,Object(r["A"])(e.sequencePlayer.getCurrentIndex())+" / "+Object(r["A"])(e.sequencePlayer.getLastIndex()),1)]),Object(r["f"])("div",{id:"description",innerHTML:e.description},null,8,["innerHTML"])]),Object(r["f"])(o)])})),A=(n("96cf"),n("1da1")),E=(n("d3b7"),n("bc3a")),F=n.n(E),H=n("d5d0"),J=n.n(H),V={baseUrl:function(){return"http://localhost:4000/gallery"},wait:function(e){return new Promise((function(t,n){setTimeout(t,e)}))},getInfo:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function n(){var r,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,F.a.get(t.baseUrl()+"/"+e+"/info.hjson",{transformResponse:[function(e){return e}]});case 2:return r=n.sent,a=r.data,c=J.a.parse(a),n.abrupt("return",c);case 6:case"end":return n.stop()}}),n)})))()}},G=(n("99af"),n("baa5"),n("ac1f"),n("25f0"),n("466d"),n("4d90"),n("bee2")),z=function(){function e(t,n){Object(i["a"])(this,e),this.id=t,this.info=n,this.firstIndex=e.sequenceIndex(this.info.firstImage),this.lastIndex=this.firstIndex+this.info.length,this.index=0}return Object(G["a"])(e,[{key:"goto",value:function(e){return this.index=e,this.index=Math.min(this.index,this.info.length-1),this.index=Math.max(this.index,0),this}},{key:"next",value:function(){return this.goto(this.index+1),this}},{key:"prev",value:function(){return this.goto(this.index-1),this}},{key:"get",value:function(){return e.setSequenceIndex("".concat(V.baseUrl(),"/").concat(this.id)+this.info.firstImage,this.getImageIndex())}},{key:"getAll",value:function(){for(var t=[],n=this.firstIndex;n<this.lastIndex;n++)t.push(e.setSequenceIndex("".concat(V.baseUrl(),"/").concat(this.id)+this.info.firstImage,n));return t}},{key:"getCurrentIndex",value:function(){return this.index+1}},{key:"getLastIndex",value:function(){return this.info.length}},{key:"getImageIndex",value:function(){return this.firstIndex+this.index}}],[{key:"sequencePrefix",value:function(e){var t=e.match(/([0-9]+)/g),n=null===t||void 0===t?void 0:t[t.length-1];if(null!=n){var r=e.lastIndexOf(n);return e.substr(0,r)}return e}},{key:"sequenceSuffix",value:function(e){var t=e.lastIndexOf(".");return e.substr(t,e.length)}},{key:"sequenceIndex",value:function(e){var t=e.match(/[0-9]+/g),n=null===t||void 0===t?void 0:t[t.length-1];return parseFloat((null===n||void 0===n?void 0:n.toString())||"0")}},{key:"sequenceIndexLength",value:function(e){var t=e.match(/[0-9]+/g),n=null===t||void 0===t?void 0:t[t.length-1],r=null===n||void 0===n?void 0:n.length;return r||0}},{key:"setSequenceIndex",value:function(e,t){var n=this.sequencePrefix(e),r=this.sequenceSuffix(e),a=this.sequenceIndexLength(e),c=t.toString().padStart(a,"0");return n+c+r}}]),e}(),D=Object(r["F"])("data-v-3443d55b");Object(r["s"])("data-v-3443d55b");var K={class:"blush-button",onselectstart:"return false"};Object(r["p"])();var N=D((function(e,t,n,a,c,i){return Object(r["o"])(),Object(r["e"])("div",K,[Object(r["w"])(e.$slots,"default")])})),Q=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);Q=Object(o["a"])([Object(l["a"])({props:{label:String}})],Q);var W=Q;n("241c2");W.render=N,W.__scopeId="data-v-3443d55b";var X=W,Y=Object(r["F"])("data-v-1ae98445");Object(r["s"])("data-v-1ae98445");var Z={href:"https://www.patreon.com/gardamuse",style:{display:"block"},class:"patreon-image"};Object(r["p"])();var ee=Y((function(e,t,n,a,c,i){return Object(r["o"])(),Object(r["e"])("a",Z)})),te=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);te=Object(o["a"])([Object(l["a"])({props:{label:String}})],te);var ne=te;n("1deb");ne.render=ee,ne.__scopeId="data-v-1ae98445";var re=ne,ae=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.img="",e.description="",e.info={title:"",firstImage:""},e.sequencePlayer=new z("none",e.info),e.allImages=[],e.paused=!0,e}return n}(l["b"]);ae=Object(o["a"])([Object(l["a"])({components:{BlushButton:X,PatreonButton:re},props:{},methods:{log:function(e){console.log(e)},play:function(){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.wait(200);case 2:if(e.sequencePlayer.getCurrentIndex()!=e.sequencePlayer.getLastIndex()){t.next=12;break}return t.next=5,V.wait(1e3);case 5:if(!e.paused){t.next=7;break}return t.abrupt("return");case 7:return e.firstB(),t.next=10,V.wait(800);case 10:if(!e.paused){t.next=12;break}return t.abrupt("return");case 12:return e.nextB(),t.next=15,V.wait(800);case 15:e.paused||e.play();case 16:case"end":return t.stop()}}),t)})))()},playB:function(){this.paused=!this.paused,this.paused||this.play()},firstB:function(){this.img=this.sequencePlayer.goto(0).get()},prevB:function(){this.img=this.sequencePlayer.prev().get()},nextB:function(){this.img=this.sequencePlayer.next().get()},exitB:function(){this.$router.push("/")}},beforeCreate:function(){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.$route.params.id),e.id=e.$route.params.id,t.next=4,V.getInfo(e.id);case 4:e.info=t.sent,e.description=e.info.description,e.sequencePlayer=new z(e.id,e.info),e.img=e.sequencePlayer.get(),e.allImages=e.sequencePlayer.getAll();case 9:case"end":return t.stop()}}),t)})))()},setup:function(){console.log("SETUP")}})],ae);var ce=ae;n("bdd6");ce.render=$,ce.__scopeId="data-v-df0c1bc0";var ie=ce,ue=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);ue=Object(o["a"])([Object(l["a"])({components:{ImageView:ie},methods:{beforeEnter:function(){this.$root.$emit("scrollBeforeEnter")}}})],ue);var se=ue;n("9cdc");se.render=c;var oe=se,le=n("6c02"),fe=Object(r["F"])("data-v-3247a1da");Object(r["s"])("data-v-3247a1da");var be={id:"gallery",class:"gallery"},de={class:"thumbs"};Object(r["p"])();var pe=fe((function(e,t,n,a,c,i){var u=Object(r["x"])("router-link");return Object(r["o"])(),Object(r["e"])("div",be,[Object(r["f"])("div",de,[(Object(r["o"])(!0),Object(r["e"])(r["a"],null,Object(r["v"])(e.allThumbs,(function(e){return Object(r["o"])(),Object(r["e"])("div",null,[Object(r["f"])(u,{to:"/"+e.id},{default:fe((function(){return[Object(r["f"])("img",{class:"thumb",src:e.thumb},null,8,["src"])]})),_:2},1032,["to"])])})),256))])])})),he=n("b85c"),ve=function(e){Object(u["a"])(n,e);var t=Object(s["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.apply(this,arguments),e.sequences=[],e.allThumbs=[],e}return n}(l["b"]);ve=Object(o["a"])([Object(l["a"])({components:{BlushButton:X},props:{},methods:{getThumb:function(e){return Object(A["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.getInfo(e);case 2:return n=t.sent,t.abrupt("return","".concat(V.baseUrl(),"/").concat(e).concat(n.thumb));case 4:case"end":return t.stop()}}),t)})))()}},beforeCreate:function(){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.a.get(V.baseUrl()+"/gallery-info.json");case 2:n=t.sent,e.sequences=n.data.sequences,r=Object(he["a"])(e.sequences),t.prev=5,r.s();case 7:if((a=r.n()).done){t.next=18;break}return c=a.value,t.t0=e.allThumbs,t.t1=c,t.next=13,e.getThumb(c);case 13:t.t2=t.sent,t.t3={id:t.t1,thumb:t.t2},t.t0.push.call(t.t0,t.t3);case 16:t.next=7;break;case 18:t.next=23;break;case 20:t.prev=20,t.t4=t["catch"](5),r.e(t.t4);case 23:return t.prev=23,r.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[5,20,23,26]])})))()}})],ve);var ge=ve;n("d45a");ge.render=pe,ge.__scopeId="data-v-3247a1da";var Oe=ge,je=[{path:"/",name:"Gallery",component:Oe},{path:"/:id",name:"Image View",component:ie}],me=Object(le["a"])({history:Object(le["b"])("/gallery/"),routes:je}),xe=me;r["d"](oe).use(xe).mount("#app")},d45a:function(e,t,n){"use strict";n("bd65")},ec7e:function(e,t,n){e.exports=n.p+"img/pause.svg"},f668:function(e,t,n){}});
//# sourceMappingURL=app.js.map