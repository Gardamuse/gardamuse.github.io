(function(e){function t(t){for(var r,a,s=t[0],u=t[1],o=t[2],f=0,b=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&b.push(c[a][0]),c[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(b.length)b.shift()();return i.push.apply(i,o||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==c[u]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},c={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/gallery/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var o=0;o<s.length;o++)t(s[o]);var l=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"019c":function(e,t,n){e.exports=n.p+"img/exit.svg"},"19e7":function(e,t,n){e.exports=n.p+"img/image.svg"},"1deb":function(e,t,n){"use strict";n("f668")},"241c2":function(e,t,n){"use strict";n("271c")},"243e":function(e,t,n){},"271c":function(e,t,n){},4184:function(e,t,n){e.exports=n.p+"img/toStart.svg"},5672:function(e,t,n){},5830:function(e,t,n){e.exports=n.p+"img/play.svg"},6978:function(e,t,n){e.exports=n.p+"img/video-overlay.svg"},"75ce":function(e,t,n){"use strict";n("9fb7")},"86b7":function(e,t,n){"use strict";n("5672")},"9cdc":function(e,t,n){"use strict";n("c701")},"9fb7":function(e,t,n){},b2f3:function(e,t,n){e.exports=n.p+"img/next.svg"},c701:function(e,t,n){},ccfe:function(e,t,n){e.exports=n.p+"img/back.svg"},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={id:"sequence-gallery"};function i(e,t,n,i,a,s){var u=Object(r["z"])("router-view");return Object(r["q"])(),Object(r["e"])("div",c,[Object(r["h"])(u,null,{default:Object(r["G"])((function(e){var t=e.Component;return[Object(r["h"])(r["b"],{name:"fade",mode:"out-in"},{default:Object(r["G"])((function(){return[(Object(r["q"])(),Object(r["e"])(Object(r["A"])(t)))]})),_:2},1024)]})),_:1})])}var a=n("d4ec"),s=n("262e"),u=n("2caf"),o=n("9ab4"),l=n("ce1f"),f=(n("a4d3"),n("e01a"),n("4184")),b=n.n(f),h=n("ccfe"),d=n.n(h),v=n("b2f3"),p=n.n(v),O=n("5830"),j=n.n(O),g=n("ec7e"),m=n.n(g),y=n("019c"),x=n.n(y),k=Object(r["H"])("data-v-9f58f438");Object(r["u"])("data-v-9f58f438");var q={class:"image-container"},I={class:"control-panel"},w=Object(r["h"])("img",{src:b.a,alt:"",class:"svg-2"},null,-1),S=Object(r["h"])("img",{src:d.a,alt:"",class:"svg-2"},null,-1),C=Object(r["h"])("img",{src:p.a,alt:"",class:"svg-2"},null,-1),B={key:0},_=Object(r["h"])("img",{src:j.a,alt:"",class:"svg-2"},null,-1),T={key:1},L=Object(r["h"])("img",{src:m.a,alt:"",class:"svg-2"},null,-1),V=Object(r["h"])("img",{src:x.a,alt:"",class:"svg-2"},null,-1),P={class:"info-panel"},R={id:"titlebar"},M={id:"title"},H={id:"index-counter"},U={key:0,class:"side-bar"},z={class:"thumbs"};Object(r["r"])();var $=k((function(e,t,n,c,i,a){var s=this,u=Object(r["z"])("BlushButton"),o=Object(r["z"])("PatreonButton"),l=Object(r["z"])("BlushThumb");return void 0!==this.info?(Object(r["q"])(),Object(r["e"])("div",{key:0,id:this.id,class:"image-view"},[Object(r["h"])("div",null,[Object(r["h"])("div",q,[this.isVideo(e.img)?(Object(r["q"])(),Object(r["e"])("video",{key:0,class:"current-image",controls:"",poster:this.player.getThumb(),src:e.img},null,8,["poster","src"])):(Object(r["q"])(),Object(r["e"])("img",{key:1,class:"current-image",src:e.img},null,8,["src"]))]),Object(r["h"])("div",I,[this.isVideo(e.img)?Object(r["f"])("",!0):(Object(r["q"])(),Object(r["e"])(u,{key:0,onClick:t[1]||(t[1]=function(e){return s.firstB()})},{default:k((function(){return[w]})),_:1})),this.isVideo(e.img)?Object(r["f"])("",!0):(Object(r["q"])(),Object(r["e"])(u,{key:1,onClick:t[2]||(t[2]=function(e){return s.prevB()})},{default:k((function(){return[S]})),_:1})),this.isVideo(e.img)?Object(r["f"])("",!0):(Object(r["q"])(),Object(r["e"])(u,{key:2,onClick:t[3]||(t[3]=function(e){return s.nextB()})},{default:k((function(){return[C]})),_:1})),this.isVideo(e.img)?Object(r["f"])("",!0):(Object(r["q"])(),Object(r["e"])(u,{key:3,onClick:t[4]||(t[4]=function(e){return s.playB()})},{default:k((function(){return[e.paused?(Object(r["q"])(),Object(r["e"])("span",B,[_])):(Object(r["q"])(),Object(r["e"])("span",T,[L]))]})),_:1})),Object(r["h"])(u,{onClick:t[5]||(t[5]=function(e){return s.exitB()})},{default:k((function(){return[V]})),_:1})]),Object(r["h"])("div",P,[Object(r["h"])("div",R,[Object(r["h"])("h1",M,Object(r["C"])(e.info.title),1),Object(r["h"])("h3",H,Object(r["C"])(e.player.getCurrentIndex())+" / "+Object(r["C"])(e.player.getLastIndex()),1)]),Object(r["h"])("div",{id:"description",innerHTML:e.description},null,8,["innerHTML"])]),Object(r["h"])(o)]),this.info.title.length>0?(Object(r["q"])(),Object(r["e"])("div",U,[Object(r["h"])("div",z,[(Object(r["q"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(this.player.allSequences(),(function(e,t){return Object(r["q"])(),Object(r["e"])("div",null,[Object(r["h"])(l,{sequence:e,onClick:function(e){return s.setTrack(t)}},null,8,["sequence","onClick"])])})),256))])])):Object(r["f"])("",!0)])):Object(r["f"])("",!0)})),G=(n("96cf"),n("1da1")),A=(n("d3b7"),n("bc3a")),D=n.n(A),E=n("d5d0"),J=n.n(E),F={baseUrl:function(){return"http://localhost:4000/gallery"},wait:function(e){return new Promise((function(t,n){setTimeout(t,e)}))},getInfo:function(e){var t=this;return Object(G["a"])(regeneratorRuntime.mark((function n(){var r,c,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,D.a.get(t.baseUrl()+"/"+e+"/info.hjson",{transformResponse:[function(e){return e}]});case 2:return r=n.sent,c=r.data,i=J.a.parse(c),n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)})))()},isVideo:function(e){return/\.webm$/i.test(e)}},K=Object(r["H"])("data-v-3443d55b");Object(r["u"])("data-v-3443d55b");var N={class:"blush-button",onselectstart:"return false"};Object(r["r"])();var Q=K((function(e,t,n,c,i,a){return Object(r["q"])(),Object(r["e"])("div",N,[Object(r["y"])(e.$slots,"default")])})),W=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);W=Object(o["a"])([Object(l["a"])({props:{label:String}})],W);var X=W;n("241c2");X.render=Q,X.__scopeId="data-v-3443d55b";var Y=X,Z=Object(r["H"])("data-v-1ae98445");Object(r["u"])("data-v-1ae98445");var ee={href:"https://www.patreon.com/gardamuse",style:{display:"block"},class:"patreon-image"};Object(r["r"])();var te=Z((function(e,t,n,c,i,a){return Object(r["q"])(),Object(r["e"])("a",ee)})),ne=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);ne=Object(o["a"])([Object(l["a"])({props:{label:String}})],ne);var re=ne;n("1deb");re.render=te,re.__scopeId="data-v-1ae98445";var ce=re,ie=(n("99af"),n("b85c")),ae=n("bee2"),se=(n("baa5"),n("ac1f"),n("25f0"),n("466d"),n("4d90"),function(){function e(t,n){Object(a["a"])(this,e),this.id=t,this.info=n,this.firstIndex=e.sequenceIndex(this.info.firstImage),this.lastIndex=this.firstIndex+this.info.length,this.index=0}return Object(ae["a"])(e,[{key:"goto",value:function(e){return this.index=e,this.index=Math.min(this.index,this.info.length-1),this.index=Math.max(this.index,0),this}},{key:"next",value:function(){return this.goto(this.index+1),this}},{key:"prev",value:function(){return this.goto(this.index-1),this}},{key:"get",value:function(){return e.setSequenceIndex("".concat(F.baseUrl(),"/").concat(this.id,"/").concat(this.info.firstImage),this.getImageIndex())}},{key:"getAll",value:function(){for(var t=[],n=this.firstIndex;n<this.lastIndex;n++)t.push(e.setSequenceIndex("".concat(F.baseUrl(),"/").concat(this.id,"/").concat(this.info.firstImage),n));return t}},{key:"getThumb",value:function(){return"".concat(F.baseUrl(),"/").concat(this.id,"/").concat(this.info.thumb)}},{key:"getCurrentIndex",value:function(){return this.index+1}},{key:"getLastIndex",value:function(){return this.info.length}},{key:"isVideo",value:function(){return F.isVideo(this.info.firstImage)}},{key:"getImageIndex",value:function(){return this.firstIndex+this.index}}],[{key:"prefix",value:function(e,t){var n=e.match(t),r=null===n||void 0===n?void 0:n[n.length-1];if(null!=r){var c=e.lastIndexOf(r);return e.substr(0,c)}return e}},{key:"sequencePrefix",value:function(e){var t=this.prefix(e,/[0-9]*\./g);return t}},{key:"sequenceSuffix",value:function(e){var t=e.lastIndexOf(".");return e.substr(t,e.length)}},{key:"sequenceIndex",value:function(e){var t,n=e.match(/([0-9]*)\./g),r=null===n||void 0===n?void 0:n[n.length-1];return"."==r&&(r="0"),parseFloat((null===(t=r)||void 0===t?void 0:t.toString())||"0")}},{key:"sequenceIndexLength",value:function(e){var t=e.match(/([0-9]*)\./g),n=null===t||void 0===t?void 0:t[t.length-1],r=null===n||void 0===n?void 0:n.length;return r?r-1:0}},{key:"setSequenceIndex",value:function(e,t){var n=this.sequencePrefix(e),r=this.sequenceSuffix(e),c=this.sequenceIndexLength(e),i="";return c>0&&(i=t.toString().padStart(c,"0")),n+i+r}}]),e}()),ue=function(){function e(t,n){Object(a["a"])(this,e),this.currentTrackIndex=0,this.sequences=[],this.extra=[],this.id=t,this.info=n;var r,c=0,i=Object(ie["a"])(n.sequences);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=s.title?s.title:n.title,o=s.description?s.description:n.description,l=s.length?s.length:1,f=s.thumb?s.thumb:s.firstImage;0==c&&(f=s.thumb?s.thumb:n.thumb?n.thumb:s.firstImage),this.sequences.push(new se(t,{title:u,description:o,length:l,firstImage:s.firstImage,thumb:f})),c+=1}}catch(b){i.e(b)}finally{i.f()}}return Object(ae["a"])(e,[{key:"allSequences",value:function(){var e=[];return e=e.concat(this.sequences),e=e.concat(this.extra),e}},{key:"gotoTrack",value:function(e){return this.currentTrackIndex=e,this}},{key:"goto",value:function(e){return this.activeSequence().goto(e),this}},{key:"next",value:function(){return this.activeSequence().next(),this}},{key:"prev",value:function(){return this.activeSequence().prev(),this}},{key:"get",value:function(){return this.activeSequence().get()}},{key:"getThumb",value:function(){return this.activeSequence().getThumb()}},{key:"getDescription",value:function(){return this.activeSequence().info.description}},{key:"getCurrentIndex",value:function(){return this.activeSequence().getCurrentIndex()}},{key:"getLastIndex",value:function(){return this.activeSequence().getLastIndex()}},{key:"primaryLength",value:function(){return this.sequences[0].getLastIndex()}},{key:"secondaryLength",value:function(){return this.totalLength()-this.primaryLength()}},{key:"totalLength",value:function(){var e,t=0,n=Object(ie["a"])(this.sequences);try{for(n.s();!(e=n.n()).done;){var r=e.value;t+=r.getLastIndex()}}catch(c){n.e(c)}finally{n.f()}return t}},{key:"activeSequence",value:function(){return this.sequences[this.currentTrackIndex]}}]),e}(),oe=n("6978"),le=n.n(oe),fe=n("19e7"),be=n.n(fe),he=Object(r["H"])("data-v-3d32962c");Object(r["u"])("data-v-3d32962c");var de={class:"thumb-container"},ve={key:1,class:"thumb-overlay",src:le.a},pe={class:"thumb-title"},Oe={class:"thumb-footer"},je={key:0},ge={key:0},me=Object(r["h"])("img",{class:"svg-2",src:be.a},null,-1),ye={key:1};Object(r["r"])();var xe=he((function(e,t,n,c,i,a){return Object(r["q"])(),Object(r["e"])("div",de,[this.isVideo(this.player.getThumb())?Object(r["f"])("",!0):(Object(r["q"])(),Object(r["e"])("img",{key:0,class:"thumb",src:this.player.getThumb()},null,8,["src"])),this.player.isVideo()?(Object(r["q"])(),Object(r["e"])("img",ve)):Object(r["f"])("",!0),Object(r["h"])("div",pe,[Object(r["h"])("h3",null,Object(r["C"])(e.player.info.title),1)]),Object(r["h"])("div",Oe,[this.hasCollection()?(Object(r["q"])(),Object(r["e"])("p",je,[Object(r["g"])(Object(r["C"])(e.collection.primaryLength())+" ",1),e.collection.secondaryLength()>0?(Object(r["q"])(),Object(r["e"])("span",ge,"(+"+Object(r["C"])(e.collection.secondaryLength())+")",1)):Object(r["f"])("",!0),me,e.collection.totalLength()>1?(Object(r["q"])(),Object(r["e"])("span",ye)):Object(r["f"])("",!0)])):Object(r["f"])("",!0)])])})),ke=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);ke=Object(o["a"])([Object(l["a"])({props:{collection:ue,sequence:se},methods:{isVideo:function(e){return F.isVideo(e)},hasCollection:function(){return void 0!=this.collection}},created:function(){void 0!=this.collection?this.player=this.collection.activeSequence():this.player=this.sequence}})],ke);var qe=ke;n("86b7");qe.render=xe,qe.__scopeId="data-v-3d32962c";var Ie=qe,we=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.img="",e.description="",e.info={title:"",sequences:[{firstImage:""}]},e.player=new ue("none",e.info),e.paused=!0,e}return n}(l["b"]);we=Object(o["a"])([Object(l["a"])({components:{BlushButton:Y,PatreonButton:ce,BlushThumb:Ie},props:{},methods:{log:function(e){console.log(e)},play:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.wait(200);case 2:if(e.player.getCurrentIndex()!=e.player.getLastIndex()){t.next=12;break}return t.next=5,F.wait(200);case 5:if(!e.paused){t.next=7;break}return t.abrupt("return");case 7:return e.firstB(),t.next=10,F.wait(800);case 10:if(!e.paused){t.next=12;break}return t.abrupt("return");case 12:return e.nextB(),t.next=15,F.wait(800);case 15:e.paused||e.play();case 16:case"end":return t.stop()}}),t)})))()},playB:function(){this.paused=!this.paused,this.paused||this.play()},firstB:function(){this.img=this.player.goto(0).get()},prevB:function(){this.img=this.player.prev().get()},nextB:function(){this.img=this.player.next().get()},exitB:function(){this.$router.push("/")},showImage:function(e){this.img=e},isVideo:function(e){return console.log(F.isVideo(e),e),F.isVideo(e)},setTrack:function(e){this.img=this.player.gotoTrack(e).get(),this.description=this.player.getDescription()}},beforeCreate:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id=e.$route.params.id,t.next=3,F.getInfo(e.id);case 3:e.info=t.sent,e.description=e.info.description,e.player=new ue(e.id,e.info),e.img=e.player.get();case 7:case"end":return t.stop()}}),t)})))()}})],we);var Se=we;n("75ce");Se.render=$,Se.__scopeId="data-v-9f58f438";var Ce=Se,Be=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return n}(l["b"]);Be=Object(o["a"])([Object(l["a"])({components:{ImageView:Ce},methods:{beforeEnter:function(){this.$root.$emit("scrollBeforeEnter")}}})],Be);var _e=Be;n("9cdc");_e.render=i;var Te=_e,Le=n("6c02"),Ve=Object(r["H"])("data-v-a68f4a78");Object(r["u"])("data-v-a68f4a78");var Pe={id:"gallery",class:"gallery"},Re={class:"thumbs"};Object(r["r"])();var Me=Ve((function(e,t,n,c,i,a){var s=Object(r["z"])("BlushThumb"),u=Object(r["z"])("router-link");return Object(r["q"])(),Object(r["e"])("div",Pe,[Object(r["h"])("div",Re,[(Object(r["q"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(e.allCollections,(function(e){return Object(r["q"])(),Object(r["e"])("div",null,[Object(r["h"])(u,{to:"/"+e.id},{default:Ve((function(){return[Object(r["h"])(s,{collection:e},null,8,["collection"])]})),_:2},1032,["to"])])})),256))])])})),He=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.sequences=[],e.allCollections=[],e}return n}(l["b"]);He=Object(o["a"])([Object(l["a"])({components:{BlushButton:Y,BlushThumb:Ie},props:{},methods:{getThumb:function(e){return Object(G["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,F.getInfo(e);case 2:return n=t.sent,t.abrupt("return","".concat(F.baseUrl(),"/").concat(e).concat(n.thumb));case 4:case"end":return t.stop()}}),t)})))()}},beforeCreate:function(){var e=this;return Object(G["a"])(regeneratorRuntime.mark((function t(){var n,r,c,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,D.a.get(F.baseUrl()+"/gallery-info.json");case 2:n=t.sent,e.sequences=n.data.sequences,r=Object(ie["a"])(e.sequences),t.prev=5,r.s();case 7:if((c=r.n()).done){t.next=15;break}return i=c.value,t.next=11,F.getInfo(i);case 11:a=t.sent,e.allCollections.push(new ue(i,a));case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](5),r.e(t.t0);case 20:return t.prev=20,r.f(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})))()}})],He);var Ue=He;n("db53");Ue.render=Me,Ue.__scopeId="data-v-a68f4a78";var ze=Ue,$e=[{path:"/",name:"Gallery",component:ze},{path:"/:id",name:"Image View",component:Ce}],Ge=Object(Le["a"])({history:Object(Le["b"])("/gallery/"),routes:$e}),Ae=Ge;r["d"](Te).use(Ae).mount("#app")},db53:function(e,t,n){"use strict";n("243e")},ec7e:function(e,t,n){e.exports=n.p+"img/pause.svg"},f668:function(e,t,n){}});
//# sourceMappingURL=app.js.map